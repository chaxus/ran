const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/index-CVkJ_Xlh.Bu3VHk1l.js","assets/chunks/framework.CSxOtPmm.js","assets/chunks/colz-DJZvo_8B.DBiU5Tau.js","assets/chunks/docx-D5t6JtVt.BnsCdyQq.js","assets/chunks/jszip.min--o3_SgQz.CiS0z4ab.js","assets/chunks/commonjs-dynamic-modules-HhqG7SJg.B9lKsKkd.js","assets/chunks/pdf-Cx0VWKFo.DMSCxkPc.js","assets/chunks/index-D6nXg_bb.B6hZHKfx.js"])))=>i.map(i=>d[i]);
import{V as q}from"./framework.CSxOtPmm.js";var hd=Object.defineProperty,ud=(x,h,p)=>h in x?hd(x,h,{enumerable:!0,configurable:!0,writable:!0,value:p}):x[h]=p,be=(x,h,p)=>ud(x,typeof h!="symbol"?h+"":h,p);const Zo=()=>{},pn=()=>{if(typeof window<"u"){const x=navigator.userAgent.toLowerCase();return/ipad|ipod/.test(x)?"ipad":/android/.test(x)?"android":/iphone/.test(x)?"iphone":"pc"}return"pc"},es=typeof window<"u",Et=()=>{if(!es)return!1;const x=window.navigator.userAgent;return!!/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(x)},Q=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];class G{constructor(h,p){be(this,"highOrder"),be(this,"lowOrder"),this.highOrder=h,this.lowOrder=p}}new G(Q[0],3609767458),new G(Q[1],602891725),new G(Q[2],3964484399),new G(Q[3],2173295548),new G(Q[4],4081628472),new G(Q[5],3053834265),new G(Q[6],2937671579),new G(Q[7],3664609560),new G(Q[8],2734883394),new G(Q[9],1164996542),new G(Q[10],1323610764),new G(Q[11],3590304994),new G(Q[12],4068182383),new G(Q[13],991336113),new G(Q[14],633803317),new G(Q[15],3479774868),new G(Q[16],2666613458),new G(Q[17],944711139),new G(Q[18],2341262773),new G(Q[19],2007800933),new G(Q[20],1495990901),new G(Q[21],1856431235),new G(Q[22],3175218132),new G(Q[23],2198950837),new G(Q[24],3999719339),new G(Q[25],766784016),new G(Q[26],2566594879),new G(Q[27],3203337956),new G(Q[28],1034457026),new G(Q[29],2466948901),new G(Q[30],3758326383),new G(Q[31],168717936),new G(Q[32],1188179964),new G(Q[33],1546045734),new G(Q[34],1522805485),new G(Q[35],2643833823),new G(Q[36],2343527390),new G(Q[37],1014477480),new G(Q[38],1206759142),new G(Q[39],344077627),new G(Q[40],1290863460),new G(Q[41],3158454273),new G(Q[42],3505952657),new G(Q[43],106217008),new G(Q[44],3606008344),new G(Q[45],1432725776),new G(Q[46],1467031594),new G(Q[47],851169720),new G(Q[48],3100823752),new G(Q[49],1363258195),new G(Q[50],3750685593),new G(Q[51],3785050280),new G(Q[52],3318307427),new G(Q[53],3812723403),new G(Q[54],2003034995),new G(Q[55],3602036899),new G(Q[56],1575990012),new G(Q[57],1125592928),new G(Q[58],2716904306),new G(Q[59],442776044),new G(Q[60],593698344),new G(Q[61],3733110249),new G(Q[62],2999351573),new G(Q[63],3815920427),new G(3391569614,3928383900),new G(3515267271,566280711),new G(3940187606,3454069534),new G(4118630271,4000239992),new G(116418474,1914138554),new G(174292421,2731055270),new G(289380356,3203993006),new G(460393269,320620315),new G(685471733,587496836),new G(852142971,1086792851),new G(1017036298,365543100),new G(1126000580,2618297676),new G(1288033470,3409855158),new G(1501505948,4234509866),new G(1607167915,987167468),new G(1816402316,1246189591);new G(0,1),new G(0,32898),new G(2147483648,32906),new G(2147483648,2147516416),new G(0,32907),new G(0,2147483649),new G(2147483648,2147516545),new G(2147483648,32777),new G(0,138),new G(0,136),new G(0,2147516425),new G(0,2147483658),new G(0,2147516555),new G(2147483648,139),new G(2147483648,32905),new G(2147483648,32771),new G(2147483648,32770),new G(2147483648,128),new G(0,32778),new G(2147483648,2147483658),new G(2147483648,2147516545),new G(2147483648,32896),new G(0,2147483649),new G(2147483648,2147516424);function yt(x){return x<10?`0${x}`:x}function fd(x){let h=new Date;return x&&(h=new Date(x)),h.format=(p="YYYY-MM-DD HH:mm:ss")=>{const f=h.getFullYear(),w=yt(h.getMonth()+1),T=yt(h.getDate()),_=yt(h.getHours()),L=yt(h.getMinutes()),B=yt(h.getSeconds());return p.replace(/Y+/gi,`${f}`).replace(/M+/g,`${w}`).replace(/D+/gi,`${T}`).replace(/H+/gi,`${_}`).replace(/m+/g,`${L}`).replace(/S+/gi,`${B}`)},h}const Ar=x=>{if(x===0)return"00:00";if(!x)return"";const h=Math.trunc(x/3600),p=Math.trunc(x%3600/60),f=yt(Math.trunc(x-h*3600-p*60));return h===0?`${yt(p)}:${f}`:`${yt(h)}:${yt(p)}:${f}`},tr=x=>{const h=x.backingStorePixelRatio||x.webkitBackingStorePixelRatio||x.mozBackingStorePixelRatio||x.msBackingStorePixelRatio||x.oBackingStorePixelRatio||1;return(es&&window.devicePixelRatio||1)/h},Pe=(x,h)=>{if(typeof document>"u")return;const p=x.classList;p.contains(h)||p.add(h)},ze=(x,h)=>{if(typeof document>"u")return;const p=x.classList;p.contains(h)&&p.remove(h)},rt=x=>{if(typeof document>"u")return;const h=document.createDocumentFragment();return x.forEach(p=>h.appendChild(p)),h},pd="http://www.w3.org/2000/svg",gd=["svg","path","g","circle","rect","line","polyline","polygon","ellipse","text","tspan","textPath","defs","marker","radialGradient","stop","linearGradient","clipPath","mask","pattern","image","use","symbol","foreignObject","feGaussianBlur","feColorMatrix"];class _n{constructor(h,p){be(this,"listener"),be(this,"element"),be(this,"create",(f,w)=>gd.includes(f)?document.createElementNS(pd,f,w):document.createElement(f,w)),be(this,"setAttribute",(f,w)=>(this.element.setAttribute(f,w),this)),be(this,"removeAttribute",f=>(this.element.removeAttribute(f),this)),be(this,"append",f=>(this.element.appendChild(f),this)),be(this,"remove",f=>(this.element.removeChild(f),this)),be(this,"setTextContent",f=>(this.element.textContent=f,this)),be(this,"setStyle",(f,w)=>(this.element.style.setProperty(f,w),this)),be(this,"addElementByType",(f,w)=>{f instanceof _n&&w.appendChild(f.element),f instanceof HTMLElement&&w.appendChild(f)}),be(this,"addChild",f=>{if(Array.isArray(f)){const w=document.createDocumentFragment();f.forEach(T=>{this.addElementByType(T,w)}),this.element.appendChild(w)}else this.addElementByType(f,this.element);return this}),be(this,"listen",(f,w,T)=>{let _=this.listener.get(f);_||(_=new Map,this.listener.set(f,_));const L=_.get(w.name);return L===w&&console.warn(`${L.name} listener has been added to ${f} event, please remove it first.`),this.element.addEventListener(f,w,T),_.set(w.name,w),this}),be(this,"clearListener",(f,w,T)=>{this.element.removeEventListener(f,w,T);const _=this.listener.get(f);return _?_.delete(w.name):console.warn(`No ${f} event listener has been added.`),this}),be(this,"clearAllListener",()=>{for(const[f,w]of this.listener){for(const[T,_]of w)this.element.removeEventListener(f,_),w.delete(T);this.listener.delete(f)}return this}),this.element=this.create(h,p),this.listener=new Map}}const V=(x,h)=>new _n(x,h),ai=()=>{let x=0,h=null;return function(p,f=300){return function(...w){const T=Date.now();T-x>=f?(h!=null&&(clearTimeout(h),h=null),x=T,p.apply(this,w)):h==null&&(h=window.setTimeout(()=>{x=Date.now(),p.apply(this,w),h=null},f-(T-x)))}}},To=new Map([[100,"Continue"],[101,"Switching Protocols"],[102,"Processing"],[103,"Early Hints"],[200,"OK"],[201,"Created"],[202,"Accepted"],[203,"Non-Authoritative Information"],[204,"No Content"],[205,"Reset Content"],[206,"Partial Content"],[207,"Multi-Status"],[208,"Already Reported"],[226,"IM Used"],[300,"Multiple Choices"],[301,"Moved Permanently"],[302,"Found"],[303,"See Other"],[304,"Not Modified"],[305,"Use Proxy"],[307,"Temporary Redirect"],[308,"Permanent Redirect"],[400,"Bad Request"],[401,"Unauthorized"],[402,"Payment Required"],[403,"Forbidden"],[404,"Not Found"],[405,"Method Not Allowed"],[406,"Not Acceptable"],[407,"Proxy Authentication Required"],[408,"Request Timeout"],[409,"Conflict"],[410,"Gone"],[411,"Length Required"],[412,"Precondition Failed"],[413,"Payload Too Large"],[414,"URI Too Long"],[415,"Unsupported Media Type"],[416,"Range Not Satisfiable"],[417,"Expectation Failed"],[418,"I'm a Teapot"],[421,"Misdirected Request"],[422,"Unprocessable Entity"],[423,"Locked"],[424,"Failed Dependency"],[425,"Too Early"],[426,"Upgrade Required"],[428,"Precondition Required"],[429,"Too Many Requests"],[431,"Request Header Fields Too Large"],[451,"Unavailable For Legal Reasons"],[500,"Internal Server Error"],[501,"Not Implemented"],[502,"Bad Gateway"],[503,"Service Unavailable"],[504,"Gateway Timeout"],[505,"HTTP Version Not Supported"],[506,"Variant Also Negotiates"],[507,"Insufficient Storage"],[508,"Loop Detected"],[509,"Bandwidth Limit Exceeded"],[510,"Not Extended"],[511,"Network Authentication Required"]]);md(To),vd(To);function md(x){const h=new Map;for(const[p,f]of x)h.set(f.toLowerCase(),p);return h}function vd(x){const h=[];for(const[p,f]of x)h.push(p);return h}const ei=(x="")=>{if(x.length===0)return 0;if(x.endsWith("%")){const h=Number(x.replace("%",""));return h>1?h/100:h}else return Number(x)},wt=(x,h=0,p=1)=>Math.min(p,Math.max(h,x)),ht=class{constructor(){be(this,"getDecimalLength",h=>{const[p,f]=h.toString().split(".");return f?f.length:0}),be(this,"amend",(h,p=15)=>parseFloat(Number(h).toPrecision(p))),be(this,"power",(h,p)=>Math.pow(10,Math.max(this.getDecimalLength(h),this.getDecimalLength(p))))}};be(ht,"handleMethod",(x,h)=>{const p=new ht,{power:f,amend:w}=p,T=f(x,h),_=w(x*T),L=w(h*T);return B=>{switch(B){case"+":return(_+L)/T;case"-":return(_-L)/T;case"*":return _*L/(T*T);case"/":return _/L}}});be(ht,"add",(x,h)=>ht.handleMethod(x,h)("+"));be(ht,"divide",(x,h)=>ht.handleMethod(x,h)("/"));be(ht,"multiply",(x,h)=>ht.handleMethod(x,h)("*"));be(ht,"subtract",(x,h)=>ht.handleMethod(x,h)("-"));const _o="NEW_LISTENER";class ts{constructor(){be(this,"_events"),be(this,"tap",(h,p)=>{this._events[h]&&h!==Symbol.for(_o)&&this.call(Symbol.for(_o),h);const f=this._events[h]||[];return typeof p=="function"?f.push({name:h,callback:p}):f.push(p),this._events[h]=f,this}),be(this,"call",(h,...p)=>{(this._events[h]||[]).forEach(w=>{const{callback:T}=w;T(...p)})}),be(this,"callSync",async(h,...p)=>{const f=this._events[h]||[];for(const w of f){const{callback:T}=w;await T(...p)}}),be(this,"once",(h,p)=>{let f;if(typeof p=="function")f={name:h,callback:(...w)=>{p(...w),this.off(h,f)},initialCallback:p};else{const{callback:w}=p;f={name:h,callback:(...T)=>{w(...T),this.off(h,f)},initialCallback:w}}return this.tap(h,f),this}),be(this,"off",(h,p)=>{const w=(this._events[h]||[]).filter(T=>{if(typeof p=="function")return T.callback!==p&&T.initialCallback!==p;{const{callback:_}=p;return T.callback!==_&&T.initialCallback!==_}});return this._events[h]=w,this}),this._events={}}}const bd={success:!0,_identification:!0,data:`<svg t="1738854981595" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3846" width="200" height="200"><path d="M128 170.666667h768v85.333333H128V170.666667z m0 298.666666h768v85.333334H128v-85.333334z m0 298.666667h768v85.333333H128v-85.333333z" p-id="3847" fill="currentColor"></path></svg>
`},yd=Object.freeze(Object.defineProperty({__proto__:null,default:bd},Symbol.toStringTag,{value:"Module"})),wd={success:!0,_identification:!0,data:`<svg t="1738503384129" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="19081" width="200" height="200"><path d="M469.333333 554.666667v384h85.333334V554.666667h384v-85.333334H554.666667V85.333333h-85.333334v384H85.333333v85.333334h384z" p-id="19082"></path></svg>
`},Ed=Object.freeze(Object.defineProperty({__proto__:null,default:wd},Symbol.toStringTag,{value:"Module"})),ri=Object.freeze(Object.defineProperty({__proto__:null,S:ts,a:Pe,b:pn,c:V,d:rt,e:wt,f:ai,g:tr,h:fd,i:Et,j:Ed,m:yd,n:Zo,p:ei,r:ze,t:Ar},Symbol.toStringTag,{value:"Module"}));var Ad=Object.defineProperty,xd=(x,h,p)=>h in x?Ad(x,h,{enumerable:!0,configurable:!0,writable:!0,value:p}):x[h]=p,kd=(x,h,p)=>xd(x,h+"",p);const it=[!1,"false",null,void 0],Ce=x=>{const h=x.hasAttribute("disabled"),p=x.getAttribute("disabled");return!!(h&&!it.includes(p))},Td=(x,h)=>{const p=x.querySelectorAll(`.${h}`);p.length>0&&p.forEach(f=>f.classList.remove(h))},zu=x=>new Promise((h,p)=>{const f=document.createElement("script");f.src=x,f.onload=function(){h({success:!0})},f.onerror=function(w){p({success:!1,error:w})},document.body.append(f)});function Oe(x=""){return class{constructor(p=x){kd(this,"message"),this.message=p}}}const Be=()=>typeof document<"u"?HTMLElement:null,er=(x,h)=>{const p={value:x,subscribers:new Set,comparator:h==null?void 0:h.equals},{subscriber:f}=h||{};f&&Array.isArray(f)&&f.forEach(L=>{typeof L=="function"&&!p.subscribers.has(L)&&p.subscribers.add(L)});const w=()=>p.value,T=L=>{p.value!==L&&(p.value=L,p.subscribers.forEach(B=>B(L)))};return[w,L=>{const{comparator:B}=p;if(B instanceof Function)return!B(p.value,L)&&T(L);B===void 0?p.value!==L&&T(L):!B&&T(L)}]};var _d=Object.defineProperty,Sd=(x,h,p)=>h in x?_d(x,h,{enumerable:!0,configurable:!0,writable:!0,value:p}):x[h]=p,tt=(x,h,p)=>Sd(x,typeof h!="symbol"?h+"":h,p);const Cd='.remove-wap-active-focus{outline:0;-webkit-tap-highlight-color:transparent}.remove-wap-active-focus:active,.remove-wap-active-focus:focus{outline:0;-webkit-tap-highlight-color:transparent}:host{box-sizing:var(--ran-btn-box-sizing, border-box);height:var(--ran-btn-height, 100%);width:var(--ran-btn-width, 100%);position:var(--ran-btn-position, relative);display:var(--ran-btn-display, block);background-image:var(--ran-btn-background-image, none);box-shadow:var(--ran-btn-box-shadow, 0 2px #00000004);cursor:var(--ran-btn-cursor, pointer);-webkit-user-select:var(--ran-btn-user-select, none);user-select:var(--ran-btn-user-select, none);touch-action:var(--ran-btn-touch-action, manipulation);overflow:var(--ran-btn-overflow, hidden);pointer-events:var(--ran-btn-pointer-events, auto)}:host .ran-btn{box-sizing:var(--ran-btn-contain-box-sizing, border-box);height:var(--ran-btn-contain-height, 100%);width:var(--ran-btn-contain-width, 100%);position:var(--ran-btn-contain-position, relative);display:var(--ran-btn-contain-display, block);background-image:var(--ran-btn-contain-background-image, none);cursor:var(--ran-btn-contain-cursor, pointer);transition:var(--ran-btn-contain-transition, all .3s cubic-bezier(.645, .045, .355, 1));-webkit-user-select:var(--ran-btn-contain-user-select, none);user-select:var(--ran-btn-contain-user-select, none);touch-action:var(--ran-btn-contain-touch-action, manipulation);background:var(--ran-btn-contain-background, #fff)}:host,:host(:active),:host(:focus){outline:0;-webkit-tap-highlight-color:transparent}:host .ran-btn,:host(:active) .ran-btn,:host(:focus) .ran-btn{outline:var(--ran-btn-contain-outline, 0)}:host([type="primary"]) .ran-btn-content{background-color:var(--ran-btn-content-background-color, #1890ff);border-color:var(--ran-btn-content-border-color, #1890ff);color:var(--ran-btn-content-color, #fff)}:host([type="primary"]:not([disabled])) .ran-btn:after{background-image:var(--ran-btn-after-background-image, radial-gradient(circle, #fff 10%, transparent 10.01%))}@media (min-width: 1024px){:host(:not([disabled]):hover) .ran-btn-content{border-color:var(--ran-btn-content-hover-border-color, #1890ff);color:var(--ran-btn-content-hover-color, #1890ff)}:host([type="primary"]:not([disabled]):hover) .ran-btn-content{background-color:var(--ran-btn-content-hover-background-color, #40a9ff);color:var(--ran-btn-content-hover-color, #fff)}:host([type="warning"]:not([disabled]):hover) .ran-btn-content{border-color:var(--ran-btn-content-warning-border-color, #ff4d4f);background-color:var(--ran-btn-content-warning-background-color, #ff4d4f);color:var(--ran-btn-content-warning-color, #fff)}}:host([type="warning"]) .ran-btn-content{border-color:var(--ran-btn-content-warning-border-color, #ff4d4f);background-color:var(--ran-btn-content-warning-background-color, #ff4d4f);color:var(--ran-btn-content-warning-color, #fff)}:host([type="warning"]:not([disabled])) .ran-btn:after{background-image:var(--ran-btn-after-background-image, radial-gradient(circle, #fff 10%, transparent 10.01%))}:host([type="text"]) .ran-btn-content{border:var(--ran-btn-content-text-border, none)}:host([disabled]){cursor:var(--ran-btn-disabled-cursor, not-allowed);pointer-events:var(--ran-btn-disabled-pointer-events, all);opacity:var(--ran-btn-disabled-opacity, .6)}:host([disabled]) .ran-btn{cursor:var(--ran-btn-disabled-container-cursor, not-allowed);pointer-events:var(--ran-btn-disabled-container-pointer-events, all);opacity:var(--ran-btn-disabled-container-opacity, .6)}:host(:not([disabled]):active) .ran-btn:after{transform:var(--ran-btn-after-transform, translate(-50%, -50%) scale(0));opacity:var(--ran-btn-after-opacity, .3);transition:var(--ran-btn-after-transition, 0s)}@media (min-width: 1024px){:host(:not([disabled],[effect])) .ran-btn:after{content:"";display:block;position:absolute;width:100%;height:100%;left:var(--ran-x, 0);top:var(--ran-y, 0);pointer-events:none;background-image:radial-gradient(circle,#1890ff 10%,transparent 10.01%);background-repeat:no-repeat;background-position:50%;transform:translate(-50%,-50%) scale(10);opacity:0;transition:transform .3s,opacity .8s}}:host .slot{display:var(--ran-btn-slot-display, block)}.ran-btn-content{display:var(--ran-btn-content-display, flex);justify-content:var(--ran-btn-content-display, space-between);align-items:var(--ran-btn-content-align-items, center);padding:var(--ran-btn-content-padding, 4px 15px);border:var(--ran-btn-content-border, 1px solid transparent);border-radius:var(--ran-btn-content-border-radius, 2px);border-color:var(--ran-btn-content-border-color, #d9d9d9);color:var(--ran-btn-content-color, #000000d9);line-height:var(--ran-btn-content-line-height, 22px);font-size:var(--ran-btn-content-font-size, 14px);font-weight:var(--ran-btn-content-font-weight, 400);white-space:var(--ran-btn-content-white-space, nowrap);text-align:var(--ran-btn-content-text-align, center);box-sizing:var(--ran-btn-content-box-sizing, border-box);height:var(--ran-btn-content-height, 100%);width:var(--ran-btn-content-width, 100%)}.ran-btn-content .icon{margin-right:var(--ran-btn-icon-margin-right, 2px)}';class gn extends Be(){constructor(){super(),tt(this,"_btn"),tt(this,"_btnContent"),tt(this,"_iconElement"),tt(this,"_slot"),tt(this,"_shadowDom"),tt(this,"debounceTimeId"),tt(this,"setIcon",()=>{if(this.icon){const{width:f,height:w}=this._slot.getBoundingClientRect(),T=Math.min(f,w);this._iconElement?this._iconElement.setAttribute("name",this.icon):(this._iconElement=document.createElement("r-icon"),this._iconElement.setAttribute("name",this.icon),this._iconElement.setAttribute("color","currentColor"),this._iconElement.setAttribute("class","icon"),this._slot.insertAdjacentElement("beforebegin",this._iconElement)),this.iconSize?this._iconElement.setAttribute("size",this.iconSize):this._iconElement.setAttribute("size",`${T-5}`)}}),tt(this,"mousedown",f=>{if(pn()==="pc"&&(!this.disabled||this.disabled==="false")){this.debounceMouseEvent();const{left:w,top:T}=this.getBoundingClientRect();this._btn.style.setProperty("--ran-x",f.clientX-w+"px"),this._btn.style.setProperty("--ran-y",f.clientY-T+"px")}}),tt(this,"mouseup",()=>{pn()==="pc"&&(this.debounceTimeId||(this.debounceTimeId=setTimeout(()=>{this._btn.style.removeProperty("--ran-x"),this._btn.style.removeProperty("--ran-y"),this.debounceMouseEvent()},600)))}),tt(this,"debounceMouseEvent",()=>{clearTimeout(this.debounceTimeId),this.debounceTimeId=void 0}),tt(this,"handlerExternalCss",()=>{if(this.sheet)try{const f=new CSSStyleSheet;f.insertRule(this.sheet),this._shadowDom.adoptedStyleSheets=[f]}catch(f){console.error(`Failed to parse the rule in CSSStyleSheet: ${this.sheet}, error: ${f}`)}}),this._slot=document.createElement("slot"),this._btnContent=document.createElement("div"),this._btn=document.createElement("div"),this._btn.setAttribute("class","ran-btn"),this._btn.setAttribute("part","ran-btn"),this._btnContent.setAttribute("class","ran-btn-content"),this._btnContent.setAttribute("part","ran-btn-content"),this._btnContent.appendChild(this._slot),this._slot.setAttribute("class","slot");const h=this.attachShadow({mode:"closed"}),p=document.createElement("style");p.textContent=Cd,h.appendChild(p),this._shadowDom=h,this._btn.appendChild(this._btnContent),h.appendChild(this._btn)}static get observedAttributes(){return["disabled","icon","effect","iconSize","sheet"]}get sheet(){return this.getAttribute("sheet")||""}set sheet(h){this.setAttribute("sheet",h||"")}get disabled(){return Ce(this)}set disabled(h){!h||h==="false"?(this.removeAttribute("disabled"),this.removeAttribute("aria-disabled")):(this.setAttribute("disabled",""),this.setAttribute("aria-disabled","true"))}get iconSize(){return this.getAttribute("iconSize")||""}set iconSize(h){!h||h==="false"?this.removeAttribute("iconSize"):(this.setAttribute("iconSize",h),this.setIcon())}get icon(){return this.getAttribute("icon")||""}set icon(h){!h||h==="false"?this.removeAttribute("icon"):(this.setAttribute("icon",h),this.setIcon())}get effect(){return this.getAttribute("effect")||""}set effect(h){it.includes(h)||!h?this.removeAttribute("effect"):this.setAttribute("effect",h)}connectedCallback(){this._btn.addEventListener("mousedown",this.mousedown),this._btn.addEventListener("mouseup",this.mouseup),this.handlerExternalCss(),this.setIcon(),this.setAttribute("role","button"),this.setAttribute("tabindex","0")}disconnectCallback(){this._btn.removeEventListener("mousedown",this.mousedown),this._btn.removeEventListener("mouseup",this.mouseup)}attributeChangedCallback(h,p,f){h==="disabled"&&this._btnContent&&(!f||f==="false"?this._btnContent.setAttribute("disabled",""):this._btnContent.removeAttribute("disabled")),h==="icon"&&this._btnContent&&p!==f&&this.setIcon(),h==="iconSize"&&this._btnContent&&p!==f&&this._btnContent.setAttribute("iconSize",f),h==="sheet"&&this._shadowDom&&p!==f&&this.handlerExternalCss()}}function Ld(){return typeof document<"u"&&!customElements.get("r-button")?(customElements.define("r-button",gn),gn):Oe("document is undefined or r-button is exist")}const Dd=Ld(),Rd=Object.freeze(Object.defineProperty({__proto__:null,Button:gn,default:Dd},Symbol.toStringTag,{value:"Module"})),Sn=(x,h="text/xml")=>{if(window.DOMParser)return new window.DOMParser().parseFromString(x,h).documentElement;if(typeof window.ActiveXObject<"u"){const p=new window.ActiveXObject("Microsoft.XMLDOM");return p.async="false",p.loadXML(x),p}},Cn=(x,h,p)=>{const f=x[h];return f?typeof f=="function"?f():Promise.resolve(f):new Promise((w,T)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(T.bind(null,new Error("Unknown variable dynamic import: "+h+(h.split("/").length!==p?". Note that variables only represent file names one level deep.":""))))})},Id={success:!0,_identification:!0,data:`<svg>
      <filter id="liquid">
        <feGaussianBlur in="SourceGraphic" stdDeviation="10" result="blur"></feGaussianBlur>
        <feColorMatrix in="blur" mode="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -7" result="liquid"></feColorMatrix>
      </filter>
    </svg>
`},Pd=Object.freeze(Object.defineProperty({__proto__:null,default:Id},Symbol.toStringTag,{value:"Module"})),Od={success:!0,_identification:!0,data:`<svg t="1738503407752" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="19504" width="200" height="200"><path d="M298.666667 409.002667l213.333333 213.333333 213.333333-213.333333 60.330667 60.330666L512 742.997333 238.336 469.333333l60.330667-60.330666z" p-id="19505"></path></svg>
`},Md=Object.freeze(Object.defineProperty({__proto__:null,default:Od},Symbol.toStringTag,{value:"Module"})),ii=Object.freeze(Object.defineProperty({__proto__:null,_:Cn,d:Pd,m:Md,s:Sn},Symbol.toStringTag,{value:"Module"}));var Fd=Object.defineProperty,Bd=(x,h,p)=>h in x?Fd(x,h,{enumerable:!0,configurable:!0,writable:!0,value:p}):x[h]=p,Tt=(x,h,p)=>Bd(x,typeof h!="symbol"?h+"":h,p);const Nd=".remove-wap-active-focus{outline:0;-webkit-tap-highlight-color:transparent}.remove-wap-active-focus:active,.remove-wap-active-focus:focus{outline:0;-webkit-tap-highlight-color:transparent}:host{display:var(--ran-icon-host-display, inline-flex)}:host([spin]){animation-name:var(--ran-icon-host-spin-animation-name, rotate);animation-duration:var(--ran-icon-host-spin-animation-name, 1.4s);animation-timing-function:linear;animation-iteration-count:var(--ran-icon-host-spin-animation-name, infinite)}.ran-icon{display:var(--ran-icon-display, flex);align-items:var(--ran-icon-align-items, center);justify-content:var(--ran-icon-justify-content, center);color:var(--ran-icon-color, inherit);font-size:var(--ran-icon-font-size, 50px);margin:var(--ran-icon-margin, 0)}@keyframes rotate{to{transform:var(--ran-icon-keyframes-to-transform, rotate(360deg))}}",So="http://www.w3.org/1999/xlink",Ud="xlink:href";function Gd(){if(typeof window<"u"&&!customElements.get("r-icon")){class x extends HTMLElement{constructor(){super(),Tt(this,"_icon"),Tt(this,"_div"),Tt(this,"setSize",()=>{this._icon&&(this.size?(this._icon.setAttribute("width",this.size),this._icon.setAttribute("height",this.size)):(this._icon.setAttribute("width","1em"),this._icon.setAttribute("height","1em")))}),Tt(this,"loadLocal",()=>new Promise((w,T)=>{Cn(Object.assign({"../../assets/icons/add-user.svg":()=>q(()=>import("./add-user-BN1JlY7e.D6YNNzf8.js"),[]),"../../assets/icons/arrow-down.svg":()=>q(()=>import("./info-circle-fill-DjI8gXS3.DcQ9QdGJ.js"),[]).then(_=>_.a),"../../assets/icons/book.svg":()=>q(()=>import("./book-nTEFXU2x.DPEdiL1I.js"),[]),"../../assets/icons/check-circle-fill.svg":()=>q(()=>import("./check-circle-fill-B_pd8ZSs.Dxgzakn4.js"),[]),"../../assets/icons/check-circle.svg":()=>q(()=>import("./check-circle-szyAJiap.CM_vbBX5.js"),[]),"../../assets/icons/close-circle-fill.svg":()=>q(()=>import("./close-circle-fill-jSqPPw9i.BsLXh5-a.js"),[]),"../../assets/icons/close-circle.svg":()=>q(()=>import("./close-circle-CwmuN2C6.D612j4KD.js"),[]),"../../assets/icons/close.svg":()=>q(()=>import("./close-CFnkhudp.IMqD2L1-.js"),[]),"../../assets/icons/drop.svg":()=>q(()=>Promise.resolve().then(()=>ii),void 0).then(_=>_.d),"../../assets/icons/eye-close.svg":()=>q(()=>import("./eye-close-BVr3NJtg.DsdsDDgX.js"),[]),"../../assets/icons/eye.svg":()=>q(()=>import("./eye-D_mEt17f.DJFa_ttF.js"),[]),"../../assets/icons/home.svg":()=>q(()=>import("./home-BUQ4USMk.BqTharGj.js"),[]),"../../assets/icons/info-circle-fill.svg":()=>q(()=>import("./info-circle-fill-DjI8gXS3.DcQ9QdGJ.js"),[]).then(_=>_.i),"../../assets/icons/info-circle.svg":()=>q(()=>import("./info-circle-COnL5bTJ.B9YJorcw.js"),[]),"../../assets/icons/loading-scene.svg":()=>q(()=>import("./loading-scene-BMc2wqKm.Di19NrRU.js"),[]),"../../assets/icons/loading.svg":()=>q(()=>import("./loading-Dcc5RApI.D3l74EUI.js"),[]),"../../assets/icons/lock.svg":()=>q(()=>import("./lock-Cr7BnmWN.0WfYXC2j.js"),[]),"../../assets/icons/menu.svg":()=>q(()=>Promise.resolve().then(()=>ri),void 0).then(_=>_.m),"../../assets/icons/message.svg":()=>q(()=>import("./message-D36_Zo2l.CR8K3LhI.js"),[]),"../../assets/icons/more.svg":()=>q(()=>Promise.resolve().then(()=>ii),void 0).then(_=>_.m),"../../assets/icons/plus.svg":()=>q(()=>Promise.resolve().then(()=>ri),void 0).then(_=>_.j),"../../assets/icons/power-off.svg":()=>q(()=>import("./power-off-lQRbiBak.r13EH4bb.js"),[]),"../../assets/icons/preview.svg":()=>q(()=>import("./preview-CJbz9GjO.C8N16-9H.js"),[]),"../../assets/icons/search.svg":()=>q(()=>import("./search-BWdfjyP8.CdFUVZ0R.js"),[]),"../../assets/icons/setting.svg":()=>q(()=>import("./setting-DemlgzVC.DkD4YPwp.js"),[]),"../../assets/icons/sort.svg":()=>q(()=>import("./sort-DWqiUONr.C56fs5Gu.js"),[]),"../../assets/icons/sprite.svg":()=>q(()=>import("./sprite-CH2zLtZy.Djo3sTkk.js"),[]),"../../assets/icons/team.svg":()=>q(()=>import("./team-tl4NJXPC.D7881a1v.js"),[]),"../../assets/icons/unlock.svg":()=>q(()=>import("./unlock-CeU74z9n.58atcEuH.js"),[]),"../../assets/icons/user.svg":()=>q(()=>import("./user-B-eVXwuk.DyoYYAjs.js"),[]),"../../assets/icons/warning-circle-fill.svg":()=>q(()=>import("./warning-circle-fill-lODUKz0i.7RyGfSeR.js"),[]),"../../assets/icons/warning-circle.svg":()=>q(()=>import("./warning-circle-DDUgEDIv.1BX6MOiy.js"),[])}),`../../assets/icons/${this.name}.svg`,5).then(_=>{if(_&&_.default&&_.default._identification){const{data:L}=_.default;this._icon&&this._div.removeChild(this._icon),this._icon=Sn(L,"image/svg+xml"),this._icon&&(this._div.appendChild(this._icon),this.setSize(),this.setColor(),w())}else this.loadNs(),T(`
 couldn't be loaded by r-icon, message: ${this.name} icon is undefined`)}).catch(_=>{this.loadNs()})})),Tt(this,"loadNs",()=>{this._icon&&this._div&&this._div.removeChild(this._icon),this._icon=document.createElement("svg"),this._icon.setAttribute("class","icon"),this._icon.setAttribute("viewBox","0 0 1024 1024"),this._icon.setAttribute("width","100"),this._icon.setAttribute("height","100");const w=document.createElementNS(So,"use");w.setAttributeNS(So,Ud,`../../assets/iconfont/icon.svg#icon-${this.name}`),this._icon.appendChild(w),this._div.appendChild(this._icon)}),Tt(this,"setIcon",async()=>{this.name&&this.loadLocal()}),Tt(this,"setColor",()=>{this._icon&&(this.color?this._icon.setAttribute("fill",this.color):this._icon.setAttribute("fill","currentColor"))}),Tt(this,"setSpin",()=>{this.spin&&this.style.setProperty("animation-duration",`${this.spin}s`)}),this._div=document.createElement("div"),this._div.setAttribute("class","ran-icon"),this._div.setAttribute("part","ran-icon");const p=this.attachShadow({mode:"closed"}),f=document.createElement("style");f.textContent=Nd,p.appendChild(f),p.appendChild(this._div)}static get observedAttributes(){return["name","size","color","spin"]}get name(){return this.getAttribute("name")}set name(p){p&&this.setAttribute("name",p)}get size(){return this.getAttribute("size")}set size(p){p&&this.setAttribute("size",p)}get color(){return this.getAttribute("color")}set color(p){p&&this.setAttribute("color",p)}get spin(){return this.getAttribute("spin")}set spin(p){p!=null&&this.setAttribute("spin",p)}connectedCallback(){this.setIcon()}attributeChangedCallback(p,f,w){w!==f&&(p==="name"&&this.setIcon(),p==="size"&&this.setSize(),p==="color"&&this.setColor(),p==="spin"&&this.setSpin())}}customElements.define("r-icon",x)}}const Hd=Gd(),Kd=Object.freeze(Object.defineProperty({__proto__:null,default:Hd},Symbol.toStringTag,{value:"Module"}));var Vd=Object.defineProperty,zd=(x,h,p)=>h in x?Vd(x,h,{enumerable:!0,configurable:!0,writable:!0,value:p}):x[h]=p,Co=(x,h,p)=>zd(x,typeof h!="symbol"?h+"":h,p);const Yd=".remove-wap-active-focus{outline:0;-webkit-tap-highlight-color:transparent}.remove-wap-active-focus:active,.remove-wap-active-focus:focus{outline:0;-webkit-tap-highlight-color:transparent}",jd=`
    data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3jOD1boQVTPQrgSkktTgbSf4A4LbmgqISBgTEFyFYuLykAsTuAbJEioKOA7DkgdjqEvQHEToKwj4DVhAQ5A9k3gGyB5IxEoBmML4BsnSQk8XQkNtReEOBxcfXxUQg1Mjc0dyHgXNJBSWpFCYh2zi+oLMpMzyhRcASGUqqCZ16yno6CkYGRAQMDKMwhqj/fAIcloxgHQqxAjIHBEugw5sUIsSQpBobtQPdLciLEVJYzMPBHMDBsayhILEqEO4DxG0txmrERhM29nYGBddr//5/DGRjYNRkY/l7////39v///y4Dmn+LgeHANwDrkl1AuO+pmgAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAwqADAAQAAAABAAAAwwAAAAD9b/HnAAAHlklEQVR4Ae3dP3PTWBSGcbGzM6GCKqlIBRV0dHRJFarQ0eUT8LH4BnRU0NHR0UEFVdIlFRV7TzRksomPY8uykTk/zewQfKw/9znv4yvJynLv4uLiV2dBoDiBf4qP3/ARuCRABEFAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghgg0Aj8i0JO4OzsrPv69Wv+hi2qPHr0qNvf39+iI97soRIh4f3z58/u7du3SXX7Xt7Z2enevHmzfQe+oSN2apSAPj09TSrb+XKI/f379+08+A0cNRE2ANkupk+ACNPvkSPcAAEibACyXUyfABGm3yNHuAECRNgAZLuYPgEirKlHu7u7XdyytGwHAd8jjNyng4OD7vnz51dbPT8/7z58+NB9+/bt6jU/TI+AGWHEnrx48eJ/EsSmHzx40L18+fLyzxF3ZVMjEyDCiEDjMYZZS5wiPXnyZFbJaxMhQIQRGzHvWR7XCyOCXsOmiDAi1HmPMMQjDpbpEiDCiL358eNHurW/5SnWdIBbXiDCiA38/Pnzrce2YyZ4//59F3ePLNMl4PbpiL2J0L979+7yDtHDhw8vtzzvdGnEXdvUigSIsCLAWavHp/+qM0BcXMd/q25n1vF57TYBp0a3mUzilePj4+7k5KSLb6gt6ydAhPUzXnoPR0dHl79WGTNCfBnn1uvSCJdegQhLI1vvCk+fPu2ePXt2tZOYEV6/fn31dz+shwAR1sP1cqvLntbEN9MxA9xcYjsxS1jWR4AIa2Ibzx0tc44fYX/16lV6NDFLXH+YL32jwiACRBiEbf5KcXoTIsQSpzXx4N28Ja4BQoK7rgXiydbHjx/P25TaQAJEGAguWy0+2Q8PD6/Ki4R8EVl+bzBOnZY95fq9rj9zAkTI2SxdidBHqG9+skdw43borCXO/ZcJdraPWdv22uIEiLA4q7nvvCug8WTqzQveOH26fodo7g6uFe/a17W3+nFBAkRYENRdb1vkkz1CH9cPsVy/jrhr27PqMYvENYNlHAIesRiBYwRy0V+8iXP8+/fvX11Mr7L7ECueb/r48eMqm7FuI2BGWDEG8cm+7G3NEOfmdcTQw4h9/55lhm7DekRYKQPZF2ArbXTAyu4kDYB2YxUzwg0gi/41ztHnfQG26HbGel/crVrm7tNY+/1btkOEAZ2M05r4FB7r9GbAIdxaZYrHdOsgJ/wCEQY0J74TmOKnbxxT9n3FgGGWWsVdowHtjt9Nnvf7yQM2aZU/TIAIAxrw6dOnAWtZZcoEnBpNuTuObWMEiLAx1HY0ZQJEmHJ3HNvGCBBhY6jtaMoEiJB0Z29vL6ls58vxPcO8/zfrdo5qvKO+d3Fx8Wu8zf1dW4p/cPzLly/dtv9Ts/EbcvGAHhHyfBIhZ6NSiIBTo0LNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiEC/wGgKKC4YMA4TAAAAABJRU5ErkJggg==
`;function $d(){if(typeof window<"u"&&!customElements.get("r-img")){class x extends HTMLElement{constructor(){super(),Co(this,"_image"),Co(this,"_container"),this._container=document.createElement("div"),this._container.setAttribute("class","ran-image");const p=this.attachShadow({mode:"closed"}),f=document.createElement("style");f.textContent=Yd,p.appendChild(f),p.appendChild(this._container)}static get observedAttributes(){return["fallback"]}get fallback(){return this.getAttribute("fallback")||jd}set fallback(p){p?this.setAttribute("fallback",p):this.removeAttribute("fallback")}listenFallback(p,f){p==="fallback"&&this._image&&(f?this._image.setAttribute("fallback",f):this._image.removeAttribute("fallback"))}connectedCallback(){const p=this.getAttribute("src")||"";this._image=new Image,this._image.src=p,this._image.addEventListener("error",()=>{this._image&&this.fallback&&(this._image.src=this.fallback)}),this._image.addEventListener("load",()=>{this._image&&this._container.appendChild(this._image)})}attributeChangedCallback(p,f,w){this.listenFallback(p,w)}}customElements.define("r-img",x)}}const qd=$d(),Qd=Object.freeze(Object.defineProperty({__proto__:null,default:qd},Symbol.toStringTag,{value:"Module"}));var Wd=Object.defineProperty,Xd=(x,h,p)=>h in x?Wd(x,h,{enumerable:!0,configurable:!0,writable:!0,value:p}):x[h]=p,Ke=(x,h,p)=>Xd(x,typeof h!="symbol"?h+"":h,p);const Jd='.remove-wap-active-focus{outline:0;-webkit-tap-highlight-color:transparent}.remove-wap-active-focus:active,.remove-wap-active-focus:focus{outline:0;-webkit-tap-highlight-color:transparent}:host{position:relative;display:block;box-sizing:border-box}.ran-input{box-sizing:var(--ran-input-box-sizing, border-box);position:var(--ran-input-position, relative);display:var(--ran-input-display, flex);width:var(--ran-input-width, 100%);height:var(--ran-input-height, 100%);min-width:0;padding:var(--ran-input-padding, 2px 8px);color:#000000d9;font-size:var(--ran-input-font-size, 12px);line-height:var(--ran-input-line-height, 1.5715);background-color:var(--ran-input-background-color, #fff);background-image:var(--ran-input-background-image, none);border:var(--ran-input-border, 1px solid #d9d9d9);border-radius:var(--ran-input-border-radius, 2px);transition:var(--ran-input-transition, all .3s)}.ran-input .ran-icon{display:var(--ran-input-icon-display, flex);align-items:var(--ran-input-icon-align-items, center);justify-content:var(--ran-input-icon-justify-content, center)}.ran-input:active{border-color:var(--ran-input-active-border-color, #40a9ff);box-shadow:var(--ran-input-active-box-shadow, 0 0 0 2px rgba(24, 144, 255, .2));border-right-width:var(--ran-input-active-border-right-width, 1px);outline:var(--ran-input-active-outline, 0)}.ran-input:hover{border-color:var(--ran-input-hover-border-color, #40a9ff);border-right-width:var(--ran-input-hover-border-right-width, 1px)}.ran-input>.ran-input-content:hover~.ran-input-label{color:var(--ran-input-label-hover-color, #40a9ff)}.ran-input[value]>.ran-input-label{transform:var(--ran-input-label-value-transform, translateY( calc(-50% - .43em) ) scale(.8));color:var(--ran-input-label-value-color, #00000040)}.ran-input[status=error]{border-color:var(--ran-input-status-error-border-color, #ff4d4f)}.ran-input[status=error]>.ran-input-content~.ran-input-label{color:var(--ran-input-label-status-error-color, #ff4d4f)}.ran-input[status=warning]{border-color:var(--ran-input-status-warning-border-color, #ff7875)}.ran-input[status=warning]>.ran-input-content~.ran-input-label{color:var(--ran-input-label-status-warning-color, #ff7875)}.ran-input[disabled]{color:var(--ran-input-disabled-color, #00000040);background-color:var(--ran-input-disabled-background-color, #f5f5f5);border-color:var(--ran-input-disabled-border-color, #d9d9d9);box-shadow:var(--ran-input-disabled-box-shadow, none);cursor:var(--ran-input-disabled-cursor, not-allowed);opacity:var(--ran-input-disabled-opacity, 1)}.ran-input[disabled]>.ran-input-content{color:var(--ran-input-content-disabled-color, #00000040);background-color:var(--ran-input-content-disabled-background-color, #f5f5f5);border-color:var(--ran-input-content-disabled-border-color, #d9d9d9);box-shadow:var(--ran-input-content-disabled-box-shadow, none);cursor:var(--ran-input-content-disabled-cursor, not-allowed);opacity:var(--ran-input-content-disabled-opacity, 1)}.ran-input[disabled]>.ran-input-content~.ran-input-label{color:var(--ran-input-label-disabled-color, #00000040);background-color:var(--ran-input-label-disabled-background-color, #f5f5f5)}.ran-input[disabled]>.ran-input-label{color:#999;border-color:var(--ran-input-label-disabled-border-color, #d9d9d9);box-shadow:var(--ran-input-label-disabled-box-shadow, none);cursor:var(--ran-input-label-disabled-cursor, not-allowed)}.ran-input-content{writing-mode:var(--ran-input-content-writing-mode, horizontal-tb);text-rendering:var(--ran-input-content-text-rendering, auto);letter-spacing:var(--ran-input-content-letter-spacing, normal);word-spacing:var(--ran-input-content-word-spacing, normal);text-transform:var(--ran-input-content-text-transform, none);text-indent:var(--ran-input-content-text-indent, 0px);text-shadow:var(--ran-input-content-text-shadow, none);text-align:var(--ran-input-content-text-align, start);cursor:var(--ran-input-content-cursor, text);touch-action:var(--ran-input-content-touch-action, manipulation);-webkit-appearance:var(--ran-input-content--webkit-appearance, none);text-overflow:var(--ran-input-content-text-overflow, ellipsis);box-sizing:var(--ran-input-content-box-sizing, border-box);margin:var(--ran-input-content-margin, 0);font-variant:var(--ran-input-content-font-variant, tabular-nums);list-style:var(--ran-input-content-list-style, none);font-feature-settings:var(--ran-input-content-font-feature-settings, "tnum");position:var(--ran-input-content-position, relative);border:var(--ran-input-content-border, none);width:var(--ran-input-content-width, 100%);height:var(--ran-input-content-height, 100%);min-width:var(--ran-input-content-min-width, 0);color:var(--ran-input-content-color, #000000d9);font-size:var(--ran-input-content-font-size, 14px);line-height:var(--ran-input-content-line-height, 1.48);background-color:var(--ran-input-content-background-color, #fff);background-image:var(--ran-input-content-background-image, none);transition:var(--ran-input-content-transition, all .3s);outline:var(--ran-input-content-outline, none);border-radius:var(--ran-input-content-border-radius, 2px);padding:var(--ran-input-content-padding, 0);font-weight:var(--ran-input-content-font-weight, 400)}.ran-input-content:focus,.ran-input-content:hover{border:var(--ran-input-content-hover-border, none);outline:var(--ran-input-content-hover-outline, 0)}.ran-input-content::placeholder{color:var(--ran-input-content-placeholder-color, #999)}.ran-input-content:placeholder-shown~.ran-input-label{transform:var(--ran-input-content-placeholder-label-transform, translateY( calc(-50% - .43em) ) scale(.8))}.ran-input-content:focus~.ran-input-label{transform:var(--ran-input-content-focus-label-transform, translateY( calc(-50% - .43em) ) scale(.8))}.ran-input-content::-webkit-search-cancel-button{display:none;-webkit-appearance:none}.ran-input-label{box-sizing:var(--ran-input-label-box-sizing, border-box);pointer-events:var(--ran-input-label-pointer-events, none);position:var(--ran-input-label-position, absolute);font-size:var(--ran-input-label-font-size, 14px);left:var(--ran-input-label-left, 8px);transition:var(--ran-input-label-transition, transform .3s, color .3s, background-color .3s, backdrop-filter .3s);transform-origin:var(--ran-input-label-transform-origin, left);padding:var(--ran-input-label-padding, 0 .2em);color:var(--ran-input-label-color, #999);background:var(--ran-input-label-background, #fff);opacity:var(--ran-input-label-opacity, .9)}';let mn=class extends Be(){constructor(){super(),Ke(this,"_input"),Ke(this,"_label"),Ke(this,"_inputContent"),Ke(this,"_icon"),Ke(this,"customInput",f=>{f.stopPropagation(),f.preventDefault();const{target:w,data:T=""}=f;this.value=(w==null?void 0:w.value)||T||"",this.customChange(),this.dispatchEvent(new CustomEvent("input",{detail:{value:this.value}}))}),Ke(this,"customChange",()=>{this.dispatchEvent(new CustomEvent("change",{detail:{value:this.value}}))}),Ke(this,"listenPlaceholder",(f,w)=>{f==="placeholder"&&this._inputContent&&(w!=null?this._inputContent.setAttribute("placeholder",w):this._inputContent.removeAttribute("placeholder"))}),Ke(this,"listenLabel",(f,w)=>{f==="label"&&this._inputContent&&(w!=null?this._label?this._label.innerHTML=w:(this._label=document.createElement("label"),this._label.innerHTML=w,this._label.setAttribute("class","ran-input-label"),this._label.setAttribute("part","ran-input-label"),this._input.appendChild(this._label)):(this._input.removeAttribute("label"),this._label&&(this._input.removeChild(this._label),this._label=void 0)))}),Ke(this,"listenType",(f,w)=>{f==="type"&&this._inputContent&&(w?this._inputContent.setAttribute("type",w):(this._inputContent.removeAttribute("type"),this._inputContent.removeAttribute("min"),this._inputContent.removeAttribute("max"),this._inputContent.removeAttribute("step")))}),Ke(this,"listenStatus",(f,w)=>{f==="status"&&this._input&&(w?this._input.setAttribute("status",w):this._input.removeAttribute("status"))}),Ke(this,"listenDisabled",(f,w)=>{f==="disabled"&&this._input&&(it.includes(w)?this._input.removeAttribute("disabled"):(this._input.setAttribute("disabled",""),this._inputContent.setAttribute("disabled","")))}),Ke(this,"listenIcon",(f,w,T)=>{f==="icon"&&w&&w!==T&&(this.removeAttribute("label"),this.setAttribute("icon",w),this.dealIcon())}),Ke(this,"dealIcon",()=>{this._icon||(this._icon=document.createElement("r-icon"),this._icon.setAttribute("class","ran-icon"),this._inputContent.insertAdjacentElement("beforebegin",this._icon)),this.icon&&this._icon.setAttribute("name",this.icon)}),Ke(this,"listenEvent",(f,w,T)=>{this.listenPlaceholder(f,T),this.listenLabel(f,T),this.listenStatus(f,T),this.listenDisabled(f,T),this.listenIcon(f,T,w),f==="value"&&w!==T&&(this._inputContent.value=T,this._input.setAttribute("value",T))});const h=this.attachShadow({mode:"closed"}),p=document.createElement("style");p.textContent=Jd,h.appendChild(p),this._input=document.createElement("div"),this._input.setAttribute("class","ran-input"),this._input.setAttribute("part","ran-input"),this._inputContent=document.createElement("input"),this._inputContent.setAttribute("class","ran-input-content"),this._inputContent.setAttribute("part","ran-input-content"),this._input.appendChild(this._inputContent),h.appendChild(this._input)}static get observedAttributes(){return["label","disabled","name","placeholder","type","icon","value","status","prefix","suffix","allowclear","count","maxlength","showcount","onPressEnter","variant","minrows","maxrows"]}get value(){return this.getAttribute("value")||""}set value(h){!Ce(this)&&h?(this.setAttribute("value",h),this._input.setAttribute("value",h)):(this.removeAttribute("value"),this._input.removeAttribute("value"))}get placeholder(){return this.getAttribute("placeholder")||""}set placeholder(h){h?this.setAttribute("placeholder",h):this.removeAttribute("placeholder")}get required(){return this.getAttribute("required")||""}set required(h){!h||h==="false"?this.removeAttribute("required"):this.setAttribute("required","")}get disabled(){return`${Ce(this)}`}set disabled(h){it.includes(h)?(this.removeAttribute("disabled"),this._input.removeAttribute("disabled"),this._inputContent.removeAttribute("disabled")):(this.setAttribute("disabled",""),this._input.setAttribute("disabled",""),this._inputContent.setAttribute("disabled",""))}get label(){return this.getAttribute("label")||""}set label(h){this.setAttribute("label",h)}get status(){return this.getAttribute("status")||""}set status(h){h?(this.setAttribute("status",h),this._input.setAttribute("status",h)):(this.removeAttribute("status"),this._input.removeAttribute("status"))}get name(){return this.getAttribute("name")||""}set name(h){this.setAttribute("name",h)}get min(){return this.getAttribute("min")||""}set min(h){this.type==="number"&&this.setAttribute("min",h)}get max(){return this.getAttribute("max")||""}set max(h){this.type==="number"&&this.setAttribute("max",h)}get step(){return this.getAttribute("step")||""}set step(h){this.type==="number"&&this.setAttribute("step",h)}get icon(){return this.getAttribute("icon")||""}set icon(h){h?this.setAttribute("icon",h):this.removeAttribute("icon")}get prefix(){return this.getAttribute("prefix")||""}set prefix(h){h?this.setAttribute("prefix",h):this.removeAttribute("prefix")}get suffix(){return this.getAttribute("suffix")||""}set suffix(h){h?this.setAttribute("suffix",h):this.removeAttribute("suffix")}get type(){return this.getAttribute("type")||""}set type(h){h?this.setAttribute("type",h):this.removeAttribute("type")}connectedCallback(){this.value&&(this._inputContent.value=this.value,this._input.setAttribute("value",this.value)),this.status&&this._input.setAttribute("status",this.status),Ce(this)&&(this._input.setAttribute("disabled",""),this._inputContent.setAttribute("disabled","")),this.type&&this._inputContent.setAttribute("type",this.type),this._inputContent.addEventListener("input",this.customInput),document.readyState==="complete"&&this.dealIcon()}disconnectCallback(){this._inputContent.removeEventListener("input",this.customInput)}attributeChangedCallback(h,p,f){this.listenEvent(h,p,f)}};function Zd(){return typeof window<"u"&&!customElements.get("r-input")?(customElements.define("r-input",mn),mn):Oe("document is undefined or r-input is exist")}const ec=Zd(),tc=Object.freeze(Object.defineProperty({__proto__:null,Input:mn,default:ec},Symbol.toStringTag,{value:"Module"}));var rc=Object.defineProperty,ic=(x,h,p)=>h in x?rc(x,h,{enumerable:!0,configurable:!0,writable:!0,value:p}):x[h]=p,_t=(x,h,p)=>ic(x,typeof h!="symbol"?h+"":h,p);const Lo='.remove-wap-active-focus{outline:0;-webkit-tap-highlight-color:transparent}.remove-wap-active-focus:active,.remove-wap-active-focus:focus{outline:0;-webkit-tap-highlight-color:transparent}:host([type="toast"]) .ran-message-notice{padding:8px;text-align:center;max-width:90%;margin:0 auto;word-break:break-all}:host([type="toast"]) .ran-message-notice-content{display:inline-block;padding:10px 16px;background:#000000b3;border-radius:7px;pointer-events:all}:host([type="toast"]) .ran-message-notice-content-info{align-items:center;display:flex}:host([type="toast"]) .ran-message-notice-content-info span{margin:0;padding:0;font-size:14px;font-variant:tabular-nums;list-style:none;font-feature-settings:"tnum";z-index:1010;width:100%;pointer-events:none;color:#fff}.ran-message-notice{padding:var(--ran-message-notice-padding, 8px);text-align:var(--ran-message-notice-text-align, center);max-width:var(--ran-message-notice-max-width, 90%);margin:var(--ran-message-notice-margin, 0 auto);word-break:var(--ran-message-notice-word-break, break-all)}.ran-message-notice-content{display:var(--ran-message-notice-content-display, inline-block);padding:var(--ran-message-notice-content-padding, 10px 16px);background:var(--ran-message-notice-content-background, #fff);border-radius:var(--ran-message-notice-content-border-radius, 8px);box-shadow:var(--ran-message-notice-content-box-shadow, 0 3px 6px -4px #0000001f, 0 6px 16px #00000014, 0 9px 28px 8px #0000000d);pointer-events:var(--ran-message-notice-content-pointer-events, all)}.ran-message-notice-content-info{align-items:var(--ran-message-notice-content-info-align-items, center);display:var(--ran-message-notice-content-info-display, flex)}.ran-message-notice-content-info span{margin:var(--ran-message-notice-content-info-span-margin, 0);padding:var(--ran-message-notice-content-info-span-padding, 0);color:var(--ran-message-notice-content-info-span-color, #000000d9);font-size:var(--ran-message-notice-content-info-span-font-size, 14px);font-variant:var(--ran-message-notice-content-info-span-font-variant, tabular-nums);list-style:var(--ran-message-notice-content-info-span-list-style, none);font-feature-settings:var(--ran-message-notice-content-info-span-font-feature-settings, "tnum");z-index:var(--ran-message-notice-content-info-span-z-index, 1010);width:var(--ran-message-notice-content-info-span-width, 100%);pointer-events:var(--ran-message-notice-content-info-span-pointer-events, none)}@keyframes rotate{to{transform:rotate(360deg)}}@keyframes MessageMoveIn{0%{padding:0;transform:translateY(-100%);opacity:0}to{padding:8px;transform:translateY(0);opacity:1}}@keyframes MessageMoveOut{0%{max-height:150px;padding:8px;opacity:1}to{max-height:0;padding:0;opacity:0}}.ranui-message{box-sizing:var(--ran-message-box-sizing, border-box);margin:var(--ran-message-margin, 0);padding:var(--ran-message-padding, 0);color:var(--ran-message-color, #000000d9);font-size:var(--ran-message-font-size, 14px);font-variant:var(--ran-message-font-variant, tabular-nums);line-height:var(--ran-message-line-height, 1.5715);list-style:var(--ran-message-ist-style, none);font-feature-settings:var(--ran-message-font-feature-settings, "tnum");position:var(--ran-message-position, fixed);top:var(--ran-message-top, 8px);left:var(--ran-message-left, 0);z-index:var(--ran-message-z-index, 1010);width:var(--ran-message-width, 100%);pointer-events:var(--ran-message-pointer-events, none)}.ranui-message .message-in{animation-name:var(--ran-message-in-animation-name, MessageMoveIn);animation-duration:var(--ran-message-in-animation-duration, .3s);animation-timing-function:var(--ran-message-in-animation-timing-function, cubic-bezier(.78, .14, .15, .86))}.ranui-message .message-leave{animation-name:var(--ran-message-leave-animation-name, MessageMoveOut);animation-duration:var(--ran-message-leave-animation-duration, .3s);animation-timing-function:var(--ran-message-leave-animation-timing-function, cubic-bezier(.78, .14, .15, .86))}',Do=300,Ro=3e3,nc=new Map([["success","check-circle-fill"],["warning","warning-circle-fill"],["error","close-circle-fill"],["info","info-circle-fill"],["toast",null]]),ac=new Map([["success","#52c41a"],["warning","#faad14"],["error","#ff4d4f"],["info","#1890ff"],["toast","rgba(0, 0, 0, 0.7)"]]);function oc(){if(typeof window<"u"&&!customElements.get("r-message")){class x extends HTMLElement{constructor(){super(),_t(this,"_info"),_t(this,"_notice"),_t(this,"_content"),_t(this,"_icon"),_t(this,"_span"),_t(this,"timeId"),_t(this,"close"),_t(this,"setIcon",B=>{var M,j,$,he;const ie=nc.get(B),le=ac.get(B);ie&&((M=this._icon)==null||M.setAttribute("name",ie),(j=this._icon)==null||j.style.setProperty("margin-right","8px"),($=this._icon)==null||$.setAttribute("size","18"),le&&((he=this._icon)==null||he.setAttribute("color",le)))}),this._notice=document.createElement("div"),this._notice.setAttribute("class","ran-message-notice"),this._content=document.createElement("div"),this._content.setAttribute("class","ran-message-notice-content"),this._info=document.createElement("div"),this._info.setAttribute("class","ran-message-notice-content-info"),this._icon=document.createElement("r-icon"),this._span=document.createElement("span"),this._info.appendChild(this._icon),this._info.appendChild(this._span),this._content.appendChild(this._info),this._notice.appendChild(this._content);const _=this.attachShadow({mode:"closed"}),L=document.createElement("style");L.textContent=Lo,_.appendChild(L),_.appendChild(this._notice)}static get observedAttributes(){return["type","content"]}get type(){return this.getAttribute("type")}set type(_){_&&this.setAttribute("type",_)}get content(){return this.getAttribute("content")}set content(_){_&&this.setAttribute("content",_)}attributeChangedCallback(_,L,B){_==="content"&&L!==B&&(this._span.textContent=B),_==="type"&&L!==B&&this.setIcon(B)}}customElements.define("r-message",x);const h=document.createElement("div"),p=V("style").setTextContent(Lo),f=document.createElement("div");f.setAttribute("class","ranui-message"),document.body.appendChild(h),h.appendChild(p.element),h.appendChild(f);const w=T=>_=>{const L=new x;L.setAttribute("class","message"),L.timeId&&clearTimeout(L.timeId),L.setAttribute("type",T);let B=Ro,M;if(!_)return;typeof _=="string"?L.setAttribute("content",_):(L.setAttribute("content",_.content),M=_.close,B=_.duration||Ro);const j=setTimeout(()=>{L.classList.remove("message-in"),L.classList.add("message-leave"),clearTimeout(j)},B-Do);L.timeId=setTimeout(()=>{L.classList.remove("message-leave"),f.removeChild(L),M&&M()},B),f.appendChild(L),L.classList.add("message-in"),setTimeout(()=>{L.classList.remove("message-in")},Do)};return{info:w("info"),success:w("success"),error:w("error"),warning:w("warning"),toast:w("toast")}}return null}const xr=oc();typeof window<"u"&&xr&&(window.message=xr,window.ranui||(window.ranui={}),window.ranui.message=xr);const sc=Object.freeze(Object.defineProperty({__proto__:null,default:xr},Symbol.toStringTag,{value:"Module"}));var lc=Object.defineProperty,dc=(x,h,p)=>h in x?lc(x,h,{enumerable:!0,configurable:!0,writable:!0,value:p}):x[h]=p,je=(x,h,p)=>dc(x,typeof h!="symbol"?h+"":h,p);const Io='.remove-wap-active-focus{outline:0;-webkit-tap-highlight-color:transparent}.remove-wap-active-focus:active,.remove-wap-active-focus:focus{outline:0;-webkit-tap-highlight-color:transparent}.r-preview-slot{display:block}:host{cursor:pointer}.r-preview-mask{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#00000073;z-index:1081}.r-preview-mask .r-preview-loading{position:absolute;top:30vh;left:50vw;transform:translate(-50%);display:flex;flex-flow:column;align-items:center}.r-preview-mask .r-preview-loading-text{color:#fff;font-size:16px}.r-preview-mask .r-preview-options{width:100%;pointer-events:auto;display:flex;flex-flow:row-reverse nowrap;align-items:center;justify-content:space-between}.r-preview-mask .r-preview-options-close{margin:14px;border:none;cursor:pointer;transition:all .3s;-webkit-user-select:none;user-select:none}.r-preview-mask .r-preview-contain{max-width:calc(100vw - 20px);margin:0 auto;display:flex;flex-flow:column nowrap;align-items:center;justify-content:center}.r-preview-mask .r-preview-contain .r-preview-context{margin:0 auto;height:calc(100vh - 68px);display:flex;flex-flow:column nowrap;justify-content:flex-start;align-items:center;overflow:auto}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main{width:100%;height:100%;margin-bottom:10px}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet{font-size:13px;line-height:normal;-webkit-user-select:none;user-select:none;-moz-user-select:none;font-family:Lato,Source Sans Pro,Roboto,Helvetica,Arial,sans-serif;box-sizing:content-box;background:#fff;-webkit-font-smoothing:antialiased}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet textarea{font:400 13px Arial,Lato,Source Sans Pro,Roboto,Helvetica,sans-serif}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-sheet{position:relative;overflow:hidden}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-table{vertical-align:bottom}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-tooltip{font-family:inherit;position:absolute;padding:5px 10px;color:#fff;border-radius:1px;background:#000;font-size:12px;z-index:201}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-tooltip:before{pointer-events:none;position:absolute;left:calc(50% - 4px);top:-4px;content:"";width:8px;height:8px;background:inherit;-webkit-transform:rotate(45deg);transform:rotate(45deg);z-index:1;box-shadow:1px 1px 3px -1px #0000004d}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-color-palette{padding:5px}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-color-palette table{margin:0;padding:0;border-collapse:separate;border-spacing:2;background:#fff}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-color-palette table td{margin:0;cursor:pointer;border:1px solid transparent}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-color-palette table td:hover{border-color:#ddd}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-color-palette table td .x-spreadsheet-color-palette-cell{width:16px;height:16px}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-border-palette{padding:6px}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-border-palette table{margin:0;padding:0;border-collapse:separate;border-spacing:0;background:#fff;table-layout:fixed}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-border-palette table td{margin:0}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-border-palette .x-spreadsheet-border-palette-left{border-right:1px solid #eee;padding-right:6px}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-border-palette .x-spreadsheet-border-palette-left .x-spreadsheet-border-palette-cell{width:30px;height:30px;cursor:pointer;text-align:center}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-border-palette .x-spreadsheet-border-palette-left .x-spreadsheet-border-palette-cell:hover{background-color:#eee}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-border-palette .x-spreadsheet-border-palette-right{padding-left:6px}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-border-palette .x-spreadsheet-border-palette-right .x-spreadsheet-line-type{position:relative;left:0;top:-3px}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-dropdown{position:relative}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-dropdown .x-spreadsheet-dropdown-content{position:absolute;z-index:200;background:#fff;box-shadow:1px 2px 5px 2px #33333326}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-dropdown.bottom-left .x-spreadsheet-dropdown-content{top:calc(100% + 5px);left:0}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-dropdown.bottom-right .x-spreadsheet-dropdown-content{top:calc(100% + 5px);right:0}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-dropdown.top-left .x-spreadsheet-dropdown-content{bottom:calc(100% + 5px);left:0}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-dropdown.top-right .x-spreadsheet-dropdown-content{bottom:calc(100% + 5px);right:0}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-dropdown .x-spreadsheet-dropdown-title{padding:0 5px;display:inline-block}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-resizer{position:absolute;z-index:11}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-resizer .x-spreadsheet-resizer-hover{background-color:#4b89ff40}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-resizer .x-spreadsheet-resizer-line{position:absolute}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-resizer.horizontal{cursor:row-resize}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-resizer.horizontal .x-spreadsheet-resizer-line{border-bottom:2px dashed #4b89ff;left:0;bottom:0}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-resizer.vertical{cursor:col-resize}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-resizer.vertical .x-spreadsheet-resizer-line{border-right:2px dashed #4b89ff;top:0;right:0}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-scrollbar{position:absolute;bottom:0;right:0;background-color:#f4f5f8;opacity:.9;z-index:12}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-scrollbar.horizontal{right:15px;overflow-x:scroll;overflow-y:hidden}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-scrollbar.horizontal>div{height:1px;background:#ddd}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-scrollbar.vertical{bottom:15px;overflow-x:hidden;overflow-y:scroll}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-scrollbar.vertical>div{width:1px;background:#ddd}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-overlayer{position:absolute;left:0;top:0;z-index:10}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-overlayer .x-spreadsheet-overlayer-content{position:absolute;overflow:hidden;pointer-events:none;width:100%;height:100%}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-editor,.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-selector{box-sizing:content-box;position:absolute;overflow:hidden;pointer-events:none;top:0;left:0;width:100%;height:100%}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-selector .hide-input{position:absolute;z-index:0}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-selector .hide-input input{padding:0;width:0;border:none!important}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-selector .x-spreadsheet-selector-area{position:absolute;border:2px solid #4b89ff;background:#4b89ff1a;z-index:5}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-selector .x-spreadsheet-selector-clipboard,.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-selector .x-spreadsheet-selector-autofill{position:absolute;background:transparent;z-index:100}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-selector .x-spreadsheet-selector-clipboard{border:2px dashed #4b89ff}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-selector .x-spreadsheet-selector-autofill{border:1px dashed rgba(0,0,0,.45)}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-selector .x-spreadsheet-selector-corner{pointer-events:auto;position:absolute;cursor:crosshair;font-size:0;height:5px;width:5px;right:-5px;bottom:-5px;border:2px solid #ffffff;background:#4b89ff}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-editor{z-index:20}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-editor .x-spreadsheet-editor-area{position:absolute;text-align:left;border:2px solid #4b89ff;line-height:0;z-index:100;pointer-events:auto}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-editor .x-spreadsheet-editor-area textarea{box-sizing:content-box;border:none;padding:0 3px;outline:none;resize:none;text-align:start;overflow-y:hidden;font:400 13px Arial,Lato,Source Sans Pro,Roboto,Helvetica,sans-serif;color:inherit;white-space:normal;word-wrap:break-word;line-height:22px;margin:0}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-editor .x-spreadsheet-editor-area .textline{overflow:hidden;visibility:hidden;position:fixed;top:0;left:0}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-item{-webkit-user-select:none;user-select:none;background:0;border:1px solid transparent;outline:none;height:26px;color:#000000e6;line-height:26px;list-style:none;padding:2px 10px;cursor:default;text-align:left;overflow:hidden}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-item.disabled{pointer-events:none;opacity:.5}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-item:hover,.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-item.active{background:#0000000d}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-item.divider{height:0;padding:0;margin:5px 0;border:none;border-bottom:1px solid rgba(0,0,0,.1)}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-item .label{float:right;opacity:.65;font-size:1em}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-item.state,.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-header.state{padding-left:35px!important;position:relative}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-item.state:before,.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-header.state:before{content:"";position:absolute;width:10px;height:10px;left:12px;top:calc(50% - 5px);background:#00000014;border-radius:2px}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-item.state.checked:before,.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-header.state.checked:before{background:#4b89ff}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-checkbox{position:relative;display:inline-block;backface-visibility:hidden;outline:0;vertical-align:baseline;font-style:normal;font-size:1rem;line-height:1em}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-checkbox>input{position:absolute;top:0;left:0;opacity:0!important;outline:0;z-index:-1}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-suggest,.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-contextmenu,.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-sort-filter{position:absolute;box-shadow:1px 2px 5px 2px #33333326;background:#fff;z-index:100;width:260px;pointer-events:auto;overflow:auto}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-suggest{width:200px}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-filter{border:1px solid #e9e9e9;font-size:12px;margin:10px}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-filter .x-spreadsheet-header{padding:.5em .75em;background:#f8f8f9;border-bottom:1px solid #e9e9e9;border-left:1px solid transparent}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-filter .x-spreadsheet-body{height:200px;overflow-y:auto}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-filter .x-spreadsheet-body .x-spreadsheet-item{height:20px;line-height:20px}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-sort-filter .x-spreadsheet-buttons{margin:10px}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-bottombar{height:40px;padding:0 30px;text-align:left;background:#f5f6f7;display:flex}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-bottombar{position:relative;border-top:1px solid #e0e2e4}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-bottombar .x-spreadsheet-menu>li{line-height:40px;height:40px;padding-top:0;padding-bottom:0;vertical-align:middle;border-right:1px solid #e8eaed}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-menu{list-style:none;margin:0;padding:0;-webkit-user-select:none;user-select:none}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-menu>li{float:left;line-height:1.25em;padding:.785em 1em;margin:0;vertical-align:middle;text-align:left;font-weight:400;color:#80868b;white-space:nowrap;cursor:pointer;transition:all .3s;font-weight:700}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-menu>li.active{background-color:#fff;color:#000000a6}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-menu>li .x-spreadsheet-dropdown{display:inline-block}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-print{position:absolute;left:0;top:0;z-index:100;width:100%;height:100%;display:flex;flex-direction:column}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-print-bar{background:#424242;height:60px;line-height:60px;padding:0 30px}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-print-bar .-title{color:#fff;font-weight:700;font-size:1.2em;float:left}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-print-bar .-right{float:right;margin-top:12px}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-print-content{display:flex;flex:auto;flex-direction:row;background:#d0d0d0;height:calc(100% - 60px)}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-print-content .-sider{flex:0 0 300px;width:300px;border-left:2px solid #ccc;background:#fff}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-print-content .-content{flex:auto;overflow-x:auto;overflow-y:scroll;height:100%}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-canvas-card-wraper{margin:40px 20px}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-canvas-card{background:#fff;margin:auto;page-break-before:auto;page-break-after:always;box-shadow:0 8px 10px 1px #00000024,0 3px 14px 3px #0000001f,0 4px 5px #0003}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-calendar{color:#000000a6;background:#fff;-webkit-user-select:none;user-select:none}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-calendar .calendar-header{font-weight:700;line-height:30px;text-align:center;width:100%;float:left;background:#f9fafb}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-calendar .calendar-header .calendar-header-left{padding-left:5px;float:left}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-calendar .calendar-header .calendar-header-right{float:right}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-calendar .calendar-header .calendar-header-right a{padding:3px 0;margin-right:2px;border-radius:2px}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-calendar .calendar-header .calendar-header-right a:hover{background:#00000014}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-calendar .calendar-body{border-collapse:collapse;border-spacing:0}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-calendar .calendar-body th,.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-calendar .calendar-body td{width:14.28571429%;min-width:32px;text-align:center;font-weight:700;line-height:30px;padding:0}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-calendar .calendar-body td>.cell:hover{background:#ecf6fd}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-calendar .calendar-body td>.cell.active,.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-calendar .calendar-body td>.cell.active:hover{background:#ecf6fd;color:#2185d0}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-calendar .calendar-body td>.cell.disabled{pointer-events:none;opacity:.5}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-datepicker{box-shadow:2px 2px 5px #0003;position:absolute;left:0;top:calc(100% + 5px);z-index:10;width:auto}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-buttons{display:flex;justify-content:flex-end}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-buttons .x-spreadsheet-button{margin-left:8px}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-button{display:inline-block;border-radius:3px;line-height:1em;min-height:1em;white-space:nowrap;text-align:center;cursor:pointer;font-size:1em;font-weight:700;padding:.75em 1em;color:#0009;background:#e0e1e2;text-decoration:none;font-family:Lato,proxima-nova,Helvetica Neue,Arial,sans-serif;outline:none;vertical-align:baseline;zoom:1;-webkit-user-select:none;user-select:none;transition:all .1s linear}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-button.active,.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-button:hover{background-color:#c0c1c2;color:#000c}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-button.primary{color:#fff;background-color:#2185d0}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-button.primary:hover,.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-button.primary.active{color:#fff;background-color:#1678c2}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-form-input{font-size:1em;position:relative;font-weight:400;display:inline-flex;color:#000000de}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-form-input input{z-index:1;margin:0;max-width:100%;flex:1 0 auto;outline:0;-webkit-tap-highlight-color:rgba(255,255,255,0);text-align:left;line-height:30px;height:30px;padding:0 8px;background:#fff;border:1px solid #e9e9e9;border-radius:3px;transition:box-shadow .1s ease,border-color .1s ease;box-shadow:inset 0 1px 2px #0a0a0a0f}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-form-input input:focus{border-color:#4b89ff;box-shadow:inset 0 1px 2px #4b89ff33}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-form-select{position:relative;display:inline-block;background:#fff;border:1px solid #e9e9e9;border-radius:2px;cursor:pointer;color:#000000de;-webkit-user-select:none;user-select:none;box-shadow:inset 0 1px 2px #0a0a0a0f}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-form-select .input-text{text-overflow:ellipsis;white-space:nowrap;min-width:60px;width:auto;height:30px;line-height:30px;padding:0 8px}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-form-fields{display:flex;flex-direction:row;flex-wrap:wrap}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-form-fields .x-spreadsheet-form-field{flex:0 1 auto}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-form-fields .x-spreadsheet-form-field .label{display:inline-block;margin:0 10px 0 0}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-form-field{display:block;vertical-align:middle;margin-left:10px;margin-bottom:10px}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-form-field:first-child{margin-left:0}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-form-field.error .x-spreadsheet-form-select,.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-form-field.error input{border-color:#f04134}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-form-field .tip{color:#f04134;font-size:.9em}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-dimmer{display:none;position:absolute;top:0!important;left:0!important;width:100%;height:100%;text-align:center;vertical-align:middle;background-color:#0009;opacity:0;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-duration:.5s;animation-duration:.5s;transition:background-color .5s linear;-webkit-user-select:none;user-select:none;z-index:1000}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-dimmer.active{display:block;opacity:1}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main form fieldset{border:none}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main form fieldset label{display:block;margin-bottom:.5em;font-size:1em;color:#666}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main form fieldset select{font-size:1.1em;width:100%;background-color:#fff;border:none;border-bottom:2px solid #ddd;padding:.5em .85em;border-radius:2px}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-modal,.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-toast{font-size:13px;position:fixed;z-index:1001;text-align:left;line-height:1.25em;min-width:360px;color:#000000de;font-family:Lato,Source Sans Pro,Roboto,Helvetica,Arial,sans-serif;border-radius:4px;border:1px solid rgba(0,0,0,.1);background-color:#fff;background-clip:padding-box;box-shadow:#0003 0 2px 8px}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-toast{background-color:#ffffffd9}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-modal-header,.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-toast-header{font-weight:600;background-clip:padding-box;background-color:#ffffffd9;border-bottom:1px solid rgba(0,0,0,.05);border-radius:4px 4px 0 0}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-toast-header{color:#f2711c}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-modal-header{border-bottom:1px solid #e0e2e4;background:#00000014;font-size:1.0785em}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-modal-header,.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-modal-content,.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-toast-header,.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-toast-content{padding:.75em 1em}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-excel-main .x-spreadsheet-menu li:first-child{display:none}.r-preview-mask .r-preview-contain .r-preview-context .docx-wrapper{background:none}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-pptx-main section{width:100%;height:690px;position:relative;border:1px solid #333;background-color:#efefef;text-align:center;border-radius:10px;box-shadow:1px 1px 3px #aaa;overflow:hidden}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-pptx-main section div.block{position:absolute;top:0;left:0;width:100%}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-pptx-main section div.content{display:flex;flex-direction:column}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-pptx-main section div.v-up{justify-content:flex-start}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-pptx-main section div.v-mid{justify-content:center}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-pptx-main section div.v-down{justify-content:flex-end}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-pptx-main section div.h-left{align-items:flex-start;text-align:left}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-pptx-main section div.h-mid{align-items:center;text-align:center}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-pptx-main section div.h-right{align-items:flex-end;text-align:right}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-pptx-main section div.up-left{justify-content:flex-start;align-items:flex-start;text-align:left}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-pptx-main section div.up-center{justify-content:flex-start;align-items:center}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-pptx-main section div.up-right{justify-content:flex-start;align-items:flex-end}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-pptx-main section div.center-left{justify-content:center;align-items:flex-start;text-align:left}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-pptx-main section div.center-center{justify-content:center;align-items:center}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-pptx-main section div.center-right{justify-content:center;align-items:flex-end}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-pptx-main section div.down-left{justify-content:flex-end;align-items:flex-start;text-align:left}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-pptx-main section div.down-center{justify-content:flex-end;align-items:center}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-pptx-main section div.down-right{justify-content:flex-end;align-items:flex-end}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-pptx-main li.slide{margin:10px 0;font-size:18px}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-pptx-main div.footer{text-align:center}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-pptx-main section table{position:absolute}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-pptx-main section table,.r-preview-mask .r-preview-contain .r-preview-context .r-preview-pptx-main section th,.r-preview-mask .r-preview-contain .r-preview-context .r-preview-pptx-main section td{border:1px solid black}.r-preview-mask .r-preview-contain .r-preview-context .r-preview-pptx-main section svg.drawing{position:absolute;overflow:visible}',cc="application/vnd.openxmlformats-officedocument.presentationml.presentation",hc="application/pdf",uc="application/vnd.openxmlformats-officedocument.wordprocessingml.document",Po="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",Oo="application/vnd.ms-excel";async function fc(){if(typeof document<"u"&&!customElements.get("r-preview")){const{warning:x=Zo}=xr,{renderPptx:h}=await q(async()=>{const{renderPptx:j}=await import("./index-CVkJ_Xlh.Bu3VHk1l.js");return{renderPptx:j}},__vite__mapDeps([0,1,2])),{renderDocx:p}=await q(async()=>{const{renderDocx:j}=await import("./docx-D5t6JtVt.BnsCdyQq.js");return{renderDocx:j}},__vite__mapDeps([3,4,5])),{renderPdf:f}=await q(async()=>{const{renderPdf:j}=await import("./pdf-Cx0VWKFo.DMSCxkPc.js");return{renderPdf:j}},__vite__mapDeps([6,1])),{renderExcel:w}=await q(async()=>{const{renderExcel:j}=await import("./index-D6nXg_bb.B6hZHKfx.js");return{renderExcel:j}},__vite__mapDeps([7,5,2,1])),T=(j,$)=>{if(typeof XMLHttpRequest>"u")throw new Error("XMLHttpRequest is not defined");return typeof document>"u"?Promise.reject("document is not defined"):new Promise(function(he,ie){const le=new XMLHttpRequest;le.open($.method||"GET",j,!0),le.responseType=$.responseType||"arraybuffer",le.onload=function(){if(le.status===200){const de={success:!0,data:le.response,message:""};$.onLoad&&$.onLoad(de),he(de)}else{const de={success:!1,data:le.status,message:`The request status is${le.status}`};$.onError&&$.onError(de),ie(de)}},le.onerror=function(de){const ke={success:!1,data:de,message:""};$.onError&&$.onError(ke),ie(ke)},le.onprogress=de=>{$.onProgress&&$.onProgress(de)},le.withCredentials=$.withCredentials||!1,$.headers&&Object.keys($.headers).forEach(function(de){$!=null&&$.headers&&le.setRequestHeader(de,$.headers[de])}),le.send($.body)})},_=(j,$)=>{const{dom:he,onError:ie,onLoad:le}=$;return new Promise((de,ke)=>{const Le=new FileReader;Le.readAsArrayBuffer(j),Le.onload=()=>{var Me;if(Le.result&&he){const Rt={pptx:Le.result,resultElement:he,onError:ie,onLoad:le};(Me=h(Rt))==null||Me.then(()=>{de()})}},Le.onerror=Me=>{ke(Me)},Le.onabort=Me=>{ke(Me)}})},L=(j,$)=>{const{dom:he,onError:ie,onLoad:le}=$;return Promise.resolve().then(()=>p({buffer:j,bodyContainer:he})).then(()=>{le&&le({success:!0,message:""})}).catch(de=>{ie&&ie({success:!0,data:de,message:""})})},B=new Map([[hc,f],[cc,_],[uc,L],[Po,w],[Oo,w]]);class M extends HTMLElement{constructor(){super(),je(this,"_loadingText"),je(this,"preview"),je(this,"previewContext"),je(this,"_slot"),je(this,"_div"),je(this,"_loadingElement"),je(this,"createLoading",()=>{this._loadingElement=document.createElement("div"),this._loadingElement.setAttribute("class","r-preview-loading");const ie=document.createElement("r-icon");return ie.setAttribute("name","loading"),ie.setAttribute("size","100"),ie.setAttribute("color","#1E90FF"),ie.setAttribute("spin",""),this._loadingText=document.createElement("div"),this._loadingElement.appendChild(ie),this._loadingText.setAttribute("class","r-preview-loading-text"),this._loadingElement.appendChild(this._loadingText),this._loadingElement}),je(this,"onProgress",ie=>{const le=ie.loaded/ie.total*100,de=Math.min(99,le).toFixed(2)+"%";this._loadingText&&this._loadingElement&&(this._loadingText.innerText=`Loading ${de}`,le>=100&&setTimeout(()=>{this._loadingText.innerText="Loading..."},300))}),je(this,"onError",()=>{var ie;(ie=this.preview)==null||ie.removeChild(this._loadingElement)}),je(this,"onLoad",()=>{var ie;(ie=this.preview)==null||ie.removeChild(this._loadingElement)}),je(this,"handleFile",async ie=>{try{if(typeof ie=="string"){const{success:le,data:de,message:ke}=await T(ie,{onProgress:this.onProgress,onError:this.onError,responseType:"blob"});if(le&&de){ie=new File([de],de.name,{type:de.type});const{type:Le}=ie,Me=B.get(Le);if(Me&&this.previewContext){Le===Po||Le===Oo?this.previewContext.style.setProperty("width","100%"):this.previewContext.style.setProperty("width","100%");const Rt={dom:this.previewContext,onError:this.onError,onLoad:this.onLoad};Me(ie,Rt)}}else x(ke)}}catch{}}),je(this,"closePreview",()=>{this.preview&&(document.body.removeChild(this.preview),this.preview=void 0)}),je(this,"showPreview",()=>{var ie;if(this.src){if(this.preview)this.preview.style.display="block";else{this.preview=document.createElement("div"),this.preview.setAttribute("class","r-preview-mask"),this.preview.setAttribute("id","r-preview-mask");const le=document.createElement("div");if(le.setAttribute("class","r-preview-options"),this.closeable!=="false"){const ke=document.createElement("r-icon");ke.setAttribute("class","r-preview-options-close"),ke.setAttribute("name","close-circle-fill"),ke.setAttribute("size","40"),ke.addEventListener("click",this.closePreview),le.appendChild(ke)}const de=document.createElement("div");de.setAttribute("class","r-preview-contain"),this.previewContext=document.createElement("div"),this.previewContext.setAttribute("class","r-preview-context"),de.appendChild(this.previewContext),this.preview.appendChild(le),(ie=this.preview)==null||ie.appendChild(de),this._loadingElement=this.createLoading(),this.preview.appendChild(this._loadingElement),document.body.appendChild(this.preview)}this.handleFile(this.src)}}),this._div=document.createElement("div"),this.preview=document.getElementById("r-preview-mask"),this._slot=document.createElement("slot"),this._div.appendChild(this._slot),this._slot.setAttribute("class","r-preview-slot"),this._div.setAttribute("class","r-preview");const $=this.attachShadow({mode:"closed"}),he=document.createElement("style");he.textContent=Io,$.appendChild(he),$.appendChild(this._div)}static get observedAttributes(){return["src","closeable"]}get label(){return this.getAttribute("label")}set label($){$&&this.setAttribute("label",$)}get src(){return this.getAttribute("src")}set src($){$&&this.setAttribute("src",$)}get closeable(){return this.getAttribute("closeable")}set closeable($){$&&this.setAttribute("closeable",$)}connectedCallback(){this.preview=document.getElementById("r-preview-mask"),this.addEventListener("click",this.showPreview)}disconnectedCallback(){this.removeEventListener("click",this.showPreview)}attributeChangedCallback($,he,ie){ie!==he&&$==="src"&&ie&&(this.setAttribute("src",ie),this.showPreview())}}if(typeof document<"u"&&!customElements.get("r-preview")){customElements.define("r-preview",M);const j=V("style").setTextContent(Io);document.body.appendChild(j.element)}}}const pc=fc(),gc=Object.freeze(Object.defineProperty({__proto__:null,default:pc},Symbol.toStringTag,{value:"Module"}));var mc=Object.defineProperty,vc=(x,h,p)=>h in x?mc(x,h,{enumerable:!0,configurable:!0,writable:!0,value:p}):x[h]=p,bc=(x,h,p)=>vc(x,h+"",p);const yc='.remove-wap-active-focus{outline:0;-webkit-tap-highlight-color:transparent}.remove-wap-active-focus:active,.remove-wap-active-focus:focus{outline:0;-webkit-tap-highlight-color:transparent}@keyframes skeleton{0%{transform:translate(-37.5%)}to{transform:translate(37.5%)}}.ran-skeleton{position:relative;z-index:0;overflow:hidden;background:0 0;width:100%;height:16px;background:#0000000f;border-radius:4px}.ran-skeleton:after{position:absolute;top:0;inset-inline-end:-150%;bottom:0;inset-inline-start:-150%;background:linear-gradient(90deg,#0000000f 25%,#00000026 37%,#0000000f 63%);animation-name:skeleton;animation-duration:1.4s;animation-timing-function:ease;animation-iteration-count:infinite;content:""}';function wc(){if(typeof window<"u"&&!customElements.get("r-skeleton")){class x extends HTMLElement{constructor(){super(),bc(this,"_div"),this._div=document.createElement("div"),this._div.setAttribute("class","ran-skeleton");const p=this.attachShadow({mode:"closed"}),f=document.createElement("style");f.textContent=yc,p.appendChild(f),p.appendChild(this._div)}static get observedAttributes(){return["disabled"]}}window.customElements.define("r-skeleton",x)}}const Ec=wc(),Ac=Object.freeze(Object.defineProperty({__proto__:null,default:Ec},Symbol.toStringTag,{value:"Module"}));var xc=Object.defineProperty,kc=(x,h,p)=>h in x?xc(x,h,{enumerable:!0,configurable:!0,writable:!0,value:p}):x[h]=p,hn=(x,h,p)=>kc(x,typeof h!="symbol"?h+"":h,p);const Tc=".remove-wap-active-focus{outline:0;-webkit-tap-highlight-color:transparent}.remove-wap-active-focus:active,.remove-wap-active-focus:focus{outline:0;-webkit-tap-highlight-color:transparent}";function _c(){if(typeof window<"u"&&!customElements.get("r-tab")){class x extends HTMLElement{constructor(){super(),hn(this,"_div"),hn(this,"parent"),hn(this,"initAttribute",()=>{var w,T,_;this.parent=this.parentNode,this.key&&((w=this.parent)==null||w.updateAttribute(this.key,"icon",this.icon)),this.key&&((T=this.parent)==null||T.updateAttribute(this.key,"iconSize",this.iconSize)),this.key&&((_=this.parent)==null||_.updateAttribute(this.key,"effect",this.effect))}),this._div=document.createElement("slot");const p=this.attachShadow({mode:"closed"}),f=document.createElement("style");f.textContent=Tc,p.appendChild(f),p.appendChild(this._div)}static get observedAttributes(){return["label","key","disabled","icon","effect","iconSize"]}get label(){return this.getAttribute("label")||""}set label(p){this.setAttribute("label",p)}get icon(){return this.getAttribute("icon")}set icon(p){!p||p==="false"?this.removeAttribute("icon"):this.setAttribute("icon",p)}get iconSize(){return this.getAttribute("iconSize")}set iconSize(p){!p||p==="false"?this.removeAttribute("iconSize"):this.setAttribute("iconSize",p)}get key(){return this.getAttribute("r-key")}set key(p){p?this.setAttribute("r-key",p):this.removeAttribute("r-key")}get disabled(){return this.getAttribute("disabled")}set disabled(p){!p||p==="false"?this.removeAttribute("disabled"):this.setAttribute("disabled",p)}get effect(){return this.getAttribute("effect")}set effect(p){!p||p==="false"?this.removeAttribute("effect"):this.setAttribute("effect",p)}onClick(p){}connectedCallback(){this._div.addEventListener("click",this.onClick),document.addEventListener("DOMContentLoaded",this.initAttribute)}disconnectCallback(){document.removeEventListener("DOMContentLoaded",this.initAttribute)}attributeChangedCallback(p,f,w){var T,_,L,B,M;f!==w&&this.key&&((T=this.parent)!=null&&T.updateAttribute)&&(p==="icon"&&((_=this.parent)==null||_.updateAttribute(this.key,"icon",w)),p==="iconSize"&&((L=this.parent)==null||L.updateAttribute(this.key,"iconSize",w)),p==="effect"&&((B=this.parent)==null||B.updateAttribute(this.key,"effect",w)),p==="disabled"&&((M=this.parent)==null||M.updateAttribute(this.key,"disabled",w)))}}return customElements.define("r-tab",x),x}}const Sc=_c(),Cc=Object.freeze(Object.defineProperty({__proto__:null,default:Sc},Symbol.toStringTag,{value:"Module"}));var Lc=Object.defineProperty,Dc=(x,h,p)=>h in x?Lc(x,h,{enumerable:!0,configurable:!0,writable:!0,value:p}):x[h]=p,Se=(x,h,p)=>Dc(x,typeof h!="symbol"?h+"":h,p);const Rc='.remove-wap-active-focus{outline:0;-webkit-tap-highlight-color:transparent}.remove-wap-active-focus:active,.remove-wap-active-focus:focus{outline:0;-webkit-tap-highlight-color:transparent}.ran-tab ::slotted(r-tab){box-sizing:border-box;width:100%;height:100%;padding:10px;flex-shrink:0;overflow:auto;text-align:start}.ran-tab-header{position:relative;overflow:hidden;scroll-behavior:smooth}.ran-tab-header-nav{display:flex;flex-flow:row nowrap;justify-content:flex-start;align-items:center}.ran-tab-header-nav::-webkit-scrollbar{display:none}.ran-tab-header-nav-item{flex-shrink:0}.ran-tab-header-nav .active{color:var(--active-color, #1890ff)}.ran-tab-header-line{position:absolute;width:0;margin-top:-2px;height:2px;border-radius:2px;background:var(--line-color, #1890ff);transition:.2s}.ran-tab-content{overflow:hidden}.ran-tab-content-wrap{display:flex;width:100%;height:100%;transition:.2s}:host([type="line"]) .ran-tab-header-nav-item{border:solid 1px transparent}:host([type="line"]) .ran-tab-header-nav .active{color:var(--line-color, #1890ff);border:solid 1px transparent;border-color:var(--border-color, rgba(0, 0, 0, .2)) var(--border-color, rgba(0, 0, 0, .2)) transparent;border-radius:var(--border-radius, .25em) var(--border-radius, .25em) 0 0}:host([type="line"]) .ran-tab-header-line{transition:none;visibility:hidden}:host([type="line"]) .ran-tab-header-line:after,:host([type="line"]) .ran-tab-header-line:before{content:"";position:absolute;visibility:visible;width:9999px;height:1px;bottom:0;background:var(--border-color, rgba(0, 0, 0, .2))}:host([type="line"]) .ran-tab-header-line:after{left:100%}:host([type="line"]) .ran-tab-header-line:before{right:100%}:host([align="center"]) .ran-tab-header-nav{justify-content:center}:host([align="center"]) .ran-tab-header-line{left:50%}:host([align="end"]) .ran-tab-header-nav{justify-content:flex-end}';function Ic(){if(typeof window<"u"&&!customElements.get("r-tabs")){class x extends HTMLElement{constructor(){super(),Se(this,"_container"),Se(this,"_header"),Se(this,"_nav"),Se(this,"_line"),Se(this,"_content"),Se(this,"_wrap"),Se(this,"_slot"),Se(this,"tabHeaderKeyMapIndex"),Se(this,"initTabHeaderKeyMapIndex",(w,T)=>{if(this.tabHeaderKeyMapIndex[w])throw new Error("tab  key  tab  key ");this.tabHeaderKeyMapIndex[w]=T}),Se(this,"initTabLineAlignCenter",()=>{const{length:w}=this._nav.children;let T=0;for(let _=0;_<w;_++){const{width:L=0}=this._nav.children[_].getBoundingClientRect();T+=L}this._line.style.setProperty("left",`calc(50% - ${T/2}px)`)}),Se(this,"initTabLineAlignEnd",()=>{const{length:w}=this._nav.children;let T=0;for(let _=0;_<w;_++){const{width:L=0}=this._nav.children[_].getBoundingClientRect();T+=L}this._line.style.setProperty("left",`calc(100% - ${T}px)`)}),Se(this,"setTabLine",w=>{if(w){const T=this.tabHeaderKeyMapIndex[w],_=this._nav.children[T],{width:L=0}=_.getBoundingClientRect();this._line.style.setProperty("width",`${L}px`);let B=0;for(let M=0;M<T;M++){const j=this._nav.children[M],{width:$=0}=j.getBoundingClientRect();B+=$}this._line.style.setProperty("transform",`translateX(${B}px)`)}}),Se(this,"setTabContent",w=>{if(w){const T=this.tabHeaderKeyMapIndex[w];this._wrap.style.setProperty("transform",`translateX(${T*-100}%)`)}}),Se(this,"clickTabHead",w=>{const T=w.target,_=T.getAttribute("r-key");!Ce(T)&&_&&(this.setAttribute("active",_),this.setTabLine(_),this.setTabContent(_),Td(this._nav,"active"),Pe(T,"active"))}),Se(this,"updateAttribute",(w,T,_="")=>{var L,B;const M=this.tabHeaderKeyMapIndex[w];w&&_&&this._nav.children[M]?(L=this._nav.children[M])==null||L.setAttribute(T,_):(B=this._nav.children[M])==null||B.removeAttribute(T)}),Se(this,"initActive",()=>{const w=[...this._nav.children],T=w.filter(M=>!Ce(M));let _;if(this.active!=null&&(_=T.find(M=>M.getAttribute("r-key")===this.active),_==null||_.setAttribute("r-key",this.active)),_||(_=T.shift()),!_)return;const L=w.findIndex(M=>M===_),B=(_==null?void 0:_.getAttribute("r-key"))||`${L}`;B!=null&&(this.setAttribute("active",`${B}`),Pe(_,"active"),this.setTabContent(B),setTimeout(()=>{this.setTabLine(B)},200))}),Se(this,"listenSlotChange",()=>{this._slot.assignedElements().forEach((T,_)=>{const L=this.createTabHeader(T,_);this._nav.appendChild(L),L.addEventListener("click",this.clickTabHead)}),this.initActive(),this.align&&(this.align==="center"&&this.initTabLineAlignCenter(),this.align==="end"&&this.initTabLineAlignEnd())}),Se(this,"initTab",()=>{this._slot.addEventListener("slotchange",this.listenSlotChange)}),Se(this,"unloadTab",()=>{this._slot.removeEventListener("slotchange",this.listenSlotChange)}),this._container=document.createElement("div"),this._container.setAttribute("class","ran-tab"),this._header=document.createElement("div"),this._header.setAttribute("class","ran-tab-header"),this._nav=document.createElement("div"),this._nav.setAttribute("class","ran-tab-header-nav"),this._line=document.createElement("div"),this._line.setAttribute("class","ran-tab-header-line"),this._content=document.createElement("div"),this._content.setAttribute("class","ran-tab-content"),this._wrap=document.createElement("div"),this._wrap.setAttribute("class","ran-tab-content-wrap"),this._slot=document.createElement("slot"),this._wrap.appendChild(this._slot),this._content.appendChild(this._wrap),this._header.appendChild(rt([this._nav,this._line])),this._container.appendChild(rt([this._header,this._content])),this.tabHeaderKeyMapIndex={};const p=this.attachShadow({mode:"closed"}),f=document.createElement("style");f.textContent=Rc,p.appendChild(f),p.appendChild(this._container)}static get observedAttributes(){return["active","forceRender","type","align","effect"]}get align(){return this.getAttribute("align")||"start"}set align(p){this.setAttribute("align",p)}set type(p){this.setAttribute("type",p)}get type(){return this.getAttribute("type")||"flat"}get active(){return this.getAttribute("active")}set active(p){p?(this.setAttribute("active",p),this.setTabLine(p),this.setTabContent(p)):this.removeAttribute("active")}get effect(){return this.getAttribute("effect")}set effect(p){!p||p==="false"?this.removeAttribute("effect"):this.setAttribute("effect",p)}createTabHeader(p,f){const w=p.getAttribute("label")||"",T=p.getAttribute("icon")||"",_=p.getAttribute("iconSize")||"",L=p.getAttribute("r-key")||`${f}`,B=p.getAttribute("type")||"text";this.initTabHeaderKeyMapIndex(L,f);const M=document.createElement("r-button");return M.setAttribute("class","tab-header-nav-item"),M.setAttribute("type",B),T&&M.setAttribute("icon",T),_&&M.setAttribute("iconSize",_),Ce(p)&&M.setAttribute("disabled",""),M.setAttribute("r-key",L),this.effect&&(p.setAttribute("effect",this.effect),this._line.style.setProperty("display","none")),p.setAttribute("r-key",L),M.innerHTML=w,M}connectedCallback(){this.initTab()}disconnectCallback(){this.unloadTab()}attributeChangedCallback(p,f,w){f!==w&&(this.dispatchEvent(new CustomEvent("change",{detail:{active:this.active}})),p==="align"&&(w==="center"&&this.initTabLineAlignCenter(),w==="end"&&this.initTabLineAlignEnd()),p==="effect"&&[...this._nav.children].forEach(_=>{!this.effect||this.effect==="false"?_.removeAttribute("effect"):_.setAttribute("effect",w)}),p==="active"&&this.setAttribute(p,w))}}return customElements.define("r-tabs",x),x}}const Pc=Ic(),Oc=Object.freeze(Object.defineProperty({__proto__:null,default:Pc},Symbol.toStringTag,{value:"Module"}));var Mc=Object.defineProperty,Fc=(x,h,p)=>h in x?Mc(x,h,{enumerable:!0,configurable:!0,writable:!0,value:p}):x[h]=p,ct=(x,h,p)=>Fc(x,typeof h!="symbol"?h+"":h,p);const Bc=".remove-wap-active-focus{outline:0;-webkit-tap-highlight-color:transparent}.remove-wap-active-focus:active,.remove-wap-active-focus:focus{outline:0;-webkit-tap-highlight-color:transparent}.ran-radar{position:var(--ran-radar-position, relative);width:var(--ran-radar-width, 100%);height:var(--ran-radar-height, 100%);display:var(--ran-radar-display, block)}",Nc="rgba(0,0,0,0)",Uc="rgba(0,0,0,1)",Mo="#e6e6e6",Fo="#e6e6e6",Gc="",Bo="rgba(255,121,35,0.60)",No="rgba(255,121,35,0.60)";function Hc(){if(typeof document<"u"&&!customElements.get("r-radar")){class x extends HTMLElement{constructor(){super(),ct(this,"mData"),ct(this,"mCount"),ct(this,"mW"),ct(this,"mCenter"),ct(this,"mRadius"),ct(this,"mAngle"),ct(this,"abilityRadarChartContainer"),ct(this,"abilityRadarChart"),ct(this,"_iconElement"),ct(this,"_shadowDom"),this.abilityRadarChartContainer=document.createElement("div"),this.abilityRadarChartContainer.setAttribute("class","ran-radar"),this.abilityRadarChart=document.createElement("canvas"),this.abilityRadarChart.style.setProperty("width","100%"),this.abilityRadarChart.style.setProperty("height","100%"),this.abilityRadarChartContainer.appendChild(this.abilityRadarChart);const p=this.attachShadow({mode:"closed"}),f=document.createElement("style");f.textContent=Bc,p.appendChild(f),this._shadowDom=p,p.appendChild(this.abilityRadarChartContainer)}static get observedAttributes(){return["abilitys","colorPolygon","colorLine","fillColor","strokeColor"]}get abilitys(){const p=this.getAttribute("abilitys");if(typeof p=="string")try{return JSON.parse(p)}catch(f){return console.error(`Failed to parse the rule in JSON.parse: ${p}, error: ${f}`),p}return p}set abilitys(p){typeof p=="string"?this.setAttribute("abilitys",p||""):this.setAttribute("abilitys",JSON.stringify(p)||"")}get colorPolygon(){return this.getAttribute("colorPolygon")||Mo}set colorPolygon(p){this.setAttribute("colorPolygon",p||Mo)}get colorLine(){return this.getAttribute("colorLine")||Fo}set colorLine(p){this.setAttribute("colorLine",p||Fo)}get fillColor(){return this.getAttribute("fillColor")||Bo}set fillColor(p){this.setAttribute("fillColor",p||Bo)}get strokeColor(){return this.getAttribute("strokeColor")||No}set strokeColor(p){this.setAttribute("strokeColor",p||No)}refreshData(){var p;const f=this.abilityRadarChart.getContext("2d");if(!this.abilityRadarChartContainer||!f)return;const w=tr(f),T=this.abilityRadarChartContainer.clientWidth*w,_=this.abilityRadarChartContainer.clientHeight*w;this.abilityRadarChart.width=T,this.abilityRadarChart.height=_,this.mW=T,this.mData=this.abilitys,this.mCount=((p=this.mData)==null?void 0:p.length)||1,this.mCenter=this.mW/2,this.mRadius=this.mCenter-50*w,this.mAngle=Math.PI*2/this.mCount,this.drawPolygon(f),this.drawSide(f),this.drawLines(f),this.drawText(f),this.drawRegion(f),this.drawCircle(f)}drawSide(p){if(!this.mRadius||!this.mCount||!this.mCenter||!this.mAngle)return;p.save(),p.strokeStyle=this.colorLine;const f=this.mRadius;for(let w=0;w<this.mCount;w++){const T=this.mCenter+f*Math.sin(this.mAngle*w),_=this.mCenter+f*Math.cos(this.mAngle*w);p.lineTo(T,_)}p.closePath(),p.stroke()}drawPolygon(p){if(!this.mRadius||!this.mCount||!this.mCenter||!this.mAngle)return;p.save(),p.strokeStyle=this.colorPolygon;const f=this.mRadius/4;p.setLineDash([6,6]);for(let w=0;w<4;w++){p.beginPath();const T=f*(w+1);for(let _=0;_<this.mCount;_++){const L=this.mCenter+T*Math.sin(this.mAngle*_),B=this.mCenter+T*Math.cos(this.mAngle*_);p.lineTo(L,B)}p.closePath(),p.stroke()}p.restore()}drawLines(p){if(!(!this.mRadius||!this.mCount||!this.mCenter||!this.mAngle)){p.save(),p.beginPath(),p.strokeStyle=this.colorLine;for(let f=0;f<this.mCount;f++){const w=this.mCenter+this.mRadius*Math.sin(this.mAngle*f),T=this.mCenter+this.mRadius*Math.cos(this.mAngle*f);p.moveTo(this.mCenter,this.mCenter),p.lineTo(w,T)}p.stroke(),p.restore()}}drawText(p){var f,w,T,_;if(!this.mRadius||!this.mCount||!this.mCenter||!this.mAngle||!this.mData)return;p.save();const L=tr(p),B=this.mCenter/12;for(let M=0;M<this.mCount;M++){const j=this.mCenter+this.mRadius*Math.sin(this.mAngle*M),$=this.mCenter+this.mRadius*Math.cos(this.mAngle*M),he=((f=this.mData[M])==null?void 0:f.backgroundColor)||Nc,ie=((w=this.mData[M])==null?void 0:w.fontColor)||Uc,le=((T=this.mData[M])==null?void 0:T.fontFamily)||Gc,de=((_=this.mData[M])==null?void 0:_.fontSize)||B;p.font=`${de}px ${le}`,this.mAngle*M>=0&&this.mAngle*M<Math.PI/2?this.drawButton(p,he,j,$,44*L,24*L,12*L,this.mData[M].abilityName,ie,le,de):this.mAngle*M>=Math.PI/2&&this.mAngle*M<Math.PI?this.drawButton(p,he,j,$-24*L,44*L,24*L,12*L,this.mData[M].abilityName,ie,le,de):this.mAngle*M>=Math.PI&&this.mAngle*M<Math.PI*3/2?this.drawButton(p,he,j-44*L,$-24*L,44*L,24*L,12*L,this.mData[M].abilityName,ie,le,de):this.drawButton(p,he,j-44*L,$,44*L,24*L,12*L,this.mData[M].abilityName,ie,le,de)}p.restore()}drawButton(p,f,w,T,_,L,B,M,j,$,he){p.beginPath();const ie=tr(p);p.fillStyle=f,p.moveTo(w+B,T),p.lineTo(w+_-B,T),p.arc(w+_-B,T+B,B,Math.PI*3/2,Math.PI*2),p.lineTo(w+_,T+L-B),p.arc(w+_-B,T+L-B,B,Math.PI,Math.PI/2),p.lineTo(w+B,T+L),p.arc(w+B,T+L-B,B,Math.PI/2,Math.PI),p.lineTo(w,T+B),p.arc(w+B,T+B,B,Math.PI,Math.PI*3/2),p.fill(),p.closePath(),p.beginPath(),p.fillStyle=j,p.font=`${he||12*ie}px ${$}`,p.textAlign="center",p.textBaseline="middle",p.fillText(M,w+_/2,T+L/2)}drawRegion(p){if(!this.mRadius||!this.mCount||!this.mCenter||!this.mAngle||!this.mData)return;const f=tr(p);p.save(),p.beginPath();for(let w=0;w<this.mCount;w++){const T=this.mCenter+this.mRadius*Math.sin(this.mAngle*w)*this.mData[w].scoreRate/100,_=this.mCenter+this.mRadius*Math.cos(this.mAngle*w)*this.mData[w].scoreRate/100;p.lineTo(T,_)}p.closePath(),p.fillStyle=this.fillColor,p.fill(),p.strokeStyle=this.strokeColor,p.lineWidth=1*f,p.stroke(),p.restore()}drawCircle(p){if(!this.mRadius||!this.mCount||!this.mCenter||!this.mAngle||!this.mData)return;const f=tr(p);p.save();for(let w=0;w<this.mCount;w++){const T=this.mCenter+this.mRadius*Math.sin(this.mAngle*w)*this.mData[w].scoreRate/100,_=this.mCenter+this.mRadius*Math.cos(this.mAngle*w)*this.mData[w].scoreRate/100;p.beginPath(),p.arc(T,_,3,0,Math.PI*2),p.lineWidth=1.5*f,p.strokeStyle=this.strokeColor,p.stroke()}p.restore()}connectedCallback(){this.refreshData()}attributeChangedCallback(p,f,w){["abilitys","colorPolygon","colorLine","fillColor","strokeColor"].includes(p)&&this.abilityRadarChartContainer&&f!==w&&this.refreshData()}}return customElements.define("r-radar",x),x}else return Oe("document is undefined or r-radar is exist")}const Kc=Hc(),Vc=Object.freeze(Object.defineProperty({__proto__:null,default:Kc},Symbol.toStringTag,{value:"Module"}));var zc=Object.defineProperty,Yc=(x,h,p)=>h in x?zc(x,h,{enumerable:!0,configurable:!0,writable:!0,value:p}):x[h]=p,St=(x,h,p)=>Yc(x,typeof h!="symbol"?h+"":h,p);const jc='.remove-wap-active-focus{outline:0;-webkit-tap-highlight-color:transparent}.remove-wap-active-focus:active,.remove-wap-active-focus:focus{outline:0;-webkit-tap-highlight-color:transparent}@keyframes ranui-dropdown-up-in{0%{transform:scaleY(.8);transform-origin:100% 100%;opacity:0}to{transform:scaleY(1);transform-origin:100% 100%;opacity:1}}@keyframes ranui-dropdown-up-out{0%{transform:scaleY(1);transform-origin:100% 100%;opacity:1}to{transform:scaleY(.8);transform-origin:100% 100%;opacity:0}}@keyframes ranui-dropdown-down-in{0%{transform:scaleY(.8);transform-origin:0% 0%;opacity:0}to{transform:scaleY(1);transform-origin:0% 0%;opacity:1}}@keyframes ranui-dropdown-down-out{0%{transform:scaleY(1);transform-origin:0% 0%;opacity:1}to{transform:scaleY(.8);transform-origin:0% 0%;opacity:0}}@keyframes ranui-dropdown-left-in{0%{transform:scaleX(.8);transform-origin:100% 0%;opacity:0}to{transform:scaleX(1);transform-origin:100% 0%;opacity:1}}@keyframes ranui-dropdown-left-out{0%{transform:scaleX(1);transform-origin:100% 0%;opacity:1}to{transform:scaleX(.8);transform-origin:100% 0%;opacity:0}}@keyframes ranui-dropdown-right-in{0%{transform:scaleX(.8);transform-origin:0% 0%;opacity:0}to{transform:scaleX(1);transform-origin:0% 0%;opacity:1}}@keyframes ranui-dropdown-right-out{0%{transform:scaleX(1);transform-origin:0% 0%;opacity:1}to{transform:scaleX(.8);transform-origin:0% 0%;opacity:0}}.ran-dropdown-down-in{animation:ranui-dropdown-down-in .1s;animation-fill-mode:forwards}.ran-dropdown-down-out{animation:ranui-dropdown-down-out .1s;animation-fill-mode:forwards}.ran-dropdown-up-in{animation:ranui-dropdown-up-in .1s;animation-fill-mode:forwards}.ran-dropdown-up-out{animation:ranui-dropdown-up-out .1s;animation-fill-mode:forwards}.ran-dropdown-left-in{animation:ranui-dropdown-left-in .1s;animation-fill-mode:forwards}.ran-dropdown-left-out{animation:ranui-dropdown-left-out .1s;animation-fill-mode:forwards}.ran-dropdown-right-in{animation:ranui-dropdown-right-in .1s;animation-fill-mode:forwards}.ran-dropdown-right-out{animation:ranui-dropdown-right-out .1s;animation-fill-mode:forwards}:host{text-align:var(--ran-dropdown-host-text-align, left);z-index:10}.ranui-dropdown{transform-origin:var(--ran-x, 50%) var(--ran-y, 50%);box-sizing:var(--ran-dropdown-box-sizing, border-box);margin:var(--ran-dropdown-margin, 0);padding:var(--ran-dropdown-padding, 0);color:var(--ran-dropdown-color, rgba(0, 0, 0, .88));font-size:var(--ran-dropdown-font-size, 14px);list-style:var(--ran-dropdown-list-style, none);font-family:var(--ran-dropdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji");z-index:var(--ran-dropdown-z-index, 1050);overflow:var(--ran-dropdown-overflow, hidden);font-variant:var(--ran-dropdown-font-variant, initial);background:var(--ran-dropdown-background, #ffffff);border-radius:var(--ran-dropdown-border-radius, 8px);outline:var(--ran-dropdown-outline, none);box-shadow:var(--ran-dropdown-box-shadow, 0 6px 16px 0 rgba(0, 0, 0, .08), 0 3px 6px -4px rgba(0, 0, 0, .12), 0 9px 28px 8px rgba(0, 0, 0, .05));cursor:var(--ran-dropdown-cursor, auto);width:var(--ran-dropdown-width, 100%);height:var(--ran-dropdown-height, 100%);min-height:var(--ran-popover-height, 100%);min-width:var(--ran-popover-width, 100%)}.ranui-dropdown-container{position:var(--ran-dropdown-container-position, relative);display:var(--ran-dropdown-container-display, block);width:var(--ran-dropdown-container-width, 100%);height:var(--ran-dropdown-container-height, 100%);box-sizing:var(--ran-dropdown-container-box-sizing, border-box)}.ranui-dropdown-container .top{transform:translate(calc(var(--ran-popover-width) / 2 - calc(var(--ran-dropdown-arrow-width, 16px) / 2))) translateY(-16px) rotate(0);top:0}.ranui-dropdown-container .bottom{transform:translate(calc(var(--ran-popover-width) / 2 - calc(var(--ran-dropdown-arrow-width, 16px) / 2))) translateY(0) rotate(180deg);top:calc(var(--ran-popover-height) - calc(var(--ran-dropdown-arrow-width, 16px) / 4),0px)}.ranui-dropdown-container .left{transform:translate(calc(0px - var(--ran-dropdown-arrow-width, 16px))) translateY(calc(var(--ran-dropdown-arrow-width, 16px) / 2)) rotate(270deg);top:max(0px,calc(var(--ran-popover-height) / 2 - calc(var(--ran-dropdown-arrow-width, 16px))))}.ranui-dropdown-container .right{left:100%;transform:translate(0) translateY(calc(var(--ran-popover-height) / 2 - calc(var(--ran-dropdown-arrow-width, 16px) / 2))) rotate(90deg);top:0}.ranui-dropdown-arrow{position:var(--ran-dropdown-arrow-position, absolute);box-sizing:var(--ran-dropdown-arrow-box-sizing, border-box);z-index:var(--ran-dropdown-arrow-z-index, 1);display:var(--ran-dropdown-arrow-display, block);pointer-events:var(--ran-dropdown-arrow-pointer-events, none);width:var(--ran-dropdown-arrow-width, var(--ran-dropdown-arrow-width, 16px));height:var(--ran-dropdown-arrow-height, var(--ran-dropdown-arrow-width, 16px));overflow:var(--ran-dropdown-arrow-overflow, hidden)}.ranui-dropdown-arrow:before{background:var(--ran-dropdown-arrow-before-background, #fff);position:var(--ran-dropdown-arrow-before-position, absolute);bottom:var(--ran-dropdown-arrow-before-bottom, 0);inset-inline-start:0;width:var(--ran-dropdown-arrow-before-width, var(--ran-dropdown-arrow-width, 16px));height:var(--ran-dropdown-arrow-before-height, calc(var(--ran-dropdown-arrow-width, 16px) / 2));clip-path:path("M 0 8 A 4 4 0 0 0 2.82842712474619 6.82842712474619 L 6.585786437626905 3.0710678118654755 A 2 2 0 0 1 9.414213562373096 3.0710678118654755 L 13.17157287525381 6.82842712474619 A 4 4 0 0 0 16 8 Z");content:var(--ran-dropdown-arrow-before-content, "")}.ranui-dropdown-arrow:after{content:var(--ran-dropdown-arrow-after-content, "");position:var(--ran-dropdown-arrow-after-position, absolute);width:var(--ran-dropdown-arrow-after-width, 9px);height:var(--ran-dropdown-arrow-after-height, 9px);bottom:var(--ran-dropdown-arrow-after-bottom, 0);inset-inline:0;margin:var(--ran-dropdown-arrow-after-margin, auto);border-radius:var(--ran-dropdown-arrow-after-border-radius, 0 0 2px 0);transform:var(--ran-dropdown-arrow-after-transform, translateY(50%) rotate(-135deg));box-shadow:var(--ran-dropdown-arrow-after-box-shadow, 2px 2px 5px rgba(0, 0, 0, .05));z-index:var(--ran-dropdown-arrow-after-z-index, 0);background:var(--ran-dropdown-arrow-after-background, transparent)}',Uo=300;class Go extends Be(){constructor(){super(),St(this,"dropdown"),St(this,"_slot"),St(this,"_shadowDom"),St(this,"arrowIcon"),St(this,"container"),St(this,"handlerTransit",()=>{this.transit&&(Pe(this.dropdown.element,this.transit),setTimeout(()=>{ze(this.dropdown.element,this.transit)},Uo))}),St(this,"handlerArrow",()=>{this.arrow&&(this.arrowIcon||(this.arrowIcon=V("div").setAttribute("class",`ranui-dropdown-arrow ${this.arrow}`),this.container.addChild([this.arrowIcon])))}),St(this,"stopPropagation",f=>{f.stopPropagation()}),this._slot=V("slot").setAttribute("class","slot"),this.dropdown=V("div").setStyle("-webkit-tap-highlight-color","transparent").setStyle("outline","0").setAttribute("class","ranui-dropdown").setAttribute("part","ranui-dropdown").addChild([this._slot]),this.container=V("div").setAttribute("class","ranui-dropdown-container").addChild([this.dropdown]);const h=this.attachShadow({mode:"closed"}),p=document.createElement("style");p.textContent=jc,h.appendChild(p),this._shadowDom=h,h.appendChild(this.container.element)}static get observedAttributes(){return["transit","arrow"]}get transit(){return this.getAttribute("transit")||""}set transit(h){h?this.setAttribute("transit",h):this.removeAttribute("transit")}get arrow(){return this.getAttribute("arrow")||""}set arrow(h){h?this.setAttribute("arrow",h):this.removeAttribute("arrow")}get show(){return this.getAttribute("show")||""}set show(h){h?this.setAttribute("show",h):this.removeAttribute("show")}connectedCallback(){this.handlerTransit(),this.handlerArrow()}disconnectedCallback(){}attributeChangedCallback(h,p,f){h==="transit"&&f&&(Pe(this.dropdown.element,this.transit),setTimeout(()=>{ze(this.dropdown.element,this.transit)},Uo)),h==="arrow"&&this.handlerArrow()}}function $c(){return typeof document<"u"&&!customElements.get("r-dropdown")?(customElements.define("r-dropdown",Go),Go):Oe("document is undefined or r-dropdown is exist")}$c();var qc=Object.defineProperty,Qc=(x,h,p)=>h in x?qc(x,h,{enumerable:!0,configurable:!0,writable:!0,value:p}):x[h]=p,se=(x,h,p)=>Qc(x,typeof h!="symbol"?h+"":h,p);const Wc='.remove-wap-active-focus{outline:0;-webkit-tap-highlight-color:transparent}.remove-wap-active-focus:active,.remove-wap-active-focus:focus{outline:0;-webkit-tap-highlight-color:transparent}r-select{position:var(--ran-select, relative);width:var(--ran-select, 120px);height:var(--ran-select, 40px)}:host{position:var(--ran-select-host, relative);display:var(--ran-select-host, inline-block);cursor:var(--ran-select-host, pointer);height:var(--ran-select-host, 32px);outline:var(--ran-select-host, 0);-webkit-tap-highlight-color:var(--ran-select-host-highlight-color, transparent)}:host,:host(:focus),:host(:active){outline:var(--ran-select-host-focus-outline, 0);-webkit-tap-highlight-color:transparent}:host ::slotted(r-option){display:none}:host([disabled]){cursor:var(--ran-select-host-disabled-cursor, not-allowed);pointer-events:var(--ran-select-host-disabled-pointer-events, all);opacity:var(--ran-select-host-disabled-opacity, .6)}:host([type="text"])::part(selection){border:none}:host([type="text"])::part(icon){display:none}:host(:not([disabled]):hover) .select{cursor:var(--ran-select-host-hover-cursor, pointer)}:host(:not([disabled]):hover) .selection{border:var(--ran-select-host-selection-border, 1px solid #1890ff)}:host(:not([disabled]):hover) .selection-search{cursor:var(--ran-select-host-selection-search-cursor, pointer)}:host(:not([disabled]):hover) .selection-item{cursor:var(--ran-select-host-selection-item-cursor, pointer);color:var(--ran-select-host-selection-item-color, #bfbfbf)}:host(:not([disabled]):focus) .selection{border:var(--ran-select-host-selection-focus-border, 1px solid #1890ff)}:host(:not([disabled]):focus) .selection-search{cursor:var(--ran-select-host-selection-focus-search-cursor, pointer)}:host(:not([disabled]):focus) .selection-item{cursor:var(--ran-select-host-selection-focus-item-cursor, pointer);color:var(--ran-select-host-selection-focus-item-color, #bfbfbf)}:host .selection-search{display:var(--ran-select-host-selection-search-display, none)}:host([showSearch]:not([disabled])) .selection-search{cursor:var(--ran-select-host-showSearch-selection-search-cursor, text);display:var(--ran-select-host-showSearch-selection-search-display, block)}:host([showSearch]:not([disabled])) .selection-item{cursor:var(--ran-select-host-showSearch-selection-item-cursor, pointer)}:host([showSearch]:not([disabled]):focus) .selection-search{display:var(--ran-select-host-showSearch-selection-search-display, block);cursor:var(--ran-select-host-showSearch-selection-search-cursor, text);opacity:var(--ran-select-host-showSearch-selection-search-opacity, 1)}.ran-select{width:var(--ran-select-width, 100%);height:var(--ran-select-width, 100%);font-size:var(--ran-select-font-size, 14px);box-sizing:var(--ran-select-box-sizing, border-box);margin:var(--ran-select-margin, 0);padding:var(--ran-select-padding, 0);color:var(--ran-select-color, rgba(0, 0, 0, .88));line-height:var(--ran-select-line-height, 1.57142857);list-style:var(--ran-select-list-style, none);font-family:var(--ran-select-font-family, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji");position:var(--ran-select-position, relative);display:var(--ran-select-display, inline-block)}.ran-select .selection{position:var(--ran-select-selection-position, relative);background-color:var(--ran-select-selection-background-color, #ffffff);border:var(--ran-select-selection-border, 1px solid #d9d9d9);transition:var(--ran-select-selection-transition, all .2s cubic-bezier(.645, .045, .355, 1));width:var(--ran-select-selection-width, 100%);height:var(--ran-select-selection-height, 100%);padding:var(--ran-select-selection-padding, 0 11px);box-sizing:var(--ran-select-selection-box-sizing, border-box);margin:var(--ran-select-selection-margin, 0);color:var(--ran-select-selection-color, rgba(0, 0, 0, .88));font-size:var(--ran-select-selection-font-size, 14px);line-height:var(--ran-select-selection-line-height, 1.57142857);list-style:var(--ran-select-selection-list-style, none);font-family:var(--ran-select-selection-font-family, inherit);display:var(--ran-select-selection-display, flex);border-radius:var(--ran-select-selection-border-radius, 6px)}.ran-select .selection-search{position:var(--ran-select-selection-search-position, absolute);opacity:var(--ran-select-selection-search-opacity, 0);top:var(--ran-select-selection-search-top, 0);left:var(--ran-select-selection-search-left, 0);height:var(--ran-select-selection-search-height, 100%);inset-inline-start:var(--ran-select-selection-search-inset-inline-start, 11px);inset-inline-end:var(--ran-select-selection-search-inset-inline-end, 11px);margin:var(--ran-select-selection-search-margin, 0);padding:var(--ran-select-selection-search-padding, 0);background:var(--ran-select-selection-search-background, transparent);border:var(--ran-select-selection-search-border, none);outline:var(--ran-select-selection-search-outline, none);-webkit-appearance:var(--ran-select-selection-search-appearance, none);-moz-appearance:var(--ran-select-selection-search-appearance, none);appearance:var(--ran-select-selection-search-appearance, none);font-family:var(--ran-select-selection-search-font-family, inherit);cursor:var(--ran-select-selection-search-cursor, not-allowed)}.ran-select .selection-search::-webkit-search-cancel-button{display:none;-webkit-appearance:none}.ran-select .selection-search::part(ran-input){border:none;padding:0;height:100%;outline:none}.ran-select .selection-search::part(ran-input):active{border:none;padding:0;height:100%;outline:none;border-color:transparent;box-shadow:none;border-right-width:0px}.ran-select .selection-item{position:var(--ran-select-selection-item-position, absolute);top:var(--ran-select-selection-item-top, 0);left:var(--ran-select-selection-item-left, 12px);margin:var(--ran-select-selection-item-margin, 0);padding:var(--ran-select-selection-item-padding, 0);background:var(--ran-select-selection-item-background, transparent);border:var(--ran-select-selection-item-border, none);outline:var(--ran-select-selection-item-outline, none);-webkit-appearance:var(--ran-select-selection-item-appearance, none);-moz-appearance:var(--ran-select-selection-item-appearance, none);appearance:var(--ran-select-selection-item-appearance, none);font-family:var(--ran-select-selection-item-font-family, inherit);height:var(--ran-select-selection-item-height, 100%);-webkit-user-select:var(--ran-select-selection-item-user-select, none);user-select:var(--ran-select-selection-item-user-select, none);overflow:var(--ran-select-selection-item-overflow, hidden);white-space:var(--ran-select-selection-item-white-space, nowrap);text-overflow:var(--ran-select-selection-item-text-overflow, ellipsis);cursor:var(--ran-select-selection-item-cursor, pointer)}.ran-select .selection-select{color:var(--ran-select-selection-select-color, rgba(0, 0, 0, .25))}.ran-select .selection .icon{display:var(--ran-select-selection-icon-display, flex);align-items:var(--ran-select-selection-icon-align-items, center);color:var(--ran-select-selection-icon-color, rgba(0, 0, 0, .25));font-style:var(--ran-select-selection-icon-font-style, normal);text-align:var(--ran-select-selection-icon-text-align, center);text-transform:var(--ran-select-selection-icon-text-transform, none);text-rendering:var(--ran-select-selection-icon-text-rendering, optimizeLegibility);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;position:var(--ran-select-selection-icon-position, absolute);top:var(--ran-select-selection-icon-top, 50%);inset-inline-start:var(--ran-select-selection-icon-inset-inline-start, auto);inset-inline-end:var(--ran-select-selection-icon-inset-inline-end, 8px);height:var(--ran-select-selection-icon-height, 12px);margin-top:var(--ran-select-selection-icon-margin-top, -3px);font-size:var(--ran-select-selection-icon-font-size, 12px);pointer-events:var(--ran-select-selection-icon-color, pointer-events)}';function Xc(){if(typeof document<"u"&&!customElements.get("r-option")){class x extends HTMLElement{constructor(){super(),se(this,"_option"),se(this,"_optionContent"),se(this,"_shadowDom"),se(this,"_slot"),this._slot=document.createElement("slot"),this._option=document.createElement("div"),this._option.setAttribute("class","ran-option"),this._optionContent=document.createElement("div"),this._optionContent.setAttribute("class","ran-option-content"),this._optionContent.appendChild(this._slot),this._option.appendChild(this._optionContent);const p=this.attachShadow({mode:"closed"});this._shadowDom=p,p.appendChild(this._option)}static get observedAttributes(){return["disabled","sheet","value"]}get value(){return this.getAttribute("value")}set value(p){this.setAttribute("value",p||"")}get sheet(){return this.getAttribute("sheet")}set sheet(p){this.setAttribute("sheet",p||"")}get disabled(){return Ce(this)}set disabled(p){!p||p==="false"?this.removeAttribute("disabled"):this.setAttribute("disabled","")}handlerExternalCss(){if(this.sheet)try{const p=new CSSStyleSheet;p.insertRule(this.sheet),this._shadowDom.adoptedStyleSheets=[p]}catch(p){console.error(`Failed to parse the rule in CSSStyleSheet: ${this.sheet}, error: ${p}`)}}attributeChangedCallback(p,f,w){p==="disabled"&&this._option&&(!w||w==="false"?this._option.setAttribute("disabled",""):this._option.removeAttribute("disabled")),p==="sheet"&&this._shadowDom&&f!==w&&this.handlerExternalCss()}}return x}else return Oe("document is undefined or r-option is exist")}Xc();const Jc='.remove-wap-active-focus{outline:0;-webkit-tap-highlight-color:transparent}.remove-wap-active-focus:active,.remove-wap-active-focus:focus{outline:0;-webkit-tap-highlight-color:transparent}.ranui-dropdown-option-item{position:var(--ran-dropdown-option-item-position, relative);display:var(--ran-dropdown-option-item-display, block);padding:var(--ran-dropdown-option-item-padding, 5px 12px);color:var(--ran-dropdown-option-item-color, rgba(0, 0, 0, .88));font-weight:var(--ran-dropdown-option-item-font-weight, normal);font-size:var(--ran-dropdown-option-item-font-size, 14px);transition:var(--ran-dropdown-option-item-transition, background .3s ease);border-radius:var(--ran-dropdown-option-item-border-radius, 4px)}.ranui-dropdown-option-item:hover{background-color:var(--ran-dropdown-option-item-hover-background-color, rgba(0, 0, 0, .04))}.ranui-dropdown-option-item-content{text-align:var(--ran-dropdown-content-text-align, left);overflow:var(--ran-dropdown-content-overflow, hidden);white-space:var(--ran-dropdown-content-white-space, nowrap);text-overflow:var(--ran-dropdown-content-text-overflow, ellipsis);color:var(--ran-dropdown-content-color, rgba(0, 0, 0, .88));font-size:var(--ran-dropdown-content-font-size, 14px);line-height:var(--ran-dropdown-content-line-height, 1.57142857);box-sizing:var(--ran-dropdown-content-box-sizing, border-box);list-style:var(--ran-dropdown-content-list-style, none);font-family:var(--ran-dropdown-content-font-family, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji");font-variant:var(--ran-dropdown-content-font-variant, initial)}.ranui-dropdown-option-active{background-color:var(--ran-dropdown-option-active-background-color, #e6f7ff);font-weight:var(--ran-dropdown-option-active-font-weight, bold)}.ranui-dropdown-option-active:hover{background-color:var(--ran-dropdown-option-active-hover-background-color, #e6f7ff)}';class Ho extends Be(){constructor(){super(),se(this,"ionDropdownItem"),se(this,"_slot"),se(this,"_shadowDom"),se(this,"ionDropdownItemContent"),this._slot=V("slot").setAttribute("class","slot"),this.ionDropdownItemContent=V("div").setAttribute("class","ranui-dropdown-option-item-content").setAttribute("part","ranui-dropdown-option-item-content").addChild(this._slot),this.ionDropdownItem=V("div").setAttribute("class","ranui-dropdown-option-item").setAttribute("part","ranui-dropdown-option-item").addChild([this.ionDropdownItemContent]);const h=this.attachShadow({mode:"closed"});this._shadowDom=h;const p=V("style").setTextContent(Jc);h.appendChild(p.element),h.appendChild(this.ionDropdownItem.element)}static get observedAttributes(){return["active","value","title"]}get value(){return this.getAttribute("value")||""}set value(h){!Ce(this)&&h?this.setAttribute("value",h):this.removeAttribute("value")}get active(){return this.getAttribute("active")||""}set active(h){h?this.setAttribute("active",h):this.removeAttribute("active")}get title(){return this.getAttribute("title")||""}set title(h){h?this.setAttribute("title",h):this.removeAttribute("title")}connectedCallback(){this.active&&Pe(this.ionDropdownItem.element,"ranui-dropdown-option-active")}attributeChangedCallback(h,p,f){h==="active"&&f?Pe(this.ionDropdownItem.element,"ranui-dropdown-option-active"):ze(this.ionDropdownItem.element,"ranui-dropdown-option-active")}}function Zc(){return typeof document<"u"&&!customElements.get("r-dropdown-item")?(customElements.define("r-dropdown-item",Ho),Ho):Oe("document is undefined or r-dropdown-item  is exist")}Zc();const Ko={bottom:{add:"ran-dropdown-down-in",remove:"ran-dropdown-down-out"},top:{add:"ran-dropdown-up-in",remove:"ran-dropdown-up-out"}},eh=ai(),Vo=300;let vn=class extends Be(){constructor(){super(),se(this,"removeTimeId"),se(this,"_slot"),se(this,"_shadowDom"),se(this,"_select"),se(this,"_selection"),se(this,"_search"),se(this,"_icon"),se(this,"_selectDropdown"),se(this,"_selectionDropdown"),se(this,"_selectDropDownInTimeId"),se(this,"_selectDropDownOutTimeId"),se(this,"_optionList"),se(this,"_optionLabelMapValue"),se(this,"_optionValueMapLabel"),se(this,"_activeOption"),se(this,"_text"),se(this,"_selector"),se(this,"onSearch"),se(this,"setSelectDropdownDisplayNone",()=>{this._selectDropDownOutTimeId||this._selectionDropdown&&this._selectionDropdown.style.display!=="none"&&(this._selectionDropdown.setAttribute("transit",Ko[this.placement].remove),this._selectDropDownOutTimeId=setTimeout(()=>{var f;(f=this._selectionDropdown)==null||f.style.setProperty("display","none"),this._selectionDropdown&&this._selectionDropdown.removeAttribute("transit"),clearTimeout(this._selectDropDownOutTimeId),this._selectDropDownOutTimeId=void 0},Vo))}),se(this,"setSelectDropdownDisplayBlock",()=>{var f;this._selectDropDownInTimeId||this._selectionDropdown&&this._selectionDropdown.style.display!=="block"&&(this._selectionDropdown.setAttribute("transit",Ko[this.placement].add),(f=this._selectionDropdown)==null||f.style.setProperty("display","block"),this._selectDropDownInTimeId=setTimeout(()=>{this._selectionDropdown&&this._selectionDropdown.removeAttribute("transit"),clearTimeout(this._selectDropDownInTimeId),this._selectDropDownInTimeId=void 0},Vo))}),se(this,"placementPosition",()=>{if(!this._selectionDropdown||!this._selectDropdown)return;const f=this.getBoundingClientRect(),{top:w,left:T,bottom:_,width:L}=f,B=document.getElementById(this.getPopupContainerId);this._selectionDropdown.style.setProperty("position","absolute"),this._selectionDropdown.style.setProperty("--ran-x",`${w+window.scrollX}`),this._selectionDropdown.style.setProperty("--ran-y",`${T+window.scrollY}`);let M=_+window.scrollY,j=T+window.scrollX;if(this._selectionDropdown.style.setProperty("width",`${L}px`),this.placement==="top"&&(M=w+window.scrollY-this._selectionDropdown.clientHeight),this.getPopupContainerId&&B){const $=B.getBoundingClientRect();j=T-$.left,this.placement==="top"?M=w-B.getBoundingClientRect().top-this._selectionDropdown.clientHeight:M=B.getBoundingClientRect().height}this._selectionDropdown.style.setProperty("inset",`${M}px auto auto ${j}px`)}),se(this,"selectMouseDown",f=>{f.stopPropagation(),!Ce(this)&&(this.removeDropDownTimeId(f),this.setSelectDropdownDisplayNone(),this.setSelectDropdownDisplayBlock(),this.placementPosition())}),se(this,"removeDropDownTimeId",f=>{f.stopPropagation(),this._search.setAttribute("value",""),this.trigger.includes("hover")&&!Et()&&(clearTimeout(this.removeTimeId),this.removeTimeId=void 0)}),se(this,"selectBlur",f=>{f.stopPropagation(),this.removeTimeId&&this.removeDropDownTimeId(f),this.removeTimeId=setTimeout(()=>{this.removeDropDownTimeId(f),this.setSelectDropdownDisplayNone()},300)}),se(this,"clickOption",f=>{f.stopPropagation();const w=f.target,T=w.innerHTML,_=this._optionLabelMapValue.get(T);_&&(this.setAttribute("value",_),this._text.innerHTML=T,this._text.setAttribute("title",T),this._search.setAttribute("placeholder",T));const L=this.getBoundingClientRect(),{height:B}=L;this._text.style.setProperty("line-height",`${B}px`),this._activeOption&&this._activeOption.removeAttribute("active"),this._activeOption=w,this._activeOption&&this._activeOption.setAttribute("active",_||""),this.setSelectDropdownDisplayNone(),this.dispatchEvent(new CustomEvent("change",{detail:{value:_,label:T}})),this.removeDropDownTimeId(f)}),se(this,"createOption",()=>{if(!this._selectDropdown){const f=document.getElementById(this.getPopupContainerId)||document.body;this._selectDropdown=document.createElement("div"),this._selectDropdown.style.setProperty("-webkit-tap-highlight-color","transparent"),this._selectDropdown.style.setProperty("outline","0"),this._selectDropdown.addEventListener("click",this.clickOption),this._selectionDropdown=document.createElement("r-dropdown"),this.dropdownclass&&this._selectionDropdown.setAttribute("class",this.dropdownclass),this.trigger.includes("hover")&&!Et()&&(this._selectDropdown.addEventListener("mouseleave",this.selectBlur),this._selectDropdown.addEventListener("mouseenter",this.removeDropDownTimeId)),this._selectDropdown.appendChild(this._selectionDropdown),this._selectionDropdown.style.setProperty("display","none"),f.appendChild(this._selectDropdown)}}),se(this,"removeSelectDropdown",()=>{try{this._selectDropdown&&(document.getElementById(this.getPopupContainerId)||document.body).removeChild(this._selectDropdown)}catch(f){console.error("removeSelectDropdown error",f)}}),se(this,"addOptionToSlot",()=>{this._slot.assignedElements().forEach(w=>{var T;if(w.tagName!=="R-OPTION")return;const _=w.innerHTML,L=w.getAttribute("value")||"";(T=this._optionList)==null||T.push({label:_,value:L}),this._optionLabelMapValue.get(_)&&console.warn(`${_} is repeat option`),this._optionValueMapLabel.get(L)&&console.warn(`${L} is repeat option`),this._optionLabelMapValue.set(_,L),this._optionValueMapLabel.set(L,_)}),this.createSelectDropdownContent(this._optionList)}),se(this,"createSelectDropdownContent",(f=[])=>{var w,T;f.length===0?(w=this._selectDropdown)==null||w.style.setProperty("display","none"):(T=this._selectDropdown)==null||T.style.setProperty("display","block"),f.forEach(_=>{if(this._selectionDropdown){const{label:L,value:B}=_,M=document.createElement("r-dropdown-item");(this.getAttribute("defaultValue")||this.getAttribute("value"))===B?(M.setAttribute("active",B),this._activeOption=M):M.removeAttribute("active"),M.innerHTML=`${L}`,M.setAttribute("value",`${B}`),M.setAttribute("title",`${L}`),this._selectionDropdown.appendChild(M)}}),this.setDefaultValue()}),se(this,"setDefaultValue",()=>{const f=this.getAttribute("defaultValue")||this.getAttribute("value");if(!f)return;const w=this._optionValueMapLabel.get(f);if(!w)return;this.setAttribute("value",f);const T=this.getBoundingClientRect(),{height:_}=T;this._text.style.setProperty("line-height",`${_}px`),this._text.innerHTML=w,this._text.setAttribute("title",w)}),se(this,"changeSearch",f=>{const w=f.detail.value||"";if(this.dispatchEvent(new CustomEvent("search",{detail:{value:w}})),this._selectionDropdown&&(this._selectionDropdown.innerHTML=""),w.length>0){const T=this._optionList.map(_=>{const{label:L}=_;if(`${L}`.toLowerCase().includes(w))return{label:L,value:_.value}}).filter(_=>_);this.createSelectDropdownContent(T)}else this.createSelectDropdownContent(this._optionList)}),se(this,"setShowSearch",()=>{this.onSearch=eh(this.changeSearch),this.onSearch&&this._search.addEventListener("change",this.onSearch),this.onSearch&&this._search.addEventListener("click",this.onSearch)}),se(this,"removeShowSearch",()=>{this.onSearch&&this._search.removeEventListener("change",this.onSearch),this.onSearch&&this._search.removeEventListener("click",this.onSearch)}),se(this,"listenSlotChange",()=>{this._slot.addEventListener("slotchange",this.addOptionToSlot)}),se(this,"removeListenSlotChange",()=>{this._slot.removeEventListener("slotchange",this.addOptionToSlot)}),se(this,"listenActionEvent",()=>{this.removeEventListener("mouseenter",this.selectMouseDown),this.removeEventListener("mouseleave",this.selectBlur),this.removeEventListener("click",this.selectMouseDown),this.removeEventListener("blur",this.selectBlur),this.trigger.includes("hover")&&!Et()&&(this.addEventListener("mouseenter",this.selectMouseDown),this.addEventListener("mouseleave",this.selectBlur)),this.trigger.includes("click")&&(this.addEventListener("click",this.selectMouseDown),this.addEventListener("blur",this.selectBlur))}),se(this,"clickRemoveSelect",f=>{f.stopPropagation(),this.setSelectDropdownDisplayNone()}),this._slot=document.createElement("slot"),this._select=document.createElement("div"),this._select.setAttribute("class","ran-select"),this._select.setAttribute("part","select"),this._selection=document.createElement("div"),this._selection.setAttribute("class","selection"),this._selection.setAttribute("part","selection"),this._selector=document.createElement("div"),this._search=document.createElement("r-input"),this._search.setAttribute("class","selection-search"),this._search.setAttribute("part","search"),this._search.setAttribute("type","search"),this._search.setAttribute("autocomplete","off"),this._text=document.createElement("span"),this._text.setAttribute("class","selection-item"),this._text.setAttribute("part","selection-item"),this._icon=document.createElement("ra-icon"),this._icon.setAttribute("class","icon"),this._icon.setAttribute("part","icon"),this._icon.setAttribute("name","arrow-down"),this._icon.setAttribute("color","#d9d9d9"),this._icon.setAttribute("size","16"),this._selector.appendChild(this._text),this._selector.appendChild(this._search),this._selection.appendChild(this._icon),this._selection.appendChild(this._selector),this._slot.setAttribute("class","slot"),this._select.appendChild(this._selection),this._select.appendChild(this._slot),this._optionList=[],this._optionLabelMapValue=new Map,this._optionValueMapLabel=new Map;const h=this.attachShadow({mode:"closed"}),p=document.createElement("style");p.textContent=Wc,h.appendChild(p),this._shadowDom=h,this._shadowDom.appendChild(this._select)}static get observedAttributes(){return["disabled","sheet","clear","type","defaultValue","showSearch","placement","getPopupContainerId","dropdownclass","trigger"]}get value(){return this.getAttribute("value")||""}set value(h){!Ce(this)&&h?this.setAttribute("value",h):this.removeAttribute("value")}get defaultValue(){return this.getAttribute("defaultValue")||""}set defaultValue(h){this.setAttribute("defaultValue",h||"")}get showSearch(){return this.getAttribute("showSearch")||""}set showSearch(h){this.setAttribute("showSearch",h||"")}get type(){return this.getAttribute("type")||""}set type(h){this.setAttribute("type",h||"")}get placement(){return this.getAttribute("placement")||"bottom"}set placement(h){this.setAttribute("placement",h||"")}get sheet(){return this.getAttribute("sheet")||""}set sheet(h){this.setAttribute("sheet",h||"")}get getPopupContainerId(){return this.getAttribute("getPopupContainerId")||""}set getPopupContainerId(h){this.setAttribute("getPopupContainerId",h||"")}get dropdownclass(){return this.getAttribute("dropdownclass")||""}set dropdownclass(h){this.setAttribute("dropdownclass",h||"")}get trigger(){return this.getAttribute("trigger")||"click"}set trigger(h){this.setAttribute("trigger",h||"")}get disabled(){return Ce(this)}set disabled(h){!h||h==="false"?(this.removeAttribute("disabled"),this._selection.removeAttribute("disabled")):(this.setAttribute("disabled",""),this._selection.setAttribute("disabled",""))}handlerExternalCss(){if(this.sheet)try{const h=new CSSStyleSheet;h.insertRule(this.sheet),this._shadowDom.adoptedStyleSheets=[h]}catch(h){console.error(`Failed to parse the rule in CSSStyleSheet: ${this.sheet}, error: ${h}`)}}connectedCallback(){this.handlerExternalCss(),this.createOption(),this.listenActionEvent(),this.listenSlotChange(),this.setShowSearch(),document.addEventListener("click",this.clickRemoveSelect)}disconnectCallback(){var h;this.removeEventListener("mouseenter",this.selectMouseDown),this.removeEventListener("mouseleave",this.selectBlur),this.removeEventListener("click",this.selectMouseDown),this.removeEventListener("blur",this.selectBlur),this.removeSelectDropdown(),(h=this._selectDropdown)==null||h.removeEventListener("click",this.clickOption),this.removeListenSlotChange(),document.removeEventListener("click",this.clickRemoveSelect)}attributeChangedCallback(h,p,f){h==="disabled"&&this._select&&(!f||f==="false"?(this._select.setAttribute("disabled",""),this._selection.setAttribute("disabled","")):(this._select.removeAttribute("disabled"),this._selection.removeAttribute("disabled"))),h==="sheet"&&this._shadowDom&&p!==f&&this.handlerExternalCss()}};function th(){return typeof document<"u"&&!customElements.get("r-select")?(customElements.define("r-select",vn),vn):Oe("document is undefined or r-select is exist")}const rh=th(),ih=Object.freeze(Object.defineProperty({__proto__:null,Select:vn,default:rh},Symbol.toStringTag,{value:"Module"}));var nh=Object.defineProperty,ah=(x,h,p)=>h in x?nh(x,h,{enumerable:!0,configurable:!0,writable:!0,value:p}):x[h]=p,H=(x,h,p)=>ah(x,typeof h!="symbol"?h+"":h,p);(function x(h){var p,f;p=this,f=function(){function w(o,n){var e=Object.keys(o);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(o);n&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(o,r).enumerable})),e.push.apply(e,t)}return e}function T(o){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?w(Object(e),!0).forEach(function(t){B(o,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(e)):w(Object(e)).forEach(function(t){Object.defineProperty(o,t,Object.getOwnPropertyDescriptor(e,t))})}return o}function _(o,n){for(var e=0;e<n.length;e++){var t=n[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(o,Me(t.key),t)}}function L(o,n,e){return n&&_(o.prototype,n),e&&_(o,e),Object.defineProperty(o,"prototype",{writable:!1}),o}function B(o,n,e){return(n=Me(n))in o?Object.defineProperty(o,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):o[n]=e,o}function M(){return M=Object.assign?Object.assign.bind():function(o){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(o[t]=e[t])}return o},M.apply(this,arguments)}function j(o,n){o.prototype=Object.create(n.prototype),o.prototype.constructor=o,he(o,n)}function $(o){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$(o)}function he(o,n){return he=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},he(o,n)}function ie(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function le(o,n,e){return le=ie()?Reflect.construct.bind():function(t,r,i){var a=[null];a.push.apply(a,r);var s=new(Function.bind.apply(t,a));return i&&he(s,i.prototype),s},le.apply(null,arguments)}function de(o){var n=typeof Map=="function"?new Map:void 0;return de=function(e){if(e===null||(t=e,Function.toString.call(t).indexOf("[native code]")===-1))return e;var t;if(typeof e!="function")throw new TypeError("Super expression must either be null or a function");if(n!==void 0){if(n.has(e))return n.get(e);n.set(e,r)}function r(){return le(e,arguments,$(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),he(r,e)},de(o)}function ke(o,n){(n==null||n>o.length)&&(n=o.length);for(var e=0,t=new Array(n);e<n;e++)t[e]=o[e];return t}function Le(o,n){var e=typeof Symbol<"u"&&o[Symbol.iterator]||o["@@iterator"];if(e)return(e=e.call(o)).next.bind(e);if(Array.isArray(o)||(e=function(r,i){if(r){if(typeof r=="string")return ke(r,i);var a=Object.prototype.toString.call(r).slice(8,-1);return a==="Object"&&r.constructor&&(a=r.constructor.name),a==="Map"||a==="Set"?Array.from(r):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?ke(r,i):void 0}}(o))||n){e&&(o=e);var t=0;return function(){return t>=o.length?{done:!0}:{done:!1,value:o[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Me(o){var n=function(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}(o,"string");return typeof n=="symbol"?n:String(n)}function Rt(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var kr={exports:{}};(function(o,n){var e,t,r,i,a;e=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,t=/^(?=([^\/?#]*))\1([^]*)$/,r=/(?:\/|^)\.(?=\/)/g,i=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,a={buildAbsoluteURL:function(s,l,d){if(d=d||{},s=s.trim(),!(l=l.trim())){if(!d.alwaysNormalize)return s;var c=a.parseURL(s);if(!c)throw new Error("Error trying to parse base URL.");return c.path=a.normalizePath(c.path),a.buildURLFromParts(c)}var u=a.parseURL(l);if(!u)throw new Error("Error trying to parse relative URL.");if(u.scheme)return d.alwaysNormalize?(u.path=a.normalizePath(u.path),a.buildURLFromParts(u)):l;var g=a.parseURL(s);if(!g)throw new Error("Error trying to parse base URL.");if(!g.netLoc&&g.path&&g.path[0]!=="/"){var m=t.exec(g.path);g.netLoc=m[1],g.path=m[2]}g.netLoc&&!g.path&&(g.path="/");var v={scheme:g.scheme,netLoc:u.netLoc,path:null,params:u.params,query:u.query,fragment:u.fragment};if(!u.netLoc&&(v.netLoc=g.netLoc,u.path[0]!=="/"))if(u.path){var y=g.path,k=y.substring(0,y.lastIndexOf("/")+1)+u.path;v.path=a.normalizePath(k)}else v.path=g.path,u.params||(v.params=g.params,u.query||(v.query=g.query));return v.path===null&&(v.path=d.alwaysNormalize?a.normalizePath(u.path):u.path),a.buildURLFromParts(v)},parseURL:function(s){var l=e.exec(s);return l?{scheme:l[1]||"",netLoc:l[2]||"",path:l[3]||"",params:l[4]||"",query:l[5]||"",fragment:l[6]||""}:null},normalizePath:function(s){for(s=s.split("").reverse().join("").replace(r,"");s.length!==(s=s.replace(i,"")).length;);return s.split("").reverse().join("")},buildURLFromParts:function(s){return s.scheme+s.netLoc+s.path+s.params+s.query+s.fragment}},o.exports=a})(kr);var It=kr.exports,Y=Number.isFinite||function(o){return typeof o=="number"&&isFinite(o)},A=function(o){return o.MEDIA_ATTACHING="hlsMediaAttaching",o.MEDIA_ATTACHED="hlsMediaAttached",o.MEDIA_DETACHING="hlsMediaDetaching",o.MEDIA_DETACHED="hlsMediaDetached",o.BUFFER_RESET="hlsBufferReset",o.BUFFER_CODECS="hlsBufferCodecs",o.BUFFER_CREATED="hlsBufferCreated",o.BUFFER_APPENDING="hlsBufferAppending",o.BUFFER_APPENDED="hlsBufferAppended",o.BUFFER_EOS="hlsBufferEos",o.BUFFER_FLUSHING="hlsBufferFlushing",o.BUFFER_FLUSHED="hlsBufferFlushed",o.MANIFEST_LOADING="hlsManifestLoading",o.MANIFEST_LOADED="hlsManifestLoaded",o.MANIFEST_PARSED="hlsManifestParsed",o.LEVEL_SWITCHING="hlsLevelSwitching",o.LEVEL_SWITCHED="hlsLevelSwitched",o.LEVEL_LOADING="hlsLevelLoading",o.LEVEL_LOADED="hlsLevelLoaded",o.LEVEL_UPDATED="hlsLevelUpdated",o.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",o.LEVELS_UPDATED="hlsLevelsUpdated",o.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",o.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",o.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",o.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",o.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",o.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",o.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",o.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",o.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",o.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",o.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",o.CUES_PARSED="hlsCuesParsed",o.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",o.INIT_PTS_FOUND="hlsInitPtsFound",o.FRAG_LOADING="hlsFragLoading",o.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",o.FRAG_LOADED="hlsFragLoaded",o.FRAG_DECRYPTED="hlsFragDecrypted",o.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",o.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",o.FRAG_PARSING_METADATA="hlsFragParsingMetadata",o.FRAG_PARSED="hlsFragParsed",o.FRAG_BUFFERED="hlsFragBuffered",o.FRAG_CHANGED="hlsFragChanged",o.FPS_DROP="hlsFpsDrop",o.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",o.ERROR="hlsError",o.DESTROYING="hlsDestroying",o.KEY_LOADING="hlsKeyLoading",o.KEY_LOADED="hlsKeyLoaded",o.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",o.BACK_BUFFER_REACHED="hlsBackBufferReached",o}({}),J=function(o){return o.NETWORK_ERROR="networkError",o.MEDIA_ERROR="mediaError",o.KEY_SYSTEM_ERROR="keySystemError",o.MUX_ERROR="muxError",o.OTHER_ERROR="otherError",o}({}),O=function(o){return o.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",o.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",o.KEY_SYSTEM_NO_SESSION="keySystemNoSession",o.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",o.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",o.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",o.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",o.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",o.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",o.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",o.MANIFEST_LOAD_ERROR="manifestLoadError",o.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",o.MANIFEST_PARSING_ERROR="manifestParsingError",o.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",o.LEVEL_EMPTY_ERROR="levelEmptyError",o.LEVEL_LOAD_ERROR="levelLoadError",o.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",o.LEVEL_PARSING_ERROR="levelParsingError",o.LEVEL_SWITCH_ERROR="levelSwitchError",o.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",o.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",o.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",o.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",o.FRAG_LOAD_ERROR="fragLoadError",o.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",o.FRAG_DECRYPT_ERROR="fragDecryptError",o.FRAG_PARSING_ERROR="fragParsingError",o.FRAG_GAP="fragGap",o.REMUX_ALLOC_ERROR="remuxAllocError",o.KEY_LOAD_ERROR="keyLoadError",o.KEY_LOAD_TIMEOUT="keyLoadTimeOut",o.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",o.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",o.BUFFER_APPEND_ERROR="bufferAppendError",o.BUFFER_APPENDING_ERROR="bufferAppendingError",o.BUFFER_STALLED_ERROR="bufferStalledError",o.BUFFER_FULL_ERROR="bufferFullError",o.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",o.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",o.INTERNAL_EXCEPTION="internalException",o.INTERNAL_ABORTED="aborted",o.UNKNOWN="unknown",o}({}),Pt=function(){},oi={trace:Pt,debug:Pt,log:Pt,warn:Pt,info:Pt,error:Pt},rr=oi;function os(o){var n=self.console[o];return n?n.bind(self.console,"["+o+"] >"):Pt}function Ln(o,n){if(self.console&&o===!0||typeof o=="object"){(function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];r.forEach(function(a){rr[a]=e[a]?e[a].bind(e):os(a)})})(o,"debug","log","info","warn","error");try{rr.log('Debug logs enabled for "'+n+'" in hls.js version 1.4.12')}catch{rr=oi}}else rr=oi}var R=rr,ss=/^(\d+)x(\d+)$/,Dn=/(.+?)=(".*?"|.*?)(?:,|$)/g,xe=function(){function o(e){for(var t in typeof e=="string"&&(e=o.parseAttrList(e)),e)e.hasOwnProperty(t)&&(t.substring(0,2)==="X-"&&(this.clientAttrs=this.clientAttrs||[],this.clientAttrs.push(t)),this[t]=e[t])}var n=o.prototype;return n.decimalInteger=function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t},n.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var r=new Uint8Array(t.length/2),i=0;i<t.length/2;i++)r[i]=parseInt(t.slice(2*i,2*i+2),16);return r}return null},n.hexadecimalIntegerAsNumber=function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t},n.decimalFloatingPoint=function(e){return parseFloat(this[e])},n.optionalFloat=function(e,t){var r=this[e];return r?parseFloat(r):t},n.enumeratedString=function(e){return this[e]},n.bool=function(e){return this[e]==="YES"},n.decimalResolution=function(e){var t=ss.exec(this[e]);if(t!==null)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},o.parseAttrList=function(e){var t,r={};for(Dn.lastIndex=0;(t=Dn.exec(e))!==null;){var i=t[2];i.indexOf('"')===0&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),r[t[1].trim()]=i}return r},o}();function ls(o){return o==="SCTE35-OUT"||o==="SCTE35-IN"}var Rn=function(){function o(n,e){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,e){var t=e.attr;for(var r in t)if(Object.prototype.hasOwnProperty.call(n,r)&&n[r]!==t[r]){R.warn('DATERANGE tag attribute: "'+r+'" does not match for tags with ID: "'+n.ID+'"'),this._badValueForSameId=r;break}n=M(new xe({}),t,n)}if(this.attr=n,this._startDate=new Date(n["START-DATE"]),"END-DATE"in this.attr){var i=new Date(this.attr["END-DATE"]);Y(i.getTime())&&(this._endDate=i)}}return L(o,[{key:"id",get:function(){return this.attr.ID}},{key:"class",get:function(){return this.attr.CLASS}},{key:"startDate",get:function(){return this._startDate}},{key:"endDate",get:function(){if(this._endDate)return this._endDate;var n=this.duration;return n!==null?new Date(this._startDate.getTime()+1e3*n):null}},{key:"duration",get:function(){if("DURATION"in this.attr){var n=this.attr.decimalFloatingPoint("DURATION");if(Y(n))return n}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}},{key:"plannedDuration",get:function(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}},{key:"endOnNext",get:function(){return this.attr.bool("END-ON-NEXT")}},{key:"isValid",get:function(){return!!this.id&&!this._badValueForSameId&&Y(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)}}]),o}(),Tr=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}},Ne="audio",Je="video",si="audiovideo",In=function(){function o(n){var e;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=((e={})[Ne]=null,e[Je]=null,e[si]=null,e),this.baseurl=n}return o.prototype.setByteRange=function(n,e){var t=n.split("@",2),r=[];t.length===1?r[0]=e?e.byteRangeEndOffset:0:r[0]=parseInt(t[1]),r[1]=parseInt(t[0])+r[0],this._byteRange=r},L(o,[{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=It.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(n){this._url=n}}]),o}(),li=function(o){function n(t,r){var i;return(i=o.call(this,r)||this)._decryptdata=null,i.rawProgramDateTime=null,i.programDateTime=null,i.tagList=[],i.duration=0,i.sn=0,i.levelkeys=void 0,i.type=void 0,i.loader=null,i.keyLoader=null,i.level=-1,i.cc=0,i.startPTS=void 0,i.endPTS=void 0,i.startDTS=void 0,i.endDTS=void 0,i.start=0,i.deltaPTS=void 0,i.maxStartPTS=void 0,i.minEndPTS=void 0,i.stats=new Tr,i.urlId=0,i.data=void 0,i.bitrateTest=!1,i.title=null,i.initSegment=null,i.endList=void 0,i.gap=void 0,i.type=t,i}j(n,o);var e=n.prototype;return e.setKeyFormat=function(t){if(this.levelkeys){var r=this.levelkeys[t];r&&!this._decryptdata&&(this._decryptdata=r.getDecryptData(this.sn))}},e.abortRequests=function(){var t,r;(t=this.loader)==null||t.abort(),(r=this.keyLoader)==null||r.abort()},e.setElementaryStreamInfo=function(t,r,i,a,s,l){l===void 0&&(l=!1);var d=this.elementaryStreams,c=d[t];c?(c.startPTS=Math.min(c.startPTS,r),c.endPTS=Math.max(c.endPTS,i),c.startDTS=Math.min(c.startDTS,a),c.endDTS=Math.max(c.endDTS,s)):d[t]={startPTS:r,endPTS:i,startDTS:a,endDTS:s,partial:l}},e.clearElementaryStreamInfo=function(){var t=this.elementaryStreams;t[Ne]=null,t[Je]=null,t[si]=null},L(n,[{key:"decryptdata",get:function(){if(!this.levelkeys&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){var t=this.levelkeys.identity;if(t)this._decryptdata=t.getDecryptData(this.sn);else{var r=Object.keys(this.levelkeys);if(r.length===1)return this._decryptdata=this.levelkeys[r[0]].getDecryptData(this.sn)}}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(this.programDateTime===null||!Y(this.programDateTime))return null;var t=Y(this.duration)?this.duration:0;return this.programDateTime+1e3*t}},{key:"encrypted",get:function(){var t;if((t=this._decryptdata)!=null&&t.encrypted)return!0;if(this.levelkeys){var r=Object.keys(this.levelkeys),i=r.length;if(i>1||i===1&&this.levelkeys[r[0]].encrypted)return!0}return!1}}]),n}(In),ds=function(o){function n(e,t,r,i,a){var s;(s=o.call(this,r)||this).fragOffset=0,s.duration=0,s.gap=!1,s.independent=!1,s.relurl=void 0,s.fragment=void 0,s.index=void 0,s.stats=new Tr,s.duration=e.decimalFloatingPoint("DURATION"),s.gap=e.bool("GAP"),s.independent=e.bool("INDEPENDENT"),s.relurl=e.enumeratedString("URI"),s.fragment=t,s.index=i;var l=e.enumeratedString("BYTERANGE");return l&&s.setByteRange(l,a),a&&(s.fragOffset=a.fragOffset+a.duration),s}return j(n,o),L(n,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var e=this.elementaryStreams;return!!(e.audio||e.video||e.audiovideo)}}]),n}(In),cs=function(){function o(n){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=n}return o.prototype.reloaded=function(n){if(!n)return this.advanced=!0,void(this.updated=!0);var e=this.lastPartSn-n.lastPartSn,t=this.lastPartIndex-n.lastPartIndex;this.updated=this.endSN!==n.endSN||!!t||!!e||!this.live,this.advanced=this.endSN>n.endSN||e>0||e===0&&t>0,this.updated||this.advanced?this.misses=Math.floor(.6*n.misses):this.misses=n.misses+1,this.availabilityDelay=n.availabilityDelay},L(o,[{key:"hasProgramDateTime",get:function(){return!!this.fragments.length&&Y(this.fragments[this.fragments.length-1].programDateTime)}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||10}},{key:"drift",get:function(){var n=this.driftEndTime-this.driftStartTime;return n>0?1e3*(this.driftEnd-this.driftStart)/n:1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var n;return(n=this.partList)!=null&&n.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var n;return(n=this.fragments)!=null&&n.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var n;return(n=this.partList)!=null&&n.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var n;return(n=this.partList)!=null&&n.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}]),o}();function di(o){return Uint8Array.from(atob(o),function(n){return n.charCodeAt(0)})}function hs(o){var n,e,t=o.split(":"),r=null;if(t[0]==="data"&&t.length===2){var i=t[1].split(";"),a=i[i.length-1].split(",");if(a.length===2){var s=a[0]==="base64",l=a[1];s?(i.splice(-1,1),r=di(l)):(n=Pn(l).subarray(0,16),(e=new Uint8Array(16)).set(n,16-n.length),r=e)}}return r}function Pn(o){return Uint8Array.from(unescape(encodeURIComponent(o)),function(n){return n.charCodeAt(0)})}var Ee={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},ci="org.w3.clearkey",hi="com.apple.streamingkeydelivery",_r="com.microsoft.playready",Sr="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";function On(o){switch(o){case hi:return Ee.FAIRPLAY;case _r:return Ee.PLAYREADY;case Sr:return Ee.WIDEVINE;case ci:return Ee.CLEARKEY}}var Mn="edef8ba979d64acea3c827dcd51d21ed";function Fn(o){switch(o){case Ee.FAIRPLAY:return hi;case Ee.PLAYREADY:return _r;case Ee.WIDEVINE:return Sr;case Ee.CLEARKEY:return ci}}function ui(o){var n=o.drmSystems,e=o.widevineLicenseUrl,t=n?[Ee.FAIRPLAY,Ee.WIDEVINE,Ee.PLAYREADY,Ee.CLEARKEY].filter(function(r){return!!n[r]}):[];return!t[Ee.WIDEVINE]&&e&&t.push(Ee.WIDEVINE),t}var Bn=typeof self<"u"&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;function Ot(o,n,e){return Uint8Array.prototype.slice?o.slice(n,e):new Uint8Array(Array.prototype.slice.call(o,n,e))}var fi,pi=function(o,n){return n+10<=o.length&&o[n]===73&&o[n+1]===68&&o[n+2]===51&&o[n+3]<255&&o[n+4]<255&&o[n+6]<128&&o[n+7]<128&&o[n+8]<128&&o[n+9]<128},Nn=function(o,n){return n+10<=o.length&&o[n]===51&&o[n+1]===68&&o[n+2]===73&&o[n+3]<255&&o[n+4]<255&&o[n+6]<128&&o[n+7]<128&&o[n+8]<128&&o[n+9]<128},Cr=function(o,n){for(var e=n,t=0;pi(o,n);)t+=10,t+=Lr(o,n+6),Nn(o,n+10)&&(t+=10),n+=t;if(t>0)return o.subarray(e,e+t)},Lr=function(o,n){var e=0;return e=(127&o[n])<<21,e|=(127&o[n+1])<<14,e|=(127&o[n+2])<<7,e|=127&o[n+3]},us=function(o,n){return pi(o,n)&&Lr(o,n+6)+10<=o.length-n},Un=function(o){return o&&o.key==="PRIV"&&o.info==="com.apple.streaming.transportStreamTimestamp"},fs=function(o){var n=String.fromCharCode(o[0],o[1],o[2],o[3]),e=Lr(o,4);return{type:n,size:e,data:o.subarray(10,10+e)}},Gn=function(o){for(var n=0,e=[];pi(o,n);){for(var t=Lr(o,n+6),r=(n+=10)+t;n+8<r;){var i=fs(o.subarray(n)),a=ps(i);a&&e.push(a),n+=i.size+10}Nn(o,n)&&(n+=10)}return e},ps=function(o){return o.type==="PRIV"?gs(o):o.type[0]==="W"?vs(o):ms(o)},gs=function(o){if(!(o.size<2)){var n=nt(o.data,!0),e=new Uint8Array(o.data.subarray(n.length+1));return{key:o.type,info:n,data:e.buffer}}},ms=function(o){if(!(o.size<2)){if(o.type==="TXXX"){var n=1,e=nt(o.data.subarray(n),!0);n+=e.length+1;var t=nt(o.data.subarray(n));return{key:o.type,info:e,data:t}}var r=nt(o.data.subarray(1));return{key:o.type,data:r}}},vs=function(o){if(o.type==="WXXX"){if(o.size<2)return;var n=1,e=nt(o.data.subarray(n),!0);n+=e.length+1;var t=nt(o.data.subarray(n));return{key:o.type,info:e,data:t}}var r=nt(o.data);return{key:o.type,data:r}},bs=function(o){if(o.data.byteLength===8){var n=new Uint8Array(o.data),e=1&n[3],t=(n[4]<<23)+(n[5]<<15)+(n[6]<<7)+n[7];return t/=45,e&&(t+=4772185884e-2),Math.round(t)}},nt=function(o,n){n===void 0&&(n=!1);var e=ys();if(e){var t=e.decode(o);if(n){var r=t.indexOf("\0");return r!==-1?t.substring(0,r):t}return t.replace(/\0/g,"")}for(var i,a,s,l=o.length,d="",c=0;c<l;){if((i=o[c++])===0&&n)return d;if(i!==0&&i!==3)switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:d+=String.fromCharCode(i);break;case 12:case 13:a=o[c++],d+=String.fromCharCode((31&i)<<6|63&a);break;case 14:a=o[c++],s=o[c++],d+=String.fromCharCode((15&i)<<12|(63&a)<<6|(63&s)<<0)}}return d};function ys(){return fi||self.TextDecoder===void 0||(fi=new self.TextDecoder("utf-8")),fi}var at=function(o){for(var n="",e=0;e<o.length;e++){var t=o[e].toString(16);t.length<2&&(t="0"+t),n+=t}return n},Dr=Math.pow(2,32)-1,ws=[].push,Hn={video:1,audio:2,id3:3,text:4};function De(o){return String.fromCharCode.apply(null,o)}function Kn(o,n){var e=o[n]<<8|o[n+1];return e<0?65536+e:e}function oe(o,n){var e=Vn(o,n);return e<0?4294967296+e:e}function Vn(o,n){return o[n]<<24|o[n+1]<<16|o[n+2]<<8|o[n+3]}function gi(o,n,e){o[n]=e>>24,o[n+1]=e>>16&255,o[n+2]=e>>8&255,o[n+3]=255&e}function ge(o,n){var e=[];if(!n.length)return e;for(var t=o.byteLength,r=0;r<t;){var i=oe(o,r),a=i>1?r+i:t;if(De(o.subarray(r+4,r+8))===n[0])if(n.length===1)e.push(o.subarray(r+8,a));else{var s=ge(o.subarray(r+8,a),n.slice(1));s.length&&ws.apply(e,s)}r=a}return e}function Es(o){var n=[],e=o[0],t=8,r=oe(o,t);t+=4,t+=e===0?8:16,t+=2;var i=o.length+0,a=Kn(o,t);t+=2;for(var s=0;s<a;s++){var l=t,d=oe(o,l);l+=4;var c=2147483647&d;if((2147483648&d)>>>31==1)return R.warn("SIDX has hierarchical references (not supported)"),null;var u=oe(o,l);l+=4,n.push({referenceSize:c,subsegmentDuration:u,info:{duration:u/r,start:i,end:i+c-1}}),i+=c,t=l+=4}return{earliestPresentationTime:0,timescale:r,version:e,referencesCount:a,references:n}}function zn(o){for(var n=[],e=ge(o,["moov","trak"]),t=0;t<e.length;t++){var r=e[t],i=ge(r,["tkhd"])[0];if(i){var a=i[0],s=a===0?12:20,l=oe(i,s),d=ge(r,["mdia","mdhd"])[0];if(d){var c=oe(d,s=(a=d[0])===0?12:20),u=ge(r,["mdia","hdlr"])[0];if(u){var g=De(u.subarray(8,12)),m={soun:Ne,vide:Je}[g];if(m){var v=ge(r,["mdia","minf","stbl","stsd"])[0],y=void 0;v&&(y=De(v.subarray(12,16))),n[l]={timescale:c,type:m},n[m]={timescale:c,id:l,codec:y}}}}}}return ge(o,["moov","mvex","trex"]).forEach(function(k){var b=oe(k,4),E=n[b];E&&(E.default={duration:oe(k,12),flags:oe(k,20)})}),n}function Yn(o){var n=ge(o,["schm"])[0];if(n){var e=De(n.subarray(4,8));if(e==="cbcs"||e==="cenc")return ge(o,["schi","tenc"])[0]}return R.error("[eme] missing 'schm' box"),null}function As(o){var n=oe(o,0),e=8;1&n&&(e+=4),4&n&&(e+=4);for(var t=0,r=oe(o,4),i=0;i<r;i++)256&n&&(t+=oe(o,e),e+=4),512&n&&(e+=4),1024&n&&(e+=4),2048&n&&(e+=4);return t}function Mt(o,n){var e=new Uint8Array(o.length+n.length);return e.set(o),e.set(n,o.length),e}function jn(o,n){var e=[],t=n.samples,r=n.timescale,i=n.id,a=!1;return ge(t,["moof"]).map(function(s){var l=s.byteOffset-8;ge(s,["traf"]).map(function(d){var c=ge(d,["tfdt"]).map(function(u){var g=u[0],m=oe(u,4);return g===1&&(m*=Math.pow(2,32),m+=oe(u,8)),m/r})[0];return c!==void 0&&(o=c),ge(d,["tfhd"]).map(function(u){var g=oe(u,4),m=16777215&oe(u,0),v=0,y=(16&m)!=0,k=0,b=(32&m)!=0,E=8;g===i&&(1&m&&(E+=8),2&m&&(E+=4),8&m&&(v=oe(u,E),E+=4),y&&(k=oe(u,E),E+=4),b&&(E+=4),n.type==="video"&&(a=function(C){if(!C)return!1;var S=C.indexOf("."),D=S<0?C:C.substring(0,S);return D==="hvc1"||D==="hev1"||D==="dvh1"||D==="dvhe"}(n.codec)),ge(d,["trun"]).map(function(C){var S=C[0],D=16777215&oe(C,0),I=(1&D)!=0,P=0,U=(4&D)!=0,F=(256&D)!=0,N=0,z=(512&D)!=0,K=0,W=(1024&D)!=0,ne=(2048&D)!=0,X=0,ee=oe(C,4),re=8;I&&(P=oe(C,re),re+=4),U&&(re+=4);for(var te=P+l,ae=0;ae<ee;ae++){if(F?(N=oe(C,re),re+=4):N=v,z?(K=oe(C,re),re+=4):K=k,W&&(re+=4),ne&&(X=S===0?oe(C,re):Vn(C,re),re+=4),n.type===Je)for(var ce=0;ce<K;){var fe=oe(t,te);xs(a,t[te+=4])&&$n(t.subarray(te,te+fe),a?2:1,o+X/r,e),te+=fe,ce+=fe+4}o+=N/r}}))})})}),e}function xs(o,n){if(o){var e=n>>1&63;return e===39||e===40}return(31&n)==6}function $n(o,n,e,t){var r=qn(o),i=0;i+=n;for(var a=0,s=0,l=!1,d=0;i<r.length;){a=0;do{if(i>=r.length)break;a+=d=r[i++]}while(d===255);s=0;do{if(i>=r.length)break;s+=d=r[i++]}while(d===255);var c=r.length-i;if(!l&&a===4&&i<r.length){if(l=!0,r[i++]===181){var u=Kn(r,i);if(i+=2,u===49){var g=oe(r,i);if(i+=4,g===1195456820){var m=r[i++];if(m===3){var v=r[i++],y=64&v,k=y?2+3*(31&v):0,b=new Uint8Array(k);if(y){b[0]=v;for(var E=1;E<k;E++)b[E]=r[i++]}t.push({type:m,payloadType:a,pts:e,bytes:b})}}}}}else if(a===5&&s<c){if(l=!0,s>16){for(var C=[],S=0;S<16;S++){var D=r[i++].toString(16);C.push(D.length==1?"0"+D:D),S!==3&&S!==5&&S!==7&&S!==9||C.push("-")}for(var I=s-16,P=new Uint8Array(I),U=0;U<I;U++)P[U]=r[i++];t.push({payloadType:a,pts:e,uuid:C.join(""),userData:nt(P),userDataBytes:P})}}else if(s<c)i+=s;else if(s>c)break}}function qn(o){for(var n=o.byteLength,e=[],t=1;t<n-2;)o[t]===0&&o[t+1]===0&&o[t+2]===3?(e.push(t+2),t+=2):t++;if(e.length===0)return o;var r=n-e.length,i=new Uint8Array(r),a=0;for(t=0;t<r;a++,t++)a===e[0]&&(a++,e.shift()),i[t]=o[a];return i}function ks(o,n,e){if(o.byteLength!==16)throw new RangeError("Invalid system id");var t,r,i;t=0,r=new Uint8Array,t>0?(i=new Uint8Array(4),n.length>0&&new DataView(i.buffer).setUint32(0,n.length,!1)):i=new Uint8Array;var a=new Uint8Array(4);return e&&e.byteLength>0&&new DataView(a.buffer).setUint32(0,e.byteLength,!1),function(s){for(var l=arguments.length,d=new Array(l>1?l-1:0),c=1;c<l;c++)d[c-1]=arguments[c];for(var u=d.length,g=8,m=u;m--;)g+=d[m].byteLength;var v=new Uint8Array(g);for(v[0]=g>>24&255,v[1]=g>>16&255,v[2]=g>>8&255,v[3]=255&g,v.set(s,4),m=0,g=8;m<u;m++)v.set(d[m],g),g+=d[m].byteLength;return v}([112,115,115,104],new Uint8Array([t,0,0,0]),o,i,r,a,e||new Uint8Array)}var Rr={},mi=function(){function o(e,t,r,i,a){i===void 0&&(i=[1]),a===void 0&&(a=null),this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=r,this.keyFormatVersions=i,this.iv=a,this.encrypted=!!e&&e!=="NONE",this.isCommonEncryption=this.encrypted&&e!=="AES-128"}o.clearKeyUriToKeyIdMap=function(){Rr={}};var n=o.prototype;return n.isSupported=function(){if(this.method){if(this.method==="AES-128"||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case hi:case Sr:case _r:case ci:return["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1},n.getDecryptData=function(e){if(!this.encrypted||!this.uri)return null;if(this.method==="AES-128"&&this.uri&&!this.iv){typeof e!="number"&&(this.method!=="AES-128"||this.iv||R.warn('missing IV for initialization segment with method="'+this.method+'" - compliance issue'),e=0);var t=function(k){for(var b=new Uint8Array(16),E=12;E<16;E++)b[E]=k>>8*(15-E)&255;return b}(e);return new o(this.method,this.uri,"identity",this.keyFormatVersions,t)}var r=hs(this.uri);if(r)switch(this.keyFormat){case Sr:this.pssh=r,r.length>=22&&(this.keyId=r.subarray(r.length-22,r.length-6));break;case _r:var i=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=ks(i,null,r);var a=new Uint16Array(r.buffer,r.byteOffset,r.byteLength/2),s=String.fromCharCode.apply(null,Array.from(a)),l=s.substring(s.indexOf("<"),s.length),d=new DOMParser().parseFromString(l,"text/xml").getElementsByTagName("KID")[0];if(d){var c=d.childNodes[0]?d.childNodes[0].nodeValue:d.getAttribute("VALUE");if(c){var u=di(c).subarray(0,16);(function(k){var b=function(E,C,S){var D=E[C];E[C]=E[S],E[S]=D};b(k,0,3),b(k,1,2),b(k,4,5),b(k,6,7)})(u),this.keyId=u}}break;default:var g=r.subarray(0,16);if(g.length!==16){var m=new Uint8Array(16);m.set(g,16-g.length),g=m}this.keyId=g}if(!this.keyId||this.keyId.byteLength!==16){var v=Rr[this.uri];if(!v){var y=Object.keys(Rr).length%Number.MAX_SAFE_INTEGER;v=new Uint8Array(16),new DataView(v.buffer,12,4).setUint32(0,y),Rr[this.uri]=v}this.keyId=v}return this},o}(),Qn=/\{\$([a-zA-Z0-9-_]+)\}/g;function Wn(o){return Qn.test(o)}function Ue(o,n,e){if(o.variableList!==null||o.hasVariableRefs)for(var t=e.length;t--;){var r=e[t],i=n[r];i&&(n[r]=vi(o,i))}}function vi(o,n){if(o.variableList!==null||o.hasVariableRefs){var e=o.variableList;return n.replace(Qn,function(t){var r=t.substring(2,t.length-1),i=e==null?void 0:e[r];return i===void 0?(o.playlistParsingError||(o.playlistParsingError=new Error('Missing preceding EXT-X-DEFINE tag for Variable Reference: "'+r+'"')),t):i})}return n}function Xn(o,n,e){var t,r,i=o.variableList;if(i||(o.variableList=i={}),"QUERYPARAM"in n){t=n.QUERYPARAM;try{var a=new self.URL(e).searchParams;if(!a.has(t))throw new Error('"'+t+'" does not match any query parameter in URI: "'+e+'"');r=a.get(t)}catch(s){o.playlistParsingError||(o.playlistParsingError=new Error("EXT-X-DEFINE QUERYPARAM: "+s.message))}}else t=n.NAME,r=n.VALUE;t in i?o.playlistParsingError||(o.playlistParsingError=new Error('EXT-X-DEFINE duplicate Variable Name declarations: "'+t+'"')):i[t]=r||""}function Ts(o,n,e){var t=n.IMPORT;if(e&&t in e){var r=o.variableList;r||(o.variableList=r={}),r[t]=e[t]}else o.playlistParsingError||(o.playlistParsingError=new Error('EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "'+t+'"'))}function Ir(){if(typeof self<"u")return self.MediaSource||self.WebKitMediaSource}var _s={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dva1:!0,dvav:!0,dvh1:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}},Jn=Ir();function bi(o,n){var e;return(e=Jn==null?void 0:Jn.isTypeSupported((n||"video")+'/mp4;codecs="'+o+'"'))!=null&&e}var Zn=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,ea=/#EXT-X-MEDIA:(.*)/g,Ss=/^#EXT(?:INF|-X-TARGETDURATION):/m,ta=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),Cs=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),ir=function(){function o(){}return o.findGroup=function(n,e){for(var t=0;t<n.length;t++){var r=n[t];if(r.id===e)return r}},o.convertAVC1ToAVCOTI=function(n){var e=n.split(".");if(e.length>2){var t=e.shift()+".";return t+=parseInt(e.shift()).toString(16),t+=("000"+parseInt(e.shift()).toString(16)).slice(-4)}return n},o.resolve=function(n,e){return It.buildAbsoluteURL(e,n,{alwaysNormalize:!0})},o.isMediaPlaylist=function(n){return Ss.test(n)},o.parseMasterPlaylist=function(n,e){var t,r={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:Wn(n)},i=[];for(Zn.lastIndex=0;(t=Zn.exec(n))!=null;)if(t[1]){var a,s=new xe(t[1]);Ue(r,s,["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]);var l=vi(r,t[2]),d={attrs:s,bitrate:s.decimalInteger("AVERAGE-BANDWIDTH")||s.decimalInteger("BANDWIDTH"),name:s.NAME,url:o.resolve(l,e)},c=s.decimalResolution("RESOLUTION");c&&(d.width=c.width,d.height=c.height),Ls((s.CODECS||"").split(/[ ,]+/).filter(function(C){return C}),d),d.videoCodec&&d.videoCodec.indexOf("avc1")!==-1&&(d.videoCodec=o.convertAVC1ToAVCOTI(d.videoCodec)),(a=d.unknownCodecs)!=null&&a.length||i.push(d),r.levels.push(d)}else if(t[3]){var u=t[3],g=t[4];switch(u){case"SESSION-DATA":var m=new xe(g);Ue(r,m,["DATA-ID","LANGUAGE","VALUE","URI"]);var v=m["DATA-ID"];v&&(r.sessionData===null&&(r.sessionData={}),r.sessionData[v]=m);break;case"SESSION-KEY":var y=ra(g,e,r);y.encrypted&&y.isSupported()?(r.sessionKeys===null&&(r.sessionKeys=[]),r.sessionKeys.push(y)):R.warn('[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "'+g+'"');break;case"DEFINE":var k=new xe(g);Ue(r,k,["NAME","VALUE","QUERYPARAM"]),Xn(r,k,e);break;case"CONTENT-STEERING":var b=new xe(g);Ue(r,b,["SERVER-URI","PATHWAY-ID"]),r.contentSteering={uri:o.resolve(b["SERVER-URI"],e),pathwayId:b["PATHWAY-ID"]||"."};break;case"START":r.startTimeOffset=ia(g)}}var E=i.length>0&&i.length<r.levels.length;return r.levels=E?i:r.levels,r.levels.length===0&&(r.playlistParsingError=new Error("no levels found in manifest")),r},o.parseMasterPlaylistMedia=function(n,e,t){var r,i={},a=t.levels,s={AUDIO:a.map(function(y){return{id:y.attrs.AUDIO,audioCodec:y.audioCodec}}),SUBTITLES:a.map(function(y){return{id:y.attrs.SUBTITLES,textCodec:y.textCodec}}),"CLOSED-CAPTIONS":[]},l=0;for(ea.lastIndex=0;(r=ea.exec(n))!==null;){var d=new xe(r[1]),c=d.TYPE;if(c){var u=s[c],g=i[c]||[];i[c]=g,Ue(t,d,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]);var m={attrs:d,bitrate:0,id:l++,groupId:d["GROUP-ID"]||"",instreamId:d["INSTREAM-ID"],name:d.NAME||d.LANGUAGE||"",type:c,default:d.bool("DEFAULT"),autoselect:d.bool("AUTOSELECT"),forced:d.bool("FORCED"),lang:d.LANGUAGE,url:d.URI?o.resolve(d.URI,e):""};if(u!=null&&u.length){var v=o.findGroup(u,m.groupId)||u[0];na(m,v,"audioCodec"),na(m,v,"textCodec")}g.push(m)}}return i},o.parseLevelPlaylist=function(n,e,t,r,i,a){var s,l,d,c=new cs(e),u=c.fragments,g=null,m=0,v=0,y=0,k=0,b=null,E=new li(r,e),C=-1,S=!1;for(ta.lastIndex=0,c.m3u8=n,c.hasVariableRefs=Wn(n);(s=ta.exec(n))!==null;){S&&(S=!1,(E=new li(r,e)).start=y,E.sn=m,E.cc=k,E.level=t,g&&(E.initSegment=g,E.rawProgramDateTime=g.rawProgramDateTime,g.rawProgramDateTime=null));var D=s[1];if(D){E.duration=parseFloat(D);var I=(" "+s[2]).slice(1);E.title=I||null,E.tagList.push(I?["INF",D,I]:["INF",D])}else if(s[3]){if(Y(E.duration)){E.start=y,d&&sa(E,d,c),E.sn=m,E.level=t,E.cc=k,E.urlId=i,u.push(E);var P=(" "+s[3]).slice(1);E.relurl=vi(c,P),aa(E,b),b=E,y+=E.duration,m++,v=0,S=!0}}else if(s[4]){var U=(" "+s[4]).slice(1);b?E.setByteRange(U,b):E.setByteRange(U)}else if(s[5])E.rawProgramDateTime=(" "+s[5]).slice(1),E.tagList.push(["PROGRAM-DATE-TIME",E.rawProgramDateTime]),C===-1&&(C=u.length);else{if(!(s=s[0].match(Cs))){R.warn("No matches on slow regex match for level playlist!");continue}for(l=1;l<s.length&&s[l]===void 0;l++);var F=(" "+s[l]).slice(1),N=(" "+s[l+1]).slice(1),z=s[l+2]?(" "+s[l+2]).slice(1):"";switch(F){case"PLAYLIST-TYPE":c.type=N.toUpperCase();break;case"MEDIA-SEQUENCE":m=c.startSN=parseInt(N);break;case"SKIP":var K=new xe(N);Ue(c,K,["RECENTLY-REMOVED-DATERANGES"]);var W=K.decimalInteger("SKIPPED-SEGMENTS");if(Y(W)){c.skippedSegments=W;for(var ne=W;ne--;)u.unshift(null);m+=W}var X=K.enumeratedString("RECENTLY-REMOVED-DATERANGES");X&&(c.recentlyRemovedDateranges=X.split("	"));break;case"TARGETDURATION":c.targetduration=Math.max(parseInt(N),1);break;case"VERSION":c.version=parseInt(N);break;case"EXTM3U":break;case"ENDLIST":c.live=!1;break;case"#":(N||z)&&E.tagList.push(z?[N,z]:[N]);break;case"DISCONTINUITY":k++,E.tagList.push(["DIS"]);break;case"GAP":E.gap=!0,E.tagList.push([F]);break;case"BITRATE":E.tagList.push([F,N]);break;case"DATERANGE":var ee=new xe(N);Ue(c,ee,["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),Ue(c,ee,ee.clientAttrs);var re=new Rn(ee,c.dateRanges[ee.ID]);re.isValid||c.skippedSegments?c.dateRanges[re.id]=re:R.warn('Ignoring invalid DATERANGE tag: "'+N+'"'),E.tagList.push(["EXT-X-DATERANGE",N]);break;case"DEFINE":var te=new xe(N);Ue(c,te,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in te?Ts(c,te,a):Xn(c,te,e);break;case"DISCONTINUITY-SEQUENCE":k=parseInt(N);break;case"KEY":var ae=ra(N,e,c);if(ae.isSupported()){if(ae.method==="NONE"){d=void 0;break}d||(d={}),d[ae.keyFormat]&&(d=M({},d)),d[ae.keyFormat]=ae}else R.warn('[Keys] Ignoring invalid EXT-X-KEY tag: "'+N+'"');break;case"START":c.startTimeOffset=ia(N);break;case"MAP":var ce=new xe(N);if(Ue(c,ce,["BYTERANGE","URI"]),E.duration){var fe=new li(r,e);oa(fe,ce,t,d),g=fe,E.initSegment=g,g.rawProgramDateTime&&!E.rawProgramDateTime&&(E.rawProgramDateTime=g.rawProgramDateTime)}else oa(E,ce,t,d),g=E,S=!0;break;case"SERVER-CONTROL":var ye=new xe(N);c.canBlockReload=ye.bool("CAN-BLOCK-RELOAD"),c.canSkipUntil=ye.optionalFloat("CAN-SKIP-UNTIL",0),c.canSkipDateRanges=c.canSkipUntil>0&&ye.bool("CAN-SKIP-DATERANGES"),c.partHoldBack=ye.optionalFloat("PART-HOLD-BACK",0),c.holdBack=ye.optionalFloat("HOLD-BACK",0);break;case"PART-INF":var He=new xe(N);c.partTarget=He.decimalFloatingPoint("PART-TARGET");break;case"PART":var Te=c.partList;Te||(Te=c.partList=[]);var Ze=v>0?Te[Te.length-1]:void 0,We=v++,Xe=new xe(N);Ue(c,Xe,["BYTERANGE","URI"]);var _e=new ds(Xe,E,e,We,Ze);Te.push(_e),E.duration+=_e.duration;break;case"PRELOAD-HINT":var Ie=new xe(N);Ue(c,Ie,["URI"]),c.preloadHint=Ie;break;case"RENDITION-REPORT":var dt=new xe(N);Ue(c,dt,["URI"]),c.renditionReports=c.renditionReports||[],c.renditionReports.push(dt);break;default:R.warn("line parsed but not handled: "+s)}}}b&&!b.relurl?(u.pop(),y-=b.duration,c.partList&&(c.fragmentHint=b)):c.partList&&(aa(E,b),E.cc=k,c.fragmentHint=E,d&&sa(E,d,c));var kt=u.length,Ye=u[0],gr=u[kt-1];if((y+=c.skippedSegments*c.targetduration)>0&&kt&&gr){c.averagetargetduration=y/kt;var mr=gr.sn;c.endSN=mr!=="initSegment"?mr:0,c.live||(gr.endList=!0),Ye&&(c.startCC=Ye.cc)}else c.endSN=0,c.startCC=0;return c.fragmentHint&&(y+=c.fragmentHint.duration),c.totalduration=y,c.endCC=k,C>0&&function(Wr,Zt){for(var Ht=Wr[Zt],vr=Zt;vr--;){var bt=Wr[vr];if(!bt)return;bt.programDateTime=Ht.programDateTime-1e3*bt.duration,Ht=bt}}(u,C),c},o}();function ra(o,n,e){var t,r,i=new xe(o);Ue(e,i,["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]);var a=(t=i.METHOD)!=null?t:"",s=i.URI,l=i.hexadecimalInteger("IV"),d=i.KEYFORMATVERSIONS,c=(r=i.KEYFORMAT)!=null?r:"identity";s&&i.IV&&!l&&R.error("Invalid IV: "+i.IV);var u=s?ir.resolve(s,n):"",g=(d||"1").split("/").map(Number).filter(Number.isFinite);return new mi(a,u,c,g,l)}function ia(o){var n=new xe(o).decimalFloatingPoint("TIME-OFFSET");return Y(n)?n:null}function Ls(o,n){["video","audio","text"].forEach(function(e){var t=o.filter(function(i){return function(a,s){var l=_s[s];return!!l&&l[a.slice(0,4)]===!0}(i,e)});if(t.length){var r=t.filter(function(i){return i.lastIndexOf("avc1",0)===0||i.lastIndexOf("mp4a",0)===0});n[e+"Codec"]=r.length>0?r[0]:t[0],o=o.filter(function(i){return t.indexOf(i)===-1})}}),n.unknownCodecs=o}function na(o,n,e){var t=n[e];t&&(o[e]=t)}function aa(o,n){o.rawProgramDateTime?o.programDateTime=Date.parse(o.rawProgramDateTime):n!=null&&n.programDateTime&&(o.programDateTime=n.endProgramDateTime),Y(o.programDateTime)||(o.programDateTime=null,o.rawProgramDateTime=null)}function oa(o,n,e,t){o.relurl=n.URI,n.BYTERANGE&&o.setByteRange(n.BYTERANGE),o.level=e,o.sn="initSegment",t&&(o.levelkeys=t),o.initSegment=null}function sa(o,n,e){o.levelkeys=n;var t=e.encryptedFragments;t.length&&t[t.length-1].levelkeys===n||!Object.keys(n).some(function(r){return n[r].isCommonEncryption})||t.push(o)}var Kt="manifest",Ft="level",ot="audioTrack",ut="subtitleTrack",ve="main",st="audio",At="subtitle";function la(o){switch(o.type){case ot:return st;case ut:return At;default:return ve}}function yi(o,n){var e=o.url;return e!==void 0&&e.indexOf("data:")!==0||(e=n.url),e}var Ds=function(){function o(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=e,this.registerListeners()}var n=o.prototype;return n.startLoad=function(e){},n.stopLoad=function(){this.destroyInternalLoaders()},n.registerListeners=function(){var e=this.hls;e.on(A.MANIFEST_LOADING,this.onManifestLoading,this),e.on(A.LEVEL_LOADING,this.onLevelLoading,this),e.on(A.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(A.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},n.unregisterListeners=function(){var e=this.hls;e.off(A.MANIFEST_LOADING,this.onManifestLoading,this),e.off(A.LEVEL_LOADING,this.onLevelLoading,this),e.off(A.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(A.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},n.createInternalLoader=function(e){var t=this.hls.config,r=t.pLoader,i=t.loader,a=new(r||i)(t);return this.loaders[e.type]=a,a},n.getInternalLoader=function(e){return this.loaders[e.type]},n.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},n.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},n.destroy=function(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()},n.onManifestLoading=function(e,t){var r=t.url;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:Kt,url:r,deliveryDirectives:null})},n.onLevelLoading=function(e,t){var r=t.id,i=t.level,a=t.url,s=t.deliveryDirectives;this.load({id:r,level:i,responseType:"text",type:Ft,url:a,deliveryDirectives:s})},n.onAudioTrackLoading=function(e,t){var r=t.id,i=t.groupId,a=t.url,s=t.deliveryDirectives;this.load({id:r,groupId:i,level:null,responseType:"text",type:ot,url:a,deliveryDirectives:s})},n.onSubtitleTrackLoading=function(e,t){var r=t.id,i=t.groupId,a=t.url,s=t.deliveryDirectives;this.load({id:r,groupId:i,level:null,responseType:"text",type:ut,url:a,deliveryDirectives:s})},n.load=function(e){var t,r,i,a=this,s=this.hls.config,l=this.getInternalLoader(e);if(l){var d=l.context;if(d&&d.url===e.url)return void R.trace("[playlist-loader]: playlist request ongoing");R.log("[playlist-loader]: aborting previous loader for type: "+e.type),l.abort()}if(r=e.type===Kt?s.manifestLoadPolicy.default:M({},s.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),l=this.createInternalLoader(e),(t=e.deliveryDirectives)!=null&&t.part&&(e.type===Ft&&e.level!==null?i=this.hls.levels[e.level].details:e.type===ot&&e.id!==null?i=this.hls.audioTracks[e.id].details:e.type===ut&&e.id!==null&&(i=this.hls.subtitleTracks[e.id].details),i)){var c=i.partTarget,u=i.targetduration;if(c&&u){var g=1e3*Math.max(3*c,.8*u);r=M({},r,{maxTimeToFirstByteMs:Math.min(g,r.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(g,r.maxTimeToFirstByteMs)})}}var m=r.errorRetry||r.timeoutRetry||{},v={loadPolicy:r,timeout:r.maxLoadTimeMs,maxRetry:m.maxNumRetry||0,retryDelay:m.retryDelayMs||0,maxRetryDelay:m.maxRetryDelayMs||0},y={onSuccess:function(k,b,E,C){var S=a.getInternalLoader(E);a.resetInternalLoader(E.type);var D=k.data;D.indexOf("#EXTM3U")===0?(b.parsing.start=performance.now(),ir.isMediaPlaylist(D)?a.handleTrackOrLevelPlaylist(k,b,E,C||null,S):a.handleMasterPlaylist(k,b,E,C)):a.handleManifestParsingError(k,E,new Error("no EXTM3U delimiter"),C||null,b)},onError:function(k,b,E,C){a.handleNetworkError(b,E,!1,k,C)},onTimeout:function(k,b,E){a.handleNetworkError(b,E,!0,void 0,k)}};l.load(e,v,y)},n.handleMasterPlaylist=function(e,t,r,i){var a=this.hls,s=e.data,l=yi(e,r),d=ir.parseMasterPlaylist(s,l);if(d.playlistParsingError)this.handleManifestParsingError(e,r,d.playlistParsingError,i,t);else{var c=d.contentSteering,u=d.levels,g=d.sessionData,m=d.sessionKeys,v=d.startTimeOffset,y=d.variableList;this.variableList=y;var k=ir.parseMasterPlaylistMedia(s,l,d),b=k.AUDIO,E=b===void 0?[]:b,C=k.SUBTITLES,S=k["CLOSED-CAPTIONS"];E.length&&(E.some(function(D){return!D.url})||!u[0].audioCodec||u[0].attrs.AUDIO||(R.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),E.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new xe({}),bitrate:0,url:""}))),a.trigger(A.MANIFEST_LOADED,{levels:u,audioTracks:E,subtitles:C,captions:S,contentSteering:c,url:l,stats:t,networkDetails:i,sessionData:g,sessionKeys:m,startTimeOffset:v,variableList:y})}},n.handleTrackOrLevelPlaylist=function(e,t,r,i,a){var s=this.hls,l=r.id,d=r.level,c=r.type,u=yi(e,r),g=Y(l)?l:0,m=Y(d)?d:g,v=la(r),y=ir.parseLevelPlaylist(e.data,u,m,v,g,this.variableList);if(c===Kt){var k={attrs:new xe({}),bitrate:0,details:y,name:"",url:u};s.trigger(A.MANIFEST_LOADED,{levels:[k],audioTracks:[],url:u,stats:t,networkDetails:i,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),r.levelDetails=y,this.handlePlaylistLoaded(y,e,t,r,i,a)},n.handleManifestParsingError=function(e,t,r,i,a){this.hls.trigger(A.ERROR,{type:J.NETWORK_ERROR,details:O.MANIFEST_PARSING_ERROR,fatal:t.type===Kt,url:e.url,err:r,error:r,reason:r.message,response:e,context:t,networkDetails:i,stats:a})},n.handleNetworkError=function(e,t,r,i,a){r===void 0&&(r=!1);var s="A network "+(r?"timeout":"error"+(i?" (status "+i.code+")":""))+" occurred while loading "+e.type;e.type===Ft?s+=": "+e.level+" id: "+e.id:e.type!==ot&&e.type!==ut||(s+=" id: "+e.id+' group-id: "'+e.groupId+'"');var l=new Error(s);R.warn("[playlist-loader]: "+s);var d=O.UNKNOWN,c=!1,u=this.getInternalLoader(e);switch(e.type){case Kt:d=r?O.MANIFEST_LOAD_TIMEOUT:O.MANIFEST_LOAD_ERROR,c=!0;break;case Ft:d=r?O.LEVEL_LOAD_TIMEOUT:O.LEVEL_LOAD_ERROR,c=!1;break;case ot:d=r?O.AUDIO_TRACK_LOAD_TIMEOUT:O.AUDIO_TRACK_LOAD_ERROR,c=!1;break;case ut:d=r?O.SUBTITLE_TRACK_LOAD_TIMEOUT:O.SUBTITLE_LOAD_ERROR,c=!1}u&&this.resetInternalLoader(e.type);var g={type:J.NETWORK_ERROR,details:d,fatal:c,url:e.url,loader:u,context:e,error:l,networkDetails:t,stats:a};if(i){var m=(t==null?void 0:t.url)||e.url;g.response=T({url:m,data:void 0},i)}this.hls.trigger(A.ERROR,g)},n.handlePlaylistLoaded=function(e,t,r,i,a,s){var l=this.hls,d=i.type,c=i.level,u=i.id,g=i.groupId,m=i.deliveryDirectives,v=yi(t,i),y=la(i),k=typeof i.level=="number"&&y===ve?c:void 0;if(e.fragments.length){e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));var b=e.playlistParsingError;if(b)l.trigger(A.ERROR,{type:J.NETWORK_ERROR,details:O.LEVEL_PARSING_ERROR,fatal:!1,url:v,error:b,reason:b.message,response:t,context:i,level:k,parent:y,networkDetails:a,stats:r});else switch(e.live&&s&&(s.getCacheAge&&(e.ageHeader=s.getCacheAge()||0),s.getCacheAge&&!isNaN(e.ageHeader)||(e.ageHeader=0)),d){case Kt:case Ft:l.trigger(A.LEVEL_LOADED,{details:e,level:k||0,id:u||0,stats:r,networkDetails:a,deliveryDirectives:m});break;case ot:l.trigger(A.AUDIO_TRACK_LOADED,{details:e,id:u||0,groupId:g||"",stats:r,networkDetails:a,deliveryDirectives:m});break;case ut:l.trigger(A.SUBTITLE_TRACK_LOADED,{details:e,id:u||0,groupId:g||"",stats:r,networkDetails:a,deliveryDirectives:m})}}else{var E=new Error("No Segments found in Playlist");l.trigger(A.ERROR,{type:J.NETWORK_ERROR,details:O.LEVEL_EMPTY_ERROR,fatal:!1,url:v,error:E,reason:E.message,response:t,context:i,level:k,parent:y,networkDetails:a,stats:r})}},o}();function da(o,n){var e;try{e=new Event("addtrack")}catch{(e=document.createEvent("Event")).initEvent("addtrack",!1,!1)}e.track=o,n.dispatchEvent(e)}function ca(o,n){var e=o.mode;if(e==="disabled"&&(o.mode="hidden"),o.cues&&!o.cues.getCueById(n.id))try{if(o.addCue(n),!o.cues.getCueById(n.id))throw new Error("addCue is failed for: "+n)}catch(r){R.debug("[texttrack-utils]: "+r);try{var t=new self.TextTrackCue(n.startTime,n.endTime,n.text);t.id=n.id,o.addCue(t)}catch(i){R.debug("[texttrack-utils]: Legacy TextTrackCue fallback failed: "+i)}}e==="disabled"&&(o.mode=e)}function Vt(o){var n=o.mode;if(n==="disabled"&&(o.mode="hidden"),o.cues)for(var e=o.cues.length;e--;)o.removeCue(o.cues[e]);n==="disabled"&&(o.mode=n)}function wi(o,n,e,t){var r=o.mode;if(r==="disabled"&&(o.mode="hidden"),o.cues&&o.cues.length>0)for(var i=function(s,l,d){var c=[],u=function(y,k){if(k<y[0].startTime)return 0;var b=y.length-1;if(k>y[b].endTime)return-1;for(var E=0,C=b;E<=C;){var S=Math.floor((C+E)/2);if(k<y[S].startTime)C=S-1;else{if(!(k>y[S].startTime&&E<b))return S;E=S+1}}return y[E].startTime-k<k-y[C].startTime?E:C}(s,l);if(u>-1)for(var g=u,m=s.length;g<m;g++){var v=s[g];if(v.startTime>=l&&v.endTime<=d)c.push(v);else if(v.startTime>d)return c}return c}(o.cues,n,e),a=0;a<i.length;a++)t&&!t(i[a])||o.removeCue(i[a]);r==="disabled"&&(o.mode=r)}var nr="org.id3",Rs="com.apple.quicktime.HLS",ar="https://aomedia.org/emsg/ID3";function Ei(){if(typeof self<"u")return self.WebKitDataCue||self.VTTCue||self.TextTrackCue}var Pr=function(){var o=Ei();try{new o(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY}();function Ai(o,n){return o.getTime()/1e3-n}var Is=function(){function o(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=e,this._registerListeners()}var n=o.prototype;return n.destroy=function(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null},n._registerListeners=function(){var e=this.hls;e.on(A.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(A.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(A.MANIFEST_LOADING,this.onManifestLoading,this),e.on(A.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(A.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(A.LEVEL_UPDATED,this.onLevelUpdated,this)},n._unregisterListeners=function(){var e=this.hls;e.off(A.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(A.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(A.MANIFEST_LOADING,this.onManifestLoading,this),e.off(A.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(A.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(A.LEVEL_UPDATED,this.onLevelUpdated,this)},n.onMediaAttached=function(e,t){this.media=t.media},n.onMediaDetaching=function(){this.id3Track&&(Vt(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})},n.onManifestLoading=function(){this.dateRangeCuesAppended={}},n.createTrack=function(e){var t=this.getID3Track(e.textTracks);return t.mode="hidden",t},n.getID3Track=function(e){if(this.media){for(var t=0;t<e.length;t++){var r=e[t];if(r.kind==="metadata"&&r.label==="id3")return da(r,this.media),r}return this.media.addTextTrack("metadata","id3")}},n.onFragParsingMetadata=function(e,t){if(this.media){var r=this.hls.config,i=r.enableEmsgMetadataCues,a=r.enableID3MetadataCues;if(i||a){var s=t.samples;this.id3Track||(this.id3Track=this.createTrack(this.media));for(var l=Ei(),d=0;d<s.length;d++){var c=s[d].type;if((c!==ar||i)&&a){var u=Gn(s[d].data);if(u){var g=s[d].pts,m=g+s[d].duration;m>Pr&&(m=Pr),m-g<=0&&(m=g+.25);for(var v=0;v<u.length;v++){var y=u[v];if(!Un(y)){this.updateId3CueEnds(g,c);var k=new l(g,m,"");k.value=y,c&&(k.type=c),this.id3Track.addCue(k)}}}}}}}},n.updateId3CueEnds=function(e,t){var r,i=(r=this.id3Track)==null?void 0:r.cues;if(i)for(var a=i.length;a--;){var s=i[a];s.type===t&&s.startTime<e&&s.endTime===Pr&&(s.endTime=e)}},n.onBufferFlushing=function(e,t){var r=t.startOffset,i=t.endOffset,a=t.type,s=this.id3Track,l=this.hls;if(l){var d=l.config,c=d.enableEmsgMetadataCues,u=d.enableID3MetadataCues;s&&(c||u)&&wi(s,r,i,a==="audio"?function(g){return g.type===nr&&u}:a==="video"?function(g){return g.type===ar&&c}:function(g){return g.type===nr&&u||g.type===ar&&c})}},n.onLevelUpdated=function(e,t){var r=this,i=t.details;if(this.media&&i.hasProgramDateTime&&this.hls.config.enableDateRangeMetadataCues){var a=this.dateRangeCuesAppended,s=this.id3Track,l=i.dateRanges,d=Object.keys(l);if(s)for(var c=Object.keys(a).filter(function(E){return!d.includes(E)}),u=function(){var E=c[g];Object.keys(a[E].cues).forEach(function(C){s.removeCue(a[E].cues[C])}),delete a[E]},g=c.length;g--;)u();var m=i.fragments[i.fragments.length-1];if(d.length!==0&&Y(m==null?void 0:m.programDateTime)){this.id3Track||(this.id3Track=this.createTrack(this.media));for(var v=m.programDateTime/1e3-m.start,y=Ei(),k=function(){var E=d[b],C=l[E],S=a[E],D=(S==null?void 0:S.cues)||{},I=(S==null?void 0:S.durationKnown)||!1,P=Ai(C.startDate,v),U=Pr,F=C.endDate;if(F)U=Ai(F,v),I=!0;else if(C.endOnNext&&!I){var N=d.reduce(function(te,ae){var ce=l[ae];return ce.class===C.class&&ce.id!==ae&&ce.startDate>C.startDate&&te.push(ce),te},[]).sort(function(te,ae){return te.startDate.getTime()-ae.startDate.getTime()})[0];N&&(U=Ai(N.startDate,v),I=!0)}for(var z,K,W=Object.keys(C.attr),ne=0;ne<W.length;ne++){var X=W[ne];if((K=X)!=="ID"&&K!=="CLASS"&&K!=="START-DATE"&&K!=="DURATION"&&K!=="END-DATE"&&K!=="END-ON-NEXT"){var ee=D[X];if(ee)I&&!S.durationKnown&&(ee.endTime=U);else{var re=C.attr[X];ee=new y(P,U,""),ls(X)&&(z=re,re=Uint8Array.from(z.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer),ee.value={key:X,data:re},ee.type=Rs,ee.id=E,r.id3Track.addCue(ee),D[X]=ee}}}a[E]={cues:D,dateRange:C,durationKnown:I}},b=0;b<d.length;b++)k()}}},o}(),Ps=function(){function o(e){var t=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return t.timeupdate()},this.hls=e,this.config=e.config,this.registerListeners()}var n=o.prototype;return n.destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},n.registerListeners=function(){this.hls.on(A.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(A.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(A.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(A.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(A.ERROR,this.onError,this)},n.unregisterListeners=function(){this.hls.off(A.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(A.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(A.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(A.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(A.ERROR,this.onError,this)},n.onMediaAttached=function(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},n.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},n.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},n.onLevelUpdated=function(e,t){var r=t.details;this.levelDetails=r,r.advanced&&this.timeupdate(),!r.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},n.onError=function(e,t){var r;t.details===O.BUFFER_STALLED_ERROR&&(this.stallCount++,(r=this.levelDetails)!=null&&r.live&&R.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},n.timeupdate=function(){var e=this.media,t=this.levelDetails;if(e&&t){this.currentTime=e.currentTime;var r=this.computeLatency();if(r!==null){this._latency=r;var i=this.config,a=i.lowLatencyMode,s=i.maxLiveSyncPlaybackRate;if(a&&s!==1){var l=this.targetLatency;if(l!==null){var d=r-l,c=d<Math.min(this.maxLatency,l+t.targetduration);if(t.live&&c&&d>.05&&this.forwardBufferLength>1){var u=Math.min(2,Math.max(1,s)),g=Math.round(2/(1+Math.exp(-.75*d-this.edgeStalled))*20)/20;e.playbackRate=Math.min(u,Math.max(1,g))}else e.playbackRate!==1&&e.playbackRate!==0&&(e.playbackRate=1)}}}}},n.estimateLiveEdge=function(){var e=this.levelDetails;return e===null?null:e.edge+e.age},n.computeLatency=function(){var e=this.estimateLiveEdge();return e===null?null:e-this.currentTime},L(o,[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var e=this.config,t=this.levelDetails;return e.liveMaxLatencyDuration!==void 0?e.liveMaxLatencyDuration:t?e.liveMaxLatencyDurationCount*t.targetduration:0}},{key:"targetLatency",get:function(){var e=this.levelDetails;if(e===null)return null;var t=e.holdBack,r=e.partHoldBack,i=e.targetduration,a=this.config,s=a.liveSyncDuration,l=a.liveSyncDurationCount,d=a.lowLatencyMode,c=this.hls.userConfig,u=d&&r||t;(c.liveSyncDuration||c.liveSyncDurationCount||u===0)&&(u=s!==void 0?s:l*i);var g=i;return u+Math.min(1*this.stallCount,g)}},{key:"liveSyncPosition",get:function(){var e=this.estimateLiveEdge(),t=this.targetLatency,r=this.levelDetails;if(e===null||t===null||r===null)return null;var i=r.edge,a=e-t-this.edgeStalled,s=i-r.totalduration,l=i-(this.config.lowLatencyMode&&r.partTarget||r.targetduration);return Math.min(Math.max(s,a),l)}},{key:"drift",get:function(){var e=this.levelDetails;return e===null?1:e.drift}},{key:"edgeStalled",get:function(){var e=this.levelDetails;if(e===null)return 0;var t=3*(this.config.lowLatencyMode&&e.partTarget||e.targetduration);return Math.max(e.age-t,0)}},{key:"forwardBufferLength",get:function(){var e=this.media,t=this.levelDetails;if(!e||!t)return 0;var r=e.buffered.length;return(r?e.buffered.end(r-1):t.edge)-this.currentTime}}]),o}(),xi=["NONE","TYPE-0","TYPE-1",null],ki="",Os="YES",Ms="v2",ha=function(){function o(n,e,t){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=n,this.part=e,this.skip=t}return o.prototype.addDirectives=function(n){var e=new self.URL(n);return this.msn!==void 0&&e.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&e.searchParams.set("_HLS_part",this.part.toString()),this.skip&&e.searchParams.set("_HLS_skip",this.skip),e.href},o}(),or=function(){function o(n){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[n.url],this._attrs=[n.attrs],this.bitrate=n.bitrate,n.details&&(this.details=n.details),this.id=n.id||0,this.name=n.name,this.width=n.width||0,this.height=n.height||0,this.audioCodec=n.audioCodec,this.videoCodec=n.videoCodec,this.unknownCodecs=n.unknownCodecs,this.codecSet=[n.videoCodec,n.audioCodec].filter(function(e){return e}).join(",").replace(/\.[^.,]+/g,"")}return o.prototype.addFallback=function(n){this.url.push(n.url),this._attrs.push(n.attrs)},L(o,[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"attrs",get:function(){return this._attrs[this._urlId]}},{key:"pathwayId",get:function(){return this.attrs["PATHWAY-ID"]||"."}},{key:"uri",get:function(){return this.url[this._urlId]||""}},{key:"urlId",get:function(){return this._urlId},set:function(n){var e=n%this.url.length;this._urlId!==e&&(this.fragmentError=0,this.loadError=0,this.details=void 0,this._urlId=e)}},{key:"audioGroupId",get:function(){var n;return(n=this.audioGroupIds)==null?void 0:n[this.urlId]}},{key:"textGroupId",get:function(){var n;return(n=this.textGroupIds)==null?void 0:n[this.urlId]}}]),o}();function Ti(o,n){var e=n.startPTS;if(Y(e)){var t,r=0;n.sn>o.sn?(r=e-o.start,t=o):(r=o.start-e,t=n),t.duration!==r&&(t.duration=r)}else n.sn>o.sn?o.cc===n.cc&&o.minEndPTS?n.start=o.start+(o.minEndPTS-o.start):n.start=o.start+o.duration:n.start=Math.max(o.start-n.duration,0)}function ua(o,n,e,t,r,i){t-e<=0&&(R.warn("Fragment should have a positive duration",n),t=e+n.duration,i=r+n.duration);var a=e,s=t,l=n.startPTS,d=n.endPTS;if(Y(l)){var c=Math.abs(l-e);Y(n.deltaPTS)?n.deltaPTS=Math.max(c,n.deltaPTS):n.deltaPTS=c,a=Math.max(e,l),e=Math.min(e,l),r=Math.min(r,n.startDTS),s=Math.min(t,d),t=Math.max(t,d),i=Math.max(i,n.endDTS)}var u=e-n.start;n.start!==0&&(n.start=e),n.duration=t-n.start,n.startPTS=e,n.maxStartPTS=a,n.startDTS=r,n.endPTS=t,n.minEndPTS=s,n.endDTS=i;var g,m=n.sn;if(!o||m<o.startSN||m>o.endSN)return 0;var v=m-o.startSN,y=o.fragments;for(y[v]=n,g=v;g>0;g--)Ti(y[g],y[g-1]);for(g=v;g<y.length-1;g++)Ti(y[g],y[g+1]);return o.fragmentHint&&Ti(y[y.length-1],o.fragmentHint),o.PTSKnown=o.alignedSliding=!0,u}function Fs(o,n){for(var e=null,t=o.fragments,r=t.length-1;r>=0;r--){var i=t[r].initSegment;if(i){e=i;break}}o.fragmentHint&&delete o.fragmentHint.endPTS;var a,s,l,d,c,u=0;if(function(b,E,C){for(var S=E.skippedSegments,D=Math.max(b.startSN,E.startSN)-E.startSN,I=(b.fragmentHint?1:0)+(S?E.endSN:Math.min(b.endSN,E.endSN))-E.startSN,P=E.startSN-b.startSN,U=E.fragmentHint?E.fragments.concat(E.fragmentHint):E.fragments,F=b.fragmentHint?b.fragments.concat(b.fragmentHint):b.fragments,N=D;N<=I;N++){var z=F[P+N],K=U[N];S&&!K&&N<S&&(K=E.fragments[N]=z),z&&K&&C(z,K)}}(o,n,function(b,E){b.relurl&&(u=b.cc-E.cc),Y(b.startPTS)&&Y(b.endPTS)&&(E.start=E.startPTS=b.startPTS,E.startDTS=b.startDTS,E.maxStartPTS=b.maxStartPTS,E.endPTS=b.endPTS,E.endDTS=b.endDTS,E.minEndPTS=b.minEndPTS,E.duration=b.endPTS-b.startPTS,E.duration&&(a=E),n.PTSKnown=n.alignedSliding=!0),E.elementaryStreams=b.elementaryStreams,E.loader=b.loader,E.stats=b.stats,E.urlId=b.urlId,b.initSegment&&(E.initSegment=b.initSegment,e=b.initSegment)}),e&&(n.fragmentHint?n.fragments.concat(n.fragmentHint):n.fragments).forEach(function(b){var E;b.initSegment&&b.initSegment.relurl!==((E=e)==null?void 0:E.relurl)||(b.initSegment=e)}),n.skippedSegments)if(n.deltaUpdateFailed=n.fragments.some(function(b){return!b}),n.deltaUpdateFailed){R.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var g=n.skippedSegments;g--;)n.fragments.shift();n.startSN=n.fragments[0].sn,n.startCC=n.fragments[0].cc}else n.canSkipDateRanges&&(n.dateRanges=(s=o.dateRanges,l=n.dateRanges,d=n.recentlyRemovedDateranges,c=M({},s),d&&d.forEach(function(b){delete c[b]}),Object.keys(l).forEach(function(b){var E=new Rn(l[b].attr,c[b]);E.isValid?c[b]=E:R.warn('Ignoring invalid Playlist Delta Update DATERANGE tag: "'+JSON.stringify(l[b].attr)+'"')}),c));var m=n.fragments;if(u){R.warn("discontinuity sliding from playlist, take drift into account");for(var v=0;v<m.length;v++)m[v].cc+=u}n.skippedSegments&&(n.startCC=n.fragments[0].cc),function(b,E,C){if(b&&E)for(var S=0,D=0,I=b.length;D<=I;D++){var P=b[D],U=E[D+S];P&&U&&P.index===U.index&&P.fragment.sn===U.fragment.sn?C(P,U):S--}}(o.partList,n.partList,function(b,E){E.elementaryStreams=b.elementaryStreams,E.stats=b.stats}),a?ua(n,a,a.startPTS,a.endPTS,a.startDTS,a.endDTS):fa(o,n),m.length&&(n.totalduration=n.edge-m[0].start),n.driftStartTime=o.driftStartTime,n.driftStart=o.driftStart;var y=n.advancedDateTime;if(n.advanced&&y){var k=n.edge;n.driftStart||(n.driftStartTime=y,n.driftStart=k),n.driftEndTime=y,n.driftEnd=k}else n.driftEndTime=o.driftEndTime,n.driftEnd=o.driftEnd,n.advancedDateTime=o.advancedDateTime}function fa(o,n){var e=n.startSN+n.skippedSegments-o.startSN,t=o.fragments;e<0||e>=t.length||_i(n,t[e].start)}function _i(o,n){if(n){for(var e=o.fragments,t=o.skippedSegments;t<e.length;t++)e[t].start+=n;o.fragmentHint&&(o.fragmentHint.start+=n)}}function pa(o,n,e){var t;return o!=null&&o.details?ga((t=o.details)==null?void 0:t.partList,n,e):null}function ga(o,n,e){if(o)for(var t=o.length;t--;){var r=o[t];if(r.index===e&&r.fragment.sn===n)return r}return null}function Or(o){switch(o.details){case O.FRAG_LOAD_TIMEOUT:case O.KEY_LOAD_TIMEOUT:case O.LEVEL_LOAD_TIMEOUT:case O.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function ma(o,n){var e=Or(n);return o.default[(e?"timeout":"error")+"Retry"]}function Si(o,n){var e=o.backoff==="linear"?1:Math.pow(2,n);return Math.min(e*o.retryDelayMs,o.maxRetryDelayMs)}function va(o){return T(T({},o),{errorRetry:null,timeoutRetry:null})}function Mr(o,n,e,t){return!!o&&n<o.maxNumRetry&&(function(r){return r===0&&navigator.onLine===!1||!!r&&(r<400||r>499)}(t)||!!e)}var ba=function(o,n){for(var e=0,t=o.length-1,r=null,i=null;e<=t;){var a=n(i=o[r=(e+t)/2|0]);if(a>0)e=r+1;else{if(!(a<0))return i;t=r-1}}return null};function sr(o,n,e,t){e===void 0&&(e=0),t===void 0&&(t=0);var r=null;if(o?r=n[o.sn-n[0].sn+1]||null:e===0&&n[0].start===0&&(r=n[0]),r&&Ci(e,t,r)===0)return r;var i=ba(n,Ci.bind(null,e,t));return!i||i===o&&r?r:i}function Ci(o,n,e){if(o===void 0&&(o=0),n===void 0&&(n=0),e.start<=o&&e.start+e.duration>o)return 0;var t=Math.min(n,e.duration+(e.deltaPTS?e.deltaPTS:0));return e.start+e.duration-t<=o?1:e.start-t>o&&e.start?-1:0}function Bs(o,n,e){var t=1e3*Math.min(n,e.duration+(e.deltaPTS?e.deltaPTS:0));return(e.endProgramDateTime||0)-t>o}var Li,Ns=3e5,Di=0,ft=2,Fr=5,zt=0,Br=1,ya=2,Us=function(){function o(e){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=e,this.log=R.log.bind(R,"[info]:"),this.warn=R.warn.bind(R,"[warning]:"),this.error=R.error.bind(R,"[error]:"),this.registerListeners()}var n=o.prototype;return n.registerListeners=function(){var e=this.hls;e.on(A.ERROR,this.onError,this),e.on(A.MANIFEST_LOADING,this.onManifestLoading,this),e.on(A.LEVEL_UPDATED,this.onLevelUpdated,this)},n.unregisterListeners=function(){var e=this.hls;e&&(e.off(A.ERROR,this.onError,this),e.off(A.ERROR,this.onErrorOut,this),e.off(A.MANIFEST_LOADING,this.onManifestLoading,this),e.off(A.LEVEL_UPDATED,this.onLevelUpdated,this))},n.destroy=function(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}},n.startLoad=function(e){this.playlistError=0},n.stopLoad=function(){},n.getVariantLevelIndex=function(e){return(e==null?void 0:e.type)===ve?e.level:this.hls.loadLevel},n.onManifestLoading=function(){this.playlistError=0,this.penalizedRenditions={}},n.onLevelUpdated=function(){this.playlistError=0},n.onError=function(e,t){var r,i;if(!t.fatal){var a=this.hls,s=t.context;switch(t.details){case O.FRAG_LOAD_ERROR:case O.FRAG_LOAD_TIMEOUT:case O.KEY_LOAD_ERROR:case O.KEY_LOAD_TIMEOUT:return void(t.errorAction=this.getFragRetryOrSwitchAction(t));case O.FRAG_PARSING_ERROR:if((r=t.frag)!=null&&r.gap)return void(t.errorAction={action:Di,flags:zt});case O.FRAG_GAP:case O.FRAG_DECRYPT_ERROR:return t.errorAction=this.getFragRetryOrSwitchAction(t),void(t.errorAction.action=ft);case O.LEVEL_EMPTY_ERROR:case O.LEVEL_PARSING_ERROR:var l,d,c=t.parent===ve?t.level:a.loadLevel;return void(t.details===O.LEVEL_EMPTY_ERROR&&(l=t.context)!=null&&(d=l.levelDetails)!=null&&d.live?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,c):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,c)));case O.LEVEL_LOAD_ERROR:case O.LEVEL_LOAD_TIMEOUT:return void(typeof(s==null?void 0:s.level)=="number"&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,s.level)));case O.AUDIO_TRACK_LOAD_ERROR:case O.AUDIO_TRACK_LOAD_TIMEOUT:case O.SUBTITLE_LOAD_ERROR:case O.SUBTITLE_TRACK_LOAD_TIMEOUT:if(s){var u=a.levels[a.loadLevel];if(u&&(s.type===ot&&s.groupId===u.audioGroupId||s.type===ut&&s.groupId===u.textGroupId))return t.errorAction=this.getPlaylistRetryOrSwitchAction(t,a.loadLevel),t.errorAction.action=ft,void(t.errorAction.flags=Br)}return;case O.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:var g=a.levels[a.loadLevel],m=g==null?void 0:g.attrs["HDCP-LEVEL"];return void(m&&(t.errorAction={action:ft,flags:ya,hdcpLevel:m}));case O.BUFFER_ADD_CODEC_ERROR:case O.REMUX_ALLOC_ERROR:return void(t.errorAction=this.getLevelSwitchAction(t,(i=t.level)!=null?i:a.loadLevel));case O.INTERNAL_EXCEPTION:case O.BUFFER_APPENDING_ERROR:case O.BUFFER_APPEND_ERROR:case O.BUFFER_FULL_ERROR:case O.LEVEL_SWITCH_ERROR:case O.BUFFER_STALLED_ERROR:case O.BUFFER_SEEK_OVER_HOLE:case O.BUFFER_NUDGE_ON_STALL:return void(t.errorAction={action:Di,flags:zt})}if(t.type===J.KEY_SYSTEM_ERROR){var v=this.getVariantLevelIndex(t.frag);return t.levelRetry=!1,void(t.errorAction=this.getLevelSwitchAction(t,v))}}},n.getPlaylistRetryOrSwitchAction=function(e,t){var r,i=ma(this.hls.config.playlistLoadPolicy,e),a=this.playlistError++,s=(r=e.response)==null?void 0:r.code;if(Mr(i,a,Or(e),s))return{action:Fr,flags:zt,retryConfig:i,retryCount:a};var l=this.getLevelSwitchAction(e,t);return i&&(l.retryConfig=i,l.retryCount=a),l},n.getFragRetryOrSwitchAction=function(e){var t=this.hls,r=this.getVariantLevelIndex(e.frag),i=t.levels[r],a=t.config,s=a.fragLoadPolicy,l=a.keyLoadPolicy,d=ma(e.details.startsWith("key")?l:s,e),c=t.levels.reduce(function(v,y){return v+y.fragmentError},0);if(i){var u;e.details!==O.FRAG_GAP&&i.fragmentError++;var g=(u=e.response)==null?void 0:u.code;if(Mr(d,c,Or(e),g))return{action:Fr,flags:zt,retryConfig:d,retryCount:c}}var m=this.getLevelSwitchAction(e,r);return d&&(m.retryConfig=d,m.retryCount=c),m},n.getLevelSwitchAction=function(e,t){var r=this.hls;t==null&&(t=r.loadLevel);var i=this.hls.levels[t];if(i&&(i.loadError++,r.autoLevelEnabled)){for(var a,s,l=-1,d=r.levels,c=r.loadLevel,u=r.minAutoLevel,g=r.maxAutoLevel,m=(a=e.frag)==null?void 0:a.type,v=(s=e.context)!=null?s:{},y=v.type,k=v.groupId,b=d.length;b--;){var E=(b+c)%d.length;if(E!==c&&E>=u&&E<=g&&d[E].loadError===0){var C=d[E];if(e.details===O.FRAG_GAP&&e.frag){var S=d[E].details;if(S){var D=sr(e.frag,S.fragments,e.frag.start);if(D!=null&&D.gap)continue}}else if(y===ot&&k===C.audioGroupId||y===ut&&k===C.textGroupId||m===st&&i.audioGroupId===C.audioGroupId||m===At&&i.textGroupId===C.textGroupId)continue;l=E;break}}if(l>-1&&r.loadLevel!==l)return e.levelRetry=!0,this.playlistError=0,{action:ft,flags:zt,nextAutoLevel:l}}return{action:ft,flags:Br}},n.onErrorOut=function(e,t){var r;switch((r=t.errorAction)==null?void 0:r.action){case Di:break;case ft:this.sendAlternateToPenaltyBox(t),t.errorAction.resolved||t.details===O.FRAG_GAP||(t.fatal=!0)}t.fatal&&this.hls.stopLoad()},n.sendAlternateToPenaltyBox=function(e){var t=this.hls,r=e.errorAction;if(r){var i=r.flags,a=r.hdcpLevel,s=r.nextAutoLevel;switch(i){case zt:this.switchLevel(e,s);break;case Br:r.resolved||(r.resolved=this.redundantFailover(e));break;case ya:a&&(t.maxHdcpLevel=xi[xi.indexOf(a)-1],r.resolved=!0),this.warn('Restricting playback to HDCP-LEVEL of "'+t.maxHdcpLevel+'" or lower')}r.resolved||this.switchLevel(e,s)}},n.switchLevel=function(e,t){t!==void 0&&e.errorAction&&(this.warn("switching to level "+t+" after "+e.details),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)},n.redundantFailover=function(e){var t=this,r=this.hls,i=this.penalizedRenditions,a=e.parent===ve?e.level:r.loadLevel,s=r.levels[a],l=s.url.length,d=e.frag?e.frag.urlId:s.urlId;s.urlId!==d||e.frag&&!s.details||this.penalizeRendition(s,e);for(var c=function(){var m=(d+u)%l,v=i[m];if(!v||function(y,k,b){if(performance.now()-y.lastErrorPerfMs>Ns)return!0;var E=y.details;if(k.details===O.FRAG_GAP&&E&&k.frag){var C=k.frag.start,S=sr(null,E.fragments,C);if(S&&!S.gap)return!0}if(b&&y.errors.length<b.errors.length){var D=y.errors[y.errors.length-1];if(E&&D.frag&&k.frag&&Math.abs(D.frag.start-k.frag.start)>3*E.targetduration)return!0}return!1}(v,e,i[d]))return t.warn("Switching to Redundant Stream "+(m+1)+"/"+l+': "'+s.url[m]+'" after '+e.details),t.playlistError=0,r.levels.forEach(function(y){y.urlId=m}),r.nextLoadLevel=a,{v:!0}},u=1;u<l;u++){var g=c();if(typeof g=="object")return g.v}return!1},n.penalizeRendition=function(e,t){var r=this.penalizedRenditions,i=r[e.urlId]||{lastErrorPerfMs:0,errors:[],details:void 0};i.lastErrorPerfMs=performance.now(),i.errors.push(t),i.details=e.details,r[e.urlId]=i},o}(),Ri=function(){function o(e,t){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=R.log.bind(R,t+":"),this.warn=R.warn.bind(R,t+":"),this.hls=e}var n=o.prototype;return n.destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},n.clearTimer=function(){clearTimeout(this.timer),this.timer=-1},n.startLoad=function(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()},n.stopLoad=function(){this.canLoad=!1,this.clearTimer()},n.switchParams=function(e,t){var r=t==null?void 0:t.renditionReports;if(r){for(var i=-1,a=0;a<r.length;a++){var s=r[a],l=void 0;try{l=new self.URL(s.URI,t.url).href}catch(m){R.warn("Could not construct new URL for Rendition Report: "+m),l=s.URI||""}if(l===e){i=a;break}l===e.substring(0,l.length)&&(i=a)}if(i!==-1){var d=r[i],c=parseInt(d["LAST-MSN"])||(t==null?void 0:t.lastPartSn),u=parseInt(d["LAST-PART"])||(t==null?void 0:t.lastPartIndex);if(this.hls.config.lowLatencyMode){var g=Math.min(t.age-t.partTarget,t.targetduration);u>=0&&g>t.partTarget&&(u+=1)}return new ha(c,u>=0?u:void 0,ki)}}},n.loadPlaylist=function(e){this.requestScheduled===-1&&(this.requestScheduled=self.performance.now())},n.shouldLoadPlaylist=function(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)},n.shouldReloadPlaylist=function(e){return this.timer===-1&&this.requestScheduled===-1&&this.shouldLoadPlaylist(e)},n.playlistLoaded=function(e,t,r){var i=this,a=t.details,s=t.stats,l=self.performance.now(),d=s.loading.first?Math.max(0,l-s.loading.first):0;if(a.advancedDateTime=Date.now()-d,a.live||r!=null&&r.live){if(a.reloaded(r),r&&this.log("live playlist "+e+" "+(a.advanced?"REFRESHED "+a.lastPartSn+"-"+a.lastPartIndex:a.updated?"UPDATED":"MISSED")),r&&a.fragments.length>0&&Fs(r,a),!this.canLoad||!a.live)return;var c,u=void 0,g=void 0;if(a.canBlockReload&&a.endSN&&a.advanced){var m=this.hls.config.lowLatencyMode,v=a.lastPartSn,y=a.endSN,k=a.lastPartIndex,b=v===y;k!==-1?(u=b?y+1:v,g=b?m?0:k:k+1):u=y+1;var E=a.age,C=E+a.ageHeader,S=Math.min(C-a.partTarget,1.5*a.targetduration);if(S>0){if(r&&S>r.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+r.tuneInGoal+" to: "+S+" with playlist age: "+a.age),S=0;else{var D=Math.floor(S/a.targetduration);u+=D,g!==void 0&&(g+=Math.round(S%a.targetduration/a.partTarget)),this.log("CDN Tune-in age: "+a.ageHeader+"s last advanced "+E.toFixed(2)+"s goal: "+S+" skip sn "+D+" to part "+g)}a.tuneInGoal=S}if(c=this.getDeliveryDirectives(a,t.deliveryDirectives,u,g),m||!b)return void this.loadPlaylist(c)}else(a.canBlockReload||a.canSkipUntil)&&(c=this.getDeliveryDirectives(a,t.deliveryDirectives,u,g));var I=this.hls.mainForwardBufferInfo,P=I?I.end-I.len:0,U=function(N,z){z===void 0&&(z=1/0);var K=1e3*N.targetduration;if(N.updated){var W=N.fragments;if(W.length&&4*K>z){var ne=1e3*W[W.length-1].duration;ne<K&&(K=ne)}}else K/=2;return Math.round(K)}(a,1e3*(a.edge-P));a.updated&&l>this.requestScheduled+U&&(this.requestScheduled=s.loading.start),u!==void 0&&a.canBlockReload?this.requestScheduled=s.loading.first+U-(1e3*a.partTarget||1e3):this.requestScheduled===-1||this.requestScheduled+U<l?this.requestScheduled=l:this.requestScheduled-l<=0&&(this.requestScheduled+=U);var F=this.requestScheduled-l;F=Math.max(0,F),this.log("reload live playlist "+e+" in "+Math.round(F)+" ms"),this.timer=self.setTimeout(function(){return i.loadPlaylist(c)},F)}else this.clearTimer()},n.getDeliveryDirectives=function(e,t,r,i){var a=function(s,l){var d=s.canSkipUntil,c=s.canSkipDateRanges,u=s.endSN;return d&&(l!==void 0?l-u:0)<d?c?Ms:Os:ki}(e,r);return t!=null&&t.skip&&e.deltaUpdateFailed&&(r=t.msn,i=t.part,a=ki),new ha(r,i,a)},n.checkRetry=function(e){var t=this,r=e.details,i=Or(e),a=e.errorAction,s=a||{},l=s.action,d=s.retryCount,c=d===void 0?0:d,u=s.retryConfig,g=!!a&&!!u&&(l===Fr||!a.resolved&&l===ft);if(g){var m;if(this.requestScheduled=-1,c>=u.maxNumRetry)return!1;if(i&&(m=e.context)!=null&&m.deliveryDirectives)this.warn("Retrying playlist loading "+(c+1)+"/"+u.maxNumRetry+' after "'+r+'" without delivery-directives'),this.loadPlaylist();else{var v=Si(u,c);this.timer=self.setTimeout(function(){return t.loadPlaylist()},v),this.warn("Retrying playlist loading "+(c+1)+"/"+u.maxNumRetry+' after "'+r+'" in '+v+"ms")}e.levelRetry=!0,a.resolved=!0}return g},o}(),Gs=function(o){function n(t,r){var i;return(i=o.call(this,t,"[level-controller]")||this)._levels=[],i._firstLevel=-1,i._startLevel=void 0,i.currentLevel=null,i.currentLevelIndex=-1,i.manualLevelIndex=-1,i.steering=void 0,i.onParsedComplete=void 0,i.steering=r,i._registerListeners(),i}j(n,o);var e=n.prototype;return e._registerListeners=function(){var t=this.hls;t.on(A.MANIFEST_LOADING,this.onManifestLoading,this),t.on(A.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(A.LEVEL_LOADED,this.onLevelLoaded,this),t.on(A.LEVELS_UPDATED,this.onLevelsUpdated,this),t.on(A.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.on(A.FRAG_LOADED,this.onFragLoaded,this),t.on(A.ERROR,this.onError,this)},e._unregisterListeners=function(){var t=this.hls;t.off(A.MANIFEST_LOADING,this.onManifestLoading,this),t.off(A.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(A.LEVEL_LOADED,this.onLevelLoaded,this),t.off(A.LEVELS_UPDATED,this.onLevelsUpdated,this),t.off(A.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.off(A.FRAG_LOADED,this.onFragLoaded,this),t.off(A.ERROR,this.onError,this)},e.destroy=function(){this._unregisterListeners(),this.steering=null,this.resetLevels(),o.prototype.destroy.call(this)},e.startLoad=function(){this._levels.forEach(function(t){t.loadError=0,t.fragmentError=0}),o.prototype.startLoad.call(this)},e.resetLevels=function(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[]},e.onManifestLoading=function(t,r){this.resetLevels()},e.onManifestLoaded=function(t,r){var i,a=[],s={};r.levels.forEach(function(l){var d,c=l.attrs;((d=l.audioCodec)==null?void 0:d.indexOf("mp4a.40.34"))!==-1&&(Li||(Li=/chrome|firefox/i.test(navigator.userAgent)),Li&&(l.audioCodec=void 0));var u=c.AUDIO,g=c.CODECS,m=c["FRAME-RATE"],v=c["PATHWAY-ID"],y=c.RESOLUTION,k=c.SUBTITLES,b=(v||".")+"-"+l.bitrate+"-"+y+"-"+m+"-"+g;(i=s[b])?i.addFallback(l):(i=new or(l),s[b]=i,a.push(i)),Nr(i,"audio",u),Nr(i,"text",k)}),this.filterAndSortMediaOptions(a,r)},e.filterAndSortMediaOptions=function(t,r){var i=this,a=[],s=[],l=!1,d=!1,c=!1,u=t.filter(function(E){var C=E.audioCodec,S=E.videoCodec,D=E.width,I=E.height,P=E.unknownCodecs;return l||(l=!(!D||!I)),d||(d=!!S),c||(c=!!C),!(P!=null&&P.length)&&(!C||bi(C,"audio"))&&(!S||bi(S,"video"))});if((l||d)&&c&&(u=u.filter(function(E){var C=E.videoCodec,S=E.width,D=E.height;return!!C||!(!S||!D)})),u.length!==0){r.audioTracks&&wa(a=r.audioTracks.filter(function(E){return!E.audioCodec||bi(E.audioCodec,"audio")})),r.subtitles&&wa(s=r.subtitles);var g=u.slice(0);u.sort(function(E,C){return E.attrs["HDCP-LEVEL"]!==C.attrs["HDCP-LEVEL"]?(E.attrs["HDCP-LEVEL"]||"")>(C.attrs["HDCP-LEVEL"]||"")?1:-1:E.bitrate!==C.bitrate?E.bitrate-C.bitrate:E.attrs["FRAME-RATE"]!==C.attrs["FRAME-RATE"]?E.attrs.decimalFloatingPoint("FRAME-RATE")-C.attrs.decimalFloatingPoint("FRAME-RATE"):E.attrs.SCORE!==C.attrs.SCORE?E.attrs.decimalFloatingPoint("SCORE")-C.attrs.decimalFloatingPoint("SCORE"):l&&E.height!==C.height?E.height-C.height:0});var m=g[0];if(this.steering&&(u=this.steering.filterParsedLevels(u)).length!==g.length){for(var v=0;v<g.length;v++)if(g[v].pathwayId===u[0].pathwayId){m=g[v];break}}this._levels=u;for(var y=0;y<u.length;y++)if(u[y]===m){this._firstLevel=y,this.log("manifest loaded, "+u.length+" level(s) found, first bitrate: "+m.bitrate);break}var k=c&&!d,b={levels:u,audioTracks:a,subtitleTracks:s,sessionData:r.sessionData,sessionKeys:r.sessionKeys,firstLevel:this._firstLevel,stats:r.stats,audio:c,video:d,altAudio:!k&&a.some(function(E){return!!E.url})};this.hls.trigger(A.MANIFEST_PARSED,b),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else Promise.resolve().then(function(){if(i.hls){var E=new Error("no level with compatible codecs found in manifest");i.hls.trigger(A.ERROR,{type:J.MEDIA_ERROR,details:O.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:r.url,error:E,reason:E.message})}})},e.onError=function(t,r){!r.fatal&&r.context&&r.context.type===Ft&&r.context.level===this.level&&this.checkRetry(r)},e.onFragLoaded=function(t,r){var i=r.frag;if(i!==void 0&&i.type===ve){var a=this._levels[i.level];a!==void 0&&(a.loadError=0)}},e.onLevelLoaded=function(t,r){var i,a,s=r.level,l=r.details,d=this._levels[s];if(!d)return this.warn("Invalid level index "+s),void((a=r.deliveryDirectives)!=null&&a.skip&&(l.deltaUpdateFailed=!0));s===this.currentLevelIndex?(d.fragmentError===0&&(d.loadError=0),this.playlistLoaded(s,r,d.details)):(i=r.deliveryDirectives)!=null&&i.skip&&(l.deltaUpdateFailed=!0)},e.onAudioTrackSwitched=function(t,r){var i=this.currentLevel;if(i){var a=this.hls.audioTracks[r.id].groupId;if(i.audioGroupIds&&i.audioGroupId!==a){for(var s=-1,l=0;l<i.audioGroupIds.length;l++)if(i.audioGroupIds[l]===a){s=l;break}s!==-1&&s!==i.urlId&&(i.urlId=s,this.canLoad&&this.startLoad())}}},e.loadPlaylist=function(t){o.prototype.loadPlaylist.call(this);var r=this.currentLevelIndex,i=this.currentLevel;if(i&&this.shouldLoadPlaylist(i)){var a=i.urlId,s=i.uri;if(t)try{s=t.addDirectives(s)}catch(d){this.warn("Could not construct new URL with HLS Delivery Directives: "+d)}var l=i.attrs["PATHWAY-ID"];this.log("Loading level index "+r+((t==null?void 0:t.msn)!==void 0?" at sn "+t.msn+" part "+t.part:"")+" with"+(l?" Pathway "+l:"")+" URI "+(a+1)+"/"+i.url.length+" "+s),this.clearTimer(),this.hls.trigger(A.LEVEL_LOADING,{url:s,level:r,id:a,deliveryDirectives:t||null})}},e.removeLevel=function(t,r){var i=this,a=function(l,d){return d!==r},s=this._levels.filter(function(l,d){return d!==t||(l.url.length>1&&r!==void 0?(l.url=l.url.filter(a),l.audioGroupIds&&(l.audioGroupIds=l.audioGroupIds.filter(a)),l.textGroupIds&&(l.textGroupIds=l.textGroupIds.filter(a)),l.urlId=0,!0):(i.steering&&i.steering.removeLevel(l),!1))});this.hls.trigger(A.LEVELS_UPDATED,{levels:s})},e.onLevelsUpdated=function(t,r){var i=r.levels;i.forEach(function(a,s){var l=a.details;l!=null&&l.fragments&&l.fragments.forEach(function(d){d.level=s})}),this._levels=i},L(n,[{key:"levels",get:function(){return this._levels.length===0?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(t){var r=this._levels;if(r.length!==0){if(t<0||t>=r.length){var i=new Error("invalid level idx"),a=t<0;if(this.hls.trigger(A.ERROR,{type:J.OTHER_ERROR,details:O.LEVEL_SWITCH_ERROR,level:t,fatal:a,error:i,reason:i.message}),a)return;t=Math.min(t,r.length-1)}var s=this.currentLevelIndex,l=this.currentLevel,d=l?l.attrs["PATHWAY-ID"]:void 0,c=r[t],u=c.attrs["PATHWAY-ID"];if(this.currentLevelIndex=t,this.currentLevel=c,s!==t||!c.details||!l||d!==u){this.log("Switching to level "+t+(u?" with Pathway "+u:"")+" from level "+s+(d?" with Pathway "+d:""));var g=M({},c,{level:t,maxBitrate:c.maxBitrate,attrs:c.attrs,uri:c.uri,urlId:c.urlId});delete g._attrs,delete g._urlId,this.hls.trigger(A.LEVEL_SWITCHING,g);var m=c.details;if(!m||m.live){var v=this.switchParams(c.uri,l==null?void 0:l.details);this.loadPlaylist(v)}}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(t){this.manualLevelIndex=t,this._startLevel===void 0&&(this._startLevel=t),t!==-1&&(this.level=t)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(t){this._firstLevel=t}},{key:"startLevel",get:function(){if(this._startLevel===void 0){var t=this.hls.config.startLevel;return t!==void 0?t:this._firstLevel}return this._startLevel},set:function(t){this._startLevel=t}},{key:"nextLoadLevel",get:function(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(t){this.level=t,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=t)}}]),n}(Ri);function Nr(o,n,e){e&&(n==="audio"?(o.audioGroupIds||(o.audioGroupIds=[]),o.audioGroupIds[o.url.length-1]=e):n==="text"&&(o.textGroupIds||(o.textGroupIds=[]),o.textGroupIds[o.url.length-1]=e))}function wa(o){var n={};o.forEach(function(e){var t=e.groupId||"";e.id=n[t]=n[t]||0,n[t]++})}var lr="NOT_LOADED",Ea="APPENDING",Yt="PARTIAL",dr="OK",Hs=function(){function o(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}var n=o.prototype;return n._registerListeners=function(){var e=this.hls;e.on(A.BUFFER_APPENDED,this.onBufferAppended,this),e.on(A.FRAG_BUFFERED,this.onFragBuffered,this),e.on(A.FRAG_LOADED,this.onFragLoaded,this)},n._unregisterListeners=function(){var e=this.hls;e.off(A.BUFFER_APPENDED,this.onBufferAppended,this),e.off(A.FRAG_BUFFERED,this.onFragBuffered,this),e.off(A.FRAG_LOADED,this.onFragLoaded,this)},n.destroy=function(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null},n.getAppendedFrag=function(e,t){var r=this.activePartLists[t];if(r)for(var i=r.length;i--;){var a=r[i];if(!a)break;var s=a.end;if(a.start<=e&&s!==null&&e<=s)return a}return this.getBufferedFrag(e,t)},n.getBufferedFrag=function(e,t){for(var r=this.fragments,i=Object.keys(r),a=i.length;a--;){var s=r[i[a]];if((s==null?void 0:s.body.type)===t&&s.buffered){var l=s.body;if(l.start<=e&&e<=l.end)return l}}return null},n.detectEvictedFragments=function(e,t,r,i){var a=this;this.timeRanges&&(this.timeRanges[e]=t);var s=(i==null?void 0:i.fragment.sn)||-1;Object.keys(this.fragments).forEach(function(l){var d=a.fragments[l];if(d&&!(s>=d.body.sn))if(d.buffered||d.loaded){var c=d.range[e];c&&c.time.some(function(u){var g=!a.isTimeBuffered(u.startPTS,u.endPTS,t);return g&&a.removeFragment(d.body),g})}else d.body.type===r&&a.removeFragment(d.body)})},n.detectPartialFragments=function(e){var t=this,r=this.timeRanges,i=e.frag,a=e.part;if(r&&i.sn!=="initSegment"){var s=jt(i),l=this.fragments[s];if(!(!l||l.buffered&&i.gap)){var d=!i.relurl;Object.keys(r).forEach(function(c){var u=i.elementaryStreams[c];if(u){var g=r[c],m=d||u.partial===!0;l.range[c]=t.getBufferedTimes(i,a,m,g)}}),l.loaded=null,Object.keys(l.range).length?(l.buffered=!0,(l.body.endList=i.endList||l.body.endList)&&(this.endListFragments[l.body.type]=l),Ur(l)||this.removeParts(i.sn-1,i.type)):this.removeFragment(l.body)}}},n.removeParts=function(e,t){var r=this.activePartLists[t];r&&(this.activePartLists[t]=r.filter(function(i){return i.fragment.sn>=e}))},n.fragBuffered=function(e,t){var r=jt(e),i=this.fragments[r];!i&&t&&(i=this.fragments[r]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),i&&(i.loaded=null,i.buffered=!0)},n.getBufferedTimes=function(e,t,r,i){for(var a={time:[],partial:r},s=e.start,l=e.end,d=e.minEndPTS||l,c=e.maxStartPTS||s,u=0;u<i.length;u++){var g=i.start(u)-this.bufferPadding,m=i.end(u)+this.bufferPadding;if(c>=g&&d<=m){a.time.push({startPTS:Math.max(s,i.start(u)),endPTS:Math.min(l,i.end(u))});break}if(s<m&&l>g)a.partial=!0,a.time.push({startPTS:Math.max(s,i.start(u)),endPTS:Math.min(l,i.end(u))});else if(l<=g)break}return a},n.getPartialFragment=function(e){var t,r,i,a=null,s=0,l=this.bufferPadding,d=this.fragments;return Object.keys(d).forEach(function(c){var u=d[c];u&&Ur(u)&&(r=u.body.start-l,i=u.body.end+l,e>=r&&e<=i&&(t=Math.min(e-r,i-e),s<=t&&(a=u.body,s=t)))}),a},n.isEndListAppended=function(e){var t=this.endListFragments[e];return t!==void 0&&(t.buffered||Ur(t))},n.getState=function(e){var t=jt(e),r=this.fragments[t];return r?r.buffered?Ur(r)?Yt:dr:Ea:lr},n.isTimeBuffered=function(e,t,r){for(var i,a,s=0;s<r.length;s++){if(i=r.start(s)-this.bufferPadding,a=r.end(s)+this.bufferPadding,e>=i&&t<=a)return!0;if(t<=i)return!1}return!1},n.onFragLoaded=function(e,t){var r=t.frag,i=t.part;if(r.sn!=="initSegment"&&!r.bitrateTest){var a=i?null:t,s=jt(r);this.fragments[s]={body:r,appendedPTS:null,loaded:a,buffered:!1,range:Object.create(null)}}},n.onBufferAppended=function(e,t){var r=this,i=t.frag,a=t.part,s=t.timeRanges;if(i.sn!=="initSegment"){var l=i.type;if(a){var d=this.activePartLists[l];d||(this.activePartLists[l]=d=[]),d.push(a)}this.timeRanges=s,Object.keys(s).forEach(function(c){var u=s[c];r.detectEvictedFragments(c,u,l,a)})}},n.onFragBuffered=function(e,t){this.detectPartialFragments(t)},n.hasFragment=function(e){var t=jt(e);return!!this.fragments[t]},n.hasParts=function(e){var t;return!((t=this.activePartLists[e])==null||!t.length)},n.removeFragmentsInRange=function(e,t,r,i,a){var s=this;i&&!this.hasGaps||Object.keys(this.fragments).forEach(function(l){var d=s.fragments[l];if(d){var c=d.body;c.type!==r||i&&!c.gap||c.start<t&&c.end>e&&(d.buffered||a)&&s.removeFragment(c)}})},n.removeFragment=function(e){var t=jt(e);e.stats.loaded=0,e.clearElementaryStreamInfo();var r=this.activePartLists[e.type];if(r){var i=e.sn;this.activePartLists[e.type]=r.filter(function(a){return a.fragment.sn!==i})}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]},n.removeAllFragments=function(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1},o}();function Ur(o){var n,e,t;return o.buffered&&(o.body.gap||((n=o.range.video)==null?void 0:n.partial)||((e=o.range.audio)==null?void 0:e.partial)||((t=o.range.audiovideo)==null?void 0:t.partial))}function jt(o){return o.type+"_"+o.level+"_"+o.urlId+"_"+o.sn}var Aa=Math.pow(2,17),Ks=function(){function o(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}var n=o.prototype;return n.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},n.abort=function(){this.loader&&this.loader.abort()},n.load=function(e,t){var r=this,i=e.url;if(!i)return Promise.reject(new pt({type:J.NETWORK_ERROR,details:O.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error("Fragment does not have a "+(i?"part list":"url")),networkDetails:null}));this.abort();var a=this.config,s=a.fLoader,l=a.loader;return new Promise(function(d,c){if(r.loader&&r.loader.destroy(),e.gap){if(e.tagList.some(function(y){return y[0]==="GAP"}))return void c(ka(e));e.gap=!1}var u=r.loader=e.loader=s?new s(a):new l(a),g=xa(e),m=va(a.fragLoadPolicy.default),v={loadPolicy:m,timeout:m.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:Aa};e.stats=u.stats,u.load(g,v,{onSuccess:function(y,k,b,E){r.resetLoader(e,u);var C=y.data;b.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(C.slice(0,16)),C=C.slice(16)),d({frag:e,part:null,payload:C,networkDetails:E})},onError:function(y,k,b,E){r.resetLoader(e,u),c(new pt({type:J.NETWORK_ERROR,details:O.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:T({url:i,data:void 0},y),error:new Error("HTTP Error "+y.code+" "+y.text),networkDetails:b,stats:E}))},onAbort:function(y,k,b){r.resetLoader(e,u),c(new pt({type:J.NETWORK_ERROR,details:O.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:b,stats:y}))},onTimeout:function(y,k,b){r.resetLoader(e,u),c(new pt({type:J.NETWORK_ERROR,details:O.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error("Timeout after "+v.timeout+"ms"),networkDetails:b,stats:y}))},onProgress:function(y,k,b,E){t&&t({frag:e,part:null,payload:b,networkDetails:E})}})})},n.loadPart=function(e,t,r){var i=this;this.abort();var a=this.config,s=a.fLoader,l=a.loader;return new Promise(function(d,c){if(i.loader&&i.loader.destroy(),e.gap||t.gap)c(ka(e,t));else{var u=i.loader=e.loader=s?new s(a):new l(a),g=xa(e,t),m=va(a.fragLoadPolicy.default),v={loadPolicy:m,timeout:m.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:Aa};t.stats=u.stats,u.load(g,v,{onSuccess:function(y,k,b,E){i.resetLoader(e,u),i.updateStatsFromPart(e,t);var C={frag:e,part:t,payload:y.data,networkDetails:E};r(C),d(C)},onError:function(y,k,b,E){i.resetLoader(e,u),c(new pt({type:J.NETWORK_ERROR,details:O.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:T({url:g.url,data:void 0},y),error:new Error("HTTP Error "+y.code+" "+y.text),networkDetails:b,stats:E}))},onAbort:function(y,k,b){e.stats.aborted=t.stats.aborted,i.resetLoader(e,u),c(new pt({type:J.NETWORK_ERROR,details:O.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:b,stats:y}))},onTimeout:function(y,k,b){i.resetLoader(e,u),c(new pt({type:J.NETWORK_ERROR,details:O.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error("Timeout after "+v.timeout+"ms"),networkDetails:b,stats:y}))}})}})},n.updateStatsFromPart=function(e,t){var r=e.stats,i=t.stats,a=i.total;if(r.loaded+=i.loaded,a){var s=Math.round(e.duration/t.duration),l=Math.min(Math.round(r.loaded/a),s),d=(s-l)*Math.round(r.loaded/l);r.total=r.loaded+d}else r.total=Math.max(r.loaded,r.total);var c=r.loading,u=i.loading;c.start?c.first+=u.first-u.start:(c.start=u.start,c.first=u.first),c.end=u.end},n.resetLoader=function(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()},o}();function xa(o,n){n===void 0&&(n=null);var e=n||o,t={frag:o,part:n,responseType:"arraybuffer",url:e.url,headers:{},rangeStart:0,rangeEnd:0},r=e.byteRangeStartOffset,i=e.byteRangeEndOffset;if(Y(r)&&Y(i)){var a,s=r,l=i;if(o.sn==="initSegment"&&((a=o.decryptdata)==null?void 0:a.method)==="AES-128"){var d=i-r;d%16&&(l=i+(16-d%16)),r!==0&&(t.resetIV=!0,s=r-16)}t.rangeStart=s,t.rangeEnd=l}return t}function ka(o,n){var e=new Error("GAP "+(o.gap?"tag":"attribute")+" found"),t={type:J.MEDIA_ERROR,details:O.FRAG_GAP,fatal:!1,frag:o,error:e,networkDetails:null};return n&&(t.part=n),(n||o).stats.aborted=!0,new pt(t)}var pt=function(o){function n(e){var t;return(t=o.call(this,e.error.message)||this).data=void 0,t.data=e,t}return j(n,o),n}(de(Error)),Vs=function(){function o(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}var n=o.prototype;return n.abort=function(e){for(var t in this.keyUriToKeyInfo){var r=this.keyUriToKeyInfo[t].loader;if(r){if(e&&e!==r.context.frag.type)return;r.abort()}}},n.detach=function(){for(var e in this.keyUriToKeyInfo){var t=this.keyUriToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}},n.destroy=function(){for(var e in this.detach(),this.keyUriToKeyInfo){var t=this.keyUriToKeyInfo[e].loader;t&&t.destroy()}this.keyUriToKeyInfo={}},n.createKeyLoadError=function(e,t,r,i,a){return t===void 0&&(t=O.KEY_LOAD_ERROR),new pt({type:J.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:a,error:r,networkDetails:i})},n.loadClear=function(e,t){var r=this;if(this.emeController&&this.config.emeEnabled)for(var i=e.sn,a=e.cc,s=function(){var d=t[l];if(a<=d.cc&&(i==="initSegment"||d.sn==="initSegment"||i<d.sn))return r.emeController.selectKeySystemFormat(d).then(function(c){d.setKeyFormat(c)}),"break"},l=0;l<t.length&&s()!=="break";l++);},n.load=function(e){var t=this;return!e.decryptdata&&e.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(e).then(function(r){return t.loadInternal(e,r)}):this.loadInternal(e)},n.loadInternal=function(e,t){var r,i;t&&e.setKeyFormat(t);var a=e.decryptdata;if(!a){var s=new Error(t?"Expected frag.decryptdata to be defined after setting format "+t:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,O.KEY_LOAD_ERROR,s))}var l=a.uri;if(!l)return Promise.reject(this.createKeyLoadError(e,O.KEY_LOAD_ERROR,new Error('Invalid key URI: "'+l+'"')));var d,c=this.keyUriToKeyInfo[l];if((r=c)!=null&&r.decryptdata.key)return a.key=c.decryptdata.key,Promise.resolve({frag:e,keyInfo:c});if((i=c)!=null&&i.keyLoadPromise)switch((d=c.mediaKeySessionContext)==null?void 0:d.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return c.keyLoadPromise.then(function(u){return a.key=u.keyInfo.decryptdata.key,{frag:e,keyInfo:c}})}switch(c=this.keyUriToKeyInfo[l]={decryptdata:a,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},a.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return a.keyFormat==="identity"?this.loadKeyHTTP(c,e):this.loadKeyEME(c,e);case"AES-128":return this.loadKeyHTTP(c,e);default:return Promise.reject(this.createKeyLoadError(e,O.KEY_LOAD_ERROR,new Error('Key supplied with unsupported METHOD: "'+a.method+'"')))}},n.loadKeyEME=function(e,t){var r={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){var i=this.emeController.loadKey(r);if(i)return(e.keyLoadPromise=i.then(function(a){return e.mediaKeySessionContext=a,r})).catch(function(a){throw e.keyLoadPromise=null,a})}return Promise.resolve(r)},n.loadKeyHTTP=function(e,t){var r=this,i=this.config,a=new i.loader(i);return t.keyLoader=e.loader=a,e.keyLoadPromise=new Promise(function(s,l){var d={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},c=i.keyLoadPolicy.default,u={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},g={onSuccess:function(m,v,y,k){var b=y.frag,E=y.keyInfo,C=y.url;if(!b.decryptdata||E!==r.keyUriToKeyInfo[C])return l(r.createKeyLoadError(b,O.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),k));E.decryptdata.key=b.decryptdata.key=new Uint8Array(m.data),b.keyLoader=null,E.loader=null,s({frag:b,keyInfo:E})},onError:function(m,v,y,k){r.resetLoader(v),l(r.createKeyLoadError(t,O.KEY_LOAD_ERROR,new Error("HTTP Error "+m.code+" loading key "+m.text),y,T({url:d.url,data:void 0},m)))},onTimeout:function(m,v,y){r.resetLoader(v),l(r.createKeyLoadError(t,O.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),y))},onAbort:function(m,v,y){r.resetLoader(v),l(r.createKeyLoadError(t,O.INTERNAL_ABORTED,new Error("key loading aborted"),y))}};a.load(d,u,g)})},n.resetLoader=function(e){var t=e.frag,r=e.keyInfo,i=e.url,a=r.loader;t.keyLoader===a&&(t.keyLoader=null,r.loader=null),delete this.keyUriToKeyInfo[i],a&&a.destroy()},o}(),zs=function(){function o(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}var n=o.prototype;return n.destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},n.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},n.onHandlerDestroyed=function(){},n.hasInterval=function(){return!!this._tickInterval},n.hasNextTick=function(){return!!this._tickTimer},n.setInterval=function(e){return!this._tickInterval&&(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)},n.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},n.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},n.tick=function(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)},n.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},n.doTick=function(){},o}(),Ys={length:0,start:function(){return 0},end:function(){return 0}},Ae=function(){function o(){}return o.isBuffered=function(n,e){try{if(n){for(var t=o.getBuffered(n),r=0;r<t.length;r++)if(e>=t.start(r)&&e<=t.end(r))return!0}}catch{}return!1},o.bufferInfo=function(n,e,t){try{if(n){var r,i=o.getBuffered(n),a=[];for(r=0;r<i.length;r++)a.push({start:i.start(r),end:i.end(r)});return this.bufferedInfo(a,e,t)}}catch{}return{len:0,start:e,end:e,nextStart:void 0}},o.bufferedInfo=function(n,e,t){e=Math.max(0,e),n.sort(function(y,k){var b=y.start-k.start;return b||k.end-y.end});var r=[];if(t)for(var i=0;i<n.length;i++){var a=r.length;if(a){var s=r[a-1].end;n[i].start-s<t?n[i].end>s&&(r[a-1].end=n[i].end):r.push(n[i])}else r.push(n[i])}else r=n;for(var l,d=0,c=e,u=e,g=0;g<r.length;g++){var m=r[g].start,v=r[g].end;if(e+t>=m&&e<v)c=m,d=(u=v)-e;else if(e+t<m){l=m;break}}return{len:d,start:c||0,end:u||0,nextStart:l}},o.getBuffered=function(n){try{return n.buffered}catch(e){return R.log("failed to get media.buffered",e),Ys}},o}(),Ii=function(o,n,e,t,r,i){t===void 0&&(t=0),r===void 0&&(r=-1),i===void 0&&(i=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=o,this.sn=n,this.id=e,this.size=t,this.part=r,this.partial=i};function Ta(o,n){for(var e=null,t=0,r=o.length;t<r;t++){var i=o[t];if(i&&i.cc===n){e=i;break}}return e}function _a(o,n){if(o){var e=o.start+n;o.start=o.startPTS=e,o.endPTS=e+o.duration}}function Pi(o,n){for(var e=n.fragments,t=0,r=e.length;t<r;t++)_a(e[t],o);n.fragmentHint&&_a(n.fragmentHint,o),n.alignedSliding=!0}function js(o,n,e){n&&(function(t,r,i){if(function(s,l,d){return!(!l.details||!(d.endCC>d.startCC||s&&s.cc<d.startCC))}(t,i,r)){var a=function(s,l,d){var c=s.fragments,u=l.fragments;if(u.length&&c.length){var g=Ta(c,u[0].cc);if(g&&(!g||g.startPTS))return g;R.log("No frag in previous level to align on")}else R.log("No fragments to align")}(i.details,r);a&&Y(a.start)&&(R.log("Adjusting PTS using last level due to CC increase within current level "+r.url),Pi(a.start,r))}}(o,e,n),!e.alignedSliding&&n.details&&function(t,r){if(r.fragments.length&&t.hasProgramDateTime&&r.hasProgramDateTime){var i=r.fragments[0].programDateTime,a=t.fragments[0].programDateTime,s=(a-i)/1e3+r.fragments[0].start;s&&Y(s)&&(R.log("Adjusting PTS using programDateTime delta "+(a-i)+"ms, sliding:"+s.toFixed(3)+" "+t.url+" "),Pi(s,t))}}(e,n.details),e.alignedSliding||!n.details||e.skippedSegments||fa(n.details,e))}function Sa(o,n){if(o.hasProgramDateTime&&n.hasProgramDateTime){var e=o.fragments,t=n.fragments;if(e.length&&t.length){var r=t[Math.round(t.length/2)-1],i=Ta(e,r.cc)||e[Math.round(e.length/2)-1],a=r.programDateTime,s=i.programDateTime;a!==null&&s!==null&&Pi((s-a)/1e3-(i.start-r.start),o)}}}var $s=function(){function o(n,e){this.subtle=void 0,this.aesIV=void 0,this.subtle=n,this.aesIV=e}return o.prototype.decrypt=function(n,e){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},e,n)},o}(),qs=function(){function o(n,e){this.subtle=void 0,this.key=void 0,this.subtle=n,this.key=e}return o.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},o}(),Qs=function(){function o(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}var n=o.prototype;return n.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),r=new Uint32Array(4),i=0;i<4;i++)r[i]=t.getUint32(4*i);return r},n.initTable=function(){var e=this.sBox,t=this.invSBox,r=this.subMix,i=r[0],a=r[1],s=r[2],l=r[3],d=this.invSubMix,c=d[0],u=d[1],g=d[2],m=d[3],v=new Uint32Array(256),y=0,k=0,b=0;for(b=0;b<256;b++)v[b]=b<128?b<<1:b<<1^283;for(b=0;b<256;b++){var E=k^k<<1^k<<2^k<<3^k<<4;E=E>>>8^255&E^99,e[y]=E,t[E]=y;var C=v[y],S=v[C],D=v[S],I=257*v[E]^16843008*E;i[y]=I<<24|I>>>8,a[y]=I<<16|I>>>16,s[y]=I<<8|I>>>24,l[y]=I,I=16843009*D^65537*S^257*C^16843008*y,c[E]=I<<24|I>>>8,u[E]=I<<16|I>>>16,g[E]=I<<8|I>>>24,m[E]=I,y?(y=C^v[v[v[D^C]]],k^=v[v[k]]):y=k=1}},n.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),r=!0,i=0;i<t.length&&r;)r=t[i]===this.key[i],i++;if(!r){this.key=t;var a=this.keySize=t.length;if(a!==4&&a!==6&&a!==8)throw new Error("Invalid aes key size="+a);var s,l,d,c,u=this.ksRows=4*(a+6+1),g=this.keySchedule=new Uint32Array(u),m=this.invKeySchedule=new Uint32Array(u),v=this.sBox,y=this.rcon,k=this.invSubMix,b=k[0],E=k[1],C=k[2],S=k[3];for(s=0;s<u;s++)s<a?d=g[s]=t[s]:(c=d,s%a==0?(c=v[(c=c<<8|c>>>24)>>>24]<<24|v[c>>>16&255]<<16|v[c>>>8&255]<<8|v[255&c],c^=y[s/a|0]<<24):a>6&&s%a==4&&(c=v[c>>>24]<<24|v[c>>>16&255]<<16|v[c>>>8&255]<<8|v[255&c]),g[s]=d=(g[s-a]^c)>>>0);for(l=0;l<u;l++)s=u-l,c=3&l?g[s]:g[s-4],m[l]=l<4||s<=4?c:b[v[c>>>24]]^E[v[c>>>16&255]]^C[v[c>>>8&255]]^S[v[255&c]],m[l]=m[l]>>>0}},n.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},n.decrypt=function(e,t,r){for(var i,a,s,l,d,c,u,g,m,v,y,k,b,E,C=this.keySize+6,S=this.invKeySchedule,D=this.invSBox,I=this.invSubMix,P=I[0],U=I[1],F=I[2],N=I[3],z=this.uint8ArrayToUint32Array_(r),K=z[0],W=z[1],ne=z[2],X=z[3],ee=new Int32Array(e),re=new Int32Array(ee.length),te=this.networkToHostOrderSwap;t<ee.length;){for(m=te(ee[t]),v=te(ee[t+1]),y=te(ee[t+2]),k=te(ee[t+3]),d=m^S[0],c=k^S[1],u=y^S[2],g=v^S[3],b=4,E=1;E<C;E++)i=P[d>>>24]^U[c>>16&255]^F[u>>8&255]^N[255&g]^S[b],a=P[c>>>24]^U[u>>16&255]^F[g>>8&255]^N[255&d]^S[b+1],s=P[u>>>24]^U[g>>16&255]^F[d>>8&255]^N[255&c]^S[b+2],l=P[g>>>24]^U[d>>16&255]^F[c>>8&255]^N[255&u]^S[b+3],d=i,c=a,u=s,g=l,b+=4;i=D[d>>>24]<<24^D[c>>16&255]<<16^D[u>>8&255]<<8^D[255&g]^S[b],a=D[c>>>24]<<24^D[u>>16&255]<<16^D[g>>8&255]<<8^D[255&d]^S[b+1],s=D[u>>>24]<<24^D[g>>16&255]<<16^D[d>>8&255]<<8^D[255&c]^S[b+2],l=D[g>>>24]<<24^D[d>>16&255]<<16^D[c>>8&255]<<8^D[255&u]^S[b+3],re[t]=te(i^K),re[t+1]=te(l^W),re[t+2]=te(s^ne),re[t+3]=te(a^X),K=m,W=v,ne=y,X=k,t+=4}return re.buffer},o}(),Oi=function(){function o(e,t){var r=(t===void 0?{}:t).removePKCS7Padding,i=r===void 0||r;if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=e.enableSoftwareAES,this.removePKCS7Padding=i,i)try{var a=self.crypto;a&&(this.subtle=a.subtle||a.webkitSubtle)}catch{}this.subtle===null&&(this.useSoftware=!0)}var n=o.prototype;return n.destroy=function(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null},n.isSync=function(){return this.useSoftware},n.flush=function(){var e=this.currentResult,t=this.remainderData;if(!e||t)return this.reset(),null;var r,i,a,s=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?(i=(r=s).byteLength,(a=i&&new DataView(r.buffer).getUint8(i-1))?Ot(r,0,i-a):r):s},n.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},n.decrypt=function(e,t,r){var i=this;return this.useSoftware?new Promise(function(a,s){i.softwareDecrypt(new Uint8Array(e),t,r);var l=i.flush();l?a(l.buffer):s(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),t,r)},n.softwareDecrypt=function(e,t,r){var i=this.currentIV,a=this.currentResult,s=this.remainderData;this.logOnce("JS AES decrypt"),s&&(e=Mt(s,e),this.remainderData=null);var l=this.getValidChunk(e);if(!l.length)return null;i&&(r=i);var d=this.softwareDecrypter;d||(d=this.softwareDecrypter=new Qs),d.expandKey(t);var c=a;return this.currentResult=d.decrypt(l.buffer,0,r),this.currentIV=Ot(l,-16).buffer,c||null},n.webCryptoDecrypt=function(e,t,r){var i=this,a=this.subtle;return this.key===t&&this.fastAesKey||(this.key=t,this.fastAesKey=new qs(a,t)),this.fastAesKey.expandKey().then(function(s){return a?(i.logOnce("WebCrypto AES decrypt"),new $s(a,new Uint8Array(r)).decrypt(e.buffer,s)):Promise.reject(new Error("web crypto not initialized"))}).catch(function(s){return R.warn("[decrypter]: WebCrypto Error, disable WebCrypto API, "+s.name+": "+s.message),i.onWebCryptoError(e,t,r)})},n.onWebCryptoError=function(e,t,r){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,r);var i=this.flush();if(i)return i.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")},n.getValidChunk=function(e){var t=e,r=e.length-e.length%16;return r!==e.length&&(t=Ot(e,0,r),this.remainderData=Ot(e,r)),t},n.logOnce=function(e){this.logEnabled&&(R.log("[decrypter]: "+e),this.logEnabled=!1)},o}(),Ws=function(o){for(var n="",e=o.length,t=0;t<e;t++)n+="["+o.start(t).toFixed(3)+"-"+o.end(t).toFixed(3)+"]";return n},$e="STOPPED",ue="IDLE",Mi="KEY_LOADING",$t="FRAG_LOADING",qt="FRAG_LOADING_WAITING_RETRY",cr="WAITING_TRACK",gt="PARSING",Gr="PARSED",hr="ENDED",Qt="ERROR",ur="WAITING_INIT_PTS",Bt="WAITING_LEVEL",Fi=function(o){function n(t,r,i,a,s){var l;return(l=o.call(this)||this).hls=void 0,l.fragPrevious=null,l.fragCurrent=null,l.fragmentTracker=void 0,l.transmuxer=null,l._state=$e,l.playlistType=void 0,l.media=null,l.mediaBuffer=null,l.config=void 0,l.bitrateTest=!1,l.lastCurrentTime=0,l.nextLoadPosition=0,l.startPosition=0,l.startTimeOffset=null,l.loadedmetadata=!1,l.retryDate=0,l.levels=null,l.fragmentLoader=void 0,l.keyLoader=void 0,l.levelLastLoaded=null,l.startFragRequested=!1,l.decrypter=void 0,l.initPTS=[],l.onvseeking=null,l.onvended=null,l.logPrefix="",l.log=void 0,l.warn=void 0,l.playlistType=s,l.logPrefix=a,l.log=R.log.bind(R,a+":"),l.warn=R.warn.bind(R,a+":"),l.hls=t,l.fragmentLoader=new Ks(t.config),l.keyLoader=i,l.fragmentTracker=r,l.config=t.config,l.decrypter=new Oi(t.config),t.on(A.MANIFEST_LOADED,l.onManifestLoaded,function(d){if(d===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d}(l)),l}j(n,o);var e=n.prototype;return e.doTick=function(){this.onTickEnd()},e.onTickEnd=function(){},e.startLoad=function(t){},e.stopLoad=function(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);var t=this.fragCurrent;t!=null&&t.loader&&(t.abortRequests(),this.fragmentTracker.removeFragment(t)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=$e},e._streamEnded=function(t,r){if(r.live||t.nextStart||!t.end||!this.media)return!1;var i=r.partList;if(i!=null&&i.length){var a=i[i.length-1];return Ae.isBuffered(this.media,a.start+a.duration/2)}var s=r.fragments[r.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(s)},e.getLevelDetails=function(){var t;if(this.levels&&this.levelLastLoaded!==null)return(t=this.levels[this.levelLastLoaded])==null?void 0:t.details},e.onMediaAttached=function(t,r){var i=this.media=this.mediaBuffer=r.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),i.addEventListener("seeking",this.onvseeking),i.addEventListener("ended",this.onvended);var a=this.config;this.levels&&a.autoStartLoad&&this.state===$e&&this.startLoad(a.startPosition)},e.onMediaDetaching=function(){var t=this.media;t!=null&&t.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),t&&this.onvseeking&&this.onvended&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},e.onMediaSeeking=function(){var t=this.config,r=this.fragCurrent,i=this.media,a=this.mediaBuffer,s=this.state,l=i?i.currentTime:0,d=Ae.bufferInfo(a||i,l,t.maxBufferHole);if(this.log("media seeking to "+(Y(l)?l.toFixed(3):l)+", state: "+s),this.state===hr)this.resetLoadingState();else if(r){var c=t.maxFragLookUpTolerance,u=r.start-c,g=r.start+r.duration+c;if(!d.len||g<d.start||u>d.end){var m=l>g;(l<u||m)&&(m&&r.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),r.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}i&&(this.fragmentTracker.removeFragmentsInRange(l,1/0,this.playlistType,!0),this.lastCurrentTime=l),this.loadedmetadata||d.len||(this.nextLoadPosition=this.startPosition=l),this.tickImmediate()},e.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},e.onManifestLoaded=function(t,r){this.startTimeOffset=r.startTimeOffset,this.initPTS=[]},e.onHandlerDestroying=function(){this.stopLoad(),o.prototype.onHandlerDestroying.call(this)},e.onHandlerDestroyed=function(){this.state=$e,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,o.prototype.onHandlerDestroyed.call(this)},e.loadFragment=function(t,r,i){this._loadFragForPlayback(t,r,i)},e._loadFragForPlayback=function(t,r,i){var a=this;this._doFragLoad(t,r,i,function(s){if(a.fragContextChanged(t))return a.warn("Fragment "+t.sn+(s.part?" p: "+s.part.index:"")+" of level "+t.level+" was dropped during download."),void a.fragmentTracker.removeFragment(t);t.stats.chunkCount++,a._handleFragmentLoadProgress(s)}).then(function(s){if(s){var l=a.state;a.fragContextChanged(t)?(l===$t||!a.fragCurrent&&l===gt)&&(a.fragmentTracker.removeFragment(t),a.state=ue):("payload"in s&&(a.log("Loaded fragment "+t.sn+" of level "+t.level),a.hls.trigger(A.FRAG_LOADED,s)),a._handleFragmentLoadComplete(s))}}).catch(function(s){a.state!==$e&&a.state!==Qt&&(a.warn(s),a.resetFragmentLoading(t))})},e.clearTrackerIfNeeded=function(t){var r,i=this.fragmentTracker;if(i.getState(t)===Ea){var a=t.type,s=this.getFwdBufferInfo(this.mediaBuffer,a),l=Math.max(t.duration,s?s.len:this.config.maxBufferLength);this.reduceMaxBufferLength(l)&&i.removeFragment(t)}else((r=this.mediaBuffer)==null?void 0:r.buffered.length)===0?i.removeAllFragments():i.hasParts(t.type)&&(i.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type}),i.getState(t)===Yt&&i.removeFragment(t))},e.checkLiveUpdate=function(t){if(t.updated&&!t.live){var r=t.fragments[t.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:r,part:null,stats:r.stats,id:r.type})}t.fragments[0]||(t.deltaUpdateFailed=!0)},e.flushMainBuffer=function(t,r,i){if(i===void 0&&(i=null),t-r){var a={startOffset:t,endOffset:r,type:i};this.hls.trigger(A.BUFFER_FLUSHING,a)}},e._loadInitSegment=function(t,r){var i=this;this._doFragLoad(t,r).then(function(a){if(!a||i.fragContextChanged(t)||!i.levels)throw new Error("init load aborted");return a}).then(function(a){var s=i.hls,l=a.payload,d=t.decryptdata;if(l&&l.byteLength>0&&d&&d.key&&d.iv&&d.method==="AES-128"){var c=self.performance.now();return i.decrypter.decrypt(new Uint8Array(l),d.key.buffer,d.iv.buffer).catch(function(u){throw s.trigger(A.ERROR,{type:J.MEDIA_ERROR,details:O.FRAG_DECRYPT_ERROR,fatal:!1,error:u,reason:u.message,frag:t}),u}).then(function(u){var g=self.performance.now();return s.trigger(A.FRAG_DECRYPTED,{frag:t,payload:u,stats:{tstart:c,tdecrypt:g}}),a.payload=u,a})}return a}).then(function(a){var s=i.fragCurrent,l=i.hls;if(!i.levels)throw new Error("init load aborted, missing levels");var d=t.stats;i.state=ue,r.fragmentError=0,t.data=new Uint8Array(a.payload),d.parsing.start=d.buffering.start=self.performance.now(),d.parsing.end=d.buffering.end=self.performance.now(),a.frag===s&&l.trigger(A.FRAG_BUFFERED,{stats:d,frag:s,part:null,id:t.type}),i.tick()}).catch(function(a){i.state!==$e&&i.state!==Qt&&(i.warn(a),i.resetFragmentLoading(t))})},e.fragContextChanged=function(t){var r=this.fragCurrent;return!t||!r||t.level!==r.level||t.sn!==r.sn||t.urlId!==r.urlId},e.fragBufferedComplete=function(t,r){var i,a,s,l,d=this.mediaBuffer?this.mediaBuffer:this.media;this.log("Buffered "+t.type+" sn: "+t.sn+(r?" part: "+r.index:"")+" of "+(this.playlistType===ve?"level":"track")+" "+t.level+" (frag:["+((i=t.startPTS)!=null?i:NaN).toFixed(3)+"-"+((a=t.endPTS)!=null?a:NaN).toFixed(3)+"] > buffer:"+(d?Ws(Ae.getBuffered(d)):"(detached)")+")"),this.state=ue,d&&(!this.loadedmetadata&&t.type==ve&&d.buffered.length&&((s=this.fragCurrent)==null?void 0:s.sn)===((l=this.fragPrevious)==null?void 0:l.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())},e.seekToStartPos=function(){},e._handleFragmentLoadComplete=function(t){var r=this.transmuxer;if(r){var i=t.frag,a=t.part,s=t.partsLoaded,l=!s||s.length===0||s.some(function(c){return!c}),d=new Ii(i.level,i.sn,i.stats.chunkCount+1,0,a?a.index:-1,!l);r.flush(d)}},e._handleFragmentLoadProgress=function(t){},e._doFragLoad=function(t,r,i,a){var s,l=this;i===void 0&&(i=null);var d=r==null?void 0:r.details;if(!this.levels||!d)throw new Error("frag load aborted, missing level"+(d?"":" detail")+"s");var c=null;if(!t.encrypted||(s=t.decryptdata)!=null&&s.key?!t.encrypted&&d.encryptedFragments.length&&this.keyLoader.loadClear(t,d.encryptedFragments):(this.log("Loading key for "+t.sn+" of ["+d.startSN+"-"+d.endSN+"], "+(this.logPrefix==="[stream-controller]"?"level":"track")+" "+t.level),this.state=Mi,this.fragCurrent=t,c=this.keyLoader.load(t).then(function(b){if(!l.fragContextChanged(b.frag))return l.hls.trigger(A.KEY_LOADED,b),l.state===Mi&&(l.state=ue),b}),this.hls.trigger(A.KEY_LOADING,{frag:t}),this.fragCurrent===null&&(c=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))),i=Math.max(t.start,i||0),this.config.lowLatencyMode&&t.sn!=="initSegment"){var u=d.partList;if(u&&a){i>t.end&&d.fragmentHint&&(t=d.fragmentHint);var g=this.getNextPart(u,t,i);if(g>-1){var m,v=u[g];return this.log("Loading part sn: "+t.sn+" p: "+v.index+" cc: "+t.cc+" of playlist ["+d.startSN+"-"+d.endSN+"] parts [0-"+g+"-"+(u.length-1)+"] "+(this.logPrefix==="[stream-controller]"?"level":"track")+": "+t.level+", target: "+parseFloat(i.toFixed(3))),this.nextLoadPosition=v.start+v.duration,this.state=$t,m=c?c.then(function(b){return!b||l.fragContextChanged(b.frag)?null:l.doFragPartsLoad(t,v,r,a)}).catch(function(b){return l.handleFragLoadError(b)}):this.doFragPartsLoad(t,v,r,a).catch(function(b){return l.handleFragLoadError(b)}),this.hls.trigger(A.FRAG_LOADING,{frag:t,part:v,targetBufferTime:i}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):m}if(!t.url||this.loadedEndOfParts(u,i))return Promise.resolve(null)}}this.log("Loading fragment "+t.sn+" cc: "+t.cc+" "+(d?"of ["+d.startSN+"-"+d.endSN+"] ":"")+(this.logPrefix==="[stream-controller]"?"level":"track")+": "+t.level+", target: "+parseFloat(i.toFixed(3))),Y(t.sn)&&!this.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),this.state=$t;var y,k=this.config.progressive;return y=k&&c?c.then(function(b){return!b||l.fragContextChanged(b==null?void 0:b.frag)?null:l.fragmentLoader.load(t,a)}).catch(function(b){return l.handleFragLoadError(b)}):Promise.all([this.fragmentLoader.load(t,k?a:void 0),c]).then(function(b){var E=b[0];return!k&&E&&a&&a(E),E}).catch(function(b){return l.handleFragLoadError(b)}),this.hls.trigger(A.FRAG_LOADING,{frag:t,targetBufferTime:i}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):y},e.doFragPartsLoad=function(t,r,i,a){var s=this;return new Promise(function(l,d){var c,u=[],g=(c=i.details)==null?void 0:c.partList;(function m(v){s.fragmentLoader.loadPart(t,v,a).then(function(y){u[v.index]=y;var k=y.part;s.hls.trigger(A.FRAG_LOADED,y);var b=pa(i,t.sn,v.index+1)||ga(g,t.sn,v.index+1);if(!b)return l({frag:t,part:k,partsLoaded:u});m(b)}).catch(d)})(r)})},e.handleFragLoadError=function(t){if("data"in t){var r=t.data;t.data&&r.details===O.INTERNAL_ABORTED?this.handleFragLoadAborted(r.frag,r.part):this.hls.trigger(A.ERROR,r)}else this.hls.trigger(A.ERROR,{type:J.OTHER_ERROR,details:O.INTERNAL_EXCEPTION,err:t,error:t,fatal:!0});return null},e._handleTransmuxerFlush=function(t){var r=this.getCurrentContext(t);if(r&&this.state===gt){var i=r.frag,a=r.part,s=r.level,l=self.performance.now();i.stats.parsing.end=l,a&&(a.stats.parsing.end=l),this.updateLevelTiming(i,a,s,t.partial)}else this.fragCurrent||this.state===$e||this.state===Qt||(this.state=ue)},e.getCurrentContext=function(t){var r=this.levels,i=this.fragCurrent,a=t.level,s=t.sn,l=t.part;if(r==null||!r[a])return this.warn("Levels object was unset while buffering fragment "+s+" of level "+a+". The current chunk will not be buffered."),null;var d=r[a],c=l>-1?pa(d,s,l):null,u=c?c.fragment:function(g,m,v){if(g==null||!g.details)return null;var y=g.details,k=y.fragments[m-y.startSN];return k||((k=y.fragmentHint)&&k.sn===m?k:m<y.startSN&&v&&v.sn===m?v:null)}(d,s,i);return u?(i&&i!==u&&(u.stats=i.stats),{frag:u,part:c,level:d}):null},e.bufferFragmentData=function(t,r,i,a,s){var l;if(t&&this.state===gt){var d=t.data1,c=t.data2,u=d;if(d&&c&&(u=Mt(d,c)),(l=u)!=null&&l.length){var g={type:t.type,frag:r,part:i,chunkMeta:a,parent:r.type,data:u};if(this.hls.trigger(A.BUFFER_APPENDING,g),t.dropped&&t.independent&&!i){if(s)return;this.flushBufferGap(r)}}}},e.flushBufferGap=function(t){var r=this.media;if(r)if(Ae.isBuffered(r,r.currentTime)){var i=r.currentTime,a=Ae.bufferInfo(r,i,0),s=t.duration,l=Math.min(2*this.config.maxFragLookUpTolerance,.25*s),d=Math.max(Math.min(t.start-l,a.end-l),i+l);t.start-d>l&&this.flushMainBuffer(d,t.start)}else this.flushMainBuffer(0,t.start)},e.getFwdBufferInfo=function(t,r){var i=this.getLoadPosition();return Y(i)?this.getFwdBufferInfoAtPos(t,i,r):null},e.getFwdBufferInfoAtPos=function(t,r,i){var a=this.config.maxBufferHole,s=Ae.bufferInfo(t,r,a);if(s.len===0&&s.nextStart!==void 0){var l=this.fragmentTracker.getBufferedFrag(r,i);if(l&&s.nextStart<l.end)return Ae.bufferInfo(t,r,Math.max(s.nextStart,a))}return s},e.getMaxBufferLength=function(t){var r,i=this.config;return r=t?Math.max(8*i.maxBufferSize/t,i.maxBufferLength):i.maxBufferLength,Math.min(r,i.maxMaxBufferLength)},e.reduceMaxBufferLength=function(t){var r=this.config,i=t||r.maxBufferLength;return r.maxMaxBufferLength>=i&&(r.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+r.maxMaxBufferLength+"s"),!0)},e.getAppendedFrag=function(t,r){var i=this.fragmentTracker.getAppendedFrag(t,ve);return i&&"fragment"in i?i.fragment:i},e.getNextFragment=function(t,r){var i=r.fragments,a=i.length;if(!a)return null;var s,l=this.config,d=i[0].start;if(r.live){var c=l.initialLiveManifestSize;if(a<c)return this.warn("Not enough fragments to start playback (have: "+a+", need: "+c+")"),null;r.PTSKnown||this.startFragRequested||this.startPosition!==-1||(s=this.getInitialLiveFragment(r,i),this.startPosition=s?this.hls.liveSyncPosition||s.start:t)}else t<=d&&(s=i[0]);if(!s){var u=l.lowLatencyMode?r.partEnd:r.fragmentEnd;s=this.getFragmentAtPosition(t,u,r)}return this.mapToInitFragWhenRequired(s)},e.isLoopLoading=function(t,r){var i=this.fragmentTracker.getState(t);return(i===dr||i===Yt&&!!t.gap)&&this.nextLoadPosition>r},e.getNextFragmentLoopLoading=function(t,r,i,a,s){var l=t.gap,d=this.getNextFragment(this.nextLoadPosition,r);if(d===null)return d;if(t=d,l&&t&&!t.gap&&i.nextStart){var c=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,i.nextStart,a);if(c!==null&&i.len+c.len>=s)return this.log('buffer full after gaps in "'+a+'" playlist starting at sn: '+t.sn),null}return t},e.mapToInitFragWhenRequired=function(t){return t==null||!t.initSegment||t!=null&&t.initSegment.data||this.bitrateTest?t:t.initSegment},e.getNextPart=function(t,r,i){for(var a=-1,s=!1,l=!0,d=0,c=t.length;d<c;d++){var u=t[d];if(l=l&&!u.independent,a>-1&&i<u.start)break;var g=u.loaded;g?a=-1:(s||u.independent||l)&&u.fragment===r&&(a=d),s=g}return a},e.loadedEndOfParts=function(t,r){var i=t[t.length-1];return i&&r>i.start&&i.loaded},e.getInitialLiveFragment=function(t,r){var i=this.fragPrevious,a=null;if(i){if(t.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+i.programDateTime),a=function(c,u,g){if(u===null||!Array.isArray(c)||!c.length||!Y(u)||u<(c[0].programDateTime||0)||u>=(c[c.length-1].endProgramDateTime||0))return null;g=g||0;for(var m=0;m<c.length;++m){var v=c[m];if(Bs(u,g,v))return v}return null}(r,i.endProgramDateTime,this.config.maxFragLookUpTolerance)),!a){var s=i.sn+1;if(s>=t.startSN&&s<=t.endSN){var l=r[s-t.startSN];i.cc===l.cc&&(a=l,this.log("Live playlist, switching playlist, load frag with next SN: "+a.sn))}a||(a=function(c,u){return ba(c,function(g){return g.cc<u?1:g.cc>u?-1:0})}(r,i.cc),a&&this.log("Live playlist, switching playlist, load frag with same CC: "+a.sn))}}else{var d=this.hls.liveSyncPosition;d!==null&&(a=this.getFragmentAtPosition(d,this.bitrateTest?t.fragmentEnd:t.edge,t))}return a},e.getFragmentAtPosition=function(t,r,i){var a,s=this.config,l=this.fragPrevious,d=i.fragments,c=i.endSN,u=i.fragmentHint,g=s.maxFragLookUpTolerance,m=i.partList,v=!!(s.lowLatencyMode&&m!=null&&m.length&&u);if(v&&u&&!this.bitrateTest&&(d=d.concat(u),c=u.sn),a=t<r?sr(l,d,t,t>r-g?0:g):d[d.length-1]){var y=a.sn-i.startSN,k=this.fragmentTracker.getState(a);if((k===dr||k===Yt&&a.gap)&&(l=a),l&&a.sn===l.sn&&(!v||m[0].fragment.sn>a.sn)&&l&&a.level===l.level){var b=d[y+1];a=a.sn<c&&this.fragmentTracker.getState(b)!==dr?b:null}}return a},e.synchronizeToLiveEdge=function(t){var r=this.config,i=this.media;if(i){var a=this.hls.liveSyncPosition,s=i.currentTime,l=t.fragments[0].start,d=t.edge,c=s>=l-r.maxFragLookUpTolerance&&s<=d;if(a!==null&&i.duration>a&&(s<a||!c)){var u=r.liveMaxLatencyDuration!==void 0?r.liveMaxLatencyDuration:r.liveMaxLatencyDurationCount*t.targetduration;(!c&&i.readyState<4||s<d-u)&&(this.loadedmetadata||(this.nextLoadPosition=a),i.readyState&&(this.warn("Playback: "+s.toFixed(3)+" is located too far from the end of live sliding playlist: "+d+", reset currentTime to : "+a.toFixed(3)),i.currentTime=a))}}},e.alignPlaylists=function(t,r){var i=this.levels,a=this.levelLastLoaded,s=this.fragPrevious,l=a!==null?i[a]:null,d=t.fragments.length;if(!d)return this.warn("No fragments in live playlist"),0;var c=t.fragments[0].start,u=!r,g=t.alignedSliding&&Y(c);if(u||!g&&!c){js(s,l,t);var m=t.fragments[0].start;return this.log("Live playlist sliding: "+m.toFixed(2)+" start-sn: "+(r?r.startSN:"na")+"->"+t.startSN+" prev-sn: "+(s?s.sn:"na")+" fragments: "+d),m}return c},e.waitForCdnTuneIn=function(t){return t.live&&t.canBlockReload&&t.partTarget&&t.tuneInGoal>Math.max(t.partHoldBack,3*t.partTarget)},e.setStartPosition=function(t,r){var i=this.startPosition;if(i<r&&(i=-1),i===-1||this.lastCurrentTime===-1){var a=this.startTimeOffset!==null,s=a?this.startTimeOffset:t.startTimeOffset;s!==null&&Y(s)?(i=r+s,s<0&&(i+=t.totalduration),i=Math.min(Math.max(r,i),r+t.totalduration),this.log("Start time offset "+s+" found in "+(a?"multivariant":"media")+" playlist, adjust startPosition to "+i),this.startPosition=i):t.live?i=this.hls.liveSyncPosition||r:this.startPosition=i=0,this.lastCurrentTime=i}this.nextLoadPosition=i},e.getLoadPosition=function(){var t=this.media,r=0;return this.loadedmetadata&&t?r=t.currentTime:this.nextLoadPosition&&(r=this.nextLoadPosition),r},e.handleFragLoadAborted=function(t,r){this.transmuxer&&t.sn!=="initSegment"&&t.stats.aborted&&(this.warn("Fragment "+t.sn+(r?" part "+r.index:"")+" of level "+t.level+" was aborted"),this.resetFragmentLoading(t))},e.resetFragmentLoading=function(t){this.fragCurrent&&(this.fragContextChanged(t)||this.state===qt)||(this.state=ue)},e.onFragmentOrKeyLoadError=function(t,r){if(r.chunkMeta&&!r.frag){var i=this.getCurrentContext(r.chunkMeta);i&&(r.frag=i.frag)}var a=r.frag;if(a&&a.type===t&&this.levels)if(this.fragContextChanged(a)){var s;this.warn("Frag load error must match current frag to retry "+a.url+" > "+((s=this.fragCurrent)==null?void 0:s.url))}else{var l=r.details===O.FRAG_GAP;l&&this.fragmentTracker.fragBuffered(a,!0);var d=r.errorAction,c=d||{},u=c.action,g=c.retryCount,m=g===void 0?0:g,v=c.retryConfig;if(d&&u===Fr&&v){var y;this.resetStartWhenNotLoaded((y=this.levelLastLoaded)!=null?y:a.level);var k=Si(v,m);this.warn("Fragment "+a.sn+" of "+t+" "+a.level+" errored with "+r.details+", retrying loading "+(m+1)+"/"+v.maxNumRetry+" in "+k+"ms"),d.resolved=!0,this.retryDate=self.performance.now()+k,this.state=qt}else v&&d?(this.resetFragmentErrors(t),m<v.maxNumRetry?l||(d.resolved=!0):R.warn(r.details+" reached or exceeded max retry ("+m+")")):(d==null?void 0:d.action)===ft?this.state=Bt:this.state=Qt;this.tickImmediate()}},e.reduceLengthAndFlushBuffer=function(t){if(this.state===gt||this.state===Gr){var r=t.parent,i=this.getFwdBufferInfo(this.mediaBuffer,r),a=i&&i.len>.5;a&&this.reduceMaxBufferLength(i.len);var s=!a;return s&&this.warn("Buffer full error while media.currentTime is not buffered, flush "+r+" buffer"),t.frag&&(this.fragmentTracker.removeFragment(t.frag),this.nextLoadPosition=t.frag.start),this.resetLoadingState(),s}return!1},e.resetFragmentErrors=function(t){t===st&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==$e&&(this.state=ue)},e.afterBufferFlushed=function(t,r,i){if(t){var a=Ae.getBuffered(t);this.fragmentTracker.detectEvictedFragments(r,a,i),this.state===hr&&this.resetLoadingState()}},e.resetLoadingState=function(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=ue},e.resetStartWhenNotLoaded=function(t){if(!this.loadedmetadata){this.startFragRequested=!1;var r=this.levels?this.levels[t].details:null;r!=null&&r.live?(this.startPosition=-1,this.setStartPosition(r,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}},e.resetWhenMissingContext=function(t){var r;this.warn("The loading context changed while buffering fragment "+t.sn+" of level "+t.level+". This chunk will not be buffered."),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded((r=this.levelLastLoaded)!=null?r:t.level),this.resetLoadingState()},e.removeUnbufferedFrags=function(t){t===void 0&&(t=0),this.fragmentTracker.removeFragmentsInRange(t,1/0,this.playlistType,!1,!0)},e.updateLevelTiming=function(t,r,i,a){var s,l=this,d=i.details;if(d){if(Object.keys(t.elementaryStreams).reduce(function(u,g){var m=t.elementaryStreams[g];if(m){var v=m.endPTS-m.startPTS;if(v<=0)return l.warn("Could not parse fragment "+t.sn+" "+g+" duration reliably ("+v+")"),u||!1;var y=a?0:ua(d,t,m.startPTS,m.endPTS,m.startDTS,m.endDTS);return l.hls.trigger(A.LEVEL_PTS_UPDATED,{details:d,level:i,drift:y,type:g,frag:t,start:m.startPTS,end:m.endPTS}),!0}return u},!1))i.fragmentError=0;else if(((s=this.transmuxer)==null?void 0:s.error)===null){var c=new Error("Found no media in fragment "+t.sn+" of level "+t.level+" resetting transmuxer to fallback to playlist timing");if(i.fragmentError===0&&(i.fragmentError++,t.gap=!0,this.fragmentTracker.removeFragment(t),this.fragmentTracker.fragBuffered(t,!0)),this.warn(c.message),this.hls.trigger(A.ERROR,{type:J.MEDIA_ERROR,details:O.FRAG_PARSING_ERROR,fatal:!1,error:c,frag:t,reason:"Found no media in msn "+t.sn+' of level "'+i.url+'"'}),!this.hls)return;this.resetTransmuxer()}this.state=Gr,this.hls.trigger(A.FRAG_PARSED,{frag:t,part:r})}else this.warn("level.details undefined")},e.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},e.recoverWorkerError=function(t){var r,i,a;t.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.resetTransmuxer(),this.resetStartWhenNotLoaded((r=(i=this.levelLastLoaded)!=null?i:(a=this.fragCurrent)==null?void 0:a.level)!=null?r:0),this.resetLoadingState())},L(n,[{key:"state",get:function(){return this._state},set:function(t){var r=this._state;r!==t&&(this._state=t,this.log(r+"->"+t))}}]),n}(zs);function Ca(){return self.SourceBuffer||self.WebKitSourceBuffer}function lt(o,n){return o===void 0&&(o=""),n===void 0&&(n=9e4),{type:o,id:-1,pid:-1,inputTimeScale:n,sequenceNumber:-1,samples:[],dropped:0}}var La=function(){function o(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}var n=o.prototype;return n.resetInitSegment=function(e,t,r,i){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},n.resetTimeStamp=function(e){this.initPTS=e,this.resetContiguity()},n.resetContiguity=function(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0},n.canParse=function(e,t){return!1},n.appendFrame=function(e,t,r){},n.demux=function(e,t){this.cachedData&&(e=Mt(this.cachedData,e),this.cachedData=null);var r,i=Cr(e,0),a=i?i.length:0,s=this._audioTrack,l=this._id3Track,d=i?function(m){for(var v=Gn(m),y=0;y<v.length;y++){var k=v[y];if(Un(k))return bs(k)}}(i):void 0,c=e.length;for((this.basePTS===null||this.frameIndex===0&&Y(d))&&(this.basePTS=Xs(d,t,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),i&&i.length>0&&l.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:nr,duration:Number.POSITIVE_INFINITY});a<c;){if(this.canParse(e,a)){var u=this.appendFrame(s,e,a);u?(this.frameIndex++,this.lastPTS=u.sample.pts,r=a+=u.length):a=c}else us(e,a)?(i=Cr(e,a),l.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:nr,duration:Number.POSITIVE_INFINITY}),r=a+=i.length):a++;if(a===c&&r!==c){var g=Ot(e,r);this.cachedData?this.cachedData=Mt(this.cachedData,g):this.cachedData=g}}return{audioTrack:s,videoTrack:lt(),id3Track:l,textTrack:lt()}},n.demuxSampleAes=function(e,t,r){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},n.flush=function(e){var t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:lt(),id3Track:this._id3Track,textTrack:lt()}},n.destroy=function(){},o}(),Xs=function(o,n,e){return Y(o)?90*o:9e4*n+(e?9e4*e.baseTime/e.timescale:0)};function Da(o,n){return o[n]===255&&(246&o[n+1])==240}function Ra(o,n){return 1&o[n+1]?7:9}function Bi(o,n){return(3&o[n+3])<<11|o[n+4]<<3|(224&o[n+5])>>>5}function Hr(o,n){return n+1<o.length&&Da(o,n)}function Js(o,n){if(Hr(o,n)){var e=Ra(o,n);if(n+e>=o.length)return!1;var t=Bi(o,n);if(t<=e)return!1;var r=n+t;return r===o.length||Hr(o,r)}return!1}function Ia(o,n,e,t,r){if(!o.samplerate){var i=function(a,s,l,d){var c,u,g,m,v=navigator.userAgent.toLowerCase(),y=d,k=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];c=1+((192&s[l+2])>>>6);var b=(60&s[l+2])>>>2;if(!(b>k.length-1))return g=(1&s[l+2])<<2,g|=(192&s[l+3])>>>6,R.log("manifest codec:"+d+", ADTS type:"+c+", samplingIndex:"+b),/firefox/i.test(v)?b>=6?(c=5,m=new Array(4),u=b-3):(c=2,m=new Array(2),u=b):v.indexOf("android")!==-1?(c=2,m=new Array(2),u=b):(c=5,m=new Array(4),d&&(d.indexOf("mp4a.40.29")!==-1||d.indexOf("mp4a.40.5")!==-1)||!d&&b>=6?u=b-3:((d&&d.indexOf("mp4a.40.2")!==-1&&(b>=6&&g===1||/vivaldi/i.test(v))||!d&&g===1)&&(c=2,m=new Array(2)),u=b)),m[0]=c<<3,m[0]|=(14&b)>>1,m[1]|=(1&b)<<7,m[1]|=g<<3,c===5&&(m[1]|=(14&u)>>1,m[2]=(1&u)<<7,m[2]|=8,m[3]=0),{config:m,samplerate:k[b],channelCount:g,codec:"mp4a.40."+c,manifestCodec:y};a.trigger(A.ERROR,{type:J.MEDIA_ERROR,details:O.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+b})}(n,e,t,r);if(!i)return;o.config=i.config,o.samplerate=i.samplerate,o.channelCount=i.channelCount,o.codec=i.codec,o.manifestCodec=i.manifestCodec,R.log("parsed codec:"+o.codec+", rate:"+i.samplerate+", channels:"+i.channelCount)}}function Pa(o){return 9216e4/o}function Oa(o,n,e,t,r){var i,a=t+r*Pa(o.samplerate),s=function(v,y){var k=Ra(v,y);if(y+k<=v.length){var b=Bi(v,y)-k;if(b>0)return{headerLength:k,frameLength:b}}}(n,e);if(s){var l=s.frameLength,d=s.headerLength,c=d+l,u=Math.max(0,e+c-n.length);u?(i=new Uint8Array(c-d)).set(n.subarray(e+d,n.length),0):i=n.subarray(e+d,e+c);var g={unit:i,pts:a};return u||o.samples.push(g),{sample:g,length:c,missing:u}}var m=n.length-e;return(i=new Uint8Array(m)).set(n.subarray(e,n.length),0),{sample:{unit:i,pts:a},length:m,missing:-1}}var Zs=function(o){function n(t,r){var i;return(i=o.call(this)||this).observer=void 0,i.config=void 0,i.observer=t,i.config=r,i}j(n,o);var e=n.prototype;return e.resetInitSegment=function(t,r,i,a){o.prototype.resetInitSegment.call(this,t,r,i,a),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:r,duration:a,inputTimeScale:9e4,dropped:0}},n.probe=function(t){if(!t)return!1;for(var r=(Cr(t,0)||[]).length,i=t.length;r<i;r++)if(Js(t,r))return R.log("ADTS sync word found !"),!0;return!1},e.canParse=function(t,r){return function(i,a){return function(s,l){return l+5<s.length}(i,a)&&Da(i,a)&&Bi(i,a)<=i.length-a}(t,r)},e.appendFrame=function(t,r,i){Ia(t,this.observer,r,i,t.manifestCodec);var a=Oa(t,r,i,this.basePTS,this.frameIndex);if(a&&a.missing===0)return a},n}(La),el=/\/emsg[-/]ID3/i,tl=function(){function o(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}var n=o.prototype;return n.resetTimeStamp=function(){},n.resetInitSegment=function(e,t,r,i){var a=this.videoTrack=lt("video",1),s=this.audioTrack=lt("audio",1),l=this.txtTrack=lt("text",1);if(this.id3Track=lt("id3",1),this.timeOffset=0,e!=null&&e.byteLength){var d=zn(e);if(d.video){var c=d.video,u=c.id,g=c.timescale,m=c.codec;a.id=u,a.timescale=l.timescale=g,a.codec=m}if(d.audio){var v=d.audio,y=v.id,k=v.timescale,b=v.codec;s.id=y,s.timescale=k,s.codec=b}l.id=Hn.text,a.sampleDuration=0,a.duration=s.duration=i}},n.resetContiguity=function(){this.remainderData=null},o.probe=function(e){return ge(e=e.length>16384?e.subarray(0,16384):e,["moof"]).length>0},n.demux=function(e,t){this.timeOffset=t;var r=e,i=this.videoTrack,a=this.txtTrack;if(this.config.progressive){this.remainderData&&(r=Mt(this.remainderData,e));var s=function(d){var c={valid:null,remainder:null},u=ge(d,["moof"]);if(!u)return c;if(u.length<2)return c.remainder=d,c;var g=u[u.length-1];return c.valid=Ot(d,0,g.byteOffset-8),c.remainder=Ot(d,g.byteOffset-8),c}(r);this.remainderData=s.remainder,i.samples=s.valid||new Uint8Array}else i.samples=r;var l=this.extractID3Track(i,t);return a.samples=jn(t,i),{videoTrack:i,audioTrack:this.audioTrack,id3Track:l,textTrack:this.txtTrack}},n.flush=function(){var e=this.timeOffset,t=this.videoTrack,r=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;var i=this.extractID3Track(t,this.timeOffset);return r.samples=jn(e,t),{videoTrack:t,audioTrack:lt(),id3Track:i,textTrack:lt()}},n.extractID3Track=function(e,t){var r=this.id3Track;if(e.samples.length){var i=ge(e.samples,["emsg"]);i&&i.forEach(function(a){var s=function(u){var g=u[0],m="",v="",y=0,k=0,b=0,E=0,C=0,S=0;if(g===0){for(;De(u.subarray(S,S+1))!=="\0";)m+=De(u.subarray(S,S+1)),S+=1;for(m+=De(u.subarray(S,S+1)),S+=1;De(u.subarray(S,S+1))!=="\0";)v+=De(u.subarray(S,S+1)),S+=1;v+=De(u.subarray(S,S+1)),S+=1,y=oe(u,12),k=oe(u,16),E=oe(u,20),C=oe(u,24),S=28}else if(g===1){y=oe(u,S+=4);var D=oe(u,S+=4),I=oe(u,S+=4);for(S+=4,b=Math.pow(2,32)*D+I,Number.isSafeInteger(b)||(b=Number.MAX_SAFE_INTEGER,R.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),E=oe(u,S),C=oe(u,S+=4),S+=4;De(u.subarray(S,S+1))!=="\0";)m+=De(u.subarray(S,S+1)),S+=1;for(m+=De(u.subarray(S,S+1)),S+=1;De(u.subarray(S,S+1))!=="\0";)v+=De(u.subarray(S,S+1)),S+=1;v+=De(u.subarray(S,S+1)),S+=1}return{schemeIdUri:m,value:v,timeScale:y,presentationTime:b,presentationTimeDelta:k,eventDuration:E,id:C,payload:u.subarray(S,u.byteLength)}}(a);if(el.test(s.schemeIdUri)){var l=Y(s.presentationTime)?s.presentationTime/s.timeScale:t+s.presentationTimeDelta/s.timeScale,d=s.eventDuration===4294967295?Number.POSITIVE_INFINITY:s.eventDuration/s.timeScale;d<=.001&&(d=Number.POSITIVE_INFINITY);var c=s.payload;r.samples.push({data:c,len:c.byteLength,dts:l,pts:l,type:ar,duration:d})}})}return r},n.demuxSampleAes=function(e,t,r){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},n.destroy=function(){},o}(),Kr=null,rl=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],il=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],nl=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],al=[0,1,1,4];function Ma(o,n,e,t,r){if(!(e+24>n.length)){var i=Fa(n,e);if(i&&e+i.frameLength<=n.length){var a=t+r*(9e4*i.samplesPerFrame/i.sampleRate),s={unit:n.subarray(e,e+i.frameLength),pts:a,dts:a};return o.config=[],o.channelCount=i.channelCount,o.samplerate=i.sampleRate,o.samples.push(s),{sample:s,length:i.frameLength,missing:0}}}}function Fa(o,n){var e=o[n+1]>>3&3,t=o[n+1]>>1&3,r=o[n+2]>>4&15,i=o[n+2]>>2&3;if(e!==1&&r!==0&&r!==15&&i!==3){var a=o[n+2]>>1&1,s=o[n+3]>>6,l=1e3*rl[14*(e===3?3-t:t===3?3:4)+r-1],d=il[3*(e===3?0:e===2?1:2)+i],c=s===3?1:2,u=nl[e][t],g=al[t],m=8*u*g,v=Math.floor(u*l/d+a)*g;if(Kr===null){var y=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Kr=y?parseInt(y[1]):0}return Kr&&Kr<=87&&t===2&&l>=224e3&&s===0&&(o[n+3]=128|o[n+3]),{sampleRate:d,channelCount:c,frameLength:v,samplesPerFrame:m}}}function Ni(o,n){return o[n]===255&&(224&o[n+1])==224&&(6&o[n+1])!=0}function Ba(o,n){return n+1<o.length&&Ni(o,n)}function ol(o,n){if(n+1<o.length&&Ni(o,n)){var e=Fa(o,n),t=4;e!=null&&e.frameLength&&(t=e.frameLength);var r=n+t;return r===o.length||Ba(o,r)}return!1}var Na=function(){function o(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}var n=o.prototype;return n.loadWord=function(){var e=this.data,t=this.bytesAvailable,r=e.byteLength-t,i=new Uint8Array(4),a=Math.min(4,t);if(a===0)throw new Error("no bytes available");i.set(e.subarray(r,r+a)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=8*a,this.bytesAvailable-=a},n.skipBits=function(e){var t;e=Math.min(e,8*this.bytesAvailable+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,e-=(t=e>>3)<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},n.readBits=function(e){var t=Math.min(this.bitsAvailable,e),r=this.word>>>32-t;if(e>32&&R.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else{if(!(this.bytesAvailable>0))throw new Error("no bits available");this.loadWord()}return(t=e-t)>0&&this.bitsAvailable?r<<t|this.readBits(t):r},n.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(this.word&2147483648>>>e)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},n.skipUEG=function(){this.skipBits(1+this.skipLZ())},n.skipEG=function(){this.skipBits(1+this.skipLZ())},n.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},n.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},n.readBoolean=function(){return this.readBits(1)===1},n.readUByte=function(){return this.readBits(8)},n.readUShort=function(){return this.readBits(16)},n.readUInt=function(){return this.readBits(32)},n.skipScalingList=function(e){for(var t=8,r=8,i=0;i<e;i++)r!==0&&(r=(t+this.readEG()+256)%256),t=r===0?t:r},n.readSPS=function(){var e,t,r,i=0,a=0,s=0,l=0,d=this.readUByte.bind(this),c=this.readBits.bind(this),u=this.readUEG.bind(this),g=this.readBoolean.bind(this),m=this.skipBits.bind(this),v=this.skipEG.bind(this),y=this.skipUEG.bind(this),k=this.skipScalingList.bind(this);d();var b=d();if(c(5),m(3),d(),y(),b===100||b===110||b===122||b===244||b===44||b===83||b===86||b===118||b===128){var E=u();if(E===3&&m(1),y(),y(),m(1),g())for(t=E!==3?8:12,r=0;r<t;r++)g()&&k(r<6?16:64)}y();var C=u();if(C===0)u();else if(C===1)for(m(1),v(),v(),e=u(),r=0;r<e;r++)v();y(),m(1);var S=u(),D=u(),I=c(1);I===0&&m(1),m(1),g()&&(i=u(),a=u(),s=u(),l=u());var P=[1,1];if(g()&&g())switch(d()){case 1:P=[1,1];break;case 2:P=[12,11];break;case 3:P=[10,11];break;case 4:P=[16,11];break;case 5:P=[40,33];break;case 6:P=[24,11];break;case 7:P=[20,11];break;case 8:P=[32,11];break;case 9:P=[80,33];break;case 10:P=[18,11];break;case 11:P=[15,11];break;case 12:P=[64,33];break;case 13:P=[160,99];break;case 14:P=[4,3];break;case 15:P=[3,2];break;case 16:P=[2,1];break;case 255:P=[d()<<8|d(),d()<<8|d()]}return{width:Math.ceil(16*(S+1)-2*i-2*a),height:(2-I)*(D+1)*16-(I?2:4)*(s+l),pixelRatio:P}},n.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},o}(),sl=function(){function o(e,t,r){this.keyData=void 0,this.decrypter=void 0,this.keyData=r,this.decrypter=new Oi(t,{removePKCS7Padding:!1})}var n=o.prototype;return n.decryptBuffer=function(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer)},n.decryptAacSample=function(e,t,r){var i=this,a=e[t].unit;if(!(a.length<=16)){var s=a.subarray(16,a.length-a.length%16),l=s.buffer.slice(s.byteOffset,s.byteOffset+s.length);this.decryptBuffer(l).then(function(d){var c=new Uint8Array(d);a.set(c,16),i.decrypter.isSync()||i.decryptAacSamples(e,t+1,r)})}},n.decryptAacSamples=function(e,t,r){for(;;t++){if(t>=e.length)return void r();if(!(e[t].unit.length<32||(this.decryptAacSample(e,t,r),this.decrypter.isSync())))return}},n.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,r=new Int8Array(t),i=0,a=32;a<e.length-16;a+=160,i+=16)r.set(e.subarray(a,a+16),i);return r},n.getAvcDecryptedUnit=function(e,t){for(var r=new Uint8Array(t),i=0,a=32;a<e.length-16;a+=160,i+=16)e.set(r.subarray(i,i+16),a);return e},n.decryptAvcSample=function(e,t,r,i,a){var s=this,l=qn(a.data),d=this.getAvcEncryptedData(l);this.decryptBuffer(d.buffer).then(function(c){a.data=s.getAvcDecryptedUnit(l,c),s.decrypter.isSync()||s.decryptAvcSamples(e,t,r+1,i)})},n.decryptAvcSamples=function(e,t,r,i){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,r=0){if(t>=e.length)return void i();for(var a=e[t].units;!(r>=a.length);r++){var s=a[r];if(!(s.data.length<=48||s.type!==1&&s.type!==5||(this.decryptAvcSample(e,t,r,i,s),this.decrypter.isSync())))return}}},o}(),Ge=188,ll=function(){function o(e,t,r){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=e,this.config=t,this.typeSupported=r}o.probe=function(e){var t=o.syncOffset(e);return t>0&&R.warn("MPEG2-TS detected but first sync word found @ offset "+t),t!==-1},o.syncOffset=function(e){for(var t=e.length,r=Math.min(940,e.length-Ge)+1,i=0;i<r;){for(var a=!1,s=-1,l=0,d=i;d<t;d+=Ge){if(e[d]!==71){if(l)return-1;break}if(l++,s===-1&&(s=d)!==0&&(r=Math.min(s+18612,e.length-Ge)+1),a||(a=Ui(e,d)===0),a&&l>1&&(s===0&&l>2||d+Ge>r))return s}i++}return-1},o.createTrack=function(e,t){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:Hn[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?t:void 0}};var n=o.prototype;return n.resetInitSegment=function(e,t,r,i){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=o.createTrack("video"),this._audioTrack=o.createTrack("audio",i),this._id3Track=o.createTrack("id3"),this._txtTrack=o.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=r,this._duration=i},n.resetTimeStamp=function(){},n.resetContiguity=function(){var e=this._audioTrack,t=this._avcTrack,r=this._id3Track;e&&(e.pesData=null),t&&(t.pesData=null),r&&(r.pesData=null),this.aacOverFlow=null,this.avcSample=null,this.remainderData=null},n.demux=function(e,t,r,i){var a;r===void 0&&(r=!1),i===void 0&&(i=!1),r||(this.sampleAes=null);var s=this._avcTrack,l=this._audioTrack,d=this._id3Track,c=this._txtTrack,u=s.pid,g=s.pesData,m=l.pid,v=d.pid,y=l.pesData,k=d.pesData,b=null,E=this.pmtParsed,C=this._pmtId,S=e.length;if(this.remainderData&&(S=(e=Mt(this.remainderData,e)).length,this.remainderData=null),S<Ge&&!i)return this.remainderData=e,{audioTrack:l,videoTrack:s,id3Track:d,textTrack:c};var D=Math.max(0,o.syncOffset(e));(S-=(S-D)%Ge)<e.byteLength&&!i&&(this.remainderData=new Uint8Array(e.buffer,S,e.buffer.byteLength-S));for(var I=0,P=D;P<S;P+=Ge)if(e[P]===71){var U=!!(64&e[P+1]),F=Ui(e,P),N=void 0;if((48&e[P+3])>>4>1){if((N=P+5+e[P+4])===P+Ge)continue}else N=P+4;switch(F){case u:U&&(g&&(a=Wt(g))&&this.parseAVCPES(s,c,a,!1),g={data:[],size:0}),g&&(g.data.push(e.subarray(N,P+Ge)),g.size+=P+Ge-N);break;case m:if(U){if(y&&(a=Wt(y)))switch(l.segmentCodec){case"aac":this.parseAACPES(l,a);break;case"mp3":this.parseMPEGPES(l,a)}y={data:[],size:0}}y&&(y.data.push(e.subarray(N,P+Ge)),y.size+=P+Ge-N);break;case v:U&&(k&&(a=Wt(k))&&this.parseID3PES(d,a),k={data:[],size:0}),k&&(k.data.push(e.subarray(N,P+Ge)),k.size+=P+Ge-N);break;case 0:U&&(N+=e[N]+1),C=this._pmtId=dl(e,N);break;case C:U&&(N+=e[N]+1);var z=cl(e,N,this.typeSupported,r);(u=z.avc)>0&&(s.pid=u),(m=z.audio)>0&&(l.pid=m,l.segmentCodec=z.segmentCodec),(v=z.id3)>0&&(d.pid=v),b===null||E||(R.warn("MPEG-TS PMT found at "+P+" after unknown PID '"+b+"'. Backtracking to sync byte @"+D+" to parse all TS packets."),b=null,P=D-188),E=this.pmtParsed=!0;break;case 17:case 8191:break;default:b=F}}else I++;if(I>0){var K=new Error("Found "+I+" TS packet/s that do not start with 0x47");this.observer.emit(A.ERROR,A.ERROR,{type:J.MEDIA_ERROR,details:O.FRAG_PARSING_ERROR,fatal:!1,error:K,reason:K.message})}s.pesData=g,l.pesData=y,d.pesData=k;var W={audioTrack:l,videoTrack:s,id3Track:d,textTrack:c};return i&&this.extractRemainingSamples(W),W},n.flush=function(){var e,t=this.remainderData;return this.remainderData=null,e=t?this.demux(t,-1,!1,!0):{videoTrack:this._avcTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(e),this.sampleAes?this.decrypt(e,this.sampleAes):e},n.extractRemainingSamples=function(e){var t,r=e.audioTrack,i=e.videoTrack,a=e.id3Track,s=e.textTrack,l=i.pesData,d=r.pesData,c=a.pesData;if(l&&(t=Wt(l))?(this.parseAVCPES(i,s,t,!0),i.pesData=null):i.pesData=l,d&&(t=Wt(d))){switch(r.segmentCodec){case"aac":this.parseAACPES(r,t);break;case"mp3":this.parseMPEGPES(r,t)}r.pesData=null}else d!=null&&d.size&&R.log("last AAC PES packet truncated,might overlap between fragments"),r.pesData=d;c&&(t=Wt(c))?(this.parseID3PES(a,t),a.pesData=null):a.pesData=c},n.demuxSampleAes=function(e,t,r){var i=this.demux(e,r,!0,!this.config.progressive),a=this.sampleAes=new sl(this.observer,this.config,t);return this.decrypt(i,a)},n.decrypt=function(e,t){return new Promise(function(r){var i=e.audioTrack,a=e.videoTrack;i.samples&&i.segmentCodec==="aac"?t.decryptAacSamples(i.samples,0,function(){a.samples?t.decryptAvcSamples(a.samples,0,0,function(){r(e)}):r(e)}):a.samples&&t.decryptAvcSamples(a.samples,0,0,function(){r(e)})})},n.destroy=function(){this._duration=0},n.parseAVCPES=function(e,t,r,i){var a,s=this,l=this.parseAVCNALu(e,r.data),d=this.avcSample,c=!1;r.data=null,d&&l.length&&!e.audFound&&(fr(d,e),d=this.avcSample=Vr(!1,r.pts,r.dts,"")),l.forEach(function(u){var g;switch(u.type){case 1:var m=!1;a=!0;var v,y=u.data;if(c&&y.length>4){var k=new Na(y).readSliceType();k!==2&&k!==4&&k!==7&&k!==9||(m=!0)}m&&(v=d)!=null&&v.frame&&!d.key&&(fr(d,e),d=s.avcSample=null),d||(d=s.avcSample=Vr(!0,r.pts,r.dts,"")),d.frame=!0,d.key=m;break;case 5:a=!0,(g=d)!=null&&g.frame&&!d.key&&(fr(d,e),d=s.avcSample=null),d||(d=s.avcSample=Vr(!0,r.pts,r.dts,"")),d.key=!0,d.frame=!0;break;case 6:a=!0,$n(u.data,1,r.pts,t.samples);break;case 7:if(a=!0,c=!0,!e.sps){var b=u.data,E=new Na(b).readSPS();e.width=E.width,e.height=E.height,e.pixelRatio=E.pixelRatio,e.sps=[b],e.duration=s._duration;for(var C=b.subarray(1,4),S="avc1.",D=0;D<3;D++){var I=C[D].toString(16);I.length<2&&(I="0"+I),S+=I}e.codec=S}break;case 8:a=!0,e.pps||(e.pps=[u.data]);break;case 9:a=!1,e.audFound=!0,d&&fr(d,e),d=s.avcSample=Vr(!1,r.pts,r.dts,"");break;case 12:a=!0;break;default:a=!1,d&&(d.debug+="unknown NAL "+u.type+" ")}d&&a&&d.units.push(u)}),i&&d&&(fr(d,e),this.avcSample=null)},n.getLastNalUnit=function(e){var t,r,i=this.avcSample;if(i&&i.units.length!==0||(i=e[e.length-1]),(t=i)!=null&&t.units){var a=i.units;r=a[a.length-1]}return r},n.parseAVCNALu=function(e,t){var r,i,a=t.byteLength,s=e.naluState||0,l=s,d=[],c=0,u=-1,g=0;for(s===-1&&(u=0,g=31&t[0],s=0,c=1);c<a;)if(r=t[c++],s)if(s!==1)if(r)if(r===1){if(u>=0){var m={data:t.subarray(u,c-s-1),type:g};d.push(m)}else{var v=this.getLastNalUnit(e.samples);if(v&&(l&&c<=4-l&&v.state&&(v.data=v.data.subarray(0,v.data.byteLength-l)),(i=c-s-1)>0)){var y=new Uint8Array(v.data.byteLength+i);y.set(v.data,0),y.set(t.subarray(0,i),v.data.byteLength),v.data=y,v.state=0}}c<a?(u=c,g=31&t[c],s=0):s=-1}else s=0;else s=3;else s=r?0:2;else s=r?0:1;if(u>=0&&s>=0){var k={data:t.subarray(u,a),type:g,state:s};d.push(k)}if(d.length===0){var b=this.getLastNalUnit(e.samples);if(b){var E=new Uint8Array(b.data.byteLength+t.byteLength);E.set(b.data,0),E.set(t,b.data.byteLength),b.data=E}}return e.naluState=s,d},n.parseAACPES=function(e,t){var r,i,a,s=0,l=this.aacOverFlow,d=t.data;if(l){this.aacOverFlow=null;var c=l.missing,u=l.sample.unit.byteLength;if(c===-1){var g=new Uint8Array(u+d.byteLength);g.set(l.sample.unit,0),g.set(d,u),d=g}else{var m=u-c;l.sample.unit.set(d.subarray(0,c),m),e.samples.push(l.sample),s=l.missing}}for(r=s,i=d.length;r<i-1&&!Hr(d,r);r++);if(r!==s){var v,y=r<i-1;v=y?"AAC PES did not start with ADTS header,offset:"+r:"No ADTS header found in AAC PES";var k=new Error(v);if(R.warn("parsing error: "+v),this.observer.emit(A.ERROR,A.ERROR,{type:J.MEDIA_ERROR,details:O.FRAG_PARSING_ERROR,fatal:!1,levelRetry:y,error:k,reason:v}),!y)return}if(Ia(e,this.observer,d,r,this.audioCodec),t.pts!==void 0)a=t.pts;else{if(!l)return void R.warn("[tsdemuxer]: AAC PES unknown PTS");var b=Pa(e.samplerate);a=l.sample.pts+b}for(var E,C=0;r<i;){if(r+=(E=Oa(e,d,r,a,C)).length,E.missing){this.aacOverFlow=E;break}for(C++;r<i-1&&!Hr(d,r);r++);}},n.parseMPEGPES=function(e,t){var r=t.data,i=r.length,a=0,s=0,l=t.pts;if(l!==void 0)for(;s<i;)if(Ba(r,s)){var d=Ma(e,r,s,l,a);if(!d)break;s+=d.length,a++}else s++;else R.warn("[tsdemuxer]: MPEG PES unknown PTS")},n.parseID3PES=function(e,t){if(t.pts!==void 0){var r=M({},t,{type:this._avcTrack?ar:nr,duration:Number.POSITIVE_INFINITY});e.samples.push(r)}else R.warn("[tsdemuxer]: ID3 PES unknown PTS")},o}();function Vr(o,n,e,t){return{key:o,frame:!1,pts:n,dts:e,units:[],debug:t,length:0}}function Ui(o,n){return((31&o[n+1])<<8)+o[n+2]}function dl(o,n){return(31&o[n+10])<<8|o[n+11]}function cl(o,n,e,t){var r={audio:-1,avc:-1,id3:-1,segmentCodec:"aac"},i=n+3+((15&o[n+1])<<8|o[n+2])-4;for(n+=12+((15&o[n+10])<<8|o[n+11]);n<i;){var a=Ui(o,n);switch(o[n]){case 207:if(!t){R.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:r.audio===-1&&(r.audio=a);break;case 21:r.id3===-1&&(r.id3=a);break;case 219:if(!t){R.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:r.avc===-1&&(r.avc=a);break;case 3:case 4:e.mpeg!==!0&&e.mp3!==!0?R.log("MPEG audio found, not supported in this browser"):r.audio===-1&&(r.audio=a,r.segmentCodec="mp3");break;case 36:R.warn("Unsupported HEVC stream type found")}n+=5+((15&o[n+3])<<8|o[n+4])}return r}function Wt(o){var n,e,t,r,i,a=0,s=o.data;if(!o||o.size===0)return null;for(;s[0].length<19&&s.length>1;){var l=new Uint8Array(s[0].length+s[1].length);l.set(s[0]),l.set(s[1],s[0].length),s[0]=l,s.splice(1,1)}if(((n=s[0])[0]<<16)+(n[1]<<8)+n[2]===1){if((e=(n[4]<<8)+n[5])&&e>o.size-6)return null;var d=n[7];192&d&&(r=536870912*(14&n[9])+4194304*(255&n[10])+16384*(254&n[11])+128*(255&n[12])+(254&n[13])/2,64&d?r-(i=536870912*(14&n[14])+4194304*(255&n[15])+16384*(254&n[16])+128*(255&n[17])+(254&n[18])/2)>54e5&&(R.warn(Math.round((r-i)/9e4)+"s delta between PTS and DTS, align them"),r=i):i=r);var c=(t=n[8])+9;if(o.size<=c)return null;o.size-=c;for(var u=new Uint8Array(o.size),g=0,m=s.length;g<m;g++){var v=(n=s[g]).byteLength;if(c){if(c>v){c-=v;continue}n=n.subarray(c),v-=c,c=0}u.set(n,a),a+=v}return e&&(e-=t+3),{data:u,pts:r,dts:i,len:e}}return null}function fr(o,n){if(o.units.length&&o.frame){if(o.pts===void 0){var e=n.samples,t=e.length;if(!t)return void n.dropped++;var r=e[t-1];o.pts=r.pts,o.dts=r.dts}n.samples.push(o)}o.debug.length&&R.log(o.pts+"/"+o.dts+":"+o.debug)}var hl=function(o){function n(){return o.apply(this,arguments)||this}j(n,o);var e=n.prototype;return e.resetInitSegment=function(t,r,i,a){o.prototype.resetInitSegment.call(this,t,r,i,a),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:r,duration:a,inputTimeScale:9e4,dropped:0}},n.probe=function(t){if(!t)return!1;for(var r=(Cr(t,0)||[]).length,i=t.length;r<i;r++)if(ol(t,r))return R.log("MPEG Audio sync word found !"),!0;return!1},e.canParse=function(t,r){return function(i,a){return Ni(i,a)&&4<=i.length-a}(t,r)},e.appendFrame=function(t,r,i){if(this.basePTS!==null)return Ma(t,r,i,this.basePTS,this.frameIndex)},n}(La),Ua=function(){function o(){}return o.getSilentFrame=function(n,e){if(n==="mp4a.40.2"){if(e===1)return new Uint8Array([0,200,0,128,35,128]);if(e===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(e===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(e===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(e===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(e===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(e===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(e===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(e===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}},o}(),xt=Math.pow(2,32)-1,Re=function(){function o(){}return o.init=function(){var n;for(n in o.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},o.types)o.types.hasOwnProperty(n)&&(o.types[n]=[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3)]);var e=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),t=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);o.HDLR_TYPES={video:e,audio:t};var r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),i=new Uint8Array([0,0,0,0,0,0,0,0]);o.STTS=o.STSC=o.STCO=i,o.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),o.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),o.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),o.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var a=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);o.FTYP=o.box(o.types.ftyp,a,l,a,s),o.DINF=o.box(o.types.dinf,o.box(o.types.dref,r))},o.box=function(n){for(var e=8,t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];for(var a=r.length,s=a;a--;)e+=r[a].byteLength;var l=new Uint8Array(e);for(l[0]=e>>24&255,l[1]=e>>16&255,l[2]=e>>8&255,l[3]=255&e,l.set(n,4),a=0,e=8;a<s;a++)l.set(r[a],e),e+=r[a].byteLength;return l},o.hdlr=function(n){return o.box(o.types.hdlr,o.HDLR_TYPES[n])},o.mdat=function(n){return o.box(o.types.mdat,n)},o.mdhd=function(n,e){e*=n;var t=Math.floor(e/(xt+1)),r=Math.floor(e%(xt+1));return o.box(o.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,255&n,t>>24,t>>16&255,t>>8&255,255&t,r>>24,r>>16&255,r>>8&255,255&r,85,196,0,0]))},o.mdia=function(n){return o.box(o.types.mdia,o.mdhd(n.timescale,n.duration),o.hdlr(n.type),o.minf(n))},o.mfhd=function(n){return o.box(o.types.mfhd,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n]))},o.minf=function(n){return n.type==="audio"?o.box(o.types.minf,o.box(o.types.smhd,o.SMHD),o.DINF,o.stbl(n)):o.box(o.types.minf,o.box(o.types.vmhd,o.VMHD),o.DINF,o.stbl(n))},o.moof=function(n,e,t){return o.box(o.types.moof,o.mfhd(n),o.traf(t,e))},o.moov=function(n){for(var e=n.length,t=[];e--;)t[e]=o.trak(n[e]);return o.box.apply(null,[o.types.moov,o.mvhd(n[0].timescale,n[0].duration)].concat(t).concat(o.mvex(n)))},o.mvex=function(n){for(var e=n.length,t=[];e--;)t[e]=o.trex(n[e]);return o.box.apply(null,[o.types.mvex].concat(t))},o.mvhd=function(n,e){e*=n;var t=Math.floor(e/(xt+1)),r=Math.floor(e%(xt+1)),i=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,255&n,t>>24,t>>16&255,t>>8&255,255&t,r>>24,r>>16&255,r>>8&255,255&r,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return o.box(o.types.mvhd,i)},o.sdtp=function(n){var e,t,r=n.samples||[],i=new Uint8Array(4+r.length);for(e=0;e<r.length;e++)t=r[e].flags,i[e+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return o.box(o.types.sdtp,i)},o.stbl=function(n){return o.box(o.types.stbl,o.stsd(n),o.box(o.types.stts,o.STTS),o.box(o.types.stsc,o.STSC),o.box(o.types.stsz,o.STSZ),o.box(o.types.stco,o.STCO))},o.avc1=function(n){var e,t,r,i=[],a=[];for(e=0;e<n.sps.length;e++)r=(t=n.sps[e]).byteLength,i.push(r>>>8&255),i.push(255&r),i=i.concat(Array.prototype.slice.call(t));for(e=0;e<n.pps.length;e++)r=(t=n.pps[e]).byteLength,a.push(r>>>8&255),a.push(255&r),a=a.concat(Array.prototype.slice.call(t));var s=o.box(o.types.avcC,new Uint8Array([1,i[3],i[4],i[5],255,224|n.sps.length].concat(i).concat([n.pps.length]).concat(a))),l=n.width,d=n.height,c=n.pixelRatio[0],u=n.pixelRatio[1];return o.box(o.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,d>>8&255,255&d,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,o.box(o.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),o.box(o.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,u>>24,u>>16&255,u>>8&255,255&u])))},o.esds=function(n){var e=n.config.length;return new Uint8Array([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([e]).concat(n.config).concat([6,1,2]))},o.mp4a=function(n){var e=n.samplerate;return o.box(o.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,n.channelCount,0,16,0,0,0,0,e>>8&255,255&e,0,0]),o.box(o.types.esds,o.esds(n)))},o.mp3=function(n){var e=n.samplerate;return o.box(o.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,n.channelCount,0,16,0,0,0,0,e>>8&255,255&e,0,0]))},o.stsd=function(n){return n.type==="audio"?n.segmentCodec==="mp3"&&n.codec==="mp3"?o.box(o.types.stsd,o.STSD,o.mp3(n)):o.box(o.types.stsd,o.STSD,o.mp4a(n)):o.box(o.types.stsd,o.STSD,o.avc1(n))},o.tkhd=function(n){var e=n.id,t=n.duration*n.timescale,r=n.width,i=n.height,a=Math.floor(t/(xt+1)),s=Math.floor(t%(xt+1));return o.box(o.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,s>>24,s>>16&255,s>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>8&255,255&r,0,0,i>>8&255,255&i,0,0]))},o.traf=function(n,e){var t=o.sdtp(n),r=n.id,i=Math.floor(e/(xt+1)),a=Math.floor(e%(xt+1));return o.box(o.types.traf,o.box(o.types.tfhd,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r])),o.box(o.types.tfdt,new Uint8Array([1,0,0,0,i>>24,i>>16&255,i>>8&255,255&i,a>>24,a>>16&255,a>>8&255,255&a])),o.trun(n,t.length+16+20+8+16+8+8),t)},o.trak=function(n){return n.duration=n.duration||4294967295,o.box(o.types.trak,o.tkhd(n),o.mdia(n))},o.trex=function(n){var e=n.id;return o.box(o.types.trex,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},o.trun=function(n,e){var t,r,i,a,s,l,d=n.samples||[],c=d.length,u=12+16*c,g=new Uint8Array(u);for(e+=8+u,g.set([n.type==="video"?1:0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,e>>>24&255,e>>>16&255,e>>>8&255,255&e],0),t=0;t<c;t++)i=(r=d[t]).duration,a=r.size,s=r.flags,l=r.cts,g.set([i>>>24&255,i>>>16&255,i>>>8&255,255&i,a>>>24&255,a>>>16&255,a>>>8&255,255&a,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*t);return o.box(o.types.trun,g)},o.initSegment=function(n){o.types||o.init();var e=o.moov(n),t=new Uint8Array(o.FTYP.byteLength+e.byteLength);return t.set(o.FTYP),t.set(e,o.FTYP.byteLength),t},o}();function Gi(o,n,e,t){e===void 0&&(e=1),t===void 0&&(t=!1);var r=o*n*e;return t?Math.round(r):r}function pr(o,n){return Gi(o,1e3,1/9e4,n)}Re.types=void 0,Re.HDLR_TYPES=void 0,Re.STTS=void 0,Re.STSC=void 0,Re.STCO=void 0,Re.STSZ=void 0,Re.VMHD=void 0,Re.SMHD=void 0,Re.STSD=void 0,Re.FTYP=void 0,Re.DINF=void 0;var zr=null,Hi=null,Ki=function(){function o(e,t,r,i){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=e,this.config=t,this.typeSupported=r,this.ISGenerated=!1,zr===null){var a=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);zr=a?parseInt(a[1]):0}if(Hi===null){var s=navigator.userAgent.match(/Safari\/(\d+)/i);Hi=s?parseInt(s[1]):0}}var n=o.prototype;return n.destroy=function(){},n.resetTimeStamp=function(e){R.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e},n.resetNextTimestamp=function(){R.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},n.resetInitSegment=function(){R.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1},n.getVideoStartPts=function(e){var t=!1,r=e.reduce(function(i,a){var s=a.pts-i;return s<-4294967296?(t=!0,qe(i,a.pts)):s>0?i:a.pts},e[0].pts);return t&&R.debug("PTS rollover detected"),r},n.remux=function(e,t,r,i,a,s,l,d){var c,u,g,m,v,y,k=a,b=a,E=e.pid>-1,C=t.pid>-1,S=t.samples.length,D=e.samples.length>0,I=l&&S>0||S>1;if((!E||D)&&(!C||I)||this.ISGenerated||l){this.ISGenerated||(g=this.generateIS(e,t,a,s));var P,U=this.isVideoContiguous,F=-1;if(I&&(F=function(ne){for(var X=0;X<ne.length;X++)if(ne[X].key)return X;return-1}(t.samples),!U&&this.config.forceKeyFrameOnDiscontinuity))if(y=!0,F>0){R.warn("[mp4-remuxer]: Dropped "+F+" out of "+S+" video samples due to a missing keyframe");var N=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(F),t.dropped+=F,P=b+=(t.samples[0].pts-N)/t.inputTimeScale}else F===-1&&(R.warn("[mp4-remuxer]: No keyframe found out of "+S+" video samples"),y=!1);if(this.ISGenerated){if(D&&I){var z=this.getVideoStartPts(t.samples),K=(qe(e.samples[0].pts,z)-z)/t.inputTimeScale;k+=Math.max(0,K),b+=Math.max(0,-K)}if(D){if(e.samplerate||(R.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),g=this.generateIS(e,t,a,s)),u=this.remuxAudio(e,k,this.isAudioContiguous,s,C||I||d===st?b:void 0),I){var W=u?u.endPTS-u.startPTS:0;t.inputTimeScale||(R.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),g=this.generateIS(e,t,a,s)),c=this.remuxVideo(t,b,U,W)}}else I&&(c=this.remuxVideo(t,b,U,0));c&&(c.firstKeyFrame=F,c.independent=F!==-1,c.firstKeyFramePTS=P)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(r.samples.length&&(v=Ga(r,a,this._initPTS,this._initDTS)),i.samples.length&&(m=Ha(i,a,this._initPTS))),{audio:u,video:c,initSegment:g,independent:y,text:m,id3:v}},n.generateIS=function(e,t,r,i){var a,s,l,d=e.samples,c=t.samples,u=this.typeSupported,g={},m=this._initPTS,v=!m||i,y="audio/mp4";if(v&&(a=s=1/0),e.config&&d.length&&(e.timescale=e.samplerate,e.segmentCodec==="mp3"&&(u.mpeg?(y="audio/mpeg",e.codec=""):u.mp3&&(e.codec="mp3")),g.audio={id:"audio",container:y,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&u.mpeg?new Uint8Array(0):Re.initSegment([e]),metadata:{channelCount:e.channelCount}},v&&(l=e.inputTimeScale,m&&l===m.timescale?v=!1:a=s=d[0].pts-Math.round(l*r))),t.sps&&t.pps&&c.length&&(t.timescale=t.inputTimeScale,g.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:Re.initSegment([t]),metadata:{width:t.width,height:t.height}},v))if(l=t.inputTimeScale,m&&l===m.timescale)v=!1;else{var k=this.getVideoStartPts(c),b=Math.round(l*r);s=Math.min(s,qe(c[0].dts,k)-b),a=Math.min(a,k-b)}if(Object.keys(g).length)return this.ISGenerated=!0,v?(this._initPTS={baseTime:a,timescale:l},this._initDTS={baseTime:s,timescale:l}):a=l=void 0,{tracks:g,initPTS:a,timescale:l}},n.remuxVideo=function(e,t,r,i){var a,s,l=e.inputTimeScale,d=e.samples,c=[],u=d.length,g=this._initPTS,m=this.nextAvcDts,v=8,y=this.videoSampleDuration,k=Number.POSITIVE_INFINITY,b=Number.NEGATIVE_INFINITY,E=!1;r&&m!==null||(m=t*l-(d[0].pts-qe(d[0].dts,d[0].pts)));for(var C=g.baseTime*l/g.timescale,S=0;S<u;S++){var D=d[S];D.pts=qe(D.pts-C,m),D.dts=qe(D.dts-C,m),D.dts<d[S>0?S-1:S].dts&&(E=!0)}E&&d.sort(function(Xr,ko){var dd=Xr.dts-ko.dts,cd=Xr.pts-ko.pts;return dd||cd}),a=d[0].dts;var I=(s=d[d.length-1].dts)-a,P=I?Math.round(I/(u-1)):y||e.inputTimeScale/30;if(r){var U=a-m,F=U>P,N=U<-1;if((F||N)&&(F?R.warn("AVC: "+pr(U,!0)+" ms ("+U+"dts) hole between fragments detected, filling it"):R.warn("AVC: "+pr(-U,!0)+" ms ("+U+"dts) overlapping between fragments detected"),!N||m>=d[0].pts)){a=m;var z=d[0].pts-U;d[0].dts=a,d[0].pts=z,R.log("Video: First PTS/DTS adjusted: "+pr(z,!0)+"/"+pr(a,!0)+", delta: "+pr(U,!0)+" ms")}}a=Math.max(0,a);for(var K=0,W=0,ne=0;ne<u;ne++){for(var X=d[ne],ee=X.units,re=ee.length,te=0,ae=0;ae<re;ae++)te+=ee[ae].data.length;W+=te,K+=re,X.length=te,X.dts=Math.max(X.dts,a),k=Math.min(X.pts,k),b=Math.max(X.pts,b)}s=d[u-1].dts;var ce,fe=W+4*K+8;try{ce=new Uint8Array(fe)}catch(Xr){return void this.observer.emit(A.ERROR,A.ERROR,{type:J.MUX_ERROR,details:O.REMUX_ALLOC_ERROR,fatal:!1,error:Xr,bytes:fe,reason:"fail allocating video mdat "+fe})}var ye=new DataView(ce.buffer);ye.setUint32(0,fe),ce.set(Re.types.mdat,4);for(var He=!1,Te=Number.POSITIVE_INFINITY,Ze=Number.POSITIVE_INFINITY,We=Number.NEGATIVE_INFINITY,Xe=Number.NEGATIVE_INFINITY,_e=0;_e<u;_e++){for(var Ie=d[_e],dt=Ie.units,kt=0,Ye=0,gr=dt.length;Ye<gr;Ye++){var mr=dt[Ye],Wr=mr.data,Zt=mr.data.byteLength;ye.setUint32(v,Zt),v+=4,ce.set(Wr,v),v+=Zt,kt+=4+Zt}var Ht=void 0;if(_e<u-1)y=d[_e+1].dts-Ie.dts,Ht=d[_e+1].pts-Ie.pts;else{var vr=this.config,bt=_e>0?Ie.dts-d[_e-1].dts:P;if(Ht=_e>0?Ie.pts-d[_e-1].pts:P,vr.stretchShortVideoTrack&&this.nextAudioPts!==null){var nd=Math.floor(vr.maxBufferHole*l),dn=(i?k+i*l:this.nextAudioPts)-Ie.pts;dn>nd?((y=dn-bt)<0?y=bt:He=!0,R.log("[mp4-remuxer]: It is approximately "+dn/90+" ms to the next segment; using duration "+y/90+" ms for the last video frame.")):y=bt}else y=bt}var ad=Math.round(Ie.pts-Ie.dts);Te=Math.min(Te,y),We=Math.max(We,y),Ze=Math.min(Ze,Ht),Xe=Math.max(Xe,Ht),c.push(new Ka(Ie.key,y,kt,ad))}if(c.length){if(zr){if(zr<70){var Eo=c[0].flags;Eo.dependsOn=2,Eo.isNonSync=0}}else if(Hi&&Xe-Ze<We-Te&&P/We<.025&&c[0].cts===0){R.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");for(var cn=a,et=0,Ao=c.length;et<Ao;et++){var xo=cn+c[et].duration,od=cn+c[et].cts;if(et<Ao-1){var sd=xo+c[et+1].cts;c[et].duration=sd-od}else c[et].duration=et?c[et-1].duration:P;c[et].cts=0,cn=xo}}}y=He||!y?P:y,this.nextAvcDts=m=s+y,this.videoSampleDuration=y,this.isVideoContiguous=!0;var ld={data1:Re.moof(e.sequenceNumber++,a,M({},e,{samples:c})),data2:ce,startPTS:k/l,endPTS:(b+y)/l,startDTS:a/l,endDTS:m/l,type:"video",hasAudio:!1,hasVideo:!0,nb:c.length,dropped:e.dropped};return e.samples=[],e.dropped=0,ld},n.remuxAudio=function(e,t,r,i,a){var s=e.inputTimeScale,l=s/(e.samplerate?e.samplerate:s),d=e.segmentCodec==="aac"?1024:1152,c=d*l,u=this._initPTS,g=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,m=[],v=a!==void 0,y=e.samples,k=g?0:8,b=this.nextAudioPts||-1,E=t*s,C=u.baseTime*s/u.timescale;if(this.isAudioContiguous=r=r||y.length&&b>0&&(i&&Math.abs(E-b)<9e3||Math.abs(qe(y[0].pts-C,E)-b)<20*c),y.forEach(function(Ye){Ye.pts=qe(Ye.pts-C,E)}),!r||b<0){if(y=y.filter(function(Ye){return Ye.pts>=0}),!y.length)return;b=a===0?0:i&&!v?Math.max(0,E):y[0].pts}if(e.segmentCodec==="aac")for(var S=this.config.maxAudioFramesDrift,D=0,I=b;D<y.length;D++){var P=y[D],U=P.pts,F=U-I,N=Math.abs(1e3*F/s);if(F<=-S*c&&v)D===0&&(R.warn("Audio frame @ "+(U/s).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*F/s)+" ms."),this.nextAudioPts=b=I=U);else if(F>=S*c&&N<1e4&&v){var z=Math.round(F/c);(I=U-z*c)<0&&(z--,I+=c),D===0&&(this.nextAudioPts=b=I),R.warn("[mp4-remuxer]: Injecting "+z+" audio frame @ "+(I/s).toFixed(3)+"s due to "+Math.round(1e3*F/s)+" ms gap.");for(var K=0;K<z;K++){var W=Math.max(I,0),ne=Ua.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);ne||(R.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),ne=P.unit.subarray()),y.splice(D,0,{unit:ne,pts:W}),I+=c,D++}}P.pts=I,I+=c}for(var X,ee=null,re=null,te=0,ae=y.length;ae--;)te+=y[ae].unit.byteLength;for(var ce=0,fe=y.length;ce<fe;ce++){var ye=y[ce],He=ye.unit,Te=ye.pts;if(re!==null)m[ce-1].duration=Math.round((Te-re)/l);else{if(r&&e.segmentCodec==="aac"&&(Te=b),ee=Te,!(te>0))return;te+=k;try{X=new Uint8Array(te)}catch(Ye){return void this.observer.emit(A.ERROR,A.ERROR,{type:J.MUX_ERROR,details:O.REMUX_ALLOC_ERROR,fatal:!1,error:Ye,bytes:te,reason:"fail allocating audio mdat "+te})}g||(new DataView(X.buffer).setUint32(0,te),X.set(Re.types.mdat,4))}X.set(He,k);var Ze=He.byteLength;k+=Ze,m.push(new Ka(!0,d,Ze,0)),re=Te}var We=m.length;if(We){var Xe=m[m.length-1];this.nextAudioPts=b=re+l*Xe.duration;var _e=g?new Uint8Array(0):Re.moof(e.sequenceNumber++,ee/l,M({},e,{samples:m}));e.samples=[];var Ie=ee/s,dt=b/s,kt={data1:_e,data2:X,startPTS:Ie,endPTS:dt,startDTS:Ie,endDTS:dt,type:"audio",hasAudio:!0,hasVideo:!1,nb:We};return this.isAudioContiguous=!0,kt}},n.remuxEmptyAudio=function(e,t,r,i){var a=e.inputTimeScale,s=a/(e.samplerate?e.samplerate:a),l=this.nextAudioPts,d=this._initDTS,c=9e4*d.baseTime/d.timescale,u=(l!==null?l:i.startDTS*a)+c,g=i.endDTS*a+c,m=1024*s,v=Math.ceil((g-u)/m),y=Ua.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(R.warn("[mp4-remuxer]: remux empty Audio"),y){for(var k=[],b=0;b<v;b++){var E=u+b*m;k.push({unit:y,pts:E,dts:E})}return e.samples=k,this.remuxAudio(e,t,r,!1)}R.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec")},o}();function qe(o,n){var e;if(n===null)return o;for(e=n<o?-8589934592:8589934592;Math.abs(o-n)>4294967296;)o+=e;return o}function Ga(o,n,e,t){var r=o.samples.length;if(r){for(var i=o.inputTimeScale,a=0;a<r;a++){var s=o.samples[a];s.pts=qe(s.pts-e.baseTime*i/e.timescale,n*i)/i,s.dts=qe(s.dts-t.baseTime*i/t.timescale,n*i)/i}var l=o.samples;return o.samples=[],{samples:l}}}function Ha(o,n,e){var t=o.samples.length;if(t){for(var r=o.inputTimeScale,i=0;i<t;i++){var a=o.samples[i];a.pts=qe(a.pts-e.baseTime*r/e.timescale,n*r)/r}o.samples.sort(function(l,d){return l.pts-d.pts});var s=o.samples;return o.samples=[],{samples:s}}}var mt,Ka=function(o,n,e,t){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=n,this.size=e,this.cts=t,this.flags=new ul(o)},ul=function(o){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=o?2:1,this.isNonSync=o?0:1},fl=function(){function o(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}var n=o.prototype;return n.destroy=function(){},n.resetTimeStamp=function(e){this.initPTS=e,this.lastEndTime=null},n.resetNextTimestamp=function(){this.lastEndTime=null},n.resetInitSegment=function(e,t,r,i){this.audioCodec=t,this.videoCodec=r,this.generateInitSegment(function(a,s){if(!a||!s)return a;var l=s.keyId;return l&&s.isCommonEncryption&&ge(a,["moov","trak"]).forEach(function(d){var c=ge(d,["mdia","minf","stbl","stsd"])[0].subarray(8),u=ge(c,["enca"]),g=u.length>0;g||(u=ge(c,["encv"])),u.forEach(function(m){ge(g?m.subarray(28):m.subarray(78),["sinf"]).forEach(function(v){var y=Yn(v);if(y){var k=y.subarray(8,24);k.some(function(b){return b!==0})||(R.log("[eme] Patching keyId in 'enc"+(g?"a":"v")+">sinf>>tenc' box: "+at(k)+" -> "+at(l)),y.set(l,8))}})})}),a}(e,i)),this.emitInitSegment=!0},n.generateInitSegment=function(e){var t=this.audioCodec,r=this.videoCodec;if(e==null||!e.byteLength)return this.initTracks=void 0,void(this.initData=void 0);var i=this.initData=zn(e);t||(t=Va(i.audio,Ne)),r||(r=Va(i.video,Je));var a={};i.audio&&i.video?a.audiovideo={container:"video/mp4",codec:t+","+r,initSegment:e,id:"main"}:i.audio?a.audio={container:"audio/mp4",codec:t,initSegment:e,id:"audio"}:i.video?a.video={container:"video/mp4",codec:r,initSegment:e,id:"main"}:R.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=a},n.remux=function(e,t,r,i,a,s){var l,d,c=this.initPTS,u=this.lastEndTime,g={audio:void 0,video:void 0,text:i,id3:r,initSegment:void 0};Y(u)||(u=this.lastEndTime=a||0);var m=t.samples;if(m==null||!m.length)return g;var v={initPTS:void 0,timescale:1},y=this.initData;if((l=y)!=null&&l.length||(this.generateInitSegment(m),y=this.initData),(d=y)==null||!d.length)return R.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),g;this.emitInitSegment&&(v.tracks=this.initTracks,this.emitInitSegment=!1);var k=function(F,N){for(var z=0,K=0,W=0,ne=ge(F,["moof","traf"]),X=0;X<ne.length;X++){var ee=ne[X],re=ge(ee,["tfhd"])[0],te=N[oe(re,4)];if(te){var ae=te.default,ce=oe(re,0)|(ae==null?void 0:ae.flags),fe=ae==null?void 0:ae.duration;8&ce&&(fe=oe(re,2&ce?12:8));for(var ye=te.timescale||9e4,He=ge(ee,["trun"]),Te=0;Te<He.length;Te++)!(z=As(He[Te]))&&fe&&(z=fe*oe(He[Te],4)),te.type===Je?K+=z/ye:te.type===Ne&&(W+=z/ye)}}if(K===0&&W===0){for(var Ze=0,We=ge(F,["sidx"]),Xe=0;Xe<We.length;Xe++){var _e=Es(We[Xe]);_e!=null&&_e.references&&(Ze+=_e.references.reduce(function(Ie,dt){return Ie+dt.info.duration||0},0))}return Ze}return K||W}(m,y),b=function(F,N){return ge(N,["moof","traf"]).reduce(function(z,K){var W=ge(K,["tfdt"])[0],ne=W[0],X=ge(K,["tfhd"]).reduce(function(ee,re){var te=oe(re,4),ae=F[te];if(ae){var ce=oe(W,4);if(ne===1){if(ce===Dr)return R.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),ee;ce*=Dr+1,ce+=oe(W,8)}var fe=ce/(ae.timescale||9e4);if(isFinite(fe)&&(ee===null||fe<ee))return fe}return ee},null);return X!==null&&isFinite(X)&&(z===null||X<z)?X:z},null)}(y,m),E=b===null?a:b;(function(F,N,z,K){if(F===null)return!0;var W=Math.max(K,1),ne=N-F.baseTime/F.timescale;return Math.abs(ne-z)>W}(c,E,a,k)||v.timescale!==c.timescale&&s)&&(v.initPTS=E-a,c&&c.timescale===1&&R.warn("Adjusting initPTS by "+(v.initPTS-c.baseTime)),this.initPTS=c={baseTime:v.initPTS,timescale:1});var C=e?E-c.baseTime/c.timescale:u,S=C+k;(function(F,N,z){ge(N,["moof","traf"]).forEach(function(K){ge(K,["tfhd"]).forEach(function(W){var ne=oe(W,4),X=F[ne];if(X){var ee=X.timescale||9e4;ge(K,["tfdt"]).forEach(function(re){var te=re[0],ae=oe(re,4);if(te===0)ae-=z*ee,gi(re,4,ae=Math.max(ae,0));else{ae*=Math.pow(2,32),ae+=oe(re,8),ae-=z*ee,ae=Math.max(ae,0);var ce=Math.floor(ae/(Dr+1)),fe=Math.floor(ae%(Dr+1));gi(re,4,ce),gi(re,8,fe)}})}})})})(y,m,c.baseTime/c.timescale),k>0?this.lastEndTime=S:(R.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var D=!!y.audio,I=!!y.video,P="";D&&(P+="audio"),I&&(P+="video");var U={data1:m,startPTS:C,startDTS:C,endPTS:S,endDTS:S,type:P,hasAudio:D,hasVideo:I,nb:1,dropped:0};return g.audio=U.type==="audio"?U:void 0,g.video=U.type!=="audio"?U:void 0,g.initSegment=v,g.id3=Ga(r,a,c,c),i.samples.length&&(g.text=Ha(i,a,c)),g},o}();function Va(o,n){var e=o==null?void 0:o.codec;return e&&e.length>4?e:e==="hvc1"||e==="hev1"?"hvc1.1.6.L120.90":e==="av01"?"av01.0.04M.08":e==="avc1"||n===Je?"avc1.42e01e":"mp4a.40.5"}try{mt=self.performance.now.bind(self.performance)}catch{R.debug("Unable to use Performance API on this environment"),mt=typeof self<"u"&&self.Date.now}var Vi=[{demux:tl,remux:fl},{demux:ll,remux:Ki},{demux:Zs,remux:Ki},{demux:hl,remux:Ki}],zi=function(){function o(e,t,r,i,a){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=r,this.vendor=i,this.id=a}var n=o.prototype;return n.configure=function(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()},n.push=function(e,t,r,i){var a=this,s=r.transmuxing;s.executeStart=mt();var l=new Uint8Array(e),d=this.currentTransmuxState,c=this.transmuxConfig;i&&(this.currentTransmuxState=i);var u=i||d,g=u.contiguous,m=u.discontinuity,v=u.trackSwitch,y=u.accurateTimeOffset,k=u.timeOffset,b=u.initSegmentChange,E=c.audioCodec,C=c.videoCodec,S=c.defaultInitPts,D=c.duration,I=c.initSegmentData,P=function(ne,X){var ee=null;return ne.byteLength>0&&X!=null&&X.key!=null&&X.iv!==null&&X.method!=null&&(ee=X),ee}(l,t);if(P&&P.method==="AES-128"){var U=this.getDecrypter();if(!U.isSync())return this.decryptionPromise=U.webCryptoDecrypt(l,P.key.buffer,P.iv.buffer).then(function(ne){var X=a.push(ne,null,r);return a.decryptionPromise=null,X}),this.decryptionPromise;var F=U.softwareDecrypt(l,P.key.buffer,P.iv.buffer);if(r.part>-1&&(F=U.flush()),!F)return s.executeEnd=mt(),Yi(r);l=new Uint8Array(F)}var N=this.needsProbing(m,v);if(N){var z=this.configureTransmuxer(l);if(z)return R.warn("[transmuxer] "+z.message),this.observer.emit(A.ERROR,A.ERROR,{type:J.MEDIA_ERROR,details:O.FRAG_PARSING_ERROR,fatal:!1,error:z,reason:z.message}),s.executeEnd=mt(),Yi(r)}(m||v||b||N)&&this.resetInitSegment(I,E,C,D,t),(m||b||N)&&this.resetInitialTimestamp(S),g||this.resetContiguity();var K=this.transmux(l,P,k,y,r),W=this.currentTransmuxState;return W.contiguous=!0,W.discontinuity=!1,W.trackSwitch=!1,s.executeEnd=mt(),K},n.flush=function(e){var t=this,r=e.transmuxing;r.executeStart=mt();var i=this.decrypter,a=this.currentTransmuxState,s=this.decryptionPromise;if(s)return s.then(function(){return t.flush(e)});var l=[],d=a.timeOffset;if(i){var c=i.flush();c&&l.push(this.push(c,null,e))}var u=this.demuxer,g=this.remuxer;if(!u||!g)return r.executeEnd=mt(),[Yi(e)];var m=u.flush(d);return Nt(m)?m.then(function(v){return t.flushRemux(l,v,e),l}):(this.flushRemux(l,m,e),l)},n.flushRemux=function(e,t,r){var i=t.audioTrack,a=t.videoTrack,s=t.id3Track,l=t.textTrack,d=this.currentTransmuxState,c=d.accurateTimeOffset,u=d.timeOffset;R.log("[transmuxer.ts]: Flushed fragment "+r.sn+(r.part>-1?" p: "+r.part:"")+" of level "+r.level);var g=this.remuxer.remux(i,a,s,l,u,c,!0,this.id);e.push({remuxResult:g,chunkMeta:r}),r.transmuxing.executeEnd=mt()},n.resetInitialTimestamp=function(e){var t=this.demuxer,r=this.remuxer;t&&r&&(t.resetTimeStamp(e),r.resetTimeStamp(e))},n.resetContiguity=function(){var e=this.demuxer,t=this.remuxer;e&&t&&(e.resetContiguity(),t.resetNextTimestamp())},n.resetInitSegment=function(e,t,r,i,a){var s=this.demuxer,l=this.remuxer;s&&l&&(s.resetInitSegment(e,t,r,i),l.resetInitSegment(e,t,r,a))},n.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},n.transmux=function(e,t,r,i,a){return t&&t.method==="SAMPLE-AES"?this.transmuxSampleAes(e,t,r,i,a):this.transmuxUnencrypted(e,r,i,a)},n.transmuxUnencrypted=function(e,t,r,i){var a=this.demuxer.demux(e,t,!1,!this.config.progressive),s=a.audioTrack,l=a.videoTrack,d=a.id3Track,c=a.textTrack;return{remuxResult:this.remuxer.remux(s,l,d,c,t,r,!1,this.id),chunkMeta:i}},n.transmuxSampleAes=function(e,t,r,i,a){var s=this;return this.demuxer.demuxSampleAes(e,t,r).then(function(l){return{remuxResult:s.remuxer.remux(l.audioTrack,l.videoTrack,l.id3Track,l.textTrack,r,i,!1,s.id),chunkMeta:a}})},n.configureTransmuxer=function(e){for(var t,r=this.config,i=this.observer,a=this.typeSupported,s=this.vendor,l=0,d=Vi.length;l<d;l++)if(Vi[l].demux.probe(e)){t=Vi[l];break}if(!t)return new Error("Failed to find demuxer by probing fragment data");var c=this.demuxer,u=this.remuxer,g=t.remux,m=t.demux;u&&u instanceof g||(this.remuxer=new g(i,r,a,s)),c&&c instanceof m||(this.demuxer=new m(i,r,a),this.probe=m.probe)},n.needsProbing=function(e,t){return!this.demuxer||!this.remuxer||e||t},n.getDecrypter=function(){var e=this.decrypter;return e||(e=this.decrypter=new Oi(this.config)),e},o}(),Yi=function(o){return{remuxResult:{},chunkMeta:o}};function Nt(o){return"then"in o&&o.then instanceof Function}var pl=function(o,n,e,t,r){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=o,this.videoCodec=n,this.initSegmentData=e,this.duration=t,this.defaultInitPts=r||null},gl=function(o,n,e,t,r,i){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=o,this.contiguous=n,this.accurateTimeOffset=e,this.trackSwitch=t,this.timeOffset=r,this.initSegmentChange=i},za={exports:{}};(function(o){var n=Object.prototype.hasOwnProperty,e="~";function t(){}function r(l,d,c){this.fn=l,this.context=d,this.once=c||!1}function i(l,d,c,u,g){if(typeof c!="function")throw new TypeError("The listener must be a function");var m=new r(c,u||l,g),v=e?e+d:d;return l._events[v]?l._events[v].fn?l._events[v]=[l._events[v],m]:l._events[v].push(m):(l._events[v]=m,l._eventsCount++),l}function a(l,d){--l._eventsCount==0?l._events=new t:delete l._events[d]}function s(){this._events=new t,this._eventsCount=0}Object.create&&(t.prototype=Object.create(null),new t().__proto__||(e=!1)),s.prototype.eventNames=function(){var l,d,c=[];if(this._eventsCount===0)return c;for(d in l=this._events)n.call(l,d)&&c.push(e?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(l)):c},s.prototype.listeners=function(l){var d=e?e+l:l,c=this._events[d];if(!c)return[];if(c.fn)return[c.fn];for(var u=0,g=c.length,m=new Array(g);u<g;u++)m[u]=c[u].fn;return m},s.prototype.listenerCount=function(l){var d=e?e+l:l,c=this._events[d];return c?c.fn?1:c.length:0},s.prototype.emit=function(l,d,c,u,g,m){var v=e?e+l:l;if(!this._events[v])return!1;var y,k,b=this._events[v],E=arguments.length;if(b.fn){switch(b.once&&this.removeListener(l,b.fn,void 0,!0),E){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,d),!0;case 3:return b.fn.call(b.context,d,c),!0;case 4:return b.fn.call(b.context,d,c,u),!0;case 5:return b.fn.call(b.context,d,c,u,g),!0;case 6:return b.fn.call(b.context,d,c,u,g,m),!0}for(k=1,y=new Array(E-1);k<E;k++)y[k-1]=arguments[k];b.fn.apply(b.context,y)}else{var C,S=b.length;for(k=0;k<S;k++)switch(b[k].once&&this.removeListener(l,b[k].fn,void 0,!0),E){case 1:b[k].fn.call(b[k].context);break;case 2:b[k].fn.call(b[k].context,d);break;case 3:b[k].fn.call(b[k].context,d,c);break;case 4:b[k].fn.call(b[k].context,d,c,u);break;default:if(!y)for(C=1,y=new Array(E-1);C<E;C++)y[C-1]=arguments[C];b[k].fn.apply(b[k].context,y)}}return!0},s.prototype.on=function(l,d,c){return i(this,l,d,c,!1)},s.prototype.once=function(l,d,c){return i(this,l,d,c,!0)},s.prototype.removeListener=function(l,d,c,u){var g=e?e+l:l;if(!this._events[g])return this;if(!d)return a(this,g),this;var m=this._events[g];if(m.fn)m.fn!==d||u&&!m.once||c&&m.context!==c||a(this,g);else{for(var v=0,y=[],k=m.length;v<k;v++)(m[v].fn!==d||u&&!m[v].once||c&&m[v].context!==c)&&y.push(m[v]);y.length?this._events[g]=y.length===1?y[0]:y:a(this,g)}return this},s.prototype.removeAllListeners=function(l){var d;return l?(d=e?e+l:l,this._events[d]&&a(this,d)):(this._events=new t,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=e,s.EventEmitter=s,o.exports=s})(za);var Yr=Rt(za.exports);function ji(o,n){if(!((e=n.remuxResult).audio||e.video||e.text||e.id3||e.initSegment))return!1;var e,t=[],r=n.remuxResult,i=r.audio,a=r.video;return i&&Ya(t,i),a&&Ya(t,a),o.postMessage({event:"transmuxComplete",data:n},t),!0}function Ya(o,n){n.data1&&o.push(n.data1.buffer),n.data2&&o.push(n.data2.buffer)}function ja(o,n,e){n.reduce(function(t,r){return ji(o,r)||t},!1)||o.postMessage({event:"transmuxComplete",data:n[0]}),o.postMessage({event:"flush",data:e})}h!==void 0&&h&&function(o){var n=new Yr,e=function(r,i){o.postMessage({event:r,data:i})};n.on(A.FRAG_DECRYPTED,e),n.on(A.ERROR,e);var t=function(){var r=function(a){var s=function(l){e("workerLog",{logType:a,message:l})};R[a]=s};for(var i in R)r(i)};o.addEventListener("message",function(r){var i=r.data;switch(i.cmd){case"init":var a=JSON.parse(i.config);o.transmuxer=new zi(n,i.typeSupported,a,i.vendor,i.id),Ln(a.debug,i.id),t(),e("init",null);break;case"configure":o.transmuxer.configure(i.config);break;case"demux":var s=o.transmuxer.push(i.data,i.decryptdata,i.chunkMeta,i.state);Nt(s)?(o.transmuxer.async=!0,s.then(function(c){ji(o,c)}).catch(function(c){e(A.ERROR,{type:J.MEDIA_ERROR,details:O.FRAG_PARSING_ERROR,chunkMeta:i.chunkMeta,fatal:!1,error:c,err:c,reason:"transmuxer-worker push error"})})):(o.transmuxer.async=!1,ji(o,s));break;case"flush":var l=i.chunkMeta,d=o.transmuxer.flush(l);Nt(d)||o.transmuxer.async?(Nt(d)||(d=Promise.resolve(d)),d.then(function(c){ja(o,c,l)}).catch(function(c){e(A.ERROR,{type:J.MEDIA_ERROR,details:O.FRAG_PARSING_ERROR,chunkMeta:i.chunkMeta,fatal:!1,error:c,err:c,reason:"transmuxer-worker flush error"})})):ja(o,d,l)}})}(self);var $i=Ir()||{isTypeSupported:function(){return!1}},$a=function(){function o(e,t,r,i){var a=this;this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;var s=e.config;this.hls=e,this.id=t,this.useWorker=!!s.enableWorker,this.onTransmuxComplete=r,this.onFlush=i;var l=function(k,b){(b=b||{}).frag=a.frag,b.id=a.id,k===A.ERROR&&(a.error=b.error),a.hls.trigger(k,b)};this.observer=new Yr,this.observer.on(A.FRAG_DECRYPTED,l),this.observer.on(A.ERROR,l);var d,c,u,g,m={mp4:$i.isTypeSupported("video/mp4"),mpeg:$i.isTypeSupported("audio/mpeg"),mp3:$i.isTypeSupported('audio/mp4; codecs="mp3"')},v=navigator.vendor;if(!this.useWorker||typeof Worker>"u"||(s.workerPath,0))this.transmuxer=new zi(this.observer,m,s,v,t);else try{s.workerPath?(R.log("loading Web Worker "+s.workerPath+' for "'+t+'"'),this.workerContext=(u=s.workerPath,g=new self.URL(u,self.location.href).href,{worker:new self.Worker(g),scriptURL:g})):(R.log('injecting Web Worker for "'+t+'"'),this.workerContext=(d=new self.Blob(["var exports={};var module={exports:exports};function define(f){f()};define.amd=true;("+x.toString()+")(true);"],{type:"text/javascript"}),c=self.URL.createObjectURL(d),{worker:new self.Worker(c),objectURL:c})),this.onwmsg=function(k){return a.onWorkerMessage(k)};var y=this.workerContext.worker;y.addEventListener("message",this.onwmsg),y.onerror=function(k){var b=new Error(k.message+"  ("+k.filename+":"+k.lineno+")");s.enableWorker=!1,R.warn('Error in "'+t+'" Web Worker, fallback to inline'),a.hls.trigger(A.ERROR,{type:J.OTHER_ERROR,details:O.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:b})},y.postMessage({cmd:"init",typeSupported:m,vendor:v,id:t,config:JSON.stringify(s)})}catch(k){R.warn('Error setting up "'+t+'" Web Worker, fallback to inline',k),this.resetWorker(),this.error=null,this.transmuxer=new zi(this.observer,m,s,v,t)}}var n=o.prototype;return n.resetWorker=function(){if(this.workerContext){var e=this.workerContext,t=e.worker,r=e.objectURL;r&&self.URL.revokeObjectURL(r),t.removeEventListener("message",this.onwmsg),t.onerror=null,t.terminate(),this.workerContext=null}},n.destroy=function(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{var e=this.transmuxer;e&&(e.destroy(),this.transmuxer=null)}var t=this.observer;t&&t.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null},n.push=function(e,t,r,i,a,s,l,d,c,u){var g,m,v=this;c.transmuxing.start=self.performance.now();var y=this.transmuxer,k=s?s.start:a.start,b=a.decryptdata,E=this.frag,C=!(E&&a.cc===E.cc),S=!(E&&c.level===E.level),D=E?c.sn-E.sn:-1,I=this.part?c.part-this.part.index:-1,P=D===0&&c.id>1&&c.id===(E==null?void 0:E.stats.chunkCount),U=!S&&(D===1||D===0&&(I===1||P&&I<=0)),F=self.performance.now();(S||D||a.stats.parsing.start===0)&&(a.stats.parsing.start=F),!s||!I&&U||(s.stats.parsing.start=F);var N=!(E&&((g=a.initSegment)==null?void 0:g.url)===((m=E.initSegment)==null?void 0:m.url)),z=new gl(C,U,d,S,k,N);if(!U||C||N){R.log("[transmuxer-interface, "+a.type+"]: Starting new transmux session for sn: "+c.sn+" p: "+c.part+" level: "+c.level+" id: "+c.id+`
        discontinuity: `+C+`
        trackSwitch: `+S+`
        contiguous: `+U+`
        accurateTimeOffset: `+d+`
        timeOffset: `+k+`
        initSegmentChange: `+N);var K=new pl(r,i,t,l,u);this.configureTransmuxer(K)}if(this.frag=a,this.part=s,this.workerContext)this.workerContext.worker.postMessage({cmd:"demux",data:e,decryptdata:b,chunkMeta:c,state:z},e instanceof ArrayBuffer?[e]:[]);else if(y){var W=y.push(e,b,c,z);Nt(W)?(y.async=!0,W.then(function(ne){v.handleTransmuxComplete(ne)}).catch(function(ne){v.transmuxerError(ne,c,"transmuxer-interface push error")})):(y.async=!1,this.handleTransmuxComplete(W))}},n.flush=function(e){var t=this;e.transmuxing.start=self.performance.now();var r=this.transmuxer;if(this.workerContext)this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:e});else if(r){var i=r.flush(e);Nt(i)||r.async?(Nt(i)||(i=Promise.resolve(i)),i.then(function(a){t.handleFlushResult(a,e)}).catch(function(a){t.transmuxerError(a,e,"transmuxer-interface flush error")})):this.handleFlushResult(i,e)}},n.transmuxerError=function(e,t,r){this.hls&&(this.error=e,this.hls.trigger(A.ERROR,{type:J.MEDIA_ERROR,details:O.FRAG_PARSING_ERROR,chunkMeta:t,fatal:!1,error:e,err:e,reason:r}))},n.handleFlushResult=function(e,t){var r=this;e.forEach(function(i){r.handleTransmuxComplete(i)}),this.onFlush(t)},n.onWorkerMessage=function(e){var t=e.data,r=this.hls;switch(t.event){case"init":var i,a=(i=this.workerContext)==null?void 0:i.objectURL;a&&self.URL.revokeObjectURL(a);break;case"transmuxComplete":this.handleTransmuxComplete(t.data);break;case"flush":this.onFlush(t.data);break;case"workerLog":R[t.data.logType]&&R[t.data.logType](t.data.message);break;default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,r.trigger(t.event,t.data)}},n.configureTransmuxer=function(e){var t=this.transmuxer;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:e}):t&&t.configure(e)},n.handleTransmuxComplete=function(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)},o}(),ml=function(){function o(e,t,r,i){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=t,this.fragmentTracker=r,this.hls=i}var n=o.prototype;return n.destroy=function(){this.media=null,this.hls=this.fragmentTracker=null},n.poll=function(e,t){var r=this.config,i=this.media,a=this.stalled;if(i!==null){var s=i.currentTime,l=i.seeking,d=this.seeking&&!l,c=!this.seeking&&l;if(this.seeking=l,s===e){if(c||d)this.stalled=null;else if(!(i.paused&&!l||i.ended||i.playbackRate===0)&&Ae.getBuffered(i).length){var u=Ae.bufferInfo(i,s,0),g=u.len>0,m=u.nextStart||0;if(g||m){if(l){var v=u.len>2,y=!m||t&&t.start<=s||m-s>2&&!this.fragmentTracker.getPartialFragment(s);if(v||y)return;this.moved=!1}if(!this.moved&&this.stalled!==null){var k,b=Math.max(m,u.start||0)-s,E=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,C=!(E==null||(k=E.details)==null)&&k.live?2*E.details.targetduration:2,S=this.fragmentTracker.getPartialFragment(s);if(b>0&&(b<=C||S))return void this._trySkipBufferHole(S)}var D=self.performance.now();if(a!==null){var I=D-a;if(l||!(I>=250)||(this._reportStall(u),this.media)){var P=Ae.bufferInfo(i,s,r.maxBufferHole);this._tryFixBufferStall(P,I)}}else this.stalled=D}}}else if(this.moved=!0,a!==null){if(this.stallReported){var U=self.performance.now()-a;R.warn("playback not stuck anymore @"+s+", after "+Math.round(U)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}}},n._tryFixBufferStall=function(e,t){var r=this.config,i=this.fragmentTracker,a=this.media;if(a!==null){var s=a.currentTime,l=i.getPartialFragment(s);if(l&&(this._trySkipBufferHole(l)||!this.media))return;(e.len>r.maxBufferHole||e.nextStart&&e.nextStart-s<r.maxBufferHole)&&t>1e3*r.highBufferWatchdogPeriod&&(R.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}},n._reportStall=function(e){var t=this.hls,r=this.media;if(!this.stallReported&&r){this.stallReported=!0;var i=new Error("Playback stalling at @"+r.currentTime+" due to low buffer ("+JSON.stringify(e)+")");R.warn(i.message),t.trigger(A.ERROR,{type:J.MEDIA_ERROR,details:O.BUFFER_STALLED_ERROR,fatal:!1,error:i,buffer:e.len})}},n._trySkipBufferHole=function(e){var t=this.config,r=this.hls,i=this.media;if(i===null)return 0;var a=i.currentTime,s=Ae.bufferInfo(i,a,0),l=a<s.start?s.start:s.nextStart;if(l){var d=s.len<=t.maxBufferHole,c=s.len>0&&s.len<1&&i.readyState<3,u=l-a;if(u>0&&(d||c)){if(u>t.maxBufferHole){var g=this.fragmentTracker,m=!1;if(a===0){var v=g.getAppendedFrag(0,ve);v&&l<v.end&&(m=!0)}if(!m){var y=e||g.getAppendedFrag(a,ve);if(y){for(var k=!1,b=y.end;b<l;){var E=g.getPartialFragment(b);if(!E){k=!0;break}b+=E.duration}if(k)return 0}}}var C=Math.max(l+.05,a+.1);if(R.warn("skipping hole, adjusting currentTime from "+a+" to "+C),this.moved=!0,this.stalled=null,i.currentTime=C,e&&!e.gap){var S=new Error("fragment loaded with buffer holes, seeking from "+a+" to "+C);r.trigger(A.ERROR,{type:J.MEDIA_ERROR,details:O.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:S,reason:S.message,frag:e})}return C}}return 0},n._tryNudgeBuffer=function(){var e=this.config,t=this.hls,r=this.media,i=this.nudgeRetry;if(r!==null){var a=r.currentTime;if(this.nudgeRetry++,i<e.nudgeMaxRetry){var s=a+(i+1)*e.nudgeOffset,l=new Error("Nudging 'currentTime' from "+a+" to "+s);R.warn(l.message),r.currentTime=s,t.trigger(A.ERROR,{type:J.MEDIA_ERROR,details:O.BUFFER_NUDGE_ON_STALL,error:l,fatal:!1})}else{var d=new Error("Playhead still not moving while enough data buffered @"+a+" after "+e.nudgeMaxRetry+" nudges");R.error(d.message),t.trigger(A.ERROR,{type:J.MEDIA_ERROR,details:O.BUFFER_STALLED_ERROR,error:d,fatal:!0})}}},o}(),vl=function(o){function n(t,r,i){var a;return(a=o.call(this,t,r,i,"[stream-controller]",ve)||this).audioCodecSwap=!1,a.gapController=null,a.level=-1,a._forceStartLoad=!1,a.altAudio=!1,a.audioOnly=!1,a.fragPlaying=null,a.onvplaying=null,a.onvseeked=null,a.fragLastKbps=0,a.couldBacktrack=!1,a.backtrackFragment=null,a.audioCodecSwitch=!1,a.videoBuffer=null,a._registerListeners(),a}j(n,o);var e=n.prototype;return e._registerListeners=function(){var t=this.hls;t.on(A.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(A.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(A.MANIFEST_LOADING,this.onManifestLoading,this),t.on(A.MANIFEST_PARSED,this.onManifestParsed,this),t.on(A.LEVEL_LOADING,this.onLevelLoading,this),t.on(A.LEVEL_LOADED,this.onLevelLoaded,this),t.on(A.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),t.on(A.ERROR,this.onError,this),t.on(A.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(A.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.on(A.BUFFER_CREATED,this.onBufferCreated,this),t.on(A.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(A.LEVELS_UPDATED,this.onLevelsUpdated,this),t.on(A.FRAG_BUFFERED,this.onFragBuffered,this)},e._unregisterListeners=function(){var t=this.hls;t.off(A.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(A.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(A.MANIFEST_LOADING,this.onManifestLoading,this),t.off(A.MANIFEST_PARSED,this.onManifestParsed,this),t.off(A.LEVEL_LOADED,this.onLevelLoaded,this),t.off(A.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),t.off(A.ERROR,this.onError,this),t.off(A.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(A.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.off(A.BUFFER_CREATED,this.onBufferCreated,this),t.off(A.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(A.LEVELS_UPDATED,this.onLevelsUpdated,this),t.off(A.FRAG_BUFFERED,this.onFragBuffered,this)},e.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching()},e.startLoad=function(t){if(this.levels){var r=this.lastCurrentTime,i=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,!this.startFragRequested){var a=i.startLevel;a===-1&&(i.config.testBandwidth&&this.levels.length>1?(a=0,this.bitrateTest=!0):a=i.nextAutoLevel),this.level=i.nextLoadLevel=a,this.loadedmetadata=!1}r>0&&t===-1&&(this.log("Override startPosition with lastCurrentTime @"+r.toFixed(3)),t=r),this.state=ue,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}else this._forceStartLoad=!0,this.state=$e},e.stopLoad=function(){this._forceStartLoad=!1,o.prototype.stopLoad.call(this)},e.doTick=function(){switch(this.state){case Bt:var t,r=this.levels,i=this.level,a=r==null||(t=r[i])==null?void 0:t.details;if(a&&(!a.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(a))break;this.state=ue;break}if(this.hls.nextLoadLevel!==this.level){this.state=ue;break}break;case qt:var s,l=self.performance.now(),d=this.retryDate;(!d||l>=d||(s=this.media)!=null&&s.seeking)&&(this.resetStartWhenNotLoaded(this.level),this.state=ue)}this.state===ue&&this.doTickIdle(),this.onTickEnd()},e.onTickEnd=function(){o.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},e.doTickIdle=function(){var t=this.hls,r=this.levelLastLoaded,i=this.levels,a=this.media,s=t.config,l=t.nextLoadLevel;if(r!==null&&(a||!this.startFragRequested&&s.startFragPrefetch)&&(!this.altAudio||!this.audioOnly)&&i!=null&&i[l]){var d=i[l],c=this.getMainFwdBufferInfo();if(c!==null){var u=this.getLevelDetails();if(u&&this._streamEnded(c,u)){var g={};return this.altAudio&&(g.type="video"),this.hls.trigger(A.BUFFER_EOS,g),void(this.state=hr)}t.loadLevel!==l&&t.manualLevel===-1&&this.log("Adapting to level "+l+" from level "+this.level),this.level=t.nextLoadLevel=l;var m=d.details;if(!m||this.state===Bt||m.live&&this.levelLastLoaded!==l)return this.level=l,void(this.state=Bt);var v=c.len,y=this.getMaxBufferLength(d.maxBitrate);if(!(v>=y)){this.backtrackFragment&&this.backtrackFragment.start>c.end&&(this.backtrackFragment=null);var k=this.backtrackFragment?this.backtrackFragment.start:c.end,b=this.getNextFragment(k,m);if(this.couldBacktrack&&!this.fragPrevious&&b&&b.sn!=="initSegment"&&this.fragmentTracker.getState(b)!==dr){var E,C=((E=this.backtrackFragment)!=null?E:b).sn-m.startSN,S=m.fragments[C-1];S&&b.cc===S.cc&&(b=S,this.fragmentTracker.removeFragment(S))}else this.backtrackFragment&&c.len&&(this.backtrackFragment=null);if(b&&this.isLoopLoading(b,k)){if(!b.gap){var D=this.audioOnly&&!this.altAudio?Ne:Je,I=(D===Je?this.videoBuffer:this.mediaBuffer)||this.media;I&&this.afterBufferFlushed(I,D,ve)}b=this.getNextFragmentLoopLoading(b,m,c,ve,y)}b&&(!b.initSegment||b.initSegment.data||this.bitrateTest||(b=b.initSegment),this.loadFragment(b,d,k))}}}},e.loadFragment=function(t,r,i){var a=this.fragmentTracker.getState(t);this.fragCurrent=t,a===lr||a===Yt?t.sn==="initSegment"?this._loadInitSegment(t,r):this.bitrateTest?(this.log("Fragment "+t.sn+" of level "+t.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(t,r)):(this.startFragRequested=!0,o.prototype.loadFragment.call(this,t,r,i)):this.clearTrackerIfNeeded(t)},e.getBufferedFrag=function(t){return this.fragmentTracker.getBufferedFrag(t,ve)},e.followingBufferedFrag=function(t){return t?this.getBufferedFrag(t.end+.5):null},e.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},e.nextLevelSwitch=function(){var t=this.levels,r=this.media;if(r!=null&&r.readyState){var i,a=this.getAppendedFrag(r.currentTime);a&&a.start>1&&this.flushMainBuffer(0,a.start-1);var s=this.getLevelDetails();if(s!=null&&s.live){var l=this.getMainFwdBufferInfo();if(!l||l.len<2*s.targetduration)return}if(!r.paused&&t){var d=t[this.hls.nextLoadLevel],c=this.fragLastKbps;i=c&&this.fragCurrent?this.fragCurrent.duration*d.maxBitrate/(1e3*c)+1:0}else i=0;var u=this.getBufferedFrag(r.currentTime+i);if(u){var g=this.followingBufferedFrag(u);if(g){this.abortCurrentFrag();var m=g.maxStartPTS?g.maxStartPTS:g.start,v=g.duration,y=Math.max(u.end,m+Math.min(Math.max(v-this.config.maxFragLookUpTolerance,.5*v),.75*v));this.flushMainBuffer(y,Number.POSITIVE_INFINITY)}}}},e.abortCurrentFrag=function(){var t=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,t&&(t.abortRequests(),this.fragmentTracker.removeFragment(t)),this.state){case Mi:case $t:case qt:case gt:case Gr:this.state=ue}this.nextLoadPosition=this.getLoadPosition()},e.flushMainBuffer=function(t,r){o.prototype.flushMainBuffer.call(this,t,r,this.altAudio?"video":null)},e.onMediaAttached=function(t,r){o.prototype.onMediaAttached.call(this,t,r);var i=r.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),i.addEventListener("playing",this.onvplaying),i.addEventListener("seeked",this.onvseeked),this.gapController=new ml(this.config,i,this.fragmentTracker,this.hls)},e.onMediaDetaching=function(){var t=this.media;t&&this.onvplaying&&this.onvseeked&&(t.removeEventListener("playing",this.onvplaying),t.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),o.prototype.onMediaDetaching.call(this)},e.onMediaPlaying=function(){this.tick()},e.onMediaSeeked=function(){var t=this.media,r=t?t.currentTime:null;Y(r)&&this.log("Media seeked to "+r.toFixed(3));var i=this.getMainFwdBufferInfo();i!==null&&i.len!==0?this.tick():this.warn('Main forward buffer length on "seeked" event '+(i?i.len:"empty")+")")},e.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(A.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=0,this.levels=this.fragPlaying=this.backtrackFragment=null,this.altAudio=this.audioOnly=!1},e.onManifestParsed=function(t,r){var i,a,s,l=!1,d=!1;r.levels.forEach(function(c){(i=c.audioCodec)&&(i.indexOf("mp4a.40.2")!==-1&&(l=!0),i.indexOf("mp4a.40.5")!==-1&&(d=!0))}),this.audioCodecSwitch=l&&d&&typeof((s=Ca())==null||(a=s.prototype)==null?void 0:a.changeType)!="function",this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=r.levels,this.startFragRequested=!1},e.onLevelLoading=function(t,r){var i=this.levels;if(i&&this.state===ue){var a=i[r.level];(!a.details||a.details.live&&this.levelLastLoaded!==r.level||this.waitForCdnTuneIn(a.details))&&(this.state=Bt)}},e.onLevelLoaded=function(t,r){var i,a=this.levels,s=r.level,l=r.details,d=l.totalduration;if(a){this.log("Level "+s+" loaded ["+l.startSN+","+l.endSN+"]"+(l.lastPartSn?"[part-"+l.lastPartSn+"-"+l.lastPartIndex+"]":"")+", cc ["+l.startCC+", "+l.endCC+"] duration:"+d);var c=a[s],u=this.fragCurrent;!u||this.state!==$t&&this.state!==qt||u.level===r.level&&u.urlId===c.urlId||!u.loader||this.abortCurrentFrag();var g=0;if(l.live||(i=c.details)!=null&&i.live){if(this.checkLiveUpdate(l),l.deltaUpdateFailed)return;g=this.alignPlaylists(l,c.details)}if(c.details=l,this.levelLastLoaded=s,this.hls.trigger(A.LEVEL_UPDATED,{details:l,level:s}),this.state===Bt){if(this.waitForCdnTuneIn(l))return;this.state=ue}this.startFragRequested?l.live&&this.synchronizeToLiveEdge(l):this.setStartPosition(l,g),this.tick()}else this.warn("Levels were reset while loading level "+s)},e._handleFragmentLoadProgress=function(t){var r,i=t.frag,a=t.part,s=t.payload,l=this.levels;if(l){var d=l[i.level],c=d.details;if(!c)return this.warn("Dropping fragment "+i.sn+" of level "+i.level+" after level details were reset"),void this.fragmentTracker.removeFragment(i);var u=d.videoCodec,g=c.PTSKnown||!c.live,m=(r=i.initSegment)==null?void 0:r.data,v=this._getAudioCodec(d),y=this.transmuxer=this.transmuxer||new $a(this.hls,ve,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),k=a?a.index:-1,b=k!==-1,E=new Ii(i.level,i.sn,i.stats.chunkCount,s.byteLength,k,b),C=this.initPTS[i.cc];y.push(s,m,v,u,i,a,c.totalduration,g,E,C)}else this.warn("Levels were reset while fragment load was in progress. Fragment "+i.sn+" of level "+i.level+" will not be buffered")},e.onAudioTrackSwitching=function(t,r){var i=this.altAudio;if(!r.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var a=this.fragCurrent;a&&(this.log("Switching to main audio track, cancel main fragment load"),a.abortRequests(),this.fragmentTracker.removeFragment(a)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();var s=this.hls;i&&(s.trigger(A.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),s.trigger(A.AUDIO_TRACK_SWITCHED,r)}},e.onAudioTrackSwitched=function(t,r){var i=r.id,a=!!this.hls.audioTracks[i].url;if(a){var s=this.videoBuffer;s&&this.mediaBuffer!==s&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=s)}this.altAudio=a,this.tick()},e.onBufferCreated=function(t,r){var i,a,s=r.tracks,l=!1;for(var d in s){var c=s[d];if(c.id==="main"){if(a=d,i=c,d==="video"){var u=s[d];u&&(this.videoBuffer=u.buffer)}}else l=!0}l&&i?(this.log("Alternate track found, use "+a+".buffered to schedule main fragment loading"),this.mediaBuffer=i.buffer):this.mediaBuffer=this.media},e.onFragBuffered=function(t,r){var i=r.frag,a=r.part;if(!i||i.type===ve){if(this.fragContextChanged(i))return this.warn("Fragment "+i.sn+(a?" p: "+a.index:"")+" of level "+i.level+" finished buffering, but was aborted. state: "+this.state),void(this.state===Gr&&(this.state=ue));var s=a?a.stats:i.stats;this.fragLastKbps=Math.round(8*s.total/(s.buffering.end-s.loading.first)),i.sn!=="initSegment"&&(this.fragPrevious=i),this.fragBufferedComplete(i,a)}},e.onError=function(t,r){var i;if(r.fatal)this.state=Qt;else switch(r.details){case O.FRAG_GAP:case O.FRAG_PARSING_ERROR:case O.FRAG_DECRYPT_ERROR:case O.FRAG_LOAD_ERROR:case O.FRAG_LOAD_TIMEOUT:case O.KEY_LOAD_ERROR:case O.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(ve,r);break;case O.LEVEL_LOAD_ERROR:case O.LEVEL_LOAD_TIMEOUT:case O.LEVEL_PARSING_ERROR:r.levelRetry||this.state!==Bt||((i=r.context)==null?void 0:i.type)!==Ft||(this.state=ue);break;case O.BUFFER_FULL_ERROR:if(!r.parent||r.parent!=="main")return;this.reduceLengthAndFlushBuffer(r)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case O.INTERNAL_EXCEPTION:this.recoverWorkerError(r)}},e.checkBuffer=function(){var t=this.media,r=this.gapController;if(t&&r&&t.readyState){if(this.loadedmetadata||!Ae.getBuffered(t).length){var i=this.state!==ue?this.fragCurrent:null;r.poll(this.lastCurrentTime,i)}this.lastCurrentTime=t.currentTime}},e.onFragLoadEmergencyAborted=function(){this.state=ue,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},e.onBufferFlushed=function(t,r){var i=r.type;if(i!==Ne||this.audioOnly&&!this.altAudio){var a=(i===Je?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(a,i,ve)}},e.onLevelsUpdated=function(t,r){this.levels=r.levels},e.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},e.seekToStartPos=function(){var t=this.media;if(t){var r=t.currentTime,i=this.startPosition;if(i>=0&&r<i){if(t.seeking)return void this.log("could not seek to "+i+", already seeking at "+r);var a=Ae.getBuffered(t),s=(a.length?a.start(0):0)-i;s>0&&(s<this.config.maxBufferHole||s<this.config.maxFragLookUpTolerance)&&(this.log("adjusting start position by "+s+" to match buffer start"),i+=s,this.startPosition=i),this.log("seek to target start position "+i+" from current time "+r),t.currentTime=i}}},e._getAudioCodec=function(t){var r=this.config.defaultAudioCodec||t.audioCodec;return this.audioCodecSwap&&r&&(this.log("Swapping audio codec"),r=r.indexOf("mp4a.40.5")!==-1?"mp4a.40.2":"mp4a.40.5"),r},e._loadBitrateTestFrag=function(t,r){var i=this;t.bitrateTest=!0,this._doFragLoad(t,r).then(function(a){var s=i.hls;if(a&&!i.fragContextChanged(t)){r.fragmentError=0,i.state=ue,i.startFragRequested=!1,i.bitrateTest=!1;var l=t.stats;l.parsing.start=l.parsing.end=l.buffering.start=l.buffering.end=self.performance.now(),s.trigger(A.FRAG_LOADED,a),t.bitrateTest=!1}})},e._handleTransmuxComplete=function(t){var r,i="main",a=this.hls,s=t.remuxResult,l=t.chunkMeta,d=this.getCurrentContext(l);if(d){var c=d.frag,u=d.part,g=d.level,m=s.video,v=s.text,y=s.id3,k=s.initSegment,b=g.details,E=this.altAudio?void 0:s.audio;if(this.fragContextChanged(c))this.fragmentTracker.removeFragment(c);else{if(this.state=gt,k){if(k!=null&&k.tracks){var C=c.initSegment||c;this._bufferInitSegment(g,k.tracks,C,l),a.trigger(A.FRAG_PARSING_INIT_SEGMENT,{frag:C,id:i,tracks:k.tracks})}var S=k.initPTS,D=k.timescale;Y(S)&&(this.initPTS[c.cc]={baseTime:S,timescale:D},a.trigger(A.INIT_PTS_FOUND,{frag:c,id:i,initPTS:S,timescale:D}))}if(m&&b&&c.sn!=="initSegment"){var I=b.fragments[c.sn-1-b.startSN],P=c.sn===b.startSN,U=!I||c.cc>I.cc;if(s.independent!==!1){var F=m.startPTS,N=m.endPTS,z=m.startDTS,K=m.endDTS;if(u)u.elementaryStreams[m.type]={startPTS:F,endPTS:N,startDTS:z,endDTS:K};else if(m.firstKeyFrame&&m.independent&&l.id===1&&!U&&(this.couldBacktrack=!0),m.dropped&&m.independent){var W=this.getMainFwdBufferInfo(),ne=(W?W.end:this.getLoadPosition())+this.config.maxBufferHole,X=m.firstKeyFramePTS?m.firstKeyFramePTS:F;if(!P&&ne<X-this.config.maxBufferHole&&!U)return void this.backtrack(c);U&&(c.gap=!0),c.setElementaryStreamInfo(m.type,c.start,N,c.start,K,!0)}c.setElementaryStreamInfo(m.type,F,N,z,K),this.backtrackFragment&&(this.backtrackFragment=c),this.bufferFragmentData(m,c,u,l,P||U)}else{if(!P&&!U)return void this.backtrack(c);c.gap=!0}}if(E){var ee=E.startPTS,re=E.endPTS,te=E.startDTS,ae=E.endDTS;u&&(u.elementaryStreams[Ne]={startPTS:ee,endPTS:re,startDTS:te,endDTS:ae}),c.setElementaryStreamInfo(Ne,ee,re,te,ae),this.bufferFragmentData(E,c,u,l)}if(b&&y!=null&&(r=y.samples)!=null&&r.length){var ce={id:i,frag:c,details:b,samples:y.samples};a.trigger(A.FRAG_PARSING_METADATA,ce)}if(b&&v){var fe={id:i,frag:c,details:b,samples:v.samples};a.trigger(A.FRAG_PARSING_USERDATA,fe)}}}else this.resetWhenMissingContext(l)},e._bufferInitSegment=function(t,r,i,a){var s=this;if(this.state===gt){this.audioOnly=!!r.audio&&!r.video,this.altAudio&&!this.audioOnly&&delete r.audio;var l=r.audio,d=r.video,c=r.audiovideo;if(l){var u=t.audioCodec,g=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(u&&(u=u.indexOf("mp4a.40.5")!==-1?"mp4a.40.2":"mp4a.40.5"),l.metadata.channelCount!==1&&g.indexOf("firefox")===-1&&(u="mp4a.40.5")),g.indexOf("android")!==-1&&l.container!=="audio/mpeg"&&(u="mp4a.40.2",this.log("Android: force audio codec to "+u)),t.audioCodec&&t.audioCodec!==u&&this.log('Swapping manifest audio codec "'+t.audioCodec+'" for "'+u+'"'),l.levelCodec=u,l.id="main",this.log("Init audio buffer, container:"+l.container+", codecs[selected/level/parsed]=["+(u||"")+"/"+(t.audioCodec||"")+"/"+l.codec+"]")}d&&(d.levelCodec=t.videoCodec,d.id="main",this.log("Init video buffer, container:"+d.container+", codecs[level/parsed]=["+(t.videoCodec||"")+"/"+d.codec+"]")),c&&this.log("Init audiovideo buffer, container:"+c.container+", codecs[level/parsed]=["+(t.attrs.CODECS||"")+"/"+c.codec+"]"),this.hls.trigger(A.BUFFER_CODECS,r),Object.keys(r).forEach(function(m){var v=r[m].initSegment;v!=null&&v.byteLength&&s.hls.trigger(A.BUFFER_APPENDING,{type:m,data:v,frag:i,part:null,chunkMeta:a,parent:i.type})}),this.tick()}},e.getMainFwdBufferInfo=function(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,ve)},e.backtrack=function(t){this.couldBacktrack=!0,this.backtrackFragment=t,this.resetTransmuxer(),this.flushBufferGap(t),this.fragmentTracker.removeFragment(t),this.fragPrevious=null,this.nextLoadPosition=t.start,this.state=ue},e.checkFragmentChanged=function(){var t=this.media,r=null;if(t&&t.readyState>1&&t.seeking===!1){var i=t.currentTime;if(Ae.isBuffered(t,i)?r=this.getAppendedFrag(i):Ae.isBuffered(t,i+.1)&&(r=this.getAppendedFrag(i+.1)),r){this.backtrackFragment=null;var a=this.fragPlaying,s=r.level;a&&r.sn===a.sn&&a.level===s&&r.urlId===a.urlId||(this.fragPlaying=r,this.hls.trigger(A.FRAG_CHANGED,{frag:r}),a&&a.level===s||this.hls.trigger(A.LEVEL_SWITCHED,{level:s}))}}},L(n,[{key:"nextLevel",get:function(){var t=this.nextBufferedFrag;return t?t.level:-1}},{key:"currentFrag",get:function(){var t=this.media;return t?this.fragPlaying||this.getAppendedFrag(t.currentTime):null}},{key:"currentProgramDateTime",get:function(){var t=this.media;if(t){var r=t.currentTime,i=this.currentFrag;if(i&&Y(r)&&Y(i.programDateTime)){var a=i.programDateTime+1e3*(r-i.start);return new Date(a)}}return null}},{key:"currentLevel",get:function(){var t=this.currentFrag;return t?t.level:-1}},{key:"nextBufferedFrag",get:function(){var t=this.currentFrag;return t?this.followingBufferedFrag(t):null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}]),n}(Fi),Xt=function(){function o(e,t,r){t===void 0&&(t=0),r===void 0&&(r=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=r}var n=o.prototype;return n.sample=function(e,t){var r=Math.pow(this.alpha_,e);this.estimate_=t*(1-r)+r*this.estimate_,this.totalWeight_+=e},n.getTotalWeight=function(){return this.totalWeight_},n.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_},o}(),bl=function(){function o(e,t,r,i){i===void 0&&(i=100),this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Xt(e),this.fast_=new Xt(t),this.defaultTTFB_=i,this.ttfb_=new Xt(e)}var n=o.prototype;return n.update=function(e,t){var r=this.slow_,i=this.fast_,a=this.ttfb_;r.halfLife!==e&&(this.slow_=new Xt(e,r.getEstimate(),r.getTotalWeight())),i.halfLife!==t&&(this.fast_=new Xt(t,i.getEstimate(),i.getTotalWeight())),a.halfLife!==e&&(this.ttfb_=new Xt(e,a.getEstimate(),a.getTotalWeight()))},n.sample=function(e,t){var r=(e=Math.max(e,this.minDelayMs_))/1e3,i=8*t/r;this.fast_.sample(r,i),this.slow_.sample(r,i)},n.sampleTTFB=function(e){var t=e/1e3,r=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(r,Math.max(e,5))},n.canEstimate=function(){return this.fast_.getTotalWeight()>=this.minWeight_},n.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},n.getEstimateTTFB=function(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_},n.destroy=function(){},o}(),yl=function(){function o(e){this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=-1,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=e;var t=e.config;this.bwEstimator=new bl(t.abrEwmaSlowVoD,t.abrEwmaFastVoD,t.abrEwmaDefaultEstimate),this.registerListeners()}var n=o.prototype;return n.registerListeners=function(){var e=this.hls;e.on(A.FRAG_LOADING,this.onFragLoading,this),e.on(A.FRAG_LOADED,this.onFragLoaded,this),e.on(A.FRAG_BUFFERED,this.onFragBuffered,this),e.on(A.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(A.LEVEL_LOADED,this.onLevelLoaded,this)},n.unregisterListeners=function(){var e=this.hls;e.off(A.FRAG_LOADING,this.onFragLoading,this),e.off(A.FRAG_LOADED,this.onFragLoaded,this),e.off(A.FRAG_BUFFERED,this.onFragBuffered,this),e.off(A.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(A.LEVEL_LOADED,this.onLevelLoaded,this)},n.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null},n.onFragLoading=function(e,t){var r,i=t.frag;this.ignoreFragment(i)||(this.fragCurrent=i,this.partCurrent=(r=t.part)!=null?r:null,this.clearTimer(),this.timer=self.setInterval(this.onCheck,100))},n.onLevelSwitching=function(e,t){this.clearTimer()},n.getTimeToLoadFrag=function(e,t,r,i){return e+r/t+(i?this.lastLevelLoadSec:0)},n.onLevelLoaded=function(e,t){var r=this.hls.config,i=t.stats,a=i.total,s=i.bwEstimate;Y(a)&&Y(s)&&(this.lastLevelLoadSec=8*a/s),t.details.live?this.bwEstimator.update(r.abrEwmaSlowLive,r.abrEwmaFastLive):this.bwEstimator.update(r.abrEwmaSlowVoD,r.abrEwmaFastVoD)},n._abandonRulesCheck=function(){var e=this.fragCurrent,t=this.partCurrent,r=this.hls,i=r.autoLevelEnabled,a=r.media;if(e&&a){var s=performance.now(),l=t?t.stats:e.stats,d=t?t.duration:e.duration,c=s-l.loading.start;if(l.aborted||l.loaded&&l.loaded===l.total||e.level===0)return this.clearTimer(),void(this._nextAutoLevel=-1);if(i&&!a.paused&&a.playbackRate&&a.readyState){var u=r.mainForwardBufferInfo;if(u!==null){var g=this.bwEstimator.getEstimateTTFB(),m=Math.abs(a.playbackRate);if(!(c<=Math.max(g,d/(2*m)*1e3))){var v=u.len/m;if(!(v>=2*d/m)){var y=l.loading.first?l.loading.first-l.loading.start:-1,k=l.loaded&&y>-1,b=this.bwEstimator.getEstimate(),E=r.levels,C=r.minAutoLevel,S=E[e.level],D=l.total||Math.max(l.loaded,Math.round(d*S.maxBitrate/8)),I=c-y;I<1&&k&&(I=Math.min(c,8*l.loaded/b));var P=k?1e3*l.loaded/I:0,U=P?(D-l.loaded)/P:8*D/b+g/1e3;if(!(U<=v)){var F,N=P?8*P:b,z=Number.POSITIVE_INFINITY;for(F=e.level-1;F>C;F--){var K=E[F].maxBitrate;if((z=this.getTimeToLoadFrag(g/1e3,N,d*K,!E[F].details))<v)break}z>=U||z>10*d||(r.nextLoadLevel=F,k?this.bwEstimator.sample(c-Math.min(g,y),l.loaded):this.bwEstimator.sampleTTFB(c),this.clearTimer(),R.warn("[abr] Fragment "+e.sn+(t?" part "+t.index:"")+" of level "+e.level+` is loading too slowly;
      Time to underbuffer: `+v.toFixed(3)+` s
      Estimated load time for current fragment: `+U.toFixed(3)+` s
      Estimated load time for down switch fragment: `+z.toFixed(3)+` s
      TTFB estimate: `+y+`
      Current BW estimate: `+(Y(b)?(b/1024).toFixed(3):"Unknown")+` Kb/s
      New BW estimate: `+(this.bwEstimator.getEstimate()/1024).toFixed(3)+` Kb/s
      Aborting and switching to level `+F),e.loader&&(this.fragCurrent=this.partCurrent=null,e.abortRequests()),r.trigger(A.FRAG_LOAD_EMERGENCY_ABORTED,{frag:e,part:t,stats:l}))}}}}}}},n.onFragLoaded=function(e,t){var r=t.frag,i=t.part,a=i?i.stats:r.stats;if(r.type===ve&&this.bwEstimator.sampleTTFB(a.loading.first-a.loading.start),!this.ignoreFragment(r)){if(this.clearTimer(),this.lastLoadedFragLevel=r.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var s=i?i.duration:r.duration,l=this.hls.levels[r.level],d=(l.loaded?l.loaded.bytes:0)+a.loaded,c=(l.loaded?l.loaded.duration:0)+s;l.loaded={bytes:d,duration:c},l.realBitrate=Math.round(8*d/c)}if(r.bitrateTest){var u={stats:a,frag:r,part:i,id:r.type};this.onFragBuffered(A.FRAG_BUFFERED,u),r.bitrateTest=!1}}},n.onFragBuffered=function(e,t){var r=t.frag,i=t.part,a=i!=null&&i.stats.loaded?i.stats:r.stats;if(!a.aborted&&!this.ignoreFragment(r)){var s=a.parsing.end-a.loading.start-Math.min(a.loading.first-a.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(s,a.loaded),a.bwEstimate=this.bwEstimator.getEstimate(),r.bitrateTest?this.bitrateTestDelay=s/1e3:this.bitrateTestDelay=0}},n.ignoreFragment=function(e){return e.type!==ve||e.sn==="initSegment"},n.clearTimer=function(){self.clearInterval(this.timer)},n.getNextABRAutoLevel=function(){var e=this.fragCurrent,t=this.partCurrent,r=this.hls,i=r.maxAutoLevel,a=r.config,s=r.minAutoLevel,l=r.media,d=t?t.duration:e?e.duration:0,c=l&&l.playbackRate!==0?Math.abs(l.playbackRate):1,u=this.bwEstimator?this.bwEstimator.getEstimate():a.abrEwmaDefaultEstimate,g=r.mainForwardBufferInfo,m=(g?g.len:0)/c,v=this.findBestLevel(u,s,i,m,a.abrBandWidthFactor,a.abrBandWidthUpFactor);if(v>=0)return v;R.trace("[abr] "+(m?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var y=d?Math.min(d,a.maxStarvationDelay):a.maxStarvationDelay,k=a.abrBandWidthFactor,b=a.abrBandWidthUpFactor;if(!m){var E=this.bitrateTestDelay;E&&(y=(d?Math.min(d,a.maxLoadingDelay):a.maxLoadingDelay)-E,R.trace("[abr] bitrate test took "+Math.round(1e3*E)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*y)+" ms"),k=b=1)}return v=this.findBestLevel(u,s,i,m+y,k,b),Math.max(v,0)},n.findBestLevel=function(e,t,r,i,a,s){for(var l,d=this.fragCurrent,c=this.partCurrent,u=this.lastLoadedFragLevel,g=this.hls.levels,m=g[u],v=!(m==null||(l=m.details)==null||!l.live),y=m==null?void 0:m.codecSet,k=c?c.duration:d?d.duration:0,b=this.bwEstimator.getEstimateTTFB()/1e3,E=t,C=-1,S=r;S>=t;S--){var D=g[S];if(!D||y&&D.codecSet!==y)D&&(E=Math.min(S,E),C=Math.max(S,C));else{C!==-1&&R.trace("[abr] Skipped level(s) "+E+"-"+C+' with CODECS:"'+g[C].attrs.CODECS+'"; not compatible with "'+m.attrs.CODECS+'"');var I=D.details,P=(c?I==null?void 0:I.partTarget:I==null?void 0:I.averagetargetduration)||k,U=void 0;U=S<=u?a*e:s*e;var F=g[S].maxBitrate,N=this.getTimeToLoadFrag(b,U,F*P,I===void 0);if(R.trace("[abr] level:"+S+" adjustedbw-bitrate:"+Math.round(U-F)+" avgDuration:"+P.toFixed(1)+" maxFetchDuration:"+i.toFixed(1)+" fetchDuration:"+N.toFixed(1)),U>F&&(N===0||!Y(N)||v&&!this.bitrateTestDelay||N<i))return S}}return-1},L(o,[{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this.bwEstimator;if(e!==-1&&!t.canEstimate())return e;var r=this.getNextABRAutoLevel();if(e!==-1){var i=this.hls.levels;if(i.length>Math.max(e,r)&&i[e].loadError<=i[r].loadError)return e}return e!==-1&&(r=Math.min(e,r)),r},set:function(e){this._nextAutoLevel=e}}]),o}(),qa=function(){function o(){this.chunks=[],this.dataLength=0}var n=o.prototype;return n.push=function(e){this.chunks.push(e),this.dataLength+=e.length},n.flush=function(){var e,t=this.chunks,r=this.dataLength;return t.length?(e=t.length===1?t[0]:function(i,a){for(var s=new Uint8Array(a),l=0,d=0;d<i.length;d++){var c=i[d];s.set(c,l),l+=c.length}return s}(t,r),this.reset(),e):new Uint8Array(0)},n.reset=function(){this.chunks.length=0,this.dataLength=0},o}(),wl=function(o){function n(t,r,i){var a;return(a=o.call(this,t,r,i,"[audio-stream-controller]",st)||this).videoBuffer=null,a.videoTrackCC=-1,a.waitingVideoCC=-1,a.bufferedTrack=null,a.switchingTrack=null,a.trackId=-1,a.waitingData=null,a.mainDetails=null,a.bufferFlushed=!1,a.cachedTrackLoadedData=null,a._registerListeners(),a}j(n,o);var e=n.prototype;return e.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null},e._registerListeners=function(){var t=this.hls;t.on(A.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(A.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(A.MANIFEST_LOADING,this.onManifestLoading,this),t.on(A.LEVEL_LOADED,this.onLevelLoaded,this),t.on(A.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),t.on(A.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(A.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.on(A.ERROR,this.onError,this),t.on(A.BUFFER_RESET,this.onBufferReset,this),t.on(A.BUFFER_CREATED,this.onBufferCreated,this),t.on(A.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(A.INIT_PTS_FOUND,this.onInitPtsFound,this),t.on(A.FRAG_BUFFERED,this.onFragBuffered,this)},e._unregisterListeners=function(){var t=this.hls;t.off(A.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(A.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(A.MANIFEST_LOADING,this.onManifestLoading,this),t.off(A.LEVEL_LOADED,this.onLevelLoaded,this),t.off(A.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),t.off(A.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(A.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.off(A.ERROR,this.onError,this),t.off(A.BUFFER_RESET,this.onBufferReset,this),t.off(A.BUFFER_CREATED,this.onBufferCreated,this),t.off(A.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(A.INIT_PTS_FOUND,this.onInitPtsFound,this),t.off(A.FRAG_BUFFERED,this.onFragBuffered,this)},e.onInitPtsFound=function(t,r){var i=r.frag,a=r.id,s=r.initPTS,l=r.timescale;if(a==="main"){var d=i.cc;this.initPTS[i.cc]={baseTime:s,timescale:l},this.log("InitPTS for cc: "+d+" found from main: "+s),this.videoTrackCC=d,this.state===ur&&this.tick()}},e.startLoad=function(t){if(!this.levels)return this.startPosition=t,void(this.state=$e);var r=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),r>0&&t===-1?(this.log("Override startPosition with lastCurrentTime @"+r.toFixed(3)),t=r,this.state=ue):(this.loadedmetadata=!1,this.state=cr),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()},e.doTick=function(){switch(this.state){case ue:this.doTickIdle();break;case cr:var t,r=this.levels,i=this.trackId,a=r==null||(t=r[i])==null?void 0:t.details;if(a){if(this.waitForCdnTuneIn(a))break;this.state=ur}break;case qt:var s,l=performance.now(),d=this.retryDate;(!d||l>=d||(s=this.media)!=null&&s.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.trackId),this.state=ue);break;case ur:var c=this.waitingData;if(c){var u=c.frag,g=c.part,m=c.cache,v=c.complete;if(this.initPTS[u.cc]!==void 0){this.waitingData=null,this.waitingVideoCC=-1,this.state=$t;var y={frag:u,part:g,payload:m.flush(),networkDetails:null};this._handleFragmentLoadProgress(y),v&&o.prototype._handleFragmentLoadComplete.call(this,y)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log("Waiting fragment cc ("+u.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var k=this.getLoadPosition(),b=Ae.bufferInfo(this.mediaBuffer,k,this.config.maxBufferHole);Ci(b.end,this.config.maxFragLookUpTolerance,u)<0&&(this.log("Waiting fragment cc ("+u.cc+") @ "+u.start+" cancelled because another fragment at "+b.end+" is needed"),this.clearWaitingFragment())}}else this.state=ue}this.onTickEnd()},e.clearWaitingFragment=function(){var t=this.waitingData;t&&(this.fragmentTracker.removeFragment(t.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=ue)},e.resetLoadingState=function(){this.clearWaitingFragment(),o.prototype.resetLoadingState.call(this)},e.onTickEnd=function(){var t=this.media;t!=null&&t.readyState&&(this.lastCurrentTime=t.currentTime)},e.doTickIdle=function(){var t=this.hls,r=this.levels,i=this.media,a=this.trackId,s=t.config;if(r!=null&&r[a]&&(i||!this.startFragRequested&&s.startFragPrefetch)){var l=r[a],d=l.details;if(!d||d.live&&this.levelLastLoaded!==a||this.waitForCdnTuneIn(d))this.state=cr;else{var c=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&c&&(this.bufferFlushed=!1,this.afterBufferFlushed(c,Ne,st));var u=this.getFwdBufferInfo(c,st);if(u!==null){var g=this.bufferedTrack,m=this.switchingTrack;if(!m&&this._streamEnded(u,d))return t.trigger(A.BUFFER_EOS,{type:"audio"}),void(this.state=hr);var v=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,ve),y=u.len,k=this.getMaxBufferLength(v==null?void 0:v.len);if(!(y>=k)||m){var b=d.fragments[0].start,E=u.end;if(m&&i){var C=this.getLoadPosition();g&&m.attrs!==g.attrs&&(E=C),d.PTSKnown&&C<b&&(u.end>b||u.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),i.currentTime=b+.05)}var S=this.getNextFragment(E,d),D=!1;if(S&&this.isLoopLoading(S,E)&&(D=!!S.gap,S=this.getNextFragmentLoopLoading(S,d,u,ve,k)),S){var I=v&&S.start>v.end+d.targetduration;if(I||(v==null||!v.len)&&u.len){var P=this.getAppendedFrag(S.start,ve);if(P===null||(D||(D=!!P.gap||!!I&&v.len===0),I&&!D||D&&u.nextStart&&u.nextStart<P.end))return}this.loadFragment(S,l,E)}else this.bufferFlushed=!0}}}}},e.getMaxBufferLength=function(t){var r=o.prototype.getMaxBufferLength.call(this);return t?Math.min(Math.max(r,t),this.config.maxMaxBufferLength):r},e.onMediaDetaching=function(){this.videoBuffer=null,o.prototype.onMediaDetaching.call(this)},e.onAudioTracksUpdated=function(t,r){var i=r.audioTracks;this.resetTransmuxer(),this.levels=i.map(function(a){return new or(a)})},e.onAudioTrackSwitching=function(t,r){var i=!!r.url;this.trackId=r.id;var a=this.fragCurrent;a&&(a.abortRequests(),this.removeUnbufferedFrags(a.start)),this.resetLoadingState(),i?this.setInterval(100):this.resetTransmuxer(),i?(this.switchingTrack=r,this.state=ue):(this.switchingTrack=null,this.bufferedTrack=r,this.state=$e),this.tick()},e.onManifestLoading=function(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1},e.onLevelLoaded=function(t,r){this.mainDetails=r.details,this.cachedTrackLoadedData!==null&&(this.hls.trigger(A.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)},e.onAudioTrackLoaded=function(t,r){var i;if(this.mainDetails!=null){var a=this.levels,s=r.details,l=r.id;if(a){this.log("Track "+l+" loaded ["+s.startSN+","+s.endSN+"]"+(s.lastPartSn?"[part-"+s.lastPartSn+"-"+s.lastPartIndex+"]":"")+",duration:"+s.totalduration);var d=a[l],c=0;if(s.live||(i=d.details)!=null&&i.live){this.checkLiveUpdate(s);var u=this.mainDetails;if(s.deltaUpdateFailed||!u)return;!d.details&&s.hasProgramDateTime&&u.hasProgramDateTime?(Sa(s,u),c=s.fragments[0].start):c=this.alignPlaylists(s,d.details)}d.details=s,this.levelLastLoaded=l,this.startFragRequested||!this.mainDetails&&s.live||this.setStartPosition(d.details,c),this.state!==cr||this.waitForCdnTuneIn(s)||(this.state=ue),this.tick()}else this.warn("Audio tracks were reset while loading level "+l)}else this.cachedTrackLoadedData=r},e._handleFragmentLoadProgress=function(t){var r,i=t.frag,a=t.part,s=t.payload,l=this.config,d=this.trackId,c=this.levels;if(c){var u=c[d];if(u){var g=u.details;if(!g)return this.warn("Audio track details undefined on fragment load progress"),void this.removeUnbufferedFrags(i.start);var m=l.defaultAudioCodec||u.audioCodec||"mp4a.40.2",v=this.transmuxer;v||(v=this.transmuxer=new $a(this.hls,st,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));var y=this.initPTS[i.cc],k=(r=i.initSegment)==null?void 0:r.data;if(y!==void 0){var b=a?a.index:-1,E=b!==-1,C=new Ii(i.level,i.sn,i.stats.chunkCount,s.byteLength,b,E);v.push(s,k,m,"",i,a,g.totalduration,!1,C,y)}else this.log("Unknown video PTS for cc "+i.cc+", waiting for video PTS before demuxing audio frag "+i.sn+" of ["+g.startSN+" ,"+g.endSN+"],track "+d),(this.waitingData=this.waitingData||{frag:i,part:a,cache:new qa,complete:!1}).cache.push(new Uint8Array(s)),this.waitingVideoCC=this.videoTrackCC,this.state=ur}else this.warn("Audio track is undefined on fragment load progress")}else this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+i.sn+" of level "+i.level+" will not be buffered")},e._handleFragmentLoadComplete=function(t){this.waitingData?this.waitingData.complete=!0:o.prototype._handleFragmentLoadComplete.call(this,t)},e.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},e.onBufferCreated=function(t,r){var i=r.tracks.audio;i&&(this.mediaBuffer=i.buffer||null),r.tracks.video&&(this.videoBuffer=r.tracks.video.buffer||null)},e.onFragBuffered=function(t,r){var i=r.frag,a=r.part;if(i.type===st)if(this.fragContextChanged(i))this.warn("Fragment "+i.sn+(a?" p: "+a.index:"")+" of level "+i.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+(this.switchingTrack?this.switchingTrack.name:"false"));else{if(i.sn!=="initSegment"){this.fragPrevious=i;var s=this.switchingTrack;s&&(this.bufferedTrack=s,this.switchingTrack=null,this.hls.trigger(A.AUDIO_TRACK_SWITCHED,T({},s)))}this.fragBufferedComplete(i,a)}else if(!this.loadedmetadata&&i.type===ve){var l=this.videoBuffer||this.media;l&&Ae.getBuffered(l).length&&(this.loadedmetadata=!0)}},e.onError=function(t,r){var i;if(r.fatal)this.state=Qt;else switch(r.details){case O.FRAG_GAP:case O.FRAG_PARSING_ERROR:case O.FRAG_DECRYPT_ERROR:case O.FRAG_LOAD_ERROR:case O.FRAG_LOAD_TIMEOUT:case O.KEY_LOAD_ERROR:case O.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(st,r);break;case O.AUDIO_TRACK_LOAD_ERROR:case O.AUDIO_TRACK_LOAD_TIMEOUT:case O.LEVEL_PARSING_ERROR:r.levelRetry||this.state!==cr||((i=r.context)==null?void 0:i.type)!==ot||(this.state=ue);break;case O.BUFFER_FULL_ERROR:if(!r.parent||r.parent!=="audio")return;this.reduceLengthAndFlushBuffer(r)&&(this.bufferedTrack=null,o.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio"));break;case O.INTERNAL_EXCEPTION:this.recoverWorkerError(r)}},e.onBufferFlushed=function(t,r){r.type===Ne&&(this.bufferFlushed=!0,this.state===hr&&(this.state=ue))},e._handleTransmuxComplete=function(t){var r,i="audio",a=this.hls,s=t.remuxResult,l=t.chunkMeta,d=this.getCurrentContext(l);if(d){var c=d.frag,u=d.part,g=d.level.details,m=s.audio,v=s.text,y=s.id3,k=s.initSegment;if(!this.fragContextChanged(c)&&g){if(this.state=gt,this.switchingTrack&&m&&this.completeAudioSwitch(this.switchingTrack),k!=null&&k.tracks){var b=c.initSegment||c;this._bufferInitSegment(k.tracks,b,l),a.trigger(A.FRAG_PARSING_INIT_SEGMENT,{frag:b,id:i,tracks:k.tracks})}if(m){var E=m.startPTS,C=m.endPTS,S=m.startDTS,D=m.endDTS;u&&(u.elementaryStreams[Ne]={startPTS:E,endPTS:C,startDTS:S,endDTS:D}),c.setElementaryStreamInfo(Ne,E,C,S,D),this.bufferFragmentData(m,c,u,l)}if(y!=null&&(r=y.samples)!=null&&r.length){var I=M({id:i,frag:c,details:g},y);a.trigger(A.FRAG_PARSING_METADATA,I)}if(v){var P=M({id:i,frag:c,details:g},v);a.trigger(A.FRAG_PARSING_USERDATA,P)}}else this.fragmentTracker.removeFragment(c)}else this.resetWhenMissingContext(l)},e._bufferInitSegment=function(t,r,i){if(this.state===gt){t.video&&delete t.video;var a=t.audio;if(a){a.levelCodec=a.codec,a.id="audio",this.log("Init audio buffer, container:"+a.container+", codecs[parsed]=["+a.codec+"]"),this.hls.trigger(A.BUFFER_CODECS,t);var s=a.initSegment;if(s!=null&&s.byteLength){var l={type:"audio",frag:r,part:null,chunkMeta:i,parent:r.type,data:s};this.hls.trigger(A.BUFFER_APPENDING,l)}this.tick()}}},e.loadFragment=function(t,r,i){var a,s=this.fragmentTracker.getState(t);this.fragCurrent=t,this.switchingTrack||s===lr||s===Yt?t.sn==="initSegment"?this._loadInitSegment(t,r):(a=r.details)!=null&&a.live&&!this.initPTS[t.cc]?(this.log("Waiting for video PTS in continuity counter "+t.cc+" of live stream before loading audio fragment "+t.sn+" of level "+this.trackId),this.state=ur):(this.startFragRequested=!0,o.prototype.loadFragment.call(this,t,r,i)):this.clearTrackerIfNeeded(t)},e.completeAudioSwitch=function(t){var r=this.hls,i=this.media,a=this.bufferedTrack,s=a==null?void 0:a.attrs,l=t.attrs;i&&s&&(s.CHANNELS!==l.CHANNELS||s.NAME!==l.NAME||s.LANGUAGE!==l.LANGUAGE)&&(this.log("Switching audio track : flushing all audio"),o.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.bufferedTrack=t,this.switchingTrack=null,r.trigger(A.AUDIO_TRACK_SWITCHED,T({},t))},n}(Fi),El=function(o){function n(t){var r;return(r=o.call(this,t,"[audio-track-controller]")||this).tracks=[],r.groupId=null,r.tracksInGroup=[],r.trackId=-1,r.currentTrack=null,r.selectDefaultTrack=!0,r.registerListeners(),r}j(n,o);var e=n.prototype;return e.registerListeners=function(){var t=this.hls;t.on(A.MANIFEST_LOADING,this.onManifestLoading,this),t.on(A.MANIFEST_PARSED,this.onManifestParsed,this),t.on(A.LEVEL_LOADING,this.onLevelLoading,this),t.on(A.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(A.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.on(A.ERROR,this.onError,this)},e.unregisterListeners=function(){var t=this.hls;t.off(A.MANIFEST_LOADING,this.onManifestLoading,this),t.off(A.MANIFEST_PARSED,this.onManifestParsed,this),t.off(A.LEVEL_LOADING,this.onLevelLoading,this),t.off(A.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(A.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.off(A.ERROR,this.onError,this)},e.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,o.prototype.destroy.call(this)},e.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0},e.onManifestParsed=function(t,r){this.tracks=r.audioTracks||[]},e.onAudioTrackLoaded=function(t,r){var i=r.id,a=r.groupId,s=r.details,l=this.tracksInGroup[i];if(l&&l.groupId===a){var d=l.details;l.details=r.details,this.log("audio-track "+i+' "'+l.name+'" lang:'+l.lang+" group:"+a+" loaded ["+s.startSN+"-"+s.endSN+"]"),i===this.trackId&&this.playlistLoaded(i,r,d)}else this.warn("Track with id:"+i+" and group:"+a+" not found in active group "+l.groupId)},e.onLevelLoading=function(t,r){this.switchLevel(r.level)},e.onLevelSwitching=function(t,r){this.switchLevel(r.level)},e.switchLevel=function(t){var r=this.hls.levels[t];if(r!=null&&r.audioGroupIds){var i=r.audioGroupIds[r.urlId];if(this.groupId!==i){this.groupId=i||null;var a=this.tracks.filter(function(l){return!i||l.groupId===i});this.selectDefaultTrack&&!a.some(function(l){return l.default})&&(this.selectDefaultTrack=!1),this.tracksInGroup=a;var s={audioTracks:a};this.log("Updating audio tracks, "+a.length+" track(s) found in group:"+i),this.hls.trigger(A.AUDIO_TRACKS_UPDATED,s),this.selectInitialTrack()}else this.shouldReloadPlaylist(this.currentTrack)&&this.setAudioTrack(this.trackId)}},e.onError=function(t,r){!r.fatal&&r.context&&r.context.type===ot&&r.context.id===this.trackId&&r.context.groupId===this.groupId&&(this.requestScheduled=-1,this.checkRetry(r))},e.setAudioTrack=function(t){var r=this.tracksInGroup;if(t<0||t>=r.length)this.warn("Invalid id passed to audio-track controller");else{this.clearTimer();var i=this.currentTrack;r[this.trackId];var a=r[t],s=a.groupId,l=a.name;if(this.log("Switching to audio-track "+t+' "'+l+'" lang:'+a.lang+" group:"+s),this.trackId=t,this.currentTrack=a,this.selectDefaultTrack=!1,this.hls.trigger(A.AUDIO_TRACK_SWITCHING,T({},a)),!a.details||a.details.live){var d=this.switchParams(a.url,i==null?void 0:i.details);this.loadPlaylist(d)}}},e.selectInitialTrack=function(){var t=this.tracksInGroup,r=this.findTrackId(this.currentTrack)|this.findTrackId(null);if(r!==-1)this.setAudioTrack(r);else{var i=new Error("No track found for running audio group-ID: "+this.groupId+" track count: "+t.length);this.warn(i.message),this.hls.trigger(A.ERROR,{type:J.MEDIA_ERROR,details:O.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:i})}},e.findTrackId=function(t){for(var r=this.tracksInGroup,i=0;i<r.length;i++){var a=r[i];if((!this.selectDefaultTrack||a.default)&&(!t||t.attrs["STABLE-RENDITION-ID"]!==void 0&&t.attrs["STABLE-RENDITION-ID"]===a.attrs["STABLE-RENDITION-ID"]||t.name===a.name&&t.lang===a.lang))return a.id}return-1},e.loadPlaylist=function(t){o.prototype.loadPlaylist.call(this);var r=this.tracksInGroup[this.trackId];if(this.shouldLoadPlaylist(r)){var i=r.id,a=r.groupId,s=r.url;if(t)try{s=t.addDirectives(s)}catch(l){this.warn("Could not construct new URL with HLS Delivery Directives: "+l)}this.log("loading audio-track playlist "+i+' "'+r.name+'" lang:'+r.lang+" group:"+a),this.clearTimer(),this.hls.trigger(A.AUDIO_TRACK_LOADING,{url:s,id:i,groupId:a,deliveryDirectives:t||null})}},L(n,[{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(t){this.selectDefaultTrack=!1,this.setAudioTrack(t)}}]),n}(Ri);function Qa(o,n){if(o.length!==n.length)return!1;for(var e=0;e<o.length;e++)if(!Al(o[e].attrs,n[e].attrs))return!1;return!0}function Al(o,n){var e=o["STABLE-RENDITION-ID"];return e?e===n["STABLE-RENDITION-ID"]:!["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED"].some(function(t){return o[t]!==n[t]})}var xl=function(o){function n(t,r,i){var a;return(a=o.call(this,t,r,i,"[subtitle-stream-controller]",At)||this).levels=[],a.currentTrackId=-1,a.tracksBuffered=[],a.mainDetails=null,a._registerListeners(),a}j(n,o);var e=n.prototype;return e.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},e._registerListeners=function(){var t=this.hls;t.on(A.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(A.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(A.MANIFEST_LOADING,this.onManifestLoading,this),t.on(A.LEVEL_LOADED,this.onLevelLoaded,this),t.on(A.ERROR,this.onError,this),t.on(A.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.on(A.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.on(A.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.on(A.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),t.on(A.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(A.FRAG_BUFFERED,this.onFragBuffered,this)},e._unregisterListeners=function(){var t=this.hls;t.off(A.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(A.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(A.MANIFEST_LOADING,this.onManifestLoading,this),t.off(A.LEVEL_LOADED,this.onLevelLoaded,this),t.off(A.ERROR,this.onError,this),t.off(A.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.off(A.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.off(A.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.off(A.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),t.off(A.BUFFER_FLUSHING,this.onBufferFlushing,this),t.off(A.FRAG_BUFFERED,this.onFragBuffered,this)},e.startLoad=function(t){this.stopLoad(),this.state=ue,this.setInterval(500),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()},e.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()},e.onMediaDetaching=function(){this.tracksBuffered=[],o.prototype.onMediaDetaching.call(this)},e.onLevelLoaded=function(t,r){this.mainDetails=r.details},e.onSubtitleFragProcessed=function(t,r){var i=r.frag,a=r.success;if(this.fragPrevious=i,this.state=ue,a){var s=this.tracksBuffered[this.currentTrackId];if(s){for(var l,d=i.start,c=0;c<s.length;c++)if(d>=s[c].start&&d<=s[c].end){l=s[c];break}var u=i.start+i.duration;l?l.end=u:(l={start:d,end:u},s.push(l)),this.fragmentTracker.fragBuffered(i)}}},e.onBufferFlushing=function(t,r){var i=r.startOffset,a=r.endOffset;if(i===0&&a!==Number.POSITIVE_INFINITY){var s=a-1;if(s<=0)return;r.endOffsetSubtitles=Math.max(0,s),this.tracksBuffered.forEach(function(l){for(var d=0;d<l.length;)if(l[d].end<=s)l.shift();else{if(!(l[d].start<s))break;l[d].start=s,d++}}),this.fragmentTracker.removeFragmentsInRange(i,s,At)}},e.onFragBuffered=function(t,r){var i;this.loadedmetadata||r.frag.type!==ve||(i=this.media)!=null&&i.buffered.length&&(this.loadedmetadata=!0)},e.onError=function(t,r){var i=r.frag;(i==null?void 0:i.type)===At&&(this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==$e&&(this.state=ue))},e.onSubtitleTracksUpdated=function(t,r){var i=this,a=r.subtitleTracks;Qa(this.levels,a)?this.levels=a.map(function(s){return new or(s)}):(this.tracksBuffered=[],this.levels=a.map(function(s){var l=new or(s);return i.tracksBuffered[l.id]=[],l}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,At),this.fragPrevious=null,this.mediaBuffer=null)},e.onSubtitleTrackSwitch=function(t,r){if(this.currentTrackId=r.id,this.levels.length&&this.currentTrackId!==-1){var i=this.levels[this.currentTrackId];i!=null&&i.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,i&&this.setInterval(500)}else this.clearInterval()},e.onSubtitleTrackLoaded=function(t,r){var i,a=r.details,s=r.id,l=this.currentTrackId,d=this.levels;if(d.length){var c=d[l];if(!(s>=d.length||s!==l)&&c){this.mediaBuffer=this.mediaBufferTimeRanges;var u=0;if(a.live||(i=c.details)!=null&&i.live){var g=this.mainDetails;if(a.deltaUpdateFailed||!g)return;var m=g.fragments[0];c.details?(u=this.alignPlaylists(a,c.details))===0&&m&&_i(a,u=m.start):a.hasProgramDateTime&&g.hasProgramDateTime?(Sa(a,g),u=a.fragments[0].start):m&&_i(a,u=m.start)}c.details=a,this.levelLastLoaded=s,this.startFragRequested||!this.mainDetails&&a.live||this.setStartPosition(c.details,u),this.tick(),a.live&&!this.fragCurrent&&this.media&&this.state===ue&&(sr(null,a.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),c.details=void 0))}}},e._handleFragmentLoadComplete=function(t){var r=this,i=t.frag,a=t.payload,s=i.decryptdata,l=this.hls;if(!this.fragContextChanged(i)&&a&&a.byteLength>0&&s&&s.key&&s.iv&&s.method==="AES-128"){var d=performance.now();this.decrypter.decrypt(new Uint8Array(a),s.key.buffer,s.iv.buffer).catch(function(c){throw l.trigger(A.ERROR,{type:J.MEDIA_ERROR,details:O.FRAG_DECRYPT_ERROR,fatal:!1,error:c,reason:c.message,frag:i}),c}).then(function(c){var u=performance.now();l.trigger(A.FRAG_DECRYPTED,{frag:i,payload:c,stats:{tstart:d,tdecrypt:u}})}).catch(function(c){r.warn(c.name+": "+c.message),r.state=ue})}},e.doTick=function(){if(this.media){if(this.state===ue){var t=this.currentTrackId,r=this.levels,i=r[t];if(!r.length||!i||!i.details)return;var a=this.config,s=this.getLoadPosition(),l=Ae.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],s,a.maxBufferHole),d=l.end,c=l.len,u=this.getFwdBufferInfo(this.media,ve),g=i.details;if(c>this.getMaxBufferLength(u==null?void 0:u.len)+g.levelTargetDuration)return;var m=g.fragments,v=m.length,y=g.edge,k=null,b=this.fragPrevious;if(d<y){var E=a.maxFragLookUpTolerance,C=d>y-E?0:E;!(k=sr(b,m,Math.max(m[0].start,d),C))&&b&&b.start<m[0].start&&(k=m[0])}else k=m[v-1];if(!k)return;if((k=this.mapToInitFragWhenRequired(k)).sn!=="initSegment"){var S=m[k.sn-g.startSN-1];S&&S.cc===k.cc&&this.fragmentTracker.getState(S)===lr&&(k=S)}this.fragmentTracker.getState(k)===lr&&this.loadFragment(k,i,d)}}else this.state=ue},e.getMaxBufferLength=function(t){var r=o.prototype.getMaxBufferLength.call(this);return t?Math.max(r,t):r},e.loadFragment=function(t,r,i){this.fragCurrent=t,t.sn==="initSegment"?this._loadInitSegment(t,r):(this.startFragRequested=!0,o.prototype.loadFragment.call(this,t,r,i))},L(n,[{key:"mediaBufferTimeRanges",get:function(){return new kl(this.tracksBuffered[this.currentTrackId]||[])}}]),n}(Fi),kl=function(o){this.buffered=void 0;var n=function(e,t,r){if((t>>>=0)>r-1)throw new DOMException("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is greater than the maximum bound ("+r+")");return o[t][e]};this.buffered={get length(){return o.length},end:function(e){return n("end",e,o.length)},start:function(e){return n("start",e,o.length)}}},Tl=function(o){function n(t){var r;return(r=o.call(this,t,"[subtitle-track-controller]")||this).media=null,r.tracks=[],r.groupId=null,r.tracksInGroup=[],r.trackId=-1,r.selectDefaultTrack=!0,r.queuedDefaultTrack=-1,r.trackChangeListener=function(){return r.onTextTracksChanged()},r.asyncPollTrackChange=function(){return r.pollTrackChange(0)},r.useTextTrackPolling=!1,r.subtitlePollingInterval=-1,r._subtitleDisplay=!0,r.registerListeners(),r}j(n,o);var e=n.prototype;return e.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,o.prototype.destroy.call(this)},e.registerListeners=function(){var t=this.hls;t.on(A.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(A.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(A.MANIFEST_LOADING,this.onManifestLoading,this),t.on(A.MANIFEST_PARSED,this.onManifestParsed,this),t.on(A.LEVEL_LOADING,this.onLevelLoading,this),t.on(A.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(A.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.on(A.ERROR,this.onError,this)},e.unregisterListeners=function(){var t=this.hls;t.off(A.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(A.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(A.MANIFEST_LOADING,this.onManifestLoading,this),t.off(A.MANIFEST_PARSED,this.onManifestParsed,this),t.off(A.LEVEL_LOADING,this.onLevelLoading,this),t.off(A.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(A.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.off(A.ERROR,this.onError,this)},e.onMediaAttached=function(t,r){this.media=r.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},e.pollTrackChange=function(t){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,t)},e.onMediaDetaching=function(){this.media&&(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),qi(this.media.textTracks).forEach(function(t){Vt(t)}),this.subtitleTrack=-1,this.media=null)},e.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0},e.onManifestParsed=function(t,r){this.tracks=r.subtitleTracks},e.onSubtitleTrackLoaded=function(t,r){var i=r.id,a=r.details,s=this.trackId,l=this.tracksInGroup[s];if(l){var d=l.details;l.details=r.details,this.log("subtitle track "+i+" loaded ["+a.startSN+"-"+a.endSN+"]"),i===this.trackId&&this.playlistLoaded(i,r,d)}else this.warn("Invalid subtitle track id "+i)},e.onLevelLoading=function(t,r){this.switchLevel(r.level)},e.onLevelSwitching=function(t,r){this.switchLevel(r.level)},e.switchLevel=function(t){var r=this.hls.levels[t];if(r!=null&&r.textGroupIds){var i=r.textGroupIds[r.urlId],a=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;if(this.groupId!==i){var s=this.tracks.filter(function(c){return!i||c.groupId===i});this.tracksInGroup=s;var l=this.findTrackId(a==null?void 0:a.name)||this.findTrackId();this.groupId=i||null;var d={subtitleTracks:s};this.log("Updating subtitle tracks, "+s.length+' track(s) found in "'+i+'" group-id'),this.hls.trigger(A.SUBTITLE_TRACKS_UPDATED,d),l!==-1&&this.setSubtitleTrack(l,a)}else this.shouldReloadPlaylist(a)&&this.setSubtitleTrack(this.trackId,a)}},e.findTrackId=function(t){for(var r=this.tracksInGroup,i=0;i<r.length;i++){var a=r[i];if((!this.selectDefaultTrack||a.default)&&(!t||t===a.name))return a.id}return-1},e.onError=function(t,r){!r.fatal&&r.context&&r.context.type===ut&&r.context.id===this.trackId&&r.context.groupId===this.groupId&&this.checkRetry(r)},e.loadPlaylist=function(t){o.prototype.loadPlaylist.call(this);var r=this.tracksInGroup[this.trackId];if(this.shouldLoadPlaylist(r)){var i=r.id,a=r.groupId,s=r.url;if(t)try{s=t.addDirectives(s)}catch(l){this.warn("Could not construct new URL with HLS Delivery Directives: "+l)}this.log("Loading subtitle playlist for id "+i),this.hls.trigger(A.SUBTITLE_TRACK_LOADING,{url:s,id:i,groupId:a,deliveryDirectives:t||null})}},e.toggleTrackModes=function(t){var r=this,i=this.media,a=this.trackId;if(i){var s=qi(i.textTracks),l=s.filter(function(u){return u.groupId===r.groupId});if(t===-1)[].slice.call(s).forEach(function(u){u.mode="disabled"});else{var d=l[a];d&&(d.mode="disabled")}var c=l[t];c&&(c.mode=this.subtitleDisplay?"showing":"hidden")}},e.setSubtitleTrack=function(t,r){var i,a=this.tracksInGroup;if(this.media){if(this.trackId!==t&&this.toggleTrackModes(t),!(this.trackId===t&&(t===-1||(i=a[t])!=null&&i.details)||t<-1||t>=a.length)){this.clearTimer();var s=a[t];if(this.log("Switching to subtitle-track "+t+(s?' "'+s.name+'" lang:'+s.lang+" group:"+s.groupId:"")),this.trackId=t,s){var l=s.id,d=s.groupId,c=d===void 0?"":d,u=s.name,g=s.type,m=s.url;this.hls.trigger(A.SUBTITLE_TRACK_SWITCH,{id:l,groupId:c,name:u,type:g,url:m});var v=this.switchParams(s.url,r==null?void 0:r.details);this.loadPlaylist(v)}else this.hls.trigger(A.SUBTITLE_TRACK_SWITCH,{id:t})}}else this.queuedDefaultTrack=t},e.onTextTracksChanged=function(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),this.media&&this.hls.config.renderTextTracksNatively){for(var t=-1,r=qi(this.media.textTracks),i=0;i<r.length;i++)if(r[i].mode==="hidden")t=i;else if(r[i].mode==="showing"){t=i;break}this.subtitleTrack!==t&&(this.subtitleTrack=t)}},L(n,[{key:"subtitleDisplay",get:function(){return this._subtitleDisplay},set:function(t){this._subtitleDisplay=t,this.trackId>-1&&this.toggleTrackModes(this.trackId)}},{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(t){this.selectDefaultTrack=!1;var r=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;this.setSubtitleTrack(t,r)}}]),n}(Ri);function qi(o){for(var n=[],e=0;e<o.length;e++){var t=o[e];t.kind!=="subtitles"&&t.kind!=="captions"||!t.label||n.push(o[e])}return n}var _l=function(){function o(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}var n=o.prototype;return n.append=function(e,t){var r=this.queues[t];r.push(e),r.length===1&&this.buffers[t]&&this.executeNext(t)},n.insertAbort=function(e,t){this.queues[t].unshift(e),this.executeNext(t)},n.appendBlocker=function(e){var t,r=new Promise(function(a){t=a}),i={execute:t,onStart:function(){},onComplete:function(){},onError:function(){}};return this.append(i,e),r},n.executeNext=function(e){var t=this.buffers,r=this.queues,i=t[e],a=r[e];if(a.length){var s=a[0];try{s.execute()}catch(l){R.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),s.onError(l),i!=null&&i.updating||(a.shift(),this.executeNext(e))}}},n.shiftAndExecuteNext=function(e){this.queues[e].shift(),this.executeNext(e)},n.current=function(e){return this.queues[e][0]},o}(),Wa=Ir(),Xa=/([ha]vc.)(?:\.[^.,]+)+/,Sl=function(){function o(e){var t=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=function(){var r=t.media,i=t.mediaSource;R.log("[buffer-controller]: Media source opened"),r&&(r.removeEventListener("emptied",t._onMediaEmptied),t.updateMediaElementDuration(),t.hls.trigger(A.MEDIA_ATTACHED,{media:r})),i&&i.removeEventListener("sourceopen",t._onMediaSourceOpen),t.checkPendingTracks()},this._onMediaSourceClose=function(){R.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=function(){R.log("[buffer-controller]: Media source ended")},this._onMediaEmptied=function(){var r=t.media,i=t._objectUrl;r&&r.src!==i&&R.error("Media element src was set while attaching MediaSource ("+i+" > "+r.src+")")},this.hls=e,this._initSourceBuffer(),this.registerListeners()}var n=o.prototype;return n.hasSourceTypes=function(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0},n.destroy=function(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null},n.registerListeners=function(){var e=this.hls;e.on(A.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(A.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(A.MANIFEST_LOADING,this.onManifestLoading,this),e.on(A.MANIFEST_PARSED,this.onManifestParsed,this),e.on(A.BUFFER_RESET,this.onBufferReset,this),e.on(A.BUFFER_APPENDING,this.onBufferAppending,this),e.on(A.BUFFER_CODECS,this.onBufferCodecs,this),e.on(A.BUFFER_EOS,this.onBufferEos,this),e.on(A.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(A.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(A.FRAG_PARSED,this.onFragParsed,this),e.on(A.FRAG_CHANGED,this.onFragChanged,this)},n.unregisterListeners=function(){var e=this.hls;e.off(A.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(A.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(A.MANIFEST_LOADING,this.onManifestLoading,this),e.off(A.MANIFEST_PARSED,this.onManifestParsed,this),e.off(A.BUFFER_RESET,this.onBufferReset,this),e.off(A.BUFFER_APPENDING,this.onBufferAppending,this),e.off(A.BUFFER_CODECS,this.onBufferCodecs,this),e.off(A.BUFFER_EOS,this.onBufferEos,this),e.off(A.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(A.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(A.FRAG_PARSED,this.onFragParsed,this),e.off(A.FRAG_CHANGED,this.onFragChanged,this)},n._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new _l(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.lastMpegAudioChunk=null},n.onManifestLoading=function(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null},n.onManifestParsed=function(e,t){var r=2;(t.audio&&!t.video||!t.altAudio)&&(r=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=r,R.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},n.onMediaAttaching=function(e,t){var r=this.media=t.media;if(r&&Wa){var i=this.mediaSource=new Wa;i.addEventListener("sourceopen",this._onMediaSourceOpen),i.addEventListener("sourceended",this._onMediaSourceEnded),i.addEventListener("sourceclose",this._onMediaSourceClose),r.src=self.URL.createObjectURL(i),this._objectUrl=r.src,r.addEventListener("emptied",this._onMediaEmptied)}},n.onMediaDetaching=function(){var e=this.media,t=this.mediaSource,r=this._objectUrl;if(t){if(R.log("[buffer-controller]: media source detaching"),t.readyState==="open")try{t.endOfStream()}catch(i){R.warn("[buffer-controller]: onMediaDetaching: "+i.message+" while calling endOfStream")}this.onBufferReset(),t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),e&&(e.removeEventListener("emptied",this._onMediaEmptied),r&&self.URL.revokeObjectURL(r),e.src===r?(e.removeAttribute("src"),e.load()):R.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(A.MEDIA_DETACHED,void 0)},n.onBufferReset=function(){var e=this;this.getSourceBufferTypes().forEach(function(t){var r=e.sourceBuffer[t];try{r&&(e.removeBufferListeners(t),e.mediaSource&&e.mediaSource.removeSourceBuffer(r),e.sourceBuffer[t]=void 0)}catch(i){R.warn("[buffer-controller]: Failed to reset the "+t+" buffer",i)}}),this._initSourceBuffer()},n.onBufferCodecs=function(e,t){var r=this,i=this.getSourceBufferTypes().length;Object.keys(t).forEach(function(a){if(i){var s=r.tracks[a];if(s&&typeof s.buffer.changeType=="function"){var l=t[a],d=l.id,c=l.codec,u=l.levelCodec,g=l.container,m=l.metadata,v=(s.levelCodec||s.codec).replace(Xa,"$1"),y=(u||c).replace(Xa,"$1");if(v!==y){var k=g+";codecs="+(u||c);r.appendChangeType(a,k),R.log("[buffer-controller]: switching codec "+v+" to "+y),r.tracks[a]={buffer:s.buffer,codec:c,container:g,levelCodec:u,metadata:m,id:d}}}}else r.pendingTracks[a]=t[a]}),i||(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&this.mediaSource.readyState==="open"&&this.checkPendingTracks())},n.appendChangeType=function(e,t){var r=this,i=this.operationQueue,a={execute:function(){var s=r.sourceBuffer[e];s&&(R.log("[buffer-controller]: changing "+e+" sourceBuffer type to "+t),s.changeType(t)),i.shiftAndExecuteNext(e)},onStart:function(){},onComplete:function(){},onError:function(s){R.warn("[buffer-controller]: Failed to change "+e+" SourceBuffer type",s)}};i.append(a,e)},n.onBufferAppending=function(e,t){var r=this,i=this.hls,a=this.operationQueue,s=this.tracks,l=t.data,d=t.type,c=t.frag,u=t.part,g=t.chunkMeta,m=g.buffering[d],v=self.performance.now();m.start=v;var y=c.stats.buffering,k=u?u.stats.buffering:null;y.start===0&&(y.start=v),k&&k.start===0&&(k.start=v);var b=s.audio,E=!1;d==="audio"&&(b==null?void 0:b.container)==="audio/mpeg"&&(E=!this.lastMpegAudioChunk||g.id===1||this.lastMpegAudioChunk.sn!==g.sn,this.lastMpegAudioChunk=g);var C=c.start,S={execute:function(){if(m.executeStart=self.performance.now(),E){var D=r.sourceBuffer[d];if(D){var I=C-D.timestampOffset;Math.abs(I)>=.1&&(R.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to "+C+" (delta: "+I+") sn: "+c.sn+")"),D.timestampOffset=C)}}r.appendExecutor(l,d)},onStart:function(){},onComplete:function(){var D=self.performance.now();m.executeEnd=m.end=D,y.first===0&&(y.first=D),k&&k.first===0&&(k.first=D);var I=r.sourceBuffer,P={};for(var U in I)P[U]=Ae.getBuffered(I[U]);r.appendError=0,r.hls.trigger(A.BUFFER_APPENDED,{type:d,frag:c,part:u,chunkMeta:g,parent:c.type,timeRanges:P})},onError:function(D){R.error("[buffer-controller]: Error encountered while trying to append to the "+d+" SourceBuffer",D);var I={type:J.MEDIA_ERROR,parent:c.type,details:O.BUFFER_APPEND_ERROR,frag:c,part:u,chunkMeta:g,error:D,err:D,fatal:!1};D.code===DOMException.QUOTA_EXCEEDED_ERR?I.details=O.BUFFER_FULL_ERROR:(r.appendError++,I.details=O.BUFFER_APPEND_ERROR,r.appendError>i.config.appendErrorMaxRetry&&(R.error("[buffer-controller]: Failed "+i.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),I.fatal=!0)),i.trigger(A.ERROR,I)}};a.append(S,d)},n.onBufferFlushing=function(e,t){var r=this,i=this.operationQueue,a=function(s){return{execute:r.removeExecutor.bind(r,s,t.startOffset,t.endOffset),onStart:function(){},onComplete:function(){r.hls.trigger(A.BUFFER_FLUSHED,{type:s})},onError:function(l){R.warn("[buffer-controller]: Failed to remove from "+s+" SourceBuffer",l)}}};t.type?i.append(a(t.type),t.type):this.getSourceBufferTypes().forEach(function(s){i.append(a(s),s)})},n.onFragParsed=function(e,t){var r=this,i=t.frag,a=t.part,s=[],l=a?a.elementaryStreams:i.elementaryStreams;l[si]?s.push("audiovideo"):(l[Ne]&&s.push("audio"),l[Je]&&s.push("video")),s.length===0&&R.warn("Fragments must have at least one ElementaryStreamType set. type: "+i.type+" level: "+i.level+" sn: "+i.sn),this.blockBuffers(function(){var d=self.performance.now();i.stats.buffering.end=d,a&&(a.stats.buffering.end=d);var c=a?a.stats:i.stats;r.hls.trigger(A.FRAG_BUFFERED,{frag:i,part:a,stats:c,id:i.type})},s)},n.onFragChanged=function(e,t){this.flushBackBuffer()},n.onBufferEos=function(e,t){var r=this;this.getSourceBufferTypes().reduce(function(i,a){var s=r.sourceBuffer[a];return!s||t.type&&t.type!==a||(s.ending=!0,s.ended||(s.ended=!0,R.log("[buffer-controller]: "+a+" sourceBuffer now EOS"))),i&&!(s&&!s.ended)},!0)&&(R.log("[buffer-controller]: Queueing mediaSource.endOfStream()"),this.blockBuffers(function(){r.getSourceBufferTypes().forEach(function(a){var s=r.sourceBuffer[a];s&&(s.ending=!1)});var i=r.mediaSource;i&&i.readyState==="open"?(R.log("[buffer-controller]: Calling mediaSource.endOfStream()"),i.endOfStream()):i&&R.info("[buffer-controller]: Could not call mediaSource.endOfStream(). mediaSource.readyState: "+i.readyState)}))},n.onLevelUpdated=function(e,t){var r=t.details;r.fragments.length&&(this.details=r,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},n.flushBackBuffer=function(){var e=this.hls,t=this.details,r=this.media,i=this.sourceBuffer;if(r&&t!==null){var a=this.getSourceBufferTypes();if(a.length){var s=t.live&&e.config.liveBackBufferLength!==null?e.config.liveBackBufferLength:e.config.backBufferLength;if(Y(s)&&!(s<0)){var l=r.currentTime,d=t.levelTargetDuration,c=Math.max(s,d),u=Math.floor(l/d)*d-c;a.forEach(function(g){var m=i[g];if(m){var v=Ae.getBuffered(m);if(v.length>0&&u>v.start(0)){if(e.trigger(A.BACK_BUFFER_REACHED,{bufferEnd:u}),t.live)e.trigger(A.LIVE_BACK_BUFFER_REACHED,{bufferEnd:u});else if(m.ended&&v.end(v.length-1)-l<2*d)return void R.info("[buffer-controller]: Cannot flush "+g+" back buffer while SourceBuffer is in ended state");e.trigger(A.BUFFER_FLUSHING,{startOffset:0,endOffset:u,type:g})}}})}}}},n.updateMediaElementDuration=function(){if(this.details&&this.media&&this.mediaSource&&this.mediaSource.readyState==="open"){var e=this.details,t=this.hls,r=this.media,i=this.mediaSource,a=e.fragments[0].start+e.totalduration,s=r.duration,l=Y(i.duration)?i.duration:0;e.live&&t.config.liveDurationInfinity?(R.log("[buffer-controller]: Media Source duration is set to Infinity"),i.duration=1/0,this.updateSeekableRange(e)):(a>l&&a>s||!Y(s))&&(R.log("[buffer-controller]: Updating Media Source duration to "+a.toFixed(3)),i.duration=a)}},n.updateSeekableRange=function(e){var t=this.mediaSource,r=e.fragments;if(r.length&&e.live&&t!=null&&t.setLiveSeekableRange){var i=Math.max(0,r[0].start),a=Math.max(i,i+e.totalduration);t.setLiveSeekableRange(i,a)}},n.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,t=this.operationQueue,r=this.pendingTracks,i=Object.keys(r).length;if(i&&!e||i===2){this.createSourceBuffers(r),this.pendingTracks={};var a=this.getSourceBufferTypes();if(a.length)this.hls.trigger(A.BUFFER_CREATED,{tracks:this.tracks}),a.forEach(function(l){t.executeNext(l)});else{var s=new Error("could not create source buffer for media codec(s)");this.hls.trigger(A.ERROR,{type:J.MEDIA_ERROR,details:O.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:s,reason:s.message})}}},n.createSourceBuffers=function(e){var t=this.sourceBuffer,r=this.mediaSource;if(!r)throw Error("createSourceBuffers called when mediaSource was null");for(var i in e)if(!t[i]){var a=e[i];if(!a)throw Error("source buffer exists for track "+i+", however track does not");var s=a.levelCodec||a.codec,l=a.container+";codecs="+s;R.log("[buffer-controller]: creating sourceBuffer("+l+")");try{var d=t[i]=r.addSourceBuffer(l),c=i;this.addBufferListener(c,"updatestart",this._onSBUpdateStart),this.addBufferListener(c,"updateend",this._onSBUpdateEnd),this.addBufferListener(c,"error",this._onSBUpdateError),this.tracks[i]={buffer:d,codec:s,container:a.container,levelCodec:a.levelCodec,metadata:a.metadata,id:a.id}}catch(u){R.error("[buffer-controller]: error while trying to add sourceBuffer: "+u.message),this.hls.trigger(A.ERROR,{type:J.MEDIA_ERROR,details:O.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:u,mimeType:l})}}},n._onSBUpdateStart=function(e){this.operationQueue.current(e).onStart()},n._onSBUpdateEnd=function(e){var t=this.operationQueue;t.current(e).onComplete(),t.shiftAndExecuteNext(e)},n._onSBUpdateError=function(e,t){var r=new Error(e+" SourceBuffer error");R.error("[buffer-controller]: "+r,t),this.hls.trigger(A.ERROR,{type:J.MEDIA_ERROR,details:O.BUFFER_APPENDING_ERROR,error:r,fatal:!1});var i=this.operationQueue.current(e);i&&i.onError(t)},n.removeExecutor=function(e,t,r){var i=this.media,a=this.mediaSource,s=this.operationQueue,l=this.sourceBuffer[e];if(!i||!a||!l)return R.warn("[buffer-controller]: Attempting to remove from the "+e+" SourceBuffer, but it does not exist"),void s.shiftAndExecuteNext(e);var d=Y(i.duration)?i.duration:1/0,c=Y(a.duration)?a.duration:1/0,u=Math.max(0,t),g=Math.min(r,d,c);g>u&&!l.ending?(l.ended=!1,R.log("[buffer-controller]: Removing ["+u+","+g+"] from the "+e+" SourceBuffer"),l.remove(u,g)):s.shiftAndExecuteNext(e)},n.appendExecutor=function(e,t){var r=this.operationQueue,i=this.sourceBuffer[t];if(!i)return R.warn("[buffer-controller]: Attempting to append to the "+t+" SourceBuffer, but it does not exist"),void r.shiftAndExecuteNext(t);i.ended=!1,i.appendBuffer(e)},n.blockBuffers=function(e,t){var r=this;if(t===void 0&&(t=this.getSourceBufferTypes()),!t.length)return R.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve().then(e);var i=this.operationQueue,a=t.map(function(s){return i.appendBlocker(s)});Promise.all(a).then(function(){e(),t.forEach(function(s){var l=r.sourceBuffer[s];l!=null&&l.updating||i.shiftAndExecuteNext(s)})})},n.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},n.addBufferListener=function(e,t,r){var i=this.sourceBuffer[e];if(i){var a=r.bind(this,e);this.listeners[e].push({event:t,listener:a}),i.addEventListener(t,a)}},n.removeBufferListeners=function(e){var t=this.sourceBuffer[e];t&&this.listeners[e].forEach(function(r){t.removeEventListener(r.event,r.listener)})},o}(),Ja={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},Za=function(o){var n=o;return Ja.hasOwnProperty(o)&&(n=Ja[o]),String.fromCharCode(n)},Ut=15,vt=100,Cl={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Ll={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Dl={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Rl={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Il=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],Pl=function(){function o(){this.time=null,this.verboseLevel=0}return o.prototype.log=function(n,e){if(this.verboseLevel>=n){var t=typeof e=="function"?e():e;R.log(this.time+" ["+n+"] "+t)}},o}(),Gt=function(o){for(var n=[],e=0;e<o.length;e++)n.push(o[e].toString(16));return n},eo=function(){function o(e,t,r,i,a){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=e||"white",this.underline=t||!1,this.italics=r||!1,this.background=i||"black",this.flash=a||!1}var n=o.prototype;return n.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},n.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],r=0;r<t.length;r++){var i=t[r];e.hasOwnProperty(i)&&(this[i]=e[i])}},n.isDefault=function(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash},n.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},n.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},n.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},o}(),Ol=function(){function o(e,t,r,i,a,s){this.uchar=void 0,this.penState=void 0,this.uchar=e||" ",this.penState=new eo(t,r,i,a,s)}var n=o.prototype;return n.reset=function(){this.uchar=" ",this.penState.reset()},n.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},n.setPenState=function(e){this.penState.copy(e)},n.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},n.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},n.isEmpty=function(){return this.uchar===" "&&this.penState.isDefault()},o}(),Ml=function(){function o(e){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var t=0;t<vt;t++)this.chars.push(new Ol);this.logger=e,this.pos=0,this.currPenState=new eo}var n=o.prototype;return n.equals=function(e){for(var t=!0,r=0;r<vt;r++)if(!this.chars[r].equals(e.chars[r])){t=!1;break}return t},n.copy=function(e){for(var t=0;t<vt;t++)this.chars[t].copy(e.chars[t])},n.isEmpty=function(){for(var e=!0,t=0;t<vt;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},n.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>vt&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=vt)},n.moveCursor=function(e){var t=this.pos+e;if(e>1)for(var r=this.pos+1;r<t+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(t)},n.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},n.insertChar=function(e){var t=this;e>=144&&this.backSpace();var r=Za(e);this.pos>=vt?this.logger.log(0,function(){return"Cannot insert "+e.toString(16)+" ("+r+") at position "+t.pos+". Skipping it!"}):(this.chars[this.pos].setChar(r,this.currPenState),this.moveCursor(1))},n.clearFromPos=function(e){var t;for(t=e;t<vt;t++)this.chars[t].reset()},n.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},n.clearToEndOfRow=function(){this.clearFromPos(this.pos)},n.getTextString=function(){for(var e=[],t=!0,r=0;r<vt;r++){var i=this.chars[r].uchar;i!==" "&&(t=!1),e.push(i)}return t?"":e.join("")},n.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},o}(),Qi=function(){function o(e){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var t=0;t<Ut;t++)this.rows.push(new Ml(e));this.logger=e,this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var n=o.prototype;return n.reset=function(){for(var e=0;e<Ut;e++)this.rows[e].clear();this.currRow=14},n.equals=function(e){for(var t=!0,r=0;r<Ut;r++)if(!this.rows[r].equals(e.rows[r])){t=!1;break}return t},n.copy=function(e){for(var t=0;t<Ut;t++)this.rows[t].copy(e.rows[t])},n.isEmpty=function(){for(var e=!0,t=0;t<Ut;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},n.backSpace=function(){this.rows[this.currRow].backSpace()},n.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},n.insertChar=function(e){this.rows[this.currRow].insertChar(e)},n.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},n.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},n.setCursor=function(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)},n.setPAC=function(e){this.logger.log(2,function(){return"pacData = "+JSON.stringify(e)});var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var r=0;r<Ut;r++)this.rows[r].clear();var i=this.currRow+1-this.nrRollUpRows,a=this.lastOutputScreen;if(a){var s=a.rows[i].cueStartTime,l=this.logger.time;if(s&&l!==null&&s<l)for(var d=0;d<this.nrRollUpRows;d++)this.rows[t-this.nrRollUpRows+d+1].copy(a.rows[i+d])}}this.currRow=t;var c=this.rows[this.currRow];if(e.indent!==null){var u=e.indent,g=Math.max(u-1,0);c.setCursor(e.indent),e.color=c.chars[g].penState.foreground}var m={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(m)},n.setBkgData=function(e){this.logger.log(2,function(){return"bkgData = "+JSON.stringify(e)}),this.backSpace(),this.setPen(e),this.insertChar(32)},n.setRollUpRows=function(e){this.nrRollUpRows=e},n.rollUp=function(){var e=this;if(this.nrRollUpRows!==null){this.logger.log(1,function(){return e.getDisplayText()});var t=this.currRow+1-this.nrRollUpRows,r=this.rows.splice(t,1)[0];r.clear(),this.rows.splice(this.currRow,0,r),this.logger.log(2,"Rolling up")}else this.logger.log(3,"roll_up but nrRollUpRows not set yet")},n.getDisplayText=function(e){e=e||!1;for(var t=[],r="",i=-1,a=0;a<Ut;a++){var s=this.rows[a].getTextString();s&&(i=a+1,e?t.push("Row "+i+": '"+s+"'"):t.push(s.trim()))}return t.length>0&&(r=e?"["+t.join(" | ")+"]":t.join(`
`)),r},n.getTextAndFormat=function(){return this.rows},o}(),to=function(){function o(e,t,r){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new Qi(r),this.nonDisplayedMemory=new Qi(r),this.lastOutputScreen=new Qi(r),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=r}var n=o.prototype;return n.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},n.getHandler=function(){return this.outputFilter},n.setHandler=function(e){this.outputFilter=e},n.setPAC=function(e){this.writeScreen.setPAC(e)},n.setBkgData=function(e){this.writeScreen.setBkgData(e)},n.setMode=function(e){e!==this.mode&&(this.mode=e,this.logger.log(2,function(){return"MODE="+e}),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},n.insertChars=function(e){for(var t=this,r=0;r<e.length;r++)this.writeScreen.insertChar(e[r]);var i=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,function(){return i+": "+t.writeScreen.getDisplayText(!0)}),this.mode!=="MODE_PAINT-ON"&&this.mode!=="MODE_ROLL-UP"||(this.logger.log(1,function(){return"DISPLAYED: "+t.displayedMemory.getDisplayText(!0)}),this.outputDataUpdate())},n.ccRCL=function(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},n.ccBS=function(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},n.ccAOF=function(){},n.ccAON=function(){},n.ccDER=function(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},n.ccRU=function(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},n.ccFON=function(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},n.ccRDC=function(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},n.ccTR=function(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")},n.ccRTD=function(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")},n.ccEDM=function(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},n.ccCR=function(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},n.ccENM=function(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},n.ccEOC=function(){var e=this;if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){var t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,function(){return"DISP: "+e.displayedMemory.getDisplayText()})}this.outputDataUpdate(!0)},n.ccTO=function(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},n.ccMIDROW=function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var r=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][r]}this.logger.log(2,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},n.outputDataUpdate=function(e){e===void 0&&(e=!1);var t=this.logger.time;t!==null&&this.outputFilter&&(this.cueStartTime!==null||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},n.cueSplitAtTime=function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},o}(),ro=function(){function o(e,t,r){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var i=new Pl;this.channels=[null,new to(e,t,i),new to(e+1,r,i)],this.cmdHistory={a:null,b:null},this.logger=i}var n=o.prototype;return n.getHandler=function(e){return this.channels[e].getHandler()},n.setHandler=function(e,t){this.channels[e].setHandler(t)},n.addData=function(e,t){var r,i,a,s=!1;this.logger.time=e;for(var l=0;l<t.length;l+=2)if(i=127&t[l],a=127&t[l+1],i!==0||a!==0){if(this.logger.log(3,"["+Gt([t[l],t[l+1]])+"] -> ("+Gt([i,a])+")"),(r=this.parseCmd(i,a))||(r=this.parseMidrow(i,a)),r||(r=this.parsePAC(i,a)),r||(r=this.parseBackgroundAttributes(i,a)),!r&&(s=this.parseChars(i,a))){var d=this.currentChannel;d&&d>0?this.channels[d].insertChars(s):this.logger.log(2,"No channel found yet. TEXT-MODE?")}r||s||this.logger.log(2,"Couldn't parse cleaned data "+Gt([i,a])+" orig: "+Gt([t[l],t[l+1]]))}},n.parseCmd=function(e,t){var r=this.cmdHistory;if(!((e===20||e===28||e===21||e===29)&&t>=32&&t<=47||(e===23||e===31)&&t>=33&&t<=35))return!1;if(io(e,t,r))return Jt(null,null,r),this.logger.log(3,"Repeated command ("+Gt([e,t])+") is dropped"),!0;var i=e===20||e===21||e===23?1:2,a=this.channels[i];return e===20||e===21||e===28||e===29?t===32?a.ccRCL():t===33?a.ccBS():t===34?a.ccAOF():t===35?a.ccAON():t===36?a.ccDER():t===37?a.ccRU(2):t===38?a.ccRU(3):t===39?a.ccRU(4):t===40?a.ccFON():t===41?a.ccRDC():t===42?a.ccTR():t===43?a.ccRTD():t===44?a.ccEDM():t===45?a.ccCR():t===46?a.ccENM():t===47&&a.ccEOC():a.ccTO(t-32),Jt(e,t,r),this.currentChannel=i,!0},n.parseMidrow=function(e,t){var r=0;if((e===17||e===25)&&t>=32&&t<=47){if((r=e===17?1:2)!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;var i=this.channels[r];return!!i&&(i.ccMIDROW(t),this.logger.log(3,"MIDROW ("+Gt([e,t])+")"),!0)}return!1},n.parsePAC=function(e,t){var r,i=this.cmdHistory;if(!((e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127||(e===16||e===24)&&t>=64&&t<=95))return!1;if(io(e,t,i))return Jt(null,null,i),!0;var a=e<=23?1:2;r=t>=64&&t<=95?a===1?Cl[e]:Dl[e]:a===1?Ll[e]:Rl[e];var s=this.channels[a];return!!s&&(s.setPAC(this.interpretPAC(r,t)),Jt(e,t,i),this.currentChannel=a,!0)},n.interpretPAC=function(e,t){var r,i={color:null,italics:!1,indent:null,underline:!1,row:e};return r=t>95?t-96:t-64,i.underline=(1&r)==1,r<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(i.italics=!0,i.color="white"):i.indent=4*Math.floor((r-16)/2),i},n.parseChars=function(e,t){var r,i,a=null,s=null;if(e>=25?(r=2,s=e-8):(r=1,s=e),s>=17&&s<=19?(i=s===17?t+80:s===18?t+112:t+144,this.logger.log(2,"Special char '"+Za(i)+"' in channel "+r),a=[i]):e>=32&&e<=127&&(a=t===0?[e]:[e,t]),a){var l=Gt(a);this.logger.log(3,"Char codes =  "+l.join(",")),Jt(e,t,this.cmdHistory)}return a},n.parseBackgroundAttributes=function(e,t){var r;if(!((e===16||e===24)&&t>=32&&t<=47||(e===23||e===31)&&t>=45&&t<=47))return!1;var i={};e===16||e===24?(r=Math.floor((t-32)/2),i.background=Il[r],t%2==1&&(i.background=i.background+"_semi")):t===45?i.background="transparent":(i.foreground="black",t===47&&(i.underline=!0));var a=e<=23?1:2;return this.channels[a].setBkgData(i),Jt(e,t,this.cmdHistory),!0},n.reset=function(){for(var e=0;e<Object.keys(this.channels).length;e++){var t=this.channels[e];t&&t.reset()}this.cmdHistory={a:null,b:null}},n.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++){var r=this.channels[t];r&&r.cueSplitAtTime(e)}},o}();function Jt(o,n,e){e.a=o,e.b=n}function io(o,n,e){return e.a===o&&e.b===n}var jr=function(){function o(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}var n=o.prototype;return n.dispatchCue=function(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},n.newCue=function(e,t,r){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)},n.reset=function(){this.cueRanges=[],this.startTime=null},o}(),Wi=function(){if(typeof self<"u"&&self.VTTCue)return self.VTTCue;var o=["","lr","rl"],n=["start","middle","end","left","right"];function e(a,s){if(typeof s!="string"||!Array.isArray(a))return!1;var l=s.toLowerCase();return!!~a.indexOf(l)&&l}function t(a){return e(n,a)}function r(a){for(var s=arguments.length,l=new Array(s>1?s-1:0),d=1;d<s;d++)l[d-1]=arguments[d];for(var c=1;c<arguments.length;c++){var u=arguments[c];for(var g in u)a[g]=u[g]}return a}function i(a,s,l){var d=this,c={enumerable:!0};d.hasBeenReset=!1;var u="",g=!1,m=a,v=s,y=l,k=null,b="",E=!0,C="auto",S="start",D=50,I="middle",P=50,U="middle";Object.defineProperty(d,"id",r({},c,{get:function(){return u},set:function(F){u=""+F}})),Object.defineProperty(d,"pauseOnExit",r({},c,{get:function(){return g},set:function(F){g=!!F}})),Object.defineProperty(d,"startTime",r({},c,{get:function(){return m},set:function(F){if(typeof F!="number")throw new TypeError("Start time must be set to a number.");m=F,this.hasBeenReset=!0}})),Object.defineProperty(d,"endTime",r({},c,{get:function(){return v},set:function(F){if(typeof F!="number")throw new TypeError("End time must be set to a number.");v=F,this.hasBeenReset=!0}})),Object.defineProperty(d,"text",r({},c,{get:function(){return y},set:function(F){y=""+F,this.hasBeenReset=!0}})),Object.defineProperty(d,"region",r({},c,{get:function(){return k},set:function(F){k=F,this.hasBeenReset=!0}})),Object.defineProperty(d,"vertical",r({},c,{get:function(){return b},set:function(F){var N=function(z){return e(o,z)}(F);if(N===!1)throw new SyntaxError("An invalid or illegal string was specified.");b=N,this.hasBeenReset=!0}})),Object.defineProperty(d,"snapToLines",r({},c,{get:function(){return E},set:function(F){E=!!F,this.hasBeenReset=!0}})),Object.defineProperty(d,"line",r({},c,{get:function(){return C},set:function(F){if(typeof F!="number"&&F!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");C=F,this.hasBeenReset=!0}})),Object.defineProperty(d,"lineAlign",r({},c,{get:function(){return S},set:function(F){var N=t(F);if(!N)throw new SyntaxError("An invalid or illegal string was specified.");S=N,this.hasBeenReset=!0}})),Object.defineProperty(d,"position",r({},c,{get:function(){return D},set:function(F){if(F<0||F>100)throw new Error("Position must be between 0 and 100.");D=F,this.hasBeenReset=!0}})),Object.defineProperty(d,"positionAlign",r({},c,{get:function(){return I},set:function(F){var N=t(F);if(!N)throw new SyntaxError("An invalid or illegal string was specified.");I=N,this.hasBeenReset=!0}})),Object.defineProperty(d,"size",r({},c,{get:function(){return P},set:function(F){if(F<0||F>100)throw new Error("Size must be between 0 and 100.");P=F,this.hasBeenReset=!0}})),Object.defineProperty(d,"align",r({},c,{get:function(){return U},set:function(F){var N=t(F);if(!N)throw new SyntaxError("An invalid or illegal string was specified.");U=N,this.hasBeenReset=!0}})),d.displayState=void 0}return i.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},i}(),Fl=function(){function o(){}return o.prototype.decode=function(n,e){if(!n)return"";if(typeof n!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(n))},o}();function no(o){function n(t,r,i,a){return 3600*(0|t)+60*(0|r)+(0|i)+parseFloat(a||0)}var e=o.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return e?parseFloat(e[2])>59?n(e[2],e[3],0,e[4]):n(e[1],e[2],e[3],e[4]):null}var Bl=function(){function o(){this.values=Object.create(null)}var n=o.prototype;return n.set=function(e,t){this.get(e)||t===""||(this.values[e]=t)},n.get=function(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t},n.has=function(e){return e in this.values},n.alt=function(e,t,r){for(var i=0;i<r.length;++i)if(t===r[i]){this.set(e,t);break}},n.integer=function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},n.percent=function(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){var r=parseFloat(t);if(r>=0&&r<=100)return this.set(e,r),!0}return!1},o}();function ao(o,n,e,t){var r=t?o.split(t):[o];for(var i in r)if(typeof r[i]=="string"){var a=r[i].split(e);a.length===2&&n(a[0],a[1])}}var Xi=new Wi(0,0,""),$r=Xi.align==="middle"?"middle":"center";function Nl(o,n,e){var t=o;function r(){var a=no(o);if(a===null)throw new Error("Malformed timestamp: "+t);return o=o.replace(/^[^\sa-zA-Z-]+/,""),a}function i(){o=o.replace(/^\s+/,"")}if(i(),n.startTime=r(),i(),o.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+t);o=o.slice(3),i(),n.endTime=r(),i(),function(a,s){var l=new Bl;ao(a,function(u,g){var m;switch(u){case"region":for(var v=e.length-1;v>=0;v--)if(e[v].id===g){l.set(u,e[v].region);break}break;case"vertical":l.alt(u,g,["rl","lr"]);break;case"line":m=g.split(","),l.integer(u,m[0]),l.percent(u,m[0])&&l.set("snapToLines",!1),l.alt(u,m[0],["auto"]),m.length===2&&l.alt("lineAlign",m[1],["start",$r,"end"]);break;case"position":m=g.split(","),l.percent(u,m[0]),m.length===2&&l.alt("positionAlign",m[1],["start",$r,"end","line-left","line-right","auto"]);break;case"size":l.percent(u,g);break;case"align":l.alt(u,g,["start",$r,"end","left","right"])}},/:/,/\s/),s.region=l.get("region",null),s.vertical=l.get("vertical","");var d=l.get("line","auto");d==="auto"&&Xi.line===-1&&(d=-1),s.line=d,s.lineAlign=l.get("lineAlign","start"),s.snapToLines=l.get("snapToLines",!0),s.size=l.get("size",100),s.align=l.get("align",$r);var c=l.get("position","auto");c==="auto"&&Xi.position===50&&(c=s.align==="start"||s.align==="left"?0:s.align==="end"||s.align==="right"?100:50),s.position=c}(o,n)}function oo(o){return o.replace(/<br(?: \/)?>/gi,`
`)}var Ul=function(){function o(){this.state="INITIAL",this.buffer="",this.decoder=new Fl,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}var n=o.prototype;return n.parse=function(e){var t=this;function r(){var d=t.buffer,c=0;for(d=oo(d);c<d.length&&d[c]!=="\r"&&d[c]!==`
`;)++c;var u=d.slice(0,c);return d[c]==="\r"&&++c,d[c]===`
`&&++c,t.buffer=d.slice(c),u}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var i="";if(t.state==="INITIAL"){if(!/\r\n|\n/.test(t.buffer))return this;var a=(i=r()).match(/^()?WEBVTT([ \t].*)?$/);if(a==null||!a[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}for(var s=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(s?s=!1:i=r(),t.state){case"HEADER":/:/.test(i)?ao(i,function(d,c){},/:/):i||(t.state="ID");continue;case"NOTE":i||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){t.state="NOTE";break}if(!i)continue;if(t.cue=new Wi(0,0,""),t.state="CUE",i.indexOf("-->")===-1){t.cue.id=i;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{Nl(i,t.cue,t.regionList)}catch{t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var l=i.indexOf("-->")!==-1;if(!i||l&&(s=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(t.cue===null)continue;t.cue.text&&(t.cue.text+=`
`),t.cue.text+=i;continue;case"BADCUE":i||(t.state="ID")}}}catch{t.state==="CUETEXT"&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state=t.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},n.flush=function(){var e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this},o}(),Gl=/\r\n|\n\r|\n|\r/g,Ji=function(o,n,e){return e===void 0&&(e=0),o.slice(e,e+n.length)===n},Zi=function(o){for(var n=5381,e=o.length;e;)n=33*n^o.charCodeAt(--e);return(n>>>0).toString()};function en(o,n,e){return Zi(o.toString())+Zi(n.toString())+Zi(e)}function Hl(o,n,e,t,r,i,a){var s,l,d,c=new Ul,u=nt(new Uint8Array(o)).trim().replace(Gl,`
`).split(`
`),g=[],m=n?(s=n.baseTime,(l=n.timescale)===void 0&&(l=1),Gi(s,9e4,1/l)):0,v="00:00.000",y=0,k=0,b=!0;c.oncue=function(E){var C=e[t],S=e.ccOffset,D=(y-m)/9e4;if(C!=null&&C.new&&(k!==void 0?S=e.ccOffset=C.start:function(F,N,z){var K=F[N],W=F[K.prevCC];if(!W||!W.new&&K.new)return F.ccOffset=F.presentationOffset=K.start,void(K.new=!1);for(;(ne=W)!=null&&ne.new;){var ne;F.ccOffset+=K.start-W.start,K.new=!1,W=F[(K=W).prevCC]}F.presentationOffset=z}(e,t,D)),D){if(!n)return void(d=new Error("Missing initPTS for VTT MPEGTS"));S=D-e.presentationOffset}var I=E.endTime-E.startTime,P=qe(9e4*(E.startTime+S-k),9e4*r)/9e4;E.startTime=Math.max(P,0),E.endTime=Math.max(P+I,0);var U=E.text.trim();E.text=decodeURIComponent(encodeURIComponent(U)),E.id||(E.id=en(E.startTime,E.endTime,U)),E.endTime>0&&g.push(E)},c.onparsingerror=function(E){d=E},c.onflush=function(){d?a(d):i(g)},u.forEach(function(E){if(b){if(Ji(E,"X-TIMESTAMP-MAP=")){b=!1,E.slice(16).split(",").forEach(function(C){Ji(C,"LOCAL:")?v=C.slice(6):Ji(C,"MPEGTS:")&&(y=parseInt(C.slice(7)))});try{k=function(C){var S=parseInt(C.slice(-3)),D=parseInt(C.slice(-6,-4)),I=parseInt(C.slice(-9,-7)),P=C.length>9?parseInt(C.substring(0,C.indexOf(":"))):0;if(!(Y(S)&&Y(D)&&Y(I)&&Y(P)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+C);return S+=1e3*D,(S+=6e4*I)+36e5*P}(v)/1e3}catch(C){d=C}return}E===""&&(b=!1)}c.parse(E+`
`)}),c.flush()}var tn="stpp.ttml.im1t",so=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,lo=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,Kl={left:"start",center:"center",right:"end",start:"start",end:"end"};function co(o,n,e,t){var r=ge(new Uint8Array(o),["mdat"]);if(r.length!==0){var i,a,s,l,d=r.map(function(u){return nt(u)}),c=(i=n.baseTime,a=1,(s=n.timescale)===void 0&&(s=1),l===void 0&&(l=!1),Gi(i,a,1/s,l));try{d.forEach(function(u){return e(function(g,m){var v=new DOMParser().parseFromString(g,"text/xml").getElementsByTagName("tt")[0];if(!v)throw new Error("Invalid ttml");var y={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},k=Object.keys(y).reduce(function(D,I){return D[I]=v.getAttribute("ttp:"+I)||y[I],D},{}),b=v.getAttribute("xml:space")!=="preserve",E=ho(rn(v,"styling","style")),C=ho(rn(v,"layout","region")),S=rn(v,"body","[begin]");return[].map.call(S,function(D){var I=uo(D,b);if(!I||!D.hasAttribute("begin"))return null;var P=an(D.getAttribute("begin"),k),U=an(D.getAttribute("dur"),k),F=an(D.getAttribute("end"),k);if(P===null)throw fo(D);if(F===null){if(U===null)throw fo(D);F=P+U}var N=new Wi(P-m,F-m,I);N.id=en(N.startTime,N.endTime,N.text);var z=function(ne,X,ee){var re="http://www.w3.org/ns/ttml#styling",te=null,ae=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],ce=ne!=null&&ne.hasAttribute("style")?ne.getAttribute("style"):null;return ce&&ee.hasOwnProperty(ce)&&(te=ee[ce]),ae.reduce(function(fe,ye){var He=nn(X,re,ye)||nn(ne,re,ye)||nn(te,re,ye);return He&&(fe[ye]=He),fe},{})}(C[D.getAttribute("region")],E[D.getAttribute("style")],E),K=z.textAlign;if(K){var W=Kl[K];W&&(N.lineAlign=W),N.align=K}return M(N,z),N}).filter(function(D){return D!==null})}(u,c))})}catch(u){t(u)}}else t(new Error("Could not parse IMSC1 mdat"))}function rn(o,n,e){var t=o.getElementsByTagName(n)[0];return t?[].slice.call(t.querySelectorAll(e)):[]}function ho(o){return o.reduce(function(n,e){var t=e.getAttribute("xml:id");return t&&(n[t]=e),n},{})}function uo(o,n){return[].slice.call(o.childNodes).reduce(function(e,t,r){var i;return t.nodeName==="br"&&r?e+`
`:(i=t.childNodes)!=null&&i.length?uo(t,n):n?e+t.textContent.trim().replace(/\s+/g," "):e+t.textContent},"")}function nn(o,n,e){return o&&o.hasAttributeNS(n,e)?o.getAttributeNS(n,e):null}function fo(o){return new Error("Could not parse ttml timestamp "+o)}function an(o,n){if(!o)return null;var e=no(o);return e===null&&(so.test(o)?e=function(t,r){var i=so.exec(t),a=(0|i[4])+(0|i[5])/r.subFrameRate;return 3600*(0|i[1])+60*(0|i[2])+(0|i[3])+a/r.frameRate}(o,n):lo.test(o)&&(e=function(t,r){var i=lo.exec(t),a=Number(i[1]);switch(i[2]){case"h":return 3600*a;case"m":return 60*a;case"ms":return 1e3*a;case"f":return a/r.frameRate;case"t":return a/r.tickRate}return a}(o,n))),e}var Vl=function(){function o(e){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){var t=new jr(this,"textTrack1"),r=new jr(this,"textTrack2"),i=new jr(this,"textTrack3"),a=new jr(this,"textTrack4");this.cea608Parser1=new ro(1,t,r),this.cea608Parser2=new ro(3,i,a)}e.on(A.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(A.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(A.MANIFEST_LOADING,this.onManifestLoading,this),e.on(A.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(A.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(A.FRAG_LOADING,this.onFragLoading,this),e.on(A.FRAG_LOADED,this.onFragLoaded,this),e.on(A.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(A.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(A.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(A.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(A.BUFFER_FLUSHING,this.onBufferFlushing,this)}var n=o.prototype;return n.destroy=function(){var e=this.hls;e.off(A.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(A.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(A.MANIFEST_LOADING,this.onManifestLoading,this),e.off(A.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(A.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(A.FRAG_LOADING,this.onFragLoading,this),e.off(A.FRAG_LOADED,this.onFragLoaded,this),e.off(A.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(A.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(A.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(A.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(A.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null},n.addCues=function(e,t,r,i,a){for(var s,l,d,c,u=!1,g=a.length;g--;){var m=a[g],v=(s=m[0],l=m[1],d=t,c=r,Math.min(l,c)-Math.max(s,d));if(v>=0&&(m[0]=Math.min(m[0],t),m[1]=Math.max(m[1],r),u=!0,v/(r-t)>.5))return}if(u||a.push([t,r]),this.config.renderTextTracksNatively){var y=this.captionsTracks[e];this.Cues.newCue(y,t,r,i)}else{var k=this.Cues.newCue(null,t,r,i);this.hls.trigger(A.CUES_PARSED,{type:"captions",cues:k,track:e})}},n.onInitPtsFound=function(e,t){var r=this,i=t.frag,a=t.id,s=t.initPTS,l=t.timescale,d=this.unparsedVttFrags;a==="main"&&(this.initPTS[i.cc]={baseTime:s,timescale:l}),d.length&&(this.unparsedVttFrags=[],d.forEach(function(c){r.onFragLoaded(A.FRAG_LOADED,c)}))},n.getExistingTrack=function(e){var t=this.media;if(t)for(var r=0;r<t.textTracks.length;r++){var i=t.textTracks[r];if(i[e])return i}return null},n.createCaptionsTrack=function(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)},n.createNativeTrack=function(e){if(!this.captionsTracks[e]){var t=this.captionsProperties,r=this.captionsTracks,i=this.media,a=t[e],s=a.label,l=a.languageCode,d=this.getExistingTrack(e);if(d)r[e]=d,Vt(r[e]),da(r[e],i);else{var c=this.createTextTrack("captions",s,l);c&&(c[e]=!0,r[e]=c)}}},n.createNonNativeTrack=function(e){if(!this.nonNativeCaptionsTracks[e]){var t=this.captionsProperties[e];if(t){var r={_id:e,label:t.label,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=r,this.hls.trigger(A.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[r]})}}},n.createTextTrack=function(e,t,r){var i=this.media;if(i)return i.addTextTrack(e,t,r)},n.onMediaAttaching=function(e,t){this.media=t.media,this._cleanTracks()},n.onMediaDetaching=function(){var e=this.captionsTracks;Object.keys(e).forEach(function(t){Vt(e[t]),delete e[t]}),this.nonNativeCaptionsTracks={}},n.onManifestLoading=function(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},n._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var r=0;r<t.length;r++)Vt(t[r])}},n.onSubtitleTracksUpdated=function(e,t){var r=this,i=t.subtitleTracks||[],a=i.some(function(d){return d.textCodec===tn});if(this.config.enableWebVTT||a&&this.config.enableIMSC1){if(Qa(this.tracks,i))return void(this.tracks=i);if(this.textTracks=[],this.tracks=i,this.config.renderTextTracksNatively){var s=this.media?this.media.textTracks:null;this.tracks.forEach(function(d,c){var u;if(s&&c<s.length){for(var g=null,m=0;m<s.length;m++)if(zl(s[m],d)){g=s[m];break}g&&(u=g)}if(u)Vt(u);else{var v=r._captionsOrSubtitlesFromCharacteristics(d);(u=r.createTextTrack(v,d.name,d.lang))&&(u.mode="disabled")}u&&(u.groupId=d.groupId,r.textTracks.push(u))})}else if(this.tracks.length){var l=this.tracks.map(function(d){return{label:d.name,kind:d.type.toLowerCase(),default:d.default,subtitleTrack:d}});this.hls.trigger(A.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:l})}}},n._captionsOrSubtitlesFromCharacteristics=function(e){if(e.attrs.CHARACTERISTICS){var t=/transcribes-spoken-dialog/gi.test(e.attrs.CHARACTERISTICS),r=/describes-music-and-sound/gi.test(e.attrs.CHARACTERISTICS);if(t&&r)return"captions"}return"subtitles"},n.onManifestLoaded=function(e,t){var r=this;this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(function(i){var a=/(?:CC|SERVICE)([1-4])/.exec(i.instreamId);if(a){var s="textTrack"+a[1],l=r.captionsProperties[s];l&&(l.label=i.name,i.lang&&(l.languageCode=i.lang),l.media=i)}})},n.closedCaptionsForLevel=function(e){var t=this.hls.levels[e.level];return t==null?void 0:t.attrs["CLOSED-CAPTIONS"]},n.onFragLoading=function(e,t){var r=this.cea608Parser1,i=this.cea608Parser2,a=this.lastSn,s=this.lastPartIndex;if(this.enabled&&r&&i&&t.frag.type===ve){var l,d,c=t.frag.sn,u=(l=t==null||(d=t.part)==null?void 0:d.index)!=null?l:-1;c===a+1||c===a&&u===s+1||(r.reset(),i.reset()),this.lastSn=c,this.lastPartIndex=u}},n.onFragLoaded=function(e,t){var r=t.frag,i=t.payload;if(r.type===At)if(i.byteLength){var a=r.decryptdata,s="stats"in t;if(a==null||!a.encrypted||s){var l=this.tracks[r.level],d=this.vttCCs;d[r.cc]||(d[r.cc]={start:r.start,prevCC:this.prevCC,new:!0},this.prevCC=r.cc),l&&l.textCodec===tn?this._parseIMSC1(r,i):this._parseVTTs(t)}}else this.hls.trigger(A.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:new Error("Empty subtitle payload")})},n._parseIMSC1=function(e,t){var r=this,i=this.hls;co(t,this.initPTS[e.cc],function(a){r._appendCues(a,e.level),i.trigger(A.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},function(a){R.log("Failed to parse IMSC1: "+a),i.trigger(A.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:a})})},n._parseVTTs=function(e){var t,r=this,i=e.frag,a=e.payload,s=this.initPTS,l=this.unparsedVttFrags,d=s.length-1;if(s[i.cc]||d!==-1){var c=this.hls;Hl((t=i.initSegment)!=null&&t.data?Mt(i.initSegment.data,new Uint8Array(a)):a,this.initPTS[i.cc],this.vttCCs,i.cc,i.start,function(u){r._appendCues(u,i.level),c.trigger(A.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:i})},function(u){var g=u.message==="Missing initPTS for VTT MPEGTS";g?l.push(e):r._fallbackToIMSC1(i,a),R.log("Failed to parse VTT cue: "+u),g&&d>i.cc||c.trigger(A.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i,error:u})})}else l.push(e)},n._fallbackToIMSC1=function(e,t){var r=this,i=this.tracks[e.level];i.textCodec||co(t,this.initPTS[e.cc],function(){i.textCodec=tn,r._parseIMSC1(e,t)},function(){i.textCodec="wvtt"})},n._appendCues=function(e,t){var r=this.hls;if(this.config.renderTextTracksNatively){var i=this.textTracks[t];if(!i||i.mode==="disabled")return;e.forEach(function(l){return ca(i,l)})}else{var a=this.tracks[t];if(!a)return;var s=a.default?"default":"subtitles"+t;r.trigger(A.CUES_PARSED,{type:"subtitles",cues:e,track:s})}},n.onFragDecrypted=function(e,t){t.frag.type===At&&this.onFragLoaded(A.FRAG_LOADED,t)},n.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},n.onFragParsingUserdata=function(e,t){var r=this.cea608Parser1,i=this.cea608Parser2;if(this.enabled&&r&&i){var a=t.frag,s=t.samples;if(a.type!==ve||this.closedCaptionsForLevel(a)!=="NONE")for(var l=0;l<s.length;l++){var d=s[l].bytes;if(d){var c=this.extractCea608Data(d);r.addData(s[l].pts,c[0]),i.addData(s[l].pts,c[1])}}}},n.onBufferFlushing=function(e,t){var r=t.startOffset,i=t.endOffset,a=t.endOffsetSubtitles,s=t.type,l=this.media;if(l&&!(l.currentTime<i)){if(!s||s==="video"){var d=this.captionsTracks;Object.keys(d).forEach(function(u){return wi(d[u],r,i)})}if(this.config.renderTextTracksNatively&&r===0&&a!==void 0){var c=this.textTracks;Object.keys(c).forEach(function(u){return wi(c[u],r,a)})}}},n.extractCea608Data=function(e){for(var t=[[],[]],r=31&e[0],i=2,a=0;a<r;a++){var s=e[i++],l=127&e[i++],d=127&e[i++];if((l!==0||d!==0)&&4&s){var c=3&s;c!==0&&c!==1||(t[c].push(l),t[c].push(d))}}return t},o}();function zl(o,n){return!!o&&o.label===n.name&&!(o.textTrack1||o.textTrack2)}var Yl=function(){function o(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}var n=o.prototype;return n.setStreamController=function(e){this.streamController=e},n.destroy=function(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},n.registerListeners=function(){var e=this.hls;e.on(A.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(A.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(A.MANIFEST_PARSED,this.onManifestParsed,this),e.on(A.BUFFER_CODECS,this.onBufferCodecs,this),e.on(A.MEDIA_DETACHING,this.onMediaDetaching,this)},n.unregisterListener=function(){var e=this.hls;e.off(A.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(A.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(A.MANIFEST_PARSED,this.onManifestParsed,this),e.off(A.BUFFER_CODECS,this.onBufferCodecs,this),e.off(A.MEDIA_DETACHING,this.onMediaDetaching,this)},n.onFpsDropLevelCapping=function(e,t){var r=this.hls.levels[t.droppedLevel];this.isLevelAllowed(r)&&this.restrictedLevels.push({bitrate:r.bitrate,height:r.height,width:r.width})},n.onMediaAttaching=function(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null},n.onManifestParsed=function(e,t){var r=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,r.config.capLevelToPlayerSize&&t.video&&this.startCapping()},n.onBufferCodecs=function(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()},n.onMediaDetaching=function(){this.stopCapping()},n.detectPlayerSize=function(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){var e=this.hls.levels;if(e.length){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e.length-1),t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},n.getMaxLevel=function(e){var t=this,r=this.hls.levels;if(!r.length)return-1;var i=r.filter(function(a,s){return t.isLevelAllowed(a)&&s<=e});return this.clientRect=null,o.getMaxLevelByMediaSize(i,this.mediaWidth,this.mediaHeight)},n.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},n.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},n.getDimensions=function(){if(this.clientRect)return this.clientRect;var e=this.media,t={width:0,height:0};if(e){var r=e.getBoundingClientRect();t.width=r.width,t.height=r.height,t.width||t.height||(t.width=r.right-r.left||e.width||0,t.height=r.bottom-r.top||e.height||0)}return this.clientRect=t,t},n.isLevelAllowed=function(e){return!this.restrictedLevels.some(function(t){return e.bitrate===t.bitrate&&e.width===t.width&&e.height===t.height})},o.getMaxLevelByMediaSize=function(e,t,r){if(e==null||!e.length)return-1;for(var i,a,s=e.length-1,l=0;l<e.length;l+=1){var d=e[l];if((d.width>=t||d.height>=r)&&(i=d,!(a=e[l+1])||i.width!==a.width||i.height!==a.height)){s=l;break}}return s},L(o,[{key:"mediaWidth",get:function(){return this.getDimensions().width*this.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*this.contentScaleFactor}},{key:"contentScaleFactor",get:function(){var e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return e}}]),o}(),jl=function(){function o(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}var n=o.prototype;return n.setStreamController=function(e){this.streamController=e},n.registerListeners=function(){this.hls.on(A.MEDIA_ATTACHING,this.onMediaAttaching,this)},n.unregisterListeners=function(){this.hls.off(A.MEDIA_ATTACHING,this.onMediaAttaching,this)},n.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},n.onMediaAttaching=function(e,t){var r=this.hls.config;if(r.capLevelOnFPSDrop){var i=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=i,i&&typeof i.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),r.fpsDroppedMonitoringPeriod)}},n.checkFPS=function(e,t,r){var i=performance.now();if(t){if(this.lastTime){var a=i-this.lastTime,s=r-this.lastDroppedFrames,l=t-this.lastDecodedFrames,d=1e3*s/a,c=this.hls;if(c.trigger(A.FPS_DROP,{currentDropped:s,currentDecoded:l,totalDroppedFrames:r}),d>0&&s>c.config.fpsDroppedMonitoringThreshold*l){var u=c.currentLevel;R.warn("drop FPS ratio greater than max allowed value for currentLevel: "+u),u>0&&(c.autoLevelCapping===-1||c.autoLevelCapping>=u)&&(u-=1,c.trigger(A.FPS_DROP_LEVEL_CAPPING,{level:u,droppedLevel:c.currentLevel}),c.autoLevelCapping=u,this.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=r,this.lastDecodedFrames=t}},n.checkFPSInterval=function(){var e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},o}(),qr="[eme]",po=function(){function o(e){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=o.CDMCleanupPromise?[o.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=R.debug.bind(R,qr),this.log=R.log.bind(R,qr),this.warn=R.warn.bind(R,qr),this.error=R.error.bind(R,qr),this.hls=e,this.config=e.config,this.registerListeners()}var n=o.prototype;return n.destroy=function(){this.unregisterListeners(),this.onMediaDetached();var e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null,this.config=null},n.registerListeners=function(){this.hls.on(A.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(A.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(A.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(A.MANIFEST_LOADED,this.onManifestLoaded,this)},n.unregisterListeners=function(){this.hls.off(A.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(A.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(A.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(A.MANIFEST_LOADED,this.onManifestLoaded,this)},n.getLicenseServerUrl=function(e){var t=this.config,r=t.drmSystems,i=t.widevineLicenseUrl,a=r[e];if(a)return a.licenseUrl;if(e===Ee.WIDEVINE&&i)return i;throw new Error('no license server URL configured for key-system "'+e+'"')},n.getServerCertificateUrl=function(e){var t=this.config.drmSystems[e];if(t)return t.serverCertificateUrl;this.log('No Server Certificate in config.drmSystems["'+e+'"]')},n.attemptKeySystemAccess=function(e){var t=this,r=this.hls.levels,i=function(l,d,c){return!!l&&c.indexOf(l)===d},a=r.map(function(l){return l.audioCodec}).filter(i),s=r.map(function(l){return l.videoCodec}).filter(i);return a.length+s.length===0&&s.push("avc1.42e01e"),new Promise(function(l,d){(function c(u){var g=u.shift();t.getMediaKeysPromise(g,a,s).then(function(m){return l({keySystem:g,mediaKeys:m})}).catch(function(m){u.length?c(u):d(m instanceof Qe?m:new Qe({type:J.KEY_SYSTEM_ERROR,details:O.KEY_SYSTEM_NO_ACCESS,error:m,fatal:!0},m.message))})})(e)})},n.requestMediaKeySystemAccess=function(e,t){var r=this.config.requestMediaKeySystemAccessFunc;if(typeof r!="function"){var i="Configured requestMediaKeySystemAccess is not a function "+r;return Bn===null&&self.location.protocol==="http:"&&(i="navigator.requestMediaKeySystemAccess is not available over insecure protocol "+location.protocol),Promise.reject(new Error(i))}return r(e,t)},n.getMediaKeysPromise=function(e,t,r){var i=this,a=function(c,u,g,m){var v;switch(c){case Ee.FAIRPLAY:v=["cenc","sinf"];break;case Ee.WIDEVINE:case Ee.PLAYREADY:v=["cenc"];break;case Ee.CLEARKEY:v=["cenc","keyids"];break;default:throw new Error("Unknown key-system: "+c)}return function(y,k,b,E){return[{initDataTypes:y,persistentState:E.persistentState||"not-allowed",distinctiveIdentifier:E.distinctiveIdentifier||"not-allowed",sessionTypes:E.sessionTypes||[E.sessionType||"temporary"],audioCapabilities:k.map(function(C){return{contentType:'audio/mp4; codecs="'+C+'"',robustness:E.audioRobustness||"",encryptionScheme:E.audioEncryptionScheme||null}}),videoCapabilities:b.map(function(C){return{contentType:'video/mp4; codecs="'+C+'"',robustness:E.videoRobustness||"",encryptionScheme:E.videoEncryptionScheme||null}})}]}(v,u,g,m)}(e,t,r,this.config.drmSystemOptions),s=this.keySystemAccessPromises[e],l=s==null?void 0:s.keySystemAccess;if(!l){this.log('Requesting encrypted media "'+e+'" key-system access with config: '+JSON.stringify(a)),l=this.requestMediaKeySystemAccess(e,a);var d=this.keySystemAccessPromises[e]={keySystemAccess:l};return l.catch(function(c){i.log('Failed to obtain access to key-system "'+e+'": '+c)}),l.then(function(c){i.log('Access for key-system "'+c.keySystem+'" obtained');var u=i.fetchServerCertificate(e);return i.log('Create media-keys for "'+e+'"'),d.mediaKeys=c.createMediaKeys().then(function(g){return i.log('Media-keys created for "'+e+'"'),u.then(function(m){return m?i.setMediaKeysServerCertificate(g,e,m):g})}),d.mediaKeys.catch(function(g){i.error('Failed to create media-keys for "'+e+'"}: '+g)}),d.mediaKeys})}return l.then(function(){return s.mediaKeys})},n.createMediaKeySessionContext=function(e){var t=e.decryptdata,r=e.keySystem,i=e.mediaKeys;this.log('Creating key-system session "'+r+'" keyId: '+at(t.keyId||[]));var a=i.createSession(),s={decryptdata:t,keySystem:r,mediaKeys:i,mediaKeysSession:a,keyStatus:"status-pending"};return this.mediaKeySessions.push(s),s},n.renewKeySession=function(e){var t=e.decryptdata;if(t.pssh){var r=this.createMediaKeySessionContext(e),i=this.getKeyIdString(t);this.keyIdToKeySessionPromise[i]=this.generateRequestWithPreferredKeySession(r,"cenc",t.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)},n.getKeyIdString=function(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(e.keyId===null)throw new Error("keyId is null");return at(e.keyId)},n.updateKeySession=function(e,t){var r,i=e.mediaKeysSession;return this.log('Updating key-session "'+i.sessionId+'" for keyID '+at(((r=e.decryptdata)==null?void 0:r.keyId)||[])+`
      } (data length: `+(t&&t.byteLength)+")"),i.update(t)},n.selectKeySystemFormat=function(e){var t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log("Selecting key-system from fragment (sn: "+e.sn+" "+e.type+": "+e.level+") key formats "+t.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise},n.getKeyFormatPromise=function(e){var t=this;return new Promise(function(r,i){var a=ui(t.config),s=e.map(On).filter(function(l){return!!l&&a.indexOf(l)!==-1});return t.getKeySystemSelectionPromise(s).then(function(l){var d=l.keySystem,c=Fn(d);c?r(c):i(new Error('Unable to find format for key-system "'+d+'"'))}).catch(i)})},n.loadKey=function(e){var t=this,r=e.keyInfo.decryptdata,i=this.getKeyIdString(r),a="(keyId: "+i+' format: "'+r.keyFormat+'" method: '+r.method+" uri: "+r.uri+")";this.log("Starting session for key "+a);var s=this.keyIdToKeySessionPromise[i];return s||(s=this.keyIdToKeySessionPromise[i]=this.getKeySystemForKeyPromise(r).then(function(l){var d=l.keySystem,c=l.mediaKeys;return t.throwIfDestroyed(),t.log("Handle encrypted media sn: "+e.frag.sn+" "+e.frag.type+": "+e.frag.level+" using key "+a),t.attemptSetMediaKeys(d,c).then(function(){t.throwIfDestroyed();var u=t.createMediaKeySessionContext({keySystem:d,mediaKeys:c,decryptdata:r});return t.generateRequestWithPreferredKeySession(u,"cenc",r.pssh,"playlist-key")})})).catch(function(l){return t.handleError(l)}),s},n.throwIfDestroyed=function(e){if(!this.hls)throw new Error("invalid state")},n.handleError=function(e){this.hls&&(this.error(e.message),e instanceof Qe?this.hls.trigger(A.ERROR,e.data):this.hls.trigger(A.ERROR,{type:J.KEY_SYSTEM_ERROR,details:O.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))},n.getKeySystemForKeyPromise=function(e){var t=this.getKeyIdString(e),r=this.keyIdToKeySessionPromise[t];if(!r){var i=On(e.keyFormat),a=i?[i]:ui(this.config);return this.attemptKeySystemAccess(a)}return r},n.getKeySystemSelectionPromise=function(e){if(e.length||(e=ui(this.config)),e.length===0)throw new Qe({type:J.KEY_SYSTEM_ERROR,details:O.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},"Missing key-system license configuration options "+JSON.stringify({drmSystems:this.config.drmSystems}));return this.attemptKeySystemAccess(e)},n._onMediaEncrypted=function(e){var t=this,r=e.initDataType,i=e.initData;if(this.debug('"'+e.type+'" event: init data type: "'+r+'"'),i!==null){var a,s;if(r==="sinf"&&this.config.drmSystems[Ee.FAIRPLAY]){var l=De(new Uint8Array(i));try{var d=di(JSON.parse(l).sinf),c=Yn(new Uint8Array(d));if(!c)return;a=c.subarray(8,24),s=Ee.FAIRPLAY}catch{return void this.warn('Failed to parse sinf "encrypted" event message initData')}}else{var u=function(C){if(!(C instanceof ArrayBuffer)||C.byteLength<32)return null;var S={version:0,systemId:"",kids:null,data:null},D=new DataView(C),I=D.getUint32(0);if(C.byteLength!==I&&I>44||D.getUint32(4)!==1886614376||(S.version=D.getUint32(8)>>>24,S.version>1))return null;S.systemId=at(new Uint8Array(C,12,16));var P=D.getUint32(28);if(S.version===0){if(I-32<P)return null;S.data=new Uint8Array(C,32,P)}else if(S.version===1){S.kids=[];for(var U=0;U<P;U++)S.kids.push(new Uint8Array(C,32+16*U,16))}return S}(i);if(u===null)return;u.version===0&&u.systemId===Mn&&u.data&&(a=u.data.subarray(8,24)),s=function(C){if(C===Mn)return Ee.WIDEVINE}(u.systemId)}if(s&&a){for(var g=at(a),m=this.keyIdToKeySessionPromise,v=this.mediaKeySessions,y=m[g],k=function(){var C=v[b],S=C.decryptdata;if(S.pssh||!S.keyId)return"continue";var D=at(S.keyId);return g===D||S.uri.replace(/-/g,"").indexOf(g)!==-1?(y=m[D],delete m[D],S.pssh=new Uint8Array(i),S.keyId=a,y=m[g]=y.then(function(){return t.generateRequestWithPreferredKeySession(C,r,i,"encrypted-event-key-match")}),"break"):void 0},b=0;b<v.length;b++){var E=k();if(E!=="continue"&&E==="break")break}y||(y=m[g]=this.getKeySystemSelectionPromise([s]).then(function(C){var S,D=C.keySystem,I=C.mediaKeys;t.throwIfDestroyed();var P=new mi("ISO-23001-7",g,(S=Fn(D))!=null?S:"");return P.pssh=new Uint8Array(i),P.keyId=a,t.attemptSetMediaKeys(D,I).then(function(){t.throwIfDestroyed();var U=t.createMediaKeySessionContext({decryptdata:P,keySystem:D,mediaKeys:I});return t.generateRequestWithPreferredKeySession(U,r,i,"encrypted-event-no-match")})})),y.catch(function(C){return t.handleError(C)})}}},n._onWaitingForKey=function(e){this.log('"'+e.type+'" event')},n.attemptSetMediaKeys=function(e,t){var r=this,i=this.setMediaKeysQueue.slice();this.log('Setting media-keys for "'+e+'"');var a=Promise.all(i).then(function(){if(!r.media)throw new Error("Attempted to set mediaKeys without media element attached");return r.media.setMediaKeys(t)});return this.setMediaKeysQueue.push(a),a.then(function(){r.log('Media-keys set for "'+e+'"'),i.push(a),r.setMediaKeysQueue=r.setMediaKeysQueue.filter(function(s){return i.indexOf(s)===-1})})},n.generateRequestWithPreferredKeySession=function(e,t,r,i){var a,s,l=this,d=(a=this.config.drmSystems)==null||(s=a[e.keySystem])==null?void 0:s.generateRequest;if(d)try{var c=d.call(this.hls,t,r,e);if(!c)throw new Error("Invalid response from configured generateRequest filter");t=c.initDataType,r=e.decryptdata.pssh=c.initData?new Uint8Array(c.initData):null}catch(y){var u;if(this.warn(y.message),(u=this.hls)!=null&&u.config.debug)throw y}if(r===null)return this.log('Skipping key-session request for "'+i+'" (no initData)'),Promise.resolve(e);var g=this.getKeyIdString(e.decryptdata);this.log('Generating key-session request for "'+i+'": '+g+" (init data type: "+t+" length: "+(r?r.byteLength:null)+")");var m=new Yr;e.mediaKeysSession.onmessage=function(y){var k=e.mediaKeysSession;if(k){var b=y.messageType,E=y.message;l.log('"'+b+'" message event for session "'+k.sessionId+'" message size: '+E.byteLength),b==="license-request"||b==="license-renewal"?l.renewLicense(e,E).catch(function(C){l.handleError(C),m.emit("error",C)}):b==="license-release"?e.keySystem===Ee.FAIRPLAY&&(l.updateKeySession(e,Pn("acknowledged")),l.removeSession(e)):l.warn('unhandled media key message type "'+b+'"')}else m.emit("error",new Error("invalid state"))},e.mediaKeysSession.onkeystatuseschange=function(y){if(e.mediaKeysSession){l.onKeyStatusChange(e);var k=e.keyStatus;m.emit("keyStatus",k),k==="expired"&&(l.warn(e.keySystem+" expired for key "+g),l.renewKeySession(e))}else m.emit("error",new Error("invalid state"))};var v=new Promise(function(y,k){m.on("error",k),m.on("keyStatus",function(b){b.startsWith("usable")?y():b==="output-restricted"?k(new Qe({type:J.KEY_SYSTEM_ERROR,details:O.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):b==="internal-error"?k(new Qe({type:J.KEY_SYSTEM_ERROR,details:O.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},'key status changed to "'+b+'"')):b==="expired"?k(new Error("key expired while generating request")):l.warn('unhandled key status change "'+b+'"')})});return e.mediaKeysSession.generateRequest(t,r).then(function(){var y;l.log('Request generated for key-session "'+((y=e.mediaKeysSession)==null?void 0:y.sessionId)+'" keyId: '+g)}).catch(function(y){throw new Qe({type:J.KEY_SYSTEM_ERROR,details:O.KEY_SYSTEM_NO_SESSION,error:y,fatal:!1},"Error generating key-session request: "+y)}).then(function(){return v}).catch(function(y){throw m.removeAllListeners(),l.removeSession(e),y}).then(function(){return m.removeAllListeners(),e})},n.onKeyStatusChange=function(e){var t=this;e.mediaKeysSession.keyStatuses.forEach(function(r,i){t.log('key status change "'+r+'" for keyStatuses keyId: '+at("buffer"in i?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i))+" session keyId: "+at(new Uint8Array(e.decryptdata.keyId||[]))+" uri: "+e.decryptdata.uri),e.keyStatus=r})},n.fetchServerCertificate=function(e){var t=this.config,r=new t.loader(t),i=this.getServerCertificateUrl(e);return i?(this.log('Fetching serverCertificate for "'+e+'"'),new Promise(function(a,s){var l={responseType:"arraybuffer",url:i},d=t.certLoadPolicy.default,c={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},u={onSuccess:function(g,m,v,y){a(g.data)},onError:function(g,m,v,y){s(new Qe({type:J.KEY_SYSTEM_ERROR,details:O.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:v,response:T({url:l.url,data:void 0},g)},'"'+e+'" certificate request failed ('+i+"). Status: "+g.code+" ("+g.text+")"))},onTimeout:function(g,m,v){s(new Qe({type:J.KEY_SYSTEM_ERROR,details:O.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:v,response:{url:l.url,data:void 0}},'"'+e+'" certificate request timed out ('+i+")"))},onAbort:function(g,m,v){s(new Error("aborted"))}};r.load(l,c,u)})):Promise.resolve()},n.setMediaKeysServerCertificate=function(e,t,r){var i=this;return new Promise(function(a,s){e.setServerCertificate(r).then(function(l){i.log("setServerCertificate "+(l?"success":"not supported by CDM")+" ("+(r==null?void 0:r.byteLength)+') on "'+t+'"'),a(e)}).catch(function(l){s(new Qe({type:J.KEY_SYSTEM_ERROR,details:O.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:l,fatal:!0},l.message))})})},n.renewLicense=function(e,t){var r=this;return this.requestLicense(e,new Uint8Array(t)).then(function(i){return r.updateKeySession(e,new Uint8Array(i)).catch(function(a){throw new Qe({type:J.KEY_SYSTEM_ERROR,details:O.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:a,fatal:!0},a.message)})})},n.setupLicenseXHR=function(e,t,r,i){var a=this,s=this.config.licenseXhrSetup;return s?Promise.resolve().then(function(){if(!r.decryptdata)throw new Error("Key removed");return s.call(a.hls,e,t,r,i)}).catch(function(l){if(!r.decryptdata)throw l;return e.open("POST",t,!0),s.call(a.hls,e,t,r,i)}).then(function(l){return e.readyState||e.open("POST",t,!0),{xhr:e,licenseChallenge:l||i}}):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:i}))},n.requestLicense=function(e,t){var r=this,i=this.config.keyLoadPolicy.default;return new Promise(function(a,s){var l=r.getLicenseServerUrl(e.keySystem);r.log("Sending license request to URL: "+l);var d=new XMLHttpRequest;d.responseType="arraybuffer",d.onreadystatechange=function(){if(!r.hls||!e.mediaKeysSession)return s(new Error("invalid state"));if(d.readyState===4)if(d.status===200){r._requestLicenseFailureCount=0;var c=d.response;r.log("License received "+(c instanceof ArrayBuffer?c.byteLength:c));var u=r.config.licenseResponseCallback;if(u)try{c=u.call(r.hls,d,l,e)}catch(y){r.error(y)}a(c)}else{var g=i.errorRetry,m=g?g.maxNumRetry:0;if(r._requestLicenseFailureCount++,r._requestLicenseFailureCount>m||d.status>=400&&d.status<500)s(new Qe({type:J.KEY_SYSTEM_ERROR,details:O.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:d,response:{url:l,data:void 0,code:d.status,text:d.statusText}},"License Request XHR failed ("+l+"). Status: "+d.status+" ("+d.statusText+")"));else{var v=m-r._requestLicenseFailureCount+1;r.warn("Retrying license request, "+v+" attempts left"),r.requestLicense(e,t).then(a,s)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=d,r.setupLicenseXHR(d,l,e,t).then(function(c){var u=c.xhr,g=c.licenseChallenge;u.send(g)})})},n.onMediaAttached=function(e,t){if(this.config.emeEnabled){var r=t.media;this.media=r,r.addEventListener("encrypted",this.onMediaEncrypted),r.addEventListener("waitingforkey",this.onWaitingForKey)}},n.onMediaDetached=function(){var e=this,t=this.media,r=this.mediaKeySessions;t&&(t.removeEventListener("encrypted",this.onMediaEncrypted),t.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},mi.clearKeyUriToKeyIdMap();var i=r.length;o.CDMCleanupPromise=Promise.all(r.map(function(a){return e.removeSession(a)}).concat(t==null?void 0:t.setMediaKeys(null).catch(function(a){e.log("Could not clear media keys: "+a+". media.src: "+(t==null?void 0:t.src))}))).then(function(){i&&(e.log("finished closing key sessions and clearing media keys"),r.length=0)}).catch(function(a){e.log("Could not close sessions and clear media keys: "+a+". media.src: "+(t==null?void 0:t.src))})},n.onManifestLoading=function(){this.keyFormatPromise=null},n.onManifestLoaded=function(e,t){var r=t.sessionKeys;if(r&&this.config.emeEnabled&&!this.keyFormatPromise){var i=r.reduce(function(a,s){return a.indexOf(s.keyFormat)===-1&&a.push(s.keyFormat),a},[]);this.log("Selecting key-system from session-keys "+i.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(i)}},n.removeSession=function(e){var t=this,r=e.mediaKeysSession,i=e.licenseXhr;if(r){this.log("Remove licenses and keys and close session "+r.sessionId),r.onmessage=null,r.onkeystatuseschange=null,i&&i.readyState!==XMLHttpRequest.DONE&&i.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;var a=this.mediaKeySessions.indexOf(e);return a>-1&&this.mediaKeySessions.splice(a,1),r.remove().catch(function(s){t.log("Could not remove session: "+s)}).then(function(){return r.close()}).catch(function(s){t.log("Could not close session: "+s)})}},o}();po.CDMCleanupPromise=void 0;var Qe=function(o){function n(e,t){var r;return(r=o.call(this,t)||this).data=void 0,e.error||(e.error=new Error(t)),r.data=e,e.err=e.error,r}return j(n,o),n}(de(Error)),$l="m",Qr="a",on="v",sn="av",go="i",ql="tt",Ql=function(){function o(e){var t=this;this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=function(){t.initialized&&(t.starved=!0),t.buffering=!0},this.onPlaying=function(){t.initialized||(t.initialized=!0),t.buffering=!1},this.applyPlaylistData=function(a){try{t.apply(a,{ot:$l,su:!t.initialized})}catch(s){R.warn("Could not generate manifest CMCD data.",s)}},this.applyFragmentData=function(a){try{var s=a.frag,l=t.hls.levels[s.level],d=t.getObjectType(s),c={d:1e3*s.duration,ot:d};d!==on&&d!==Qr&&d!=sn||(c.br=l.bitrate/1e3,c.tb=t.getTopBandwidth(d)/1e3,c.bl=t.getBufferLength(d)),t.apply(a,c)}catch(u){R.warn("Could not generate segment CMCD data.",u)}},this.hls=e;var r=this.config=e.config,i=r.cmcd;i!=null&&(r.pLoader=this.createPlaylistLoader(),r.fLoader=this.createFragmentLoader(),this.sid=i.sessionId||o.uuid(),this.cid=i.contentId,this.useHeaders=i.useHeaders===!0,this.registerListeners())}var n=o.prototype;return n.registerListeners=function(){var e=this.hls;e.on(A.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(A.MEDIA_DETACHED,this.onMediaDetached,this),e.on(A.BUFFER_CREATED,this.onBufferCreated,this)},n.unregisterListeners=function(){var e=this.hls;e.off(A.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(A.MEDIA_DETACHED,this.onMediaDetached,this),e.off(A.BUFFER_CREATED,this.onBufferCreated,this)},n.destroy=function(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null},n.onMediaAttached=function(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)},n.onMediaDetached=function(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)},n.onBufferCreated=function(e,t){var r,i;this.audioBuffer=(r=t.tracks.audio)==null?void 0:r.buffer,this.videoBuffer=(i=t.tracks.video)==null?void 0:i.buffer},n.createData=function(){var e;return{v:1,sf:"h",sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}},n.apply=function(e,t){t===void 0&&(t={}),M(t,this.createData());var r=t.ot===go||t.ot===on||t.ot===sn;if(this.starved&&r&&(t.bs=!0,t.su=!0,this.starved=!1),t.su==null&&(t.su=this.buffering),this.useHeaders){var i=o.toHeaders(t);if(!Object.keys(i).length)return;e.headers||(e.headers={}),M(e.headers,i)}else{var a=o.toQuery(t);if(!a)return;e.url=o.appendQueryToUri(e.url,a)}},n.getObjectType=function(e){var t=e.type;return t==="subtitle"?ql:e.sn==="initSegment"?go:t==="audio"?Qr:t==="main"?this.hls.audioTracks.length?on:sn:void 0},n.getTopBandwidth=function(e){var t,r=0,i=this.hls;if(e===Qr)t=i.audioTracks;else{var a=i.maxAutoLevel,s=a>-1?a+1:i.levels.length;t=i.levels.slice(0,s)}for(var l,d=Le(t);!(l=d()).done;){var c=l.value;c.bitrate>r&&(r=c.bitrate)}return r>0?r:NaN},n.getBufferLength=function(e){var t=this.hls.media,r=e===Qr?this.audioBuffer:this.videoBuffer;return r&&t?1e3*Ae.bufferInfo(r,t.currentTime,this.config.maxBufferHole).len:NaN},n.createPlaylistLoader=function(){var e=this.config.pLoader,t=this.applyPlaylistData,r=e||this.config.loader;return function(){function i(s){this.loader=void 0,this.loader=new r(s)}var a=i.prototype;return a.destroy=function(){this.loader.destroy()},a.abort=function(){this.loader.abort()},a.load=function(s,l,d){t(s),this.loader.load(s,l,d)},L(i,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),i}()},n.createFragmentLoader=function(){var e=this.config.fLoader,t=this.applyFragmentData,r=e||this.config.loader;return function(){function i(s){this.loader=void 0,this.loader=new r(s)}var a=i.prototype;return a.destroy=function(){this.loader.destroy()},a.abort=function(){this.loader.abort()},a.load=function(s,l,d){t(s),this.loader.load(s,l,d)},L(i,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),i}()},o.uuid=function(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)},o.serialize=function(e){for(var t,r=[],i=function(y){return!Number.isNaN(y)&&y!=null&&y!==""&&y!==!1},a=function(y){return Math.round(y)},s=function(y){return 100*a(y/100)},l={br:a,d:a,bl:s,dl:s,mtp:s,nor:function(y){return encodeURIComponent(y)},rtp:s,tb:a},d=Le(Object.keys(e||{}).sort());!(t=d()).done;){var c=t.value,u=e[c];if(i(u)&&!(c==="v"&&u===1||c=="pr"&&u===1)){var g=l[c];g&&(u=g(u));var m=typeof u,v=void 0;v=c==="ot"||c==="sf"||c==="st"?c+"="+u:m==="boolean"?c:m==="number"?c+"="+u:c+"="+JSON.stringify(u),r.push(v)}}return r.join(",")},o.toHeaders=function(e){for(var t={},r=["Object","Request","Session","Status"],i=[{},{},{},{}],a={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},s=0,l=Object.keys(e);s<l.length;s++){var d=l[s];i[a[d]!=null?a[d]:1][d]=e[d]}for(var c=0;c<i.length;c++){var u=o.serialize(i[c]);u&&(t["CMCD-"+r[c]]=u)}return t},o.toQuery=function(e){return"CMCD="+encodeURIComponent(o.serialize(e))},o.appendQueryToUri=function(e,t){if(!t)return e;var r=e.includes("?")?"&":"?";return""+e+r+t},o}(),Wl=function(){function o(e){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.log=R.log.bind(R,"[content-steering]:"),this.registerListeners()}var n=o.prototype;return n.registerListeners=function(){var e=this.hls;e.on(A.MANIFEST_LOADING,this.onManifestLoading,this),e.on(A.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(A.MANIFEST_PARSED,this.onManifestParsed,this),e.on(A.ERROR,this.onError,this)},n.unregisterListeners=function(){var e=this.hls;e&&(e.off(A.MANIFEST_LOADING,this.onManifestLoading,this),e.off(A.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(A.MANIFEST_PARSED,this.onManifestParsed,this),e.off(A.ERROR,this.onError,this))},n.startLoad=function(){if(this.started=!0,self.clearTimeout(this.reloadTimer),this.enabled&&this.uri)if(this.updated){var e=Math.max(1e3*this.timeToLoad-(performance.now()-this.updated),0);this.scheduleRefresh(this.uri,e)}else this.loadSteeringManifest(this.uri)},n.stopLoad=function(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),self.clearTimeout(this.reloadTimer)},n.destroy=function(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null},n.removeLevel=function(e){var t=this.levels;t&&(this.levels=t.filter(function(r){return r!==e}))},n.onManifestLoading=function(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null},n.onManifestLoaded=function(e,t){var r=t.contentSteering;r!==null&&(this.pathwayId=r.pathwayId,this.uri=r.uri,this.started&&this.startLoad())},n.onManifestParsed=function(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks},n.onError=function(e,t){var r=t.errorAction;if((r==null?void 0:r.action)===ft&&r.flags===Br){var i=this.pathwayPriority,a=this.pathwayId;this.penalizedPathways[a]||(this.penalizedPathways[a]=performance.now()),!i&&this.levels&&(i=this.levels.reduce(function(s,l){return s.indexOf(l.pathwayId)===-1&&s.push(l.pathwayId),s},[])),i&&i.length>1&&(this.updatePathwayPriority(i),r.resolved=this.pathwayId!==a)}},n.filterParsedLevels=function(e){this.levels=e;var t=this.getLevelsForPathway(this.pathwayId);if(t.length===0){var r=e[0].pathwayId;this.log("No levels found in Pathway "+this.pathwayId+'. Setting initial Pathway to "'+r+'"'),t=this.getLevelsForPathway(r),this.pathwayId=r}return t.length!==e.length?(this.log("Found "+t.length+"/"+e.length+' levels in Pathway "'+this.pathwayId+'"'),t):e},n.getLevelsForPathway=function(e){return this.levels===null?[]:this.levels.filter(function(t){return e===t.pathwayId})},n.updatePathwayPriority=function(e){var t;this.pathwayPriority=e;var r=this.penalizedPathways,i=performance.now();Object.keys(r).forEach(function(u){i-r[u]>3e5&&delete r[u]});for(var a=0;a<e.length;a++){var s=e[a];if(!r[s]){if(s===this.pathwayId)return;var l=this.hls.nextLoadLevel,d=this.hls.levels[l];if((t=this.getLevelsForPathway(s)).length>0){this.log('Setting Pathway to "'+s+'"'),this.pathwayId=s,this.hls.trigger(A.LEVELS_UPDATED,{levels:t});var c=this.hls.levels[l];d&&c&&this.levels&&(c.attrs["STABLE-VARIANT-ID"]!==d.attrs["STABLE-VARIANT-ID"]&&c.bitrate!==d.bitrate&&this.log("Unstable Pathways change from bitrate "+d.bitrate+" to "+c.bitrate),this.hls.nextLoadLevel=l);break}}}},n.clonePathways=function(e){var t=this,r=this.levels;if(r){var i={},a={};e.forEach(function(s){var l=s.ID,d=s["BASE-ID"],c=s["URI-REPLACEMENT"];if(!r.some(function(g){return g.pathwayId===l})){var u=t.getLevelsForPathway(d).map(function(g){var m=M({},g);m.details=void 0,m.url=vo(g.uri,g.attrs["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",c);var v=new xe(g.attrs);v["PATHWAY-ID"]=l;var y=v.AUDIO&&v.AUDIO+"_clone_"+l,k=v.SUBTITLES&&v.SUBTITLES+"_clone_"+l;y&&(i[v.AUDIO]=y,v.AUDIO=y),k&&(a[v.SUBTITLES]=k,v.SUBTITLES=k),m.attrs=v;var b=new or(m);return Nr(b,"audio",y),Nr(b,"text",k),b});r.push.apply(r,u),mo(t.audioTracks,i,c,l),mo(t.subtitleTracks,a,c,l)}})}},n.loadSteeringManifest=function(e){var t,r=this,i=this.hls.config,a=i.loader;this.loader&&this.loader.destroy(),this.loader=new a(i);try{t=new self.URL(e)}catch{return this.enabled=!1,void this.log("Failed to parse Steering Manifest URI: "+e)}if(t.protocol!=="data:"){var s=0|(this.hls.bandwidthEstimate||i.abrEwmaDefaultEstimate);t.searchParams.set("_HLS_pathway",this.pathwayId),t.searchParams.set("_HLS_throughput",""+s)}var l={responseType:"json",url:t.href},d=i.steeringManifestLoadPolicy.default,c=d.errorRetry||d.timeoutRetry||{},u={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:c.maxNumRetry||0,retryDelay:c.retryDelayMs||0,maxRetryDelay:c.maxRetryDelayMs||0},g={onSuccess:function(m,v,y,k){r.log('Loaded steering manifest: "'+t+'"');var b=m.data;if(b.VERSION===1){r.updated=performance.now(),r.timeToLoad=b.TTL;var E=b["RELOAD-URI"],C=b["PATHWAY-CLONES"],S=b["PATHWAY-PRIORITY"];if(E)try{r.uri=new self.URL(E,t).href}catch{return r.enabled=!1,void r.log("Failed to parse Steering Manifest RELOAD-URI: "+E)}r.scheduleRefresh(r.uri||y.url),C&&r.clonePathways(C),S&&r.updatePathwayPriority(S)}else r.log("Steering VERSION "+b.VERSION+" not supported!")},onError:function(m,v,y,k){if(r.log("Error loading steering manifest: "+m.code+" "+m.text+" ("+v.url+")"),r.stopLoad(),m.code===410)return r.enabled=!1,void r.log("Steering manifest "+v.url+" no longer available");var b=1e3*r.timeToLoad;if(m.code!==429)r.scheduleRefresh(r.uri||v.url,b);else{var E=r.loader;if(typeof(E==null?void 0:E.getResponseHeader)=="function"){var C=E.getResponseHeader("Retry-After");C&&(b=1e3*parseFloat(C))}r.log("Steering manifest "+v.url+" rate limited")}},onTimeout:function(m,v,y){r.log("Timeout loading steering manifest ("+v.url+")"),r.scheduleRefresh(r.uri||v.url)}};this.log("Requesting steering manifest: "+t),this.loader.load(l,u,g)},n.scheduleRefresh=function(e,t){var r=this;t===void 0&&(t=1e3*this.timeToLoad),self.clearTimeout(this.reloadTimer),this.reloadTimer=self.setTimeout(function(){r.loadSteeringManifest(e)},t)},o}();function mo(o,n,e,t){o&&Object.keys(n).forEach(function(r){var i=o.filter(function(a){return a.groupId===r}).map(function(a){var s=M({},a);return s.details=void 0,s.attrs=new xe(s.attrs),s.url=s.attrs.URI=vo(a.url,a.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",e),s.groupId=s.attrs["GROUP-ID"]=n[r],s.attrs["PATHWAY-ID"]=t,s});o.push.apply(o,i)})}function vo(o,n,e,t){var r,i=t.HOST,a=t.PARAMS,s=t[e];n&&(r=s==null?void 0:s[n])&&(o=r);var l=new self.URL(o);return i&&!r&&(l.host=i),a&&Object.keys(a).sort().forEach(function(d){d&&l.searchParams.set(d,a[d])}),l.href}var Xl=/^age:\s*[\d.]+\s*$/im,bo=function(){function o(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new Tr,this.retryDelay=0}var n=o.prototype;return n.destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null},n.abortInternal=function(){var e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))},n.abort=function(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},n.load=function(e,t,r){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=r,this.loadInternal()},n.loadInternal=function(){var e=this,t=this.config,r=this.context;if(t){var i=this.loader=new self.XMLHttpRequest,a=this.stats;a.loading.first=0,a.loaded=0,a.aborted=!1;var s=this.xhrSetup;s?Promise.resolve().then(function(){if(!e.stats.aborted)return s(i,r.url)}).catch(function(l){return i.open("GET",r.url,!0),s(i,r.url)}).then(function(){e.stats.aborted||e.openAndSendXhr(i,r,t)}).catch(function(l){e.callbacks.onError({code:i.status,text:l.message},r,i,a)}):this.openAndSendXhr(i,r,t)}},n.openAndSendXhr=function(e,t,r){e.readyState||e.open("GET",t.url,!0);var i=this.context.headers,a=r.loadPolicy,s=a.maxTimeToFirstByteMs,l=a.maxLoadTimeMs;if(i)for(var d in i)e.setRequestHeader(d,i[d]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),r.timeout=s&&Y(s)?s:l,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),r.timeout),e.send()},n.readystatechange=function(){var e=this.context,t=this.loader,r=this.stats;if(e&&t){var i=t.readyState,a=this.config;if(!r.aborted&&i>=2&&(r.loading.first===0&&(r.loading.first=Math.max(self.performance.now(),r.loading.start),a.timeout!==a.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),a.timeout=a.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),a.loadPolicy.maxLoadTimeMs-(r.loading.first-r.loading.start)))),i===4)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;var s=t.status,l=t.responseType!=="text";if(s>=200&&s<300&&(l&&t.response||t.responseText!==null)){r.loading.end=Math.max(self.performance.now(),r.loading.first);var d=l?t.response:t.responseText,c=t.responseType==="arraybuffer"?d.byteLength:d.length;if(r.loaded=r.total=c,r.bwEstimate=8e3*r.total/(r.loading.end-r.loading.first),!this.callbacks)return;var u=this.callbacks.onProgress;if(u&&u(r,e,d,t),!this.callbacks)return;var g={url:t.responseURL,data:d,code:s};this.callbacks.onSuccess(g,r,e,t)}else{var m=a.loadPolicy.errorRetry;Mr(m,r.retry,!1,s)?this.retry(m):(R.error(s+" while loading "+e.url),this.callbacks.onError({code:s,text:t.statusText},e,t,r))}}}},n.loadtimeout=function(){var e,t=(e=this.config)==null?void 0:e.loadPolicy.timeoutRetry;if(Mr(t,this.stats.retry,!0))this.retry(t);else{R.warn("timeout while loading "+this.context.url);var r=this.callbacks;r&&(this.abortInternal(),r.onTimeout(this.stats,this.context,this.loader))}},n.retry=function(e){var t=this.context,r=this.stats;this.retryDelay=Si(e,r.retry),r.retry++,R.warn((status?"HTTP Status "+status:"Timeout")+" while loading "+t.url+", retrying "+r.retry+"/"+e.maxNumRetry+" in "+this.retryDelay+"ms"),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)},n.loadprogress=function(e){var t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)},n.getCacheAge=function(){var e=null;if(this.loader&&Xl.test(this.loader.getAllResponseHeaders())){var t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e},n.getResponseHeader=function(e){return this.loader&&new RegExp("^"+e+":\\s*[\\d.]+\\s*$","im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null},o}(),Jl=/(\d+)-(\d+)\/(\d+)/,yo=function(){function o(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||Zl,this.controller=new self.AbortController,this.stats=new Tr}var n=o.prototype;return n.destroy=function(){this.loader=this.callbacks=null,this.abortInternal()},n.abortInternal=function(){var e=this.response;e!=null&&e.ok||(this.stats.aborted=!0,this.controller.abort())},n.abort=function(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},n.load=function(e,t,r){var i=this,a=this.stats;if(a.loading.start)throw new Error("Loader can only be used once.");a.loading.start=self.performance.now();var s=function(v,y){var k={method:"GET",mode:"cors",credentials:"same-origin",signal:y,headers:new self.Headers(M({},v.headers))};return v.rangeEnd&&k.headers.set("Range","bytes="+v.rangeStart+"-"+String(v.rangeEnd-1)),k}(e,this.controller.signal),l=r.onProgress,d=e.responseType==="arraybuffer",c=d?"byteLength":"length",u=t.loadPolicy,g=u.maxTimeToFirstByteMs,m=u.maxLoadTimeMs;this.context=e,this.config=t,this.callbacks=r,this.request=this.fetchSetup(e,s),self.clearTimeout(this.requestTimeout),t.timeout=g&&Y(g)?g:m,this.requestTimeout=self.setTimeout(function(){i.abortInternal(),r.onTimeout(a,e,i.response)},t.timeout),self.fetch(this.request).then(function(v){i.response=i.loader=v;var y=Math.max(self.performance.now(),a.loading.start);if(self.clearTimeout(i.requestTimeout),t.timeout=m,i.requestTimeout=self.setTimeout(function(){i.abortInternal(),r.onTimeout(a,e,i.response)},m-(y-a.loading.start)),!v.ok){var k=v.status,b=v.statusText;throw new ed(b||"fetch, bad network response",k,v)}return a.loading.first=y,a.total=function(E){var C=E.get("Content-Range");if(C){var S=function(I){var P=Jl.exec(I);if(P)return parseInt(P[2])-parseInt(P[1])+1}(C);if(Y(S))return S}var D=E.get("Content-Length");if(D)return parseInt(D)}(v.headers)||a.total,l&&Y(t.highWaterMark)?i.loadProgressively(v,a,e,t.highWaterMark,l):d?v.arrayBuffer():e.responseType==="json"?v.json():v.text()}).then(function(v){var y=i.response;self.clearTimeout(i.requestTimeout),a.loading.end=Math.max(self.performance.now(),a.loading.first);var k=v[c];k&&(a.loaded=a.total=k);var b={url:y.url,data:v,code:y.status};l&&!Y(t.highWaterMark)&&l(a,e,v,y),r.onSuccess(b,a,e,y)}).catch(function(v){if(self.clearTimeout(i.requestTimeout),!a.aborted){var y=v&&v.code||0,k=v?v.message:null;r.onError({code:y,text:k},e,v?v.details:null,a)}})},n.getCacheAge=function(){var e=null;if(this.response){var t=this.response.headers.get("age");e=t?parseFloat(t):null}return e},n.getResponseHeader=function(e){return this.response?this.response.headers.get(e):null},n.loadProgressively=function(e,t,r,i,a){i===void 0&&(i=0);var s=new qa,l=e.body.getReader();return function d(){return l.read().then(function(c){if(c.done)return s.dataLength&&a(t,r,s.flush(),e),Promise.resolve(new ArrayBuffer(0));var u=c.value,g=u.length;return t.loaded+=g,g<i||s.dataLength?(s.push(u),s.dataLength>=i&&a(t,r,s.flush(),e)):a(t,r,u,e),d()}).catch(function(){return Promise.reject()})}()},o}();function Zl(o,n){return new self.Request(o.url,n)}var ed=function(o){function n(e,t,r){var i;return(i=o.call(this,e)||this).code=void 0,i.details=void 0,i.code=t,i.details=r,i}return j(n,o),n}(de(Error)),td=/\s/,rd=T(T({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:bo,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:yl,bufferController:Sl,capLevelController:Yl,errorController:Us,fpsController:jl,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:Bn,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,certLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null}},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},{cueHandler:{newCue:function(o,n,e,t){for(var r,i,a,s,l,d=[],c=self.VTTCue||self.TextTrackCue,u=0;u<t.rows.length;u++)if(a=!0,s=0,l="",!(r=t.rows[u]).isEmpty()){for(var g,m=0;m<r.chars.length;m++)td.test(r.chars[m].uchar)&&a?s++:(l+=r.chars[m].uchar,a=!1);r.cueStartTime=n,n===e&&(e+=1e-4),s>=16?s--:s++;var v=oo(l.trim()),y=en(n,e,v);o!=null&&(g=o.cues)!=null&&g.getCueById(y)||((i=new c(n,e,v)).id=y,i.line=u+1,i.align="left",i.position=10+Math.min(80,10*Math.floor(8*s/32)),d.push(i))}return o&&d.length&&(d.sort(function(k,b){return k.line==="auto"||b.line==="auto"?0:k.line>8&&b.line>8?b.line-k.line:k.line-b.line}),d.forEach(function(k){return ca(o,k)})),d}},enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:xl,subtitleTrackController:Tl,timelineController:Vl,audioStreamController:wl,audioTrackController:El,emeController:po,cmcdController:Ql,contentSteeringController:Wl});function ln(o){return o&&typeof o=="object"?Array.isArray(o)?o.map(ln):Object.keys(o).reduce(function(n,e){return n[e]=ln(o[e]),n},{}):o}function id(o){var n=o.loader;n!==yo&&n!==bo?(R.log("[config]: Custom loader detected, cannot enable progressive streaming"),o.progressive=!1):function(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}()&&(o.loader=yo,o.progressive=!0,o.enableSoftwareAES=!0,R.log("[config]: Progressive streaming enabled, using FetchLoader"))}var wo=function(){function o(e){e===void 0&&(e={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new Yr,this._autoLevelCapping=void 0,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,Ln(e.debug||!1,"Hls instance");var t=this.config=function(z,K){if((K.liveSyncDurationCount||K.liveMaxLatencyDurationCount)&&(K.liveSyncDuration||K.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(K.liveMaxLatencyDurationCount!==void 0&&(K.liveSyncDurationCount===void 0||K.liveMaxLatencyDurationCount<=K.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(K.liveMaxLatencyDuration!==void 0&&(K.liveSyncDuration===void 0||K.liveMaxLatencyDuration<=K.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');var W=ln(z),ne=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return["manifest","level","frag"].forEach(function(X){var ee=(X==="level"?"playlist":X)+"LoadPolicy",re=K[ee]===void 0,te=[];ne.forEach(function(ae){var ce=X+"Loading"+ae,fe=K[ce];if(fe!==void 0&&re){te.push(ce);var ye=W[ee].default;switch(K[ee]={default:ye},ae){case"TimeOut":ye.maxLoadTimeMs=fe,ye.maxTimeToFirstByteMs=fe;break;case"MaxRetry":ye.errorRetry.maxNumRetry=fe,ye.timeoutRetry.maxNumRetry=fe;break;case"RetryDelay":ye.errorRetry.retryDelayMs=fe,ye.timeoutRetry.retryDelayMs=fe;break;case"MaxRetryTimeout":ye.errorRetry.maxRetryDelayMs=fe,ye.timeoutRetry.maxRetryDelayMs=fe}}}),te.length&&R.warn('hls.js config: "'+te.join('", "')+'" setting(s) are deprecated, use "'+ee+'": '+JSON.stringify(K[ee]))}),T(T({},W),K)}(o.DefaultConfig,e);this.userConfig=e,this._autoLevelCapping=-1,t.progressive&&id(t);var r=t.abrController,i=t.bufferController,a=t.capLevelController,s=t.errorController,l=t.fpsController,d=new s(this),c=this.abrController=new r(this),u=this.bufferController=new i(this),g=this.capLevelController=new a(this),m=new l(this),v=new Ds(this),y=new Is(this),k=t.contentSteeringController,b=k?new k(this):null,E=this.levelController=new Gs(this,b),C=new Hs(this),S=new Vs(this.config),D=this.streamController=new vl(this,C,S);g.setStreamController(D),m.setStreamController(D);var I=[v,E,D];b&&I.splice(1,0,b),this.networkControllers=I;var P=[c,u,g,m,y,C];this.audioTrackController=this.createController(t.audioTrackController,I);var U=t.audioStreamController;U&&I.push(new U(this,C,S)),this.subtitleTrackController=this.createController(t.subtitleTrackController,I);var F=t.subtitleStreamController;F&&I.push(new F(this,C,S)),this.createController(t.timelineController,P),S.emeController=this.emeController=this.createController(t.emeController,P),this.cmcdController=this.createController(t.cmcdController,P),this.latencyController=this.createController(Ps,P),this.coreComponents=P,I.push(d);var N=d.onErrorOut;typeof N=="function"&&this.on(A.ERROR,N,d)}o.isSupported=function(){return function(){var e=Ir();if(!e)return!1;var t=Ca(),r=e&&typeof e.isTypeSupported=="function"&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),i=!t||t.prototype&&typeof t.prototype.appendBuffer=="function"&&typeof t.prototype.remove=="function";return!!r&&!!i}()};var n=o.prototype;return n.createController=function(e,t){if(e){var r=new e(this);return t&&t.push(r),r}return null},n.on=function(e,t,r){r===void 0&&(r=this),this._emitter.on(e,t,r)},n.once=function(e,t,r){r===void 0&&(r=this),this._emitter.once(e,t,r)},n.removeAllListeners=function(e){this._emitter.removeAllListeners(e)},n.off=function(e,t,r,i){r===void 0&&(r=this),this._emitter.off(e,t,r,i)},n.listeners=function(e){return this._emitter.listeners(e)},n.emit=function(e,t,r){return this._emitter.emit(e,t,r)},n.trigger=function(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(r){R.error("An internal error happened while handling event "+e+'. Error message: "'+r.message+'". Here is a stacktrace:',r),this.trigger(A.ERROR,{type:J.OTHER_ERROR,details:O.INTERNAL_EXCEPTION,fatal:!1,event:e,error:r})}return!1},n.listenerCount=function(e){return this._emitter.listenerCount(e)},n.destroy=function(){R.log("destroy"),this.trigger(A.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(function(t){return t.destroy()}),this.networkControllers.length=0,this.coreComponents.forEach(function(t){return t.destroy()}),this.coreComponents.length=0;var e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null},n.attachMedia=function(e){R.log("attachMedia"),this._media=e,this.trigger(A.MEDIA_ATTACHING,{media:e})},n.detachMedia=function(){R.log("detachMedia"),this.trigger(A.MEDIA_DETACHING,void 0),this._media=null},n.loadSource=function(e){this.stopLoad();var t=this.media,r=this.url,i=this.url=It.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});R.log("loadSource:"+i),t&&r&&(r!==i||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(A.MANIFEST_LOADING,{url:e})},n.startLoad=function(e){e===void 0&&(e=-1),R.log("startLoad("+e+")"),this.networkControllers.forEach(function(t){t.startLoad(e)})},n.stopLoad=function(){R.log("stopLoad"),this.networkControllers.forEach(function(e){e.stopLoad()})},n.swapAudioCodec=function(){R.log("swapAudioCodec"),this.streamController.swapAudioCodec()},n.recoverMediaError=function(){R.log("recoverMediaError");var e=this._media;this.detachMedia(),e&&this.attachMedia(e)},n.removeLevel=function(e,t){t===void 0&&(t=0),this.levelController.removeLevel(e,t)},L(o,[{key:"levels",get:function(){var e=this.levelController.levels;return e||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){R.log("set currentLevel:"+e),this.loadLevel=e,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){R.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){R.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){R.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){R.log("set startLevel:"+e),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(e){var t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){this._autoLevelCapping!==e&&(R.log("set autoLevelCapping:"+e),this._autoLevelCapping=e)}},{key:"bandwidthEstimate",get:function(){var e=this.abrController.bwEstimator;return e?e.getEstimate():NaN}},{key:"ttfbEstimate",get:function(){var e=this.abrController.bwEstimator;return e?e.getEstimateTTFB():NaN}},{key:"maxHdcpLevel",get:function(){return this._maxHdcpLevel},set:function(e){xi.indexOf(e)>-1&&(this._maxHdcpLevel=e)}},{key:"autoLevelEnabled",get:function(){return this.levelController.manualLevel===-1}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var e=this.levels,t=this.config.minAutoBitrate;if(!e)return 0;for(var r=e.length,i=0;i<r;i++)if(e[i].maxBitrate>=t)return i;return 0}},{key:"maxAutoLevel",get:function(){var e,t=this.levels,r=this.autoLevelCapping,i=this.maxHdcpLevel;if(e=r===-1&&t&&t.length?t.length-1:r,i)for(var a=e;a--;){var s=t[a].attrs["HDCP-LEVEL"];if(s&&s<=i)return a}return e}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:"playingDate",get:function(){return this.streamController.currentProgramDateTime}},{key:"mainForwardBufferInfo",get:function(){return this.streamController.getMainFwdBufferInfo()}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(e){this.config.lowLatencyMode=e}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}],[{key:"version",get:function(){return"1.4.12"}},{key:"Events",get:function(){return A}},{key:"ErrorTypes",get:function(){return J}},{key:"ErrorDetails",get:function(){return O}},{key:"DefaultConfig",get:function(){return o.defaultConfig?o.defaultConfig:rd},set:function(e){o.defaultConfig=e}}]),o}();return wo.defaultConfig=void 0,wo},typeof exports=="object"&&typeof module<"u"?module.exports=f():typeof define=="function"&&define.amd?define(f):(p=typeof globalThis<"u"?globalThis:p||self).Hls=f()})(!1);const Jr=["play","playing","timeupdate"],oh=ai(),sh=[{label:"2.0X",value:2},{label:"1.5X",value:1.5},{label:"1.0X",value:1},{label:"0.8X",value:.8},{label:"0.5X",value:.5}];class bn extends Be(){constructor(){super(),H(this,"ctx"),H(this,"_player"),H(this,"_container"),H(this,"_slot"),H(this,"_playerController"),H(this,"_playerBtn"),H(this,"_progress"),H(this,"_progressDot"),H(this,"_progressWrap"),H(this,"_progressWrapValue"),H(this,"requestAnimationFrameId"),H(this,"moveProgress"),H(this,"_playerControllerBottom"),H(this,"_playerControllerBottomRight"),H(this,"_playerControllerBottomLeft"),H(this,"_playerControllerBottomPlayBtn"),H(this,"_playerControllerBottomTimeCurrent"),H(this,"_playerControllerBottomTimeDuration"),H(this,"_playerControllerBottomTimeDivide"),H(this,"_playControllerBottomClarity"),H(this,"_playControllerBottomSpeed"),H(this,"_playControllerBottomSpeedIcon"),H(this,"_playControllerBottomVolumeProgress"),H(this,"_playControllerBottomRightFullScreen"),H(this,"_playControllerBottomVolume"),H(this,"_playControllerBottomSpeedPopover"),H(this,"controllerBarTimeId"),H(this,"_playerTip"),H(this,"_playerTipTime"),H(this,"_playerTipText"),H(this,"_volume"),H(this,"_video"),H(this,"_hls"),H(this,"changeClarityToSetVideo",()=>{const{currentTime:f,playbackRate:w,volume:T,currentState:_}=this.ctx;this.setCurrentTime(f),this.setPlaybackRate(w),this.setVolume(T),Jr.includes(_)?this.play():this.pause()}),H(this,"changeClarity",f=>{this.ctx.clarity=f.detail.value;const w=this.ctx.levelMap.get(f.detail.value);w&&this._hls&&(this._hls.loadSource(w),this._hls.startLoad(),this.changeClarityToSetVideo())}),H(this,"createClaritySelect",()=>{const{levels:f}=this.ctx;if(this._playControllerBottomClarity.innerHTML="",f.length<=0)return;const w=document.createDocumentFragment();f.forEach(L=>{const{name:B,url:M}=L;if(!B||!M)return;this.ctx.levelMap.set(B,M);const j=document.createElement("r-option");j.setAttribute("value",B),j.innerHTML=B,w.appendChild(j)});const T=document.createElement("r-select");T.setAttribute("value",this.ctx.clarity||"Auto"),T.appendChild(w),T.setAttribute("type","text"),T.setAttribute("trigger","hover,click"),T.setAttribute("placement","top");const _=this._player.getAttribute("id");_&&T.setAttribute("getPopupContainerId",_),T.setAttribute("dropdownclass","video-clarity-dropdown"),T.addEventListener("change",this.changeClarity),this._playControllerBottomClarity.appendChild(T)}),H(this,"manifestLoaded",(f,w)=>{if(f==="hlsManifestLoaded"){const{url:T,levels:_=[]}=w;if(_.length<=0)return;_.forEach(L=>{this.ctx.levelMap.get(L.name)!==L.url&&this.ctx.levels.push(L)}),this.ctx.levelMap.get("Auto")||(this.ctx.levels.push({name:"Auto",url:T}),this.ctx.levelMap.set("Auto",T)),this.ctx.url=T,this.createClaritySelect(),this.change("hlsManifestLoaded",{data:w})}}),H(this,"updatePlayer",()=>{var f;const w=window.Hls;this.innerHTML="",this.contains(this._player)||this.appendChild(this._player),this._hls&&(this._hls.destroy(),this._hls=void 0),this._video=document.createElement("video"),this._video.setAttribute("class","ran-player-video"),this._video.setAttribute("preload","auto"),this._video.setAttribute("x5-video-player-type","h5"),this._video.setAttribute("x5-video-orientation","portrait"),this._video.setAttribute("webkit-playsinline","true"),this._video.setAttribute("playsinline","true"),this._video.setAttribute("controls","false"),this._video.controls=!1,this._video.setAttribute("initial-time","0.01");try{this._video.canPlayType("application/vnd.apple.mpegurl")&&this.src?this._video.src=this.src:w!=null&&w.isSupported()&&this.src&&(this._hls=new w,this._hls&&(this._hls.off(w.Events.MANIFEST_LOADED,this.manifestLoaded),this._hls.on(w.Events.MANIFEST_LOADED,this.manifestLoaded),this._hls.off(w.Events.ERROR,this.hlsError),this._hls.on(w.Events.ERROR,this.hlsError),this._hls.loadSource(this.src),this._hls.attachMedia(this._video)),this._container.appendChild(this._video),(f=this._video.parentElement)==null||f.setAttribute("class","ran-player-contain")),this.listenEvent()}catch{}}),H(this,"hlsError",(f,w)=>{this.change("hlsError",{event:f,data:w}),this._video&&(this._video.src=this.src)}),H(this,"change",(f,w)=>{const T=this.getCurrentTime(),_=this.getTotalTime();this.debug&&console.log(f,w),this.dispatchEvent(new CustomEvent("change",{detail:{type:f,data:w,currentTime:T,duration:_,tag:this}}))}),H(this,"onCanplay",f=>{this.ctx.currentState=f.type,ze(this._playerControllerBottomPlayBtn,"ran-player-controller-bottom-left-btn-pause"),Pe(this._playerControllerBottomPlayBtn,"ran-player-controller-bottom-left-btn-play"),this.change("canplay",f),this.resize()}),H(this,"onCanplaythrough",f=>{this.ctx.currentState=f.type,this.change("canplaythrough",f)}),H(this,"onComplete",f=>{this.ctx.currentState=f.type,this.change("complete",f)}),H(this,"onDurationchange",f=>{this.ctx.currentState=f.type,this.change("durationchange",f)}),H(this,"onEmptied",f=>{this.ctx.currentState=f.type,this.change("emptied",f)}),H(this,"onEnded",f=>{this.ctx.currentState=f.type,this.change("ended",f)}),H(this,"onError",f=>{this.ctx.currentState=f.type,this.change("error",f)}),H(this,"onLoadedmetadata",f=>{this.ctx.currentState=f.type,this.change("loadedmetadata",f)}),H(this,"onLoadstart",f=>{this.ctx.currentState=f.type,this.change("loadstart",f)}),H(this,"onProgress",f=>{this.ctx.currentState=f.type,this.change("progress",f)}),H(this,"onRatechange",f=>{this.ctx.currentState=f.type,this.change("ratechange",f)}),H(this,"onSeeked",f=>{this.ctx.currentState=f.type,this.change("seeked",f)}),H(this,"onSeeking",f=>{this.ctx.currentState=f.type,this.change("seeking",f)}),H(this,"onStalled",f=>{this.ctx.currentState=f.type,this.change("stalled",f)}),H(this,"onSuspend",f=>{this.ctx.currentState=f.type,this.change("suspend",f)}),H(this,"onLoadeddata",f=>{this.ctx.currentState=f.type;const w=this.getTotalTime();this.ctx.duration=w,this._playerControllerBottomTimeCurrent.innerText="00:00",this._playerControllerBottomTimeDivide.innerText="/",this._playerControllerBottomTimeDuration.innerText=Ar(this.ctx.duration),this.change("loadeddata",f)}),H(this,"onTimeupdate",f=>{this.ctx.currentState=f.type,this.change("timeupdate",f)}),H(this,"onVolumechange",f=>{this.ctx.currentState=f.type,this.change("volumechange",f)}),H(this,"onWaiting",f=>{this.ctx.currentState=f.type,this.change("waiting",f)}),H(this,"onPlay",f=>{this.ctx.currentState=f.type,this.requestAnimationFrame(this.updateCurrentProgress),ze(this._playerControllerBottomPlayBtn,"ran-player-controller-bottom-left-btn-play"),Pe(this._playerControllerBottomPlayBtn,"ran-player-controller-bottom-left-btn-pause"),this.showControllerBar(),this.change("play",f)}),H(this,"onPlaying",f=>{this.ctx.currentState=f.type,this._playerBtn.style.setProperty("display","none"),ze(this._playerControllerBottomPlayBtn,"ran-player-controller-bottom-left-btn-play"),Pe(this._playerControllerBottomPlayBtn,"ran-player-controller-bottom-left-btn-pause"),this.requestAnimationFrame(this.updateCurrentProgress),this.showControllerBar(),this.change("playing",f)}),H(this,"onPause",f=>{this.ctx.currentState=f.type,this._playerBtn.style.setProperty("display","block"),this.change("pause",f),ze(this._playerControllerBottomPlayBtn,"ran-player-controller-bottom-left-btn-pause"),Pe(this._playerControllerBottomPlayBtn,"ran-player-controller-bottom-left-btn-play"),this.cancelAnimationFrame(),this._playerController.style.setProperty("opacity","1"),this.controllerBarTimeId&&(clearTimeout(this.controllerBarTimeId),this.controllerBarTimeId=void 0)}),H(this,"clearListenerEvent",()=>{this._video&&(this._video.removeEventListener("canplay",this.onCanplay),this._video.removeEventListener("canplaythrough",this.onCanplaythrough),this._video.removeEventListener("complete",this.onComplete),this._video.removeEventListener("durationchange",this.onDurationchange),this._video.removeEventListener("emptied",this.onEmptied),this._video.removeEventListener("ended",this.onEnded),this._video.removeEventListener("error",this.onError),this._video.removeEventListener("loadeddata",this.onLoadeddata),this._video.removeEventListener("loadedmetadata",this.onLoadedmetadata),this._video.removeEventListener("loadstart",this.onLoadstart),this._video.removeEventListener("pause",this.onPause),this._video.removeEventListener("play",this.onPlay),this._video.removeEventListener("playing",this.onPlaying),this._video.removeEventListener("progress",this.onProgress),this._video.removeEventListener("ratechange",this.onRatechange),this._video.removeEventListener("seeked",this.onSeeked),this._video.removeEventListener("seeking",this.onSeeking),this._video.removeEventListener("stalled",this.onStalled),this._video.removeEventListener("suspend",this.onSuspend),this._video.removeEventListener("timeupdate",this.onTimeupdate),this._video.removeEventListener("volumechange",this.onVolumechange),this._video.removeEventListener("waiting",this.onWaiting))}),H(this,"listenEvent",()=>{this._video&&(this.clearListenerEvent(),this._video.addEventListener("canplay",this.onCanplay),this._video.addEventListener("canplaythrough",this.onCanplaythrough),this._video.addEventListener("complete",this.onComplete),this._video.addEventListener("durationchange",this.onDurationchange),this._video.addEventListener("emptied",this.onEmptied),this._video.addEventListener("ended",this.onEnded),this._video.addEventListener("error",this.onError),this._video.addEventListener("loadeddata",this.onLoadeddata),this._video.addEventListener("loadedmetadata",this.onLoadedmetadata),this._video.addEventListener("loadstart",this.onLoadstart),this._video.addEventListener("pause",this.onPause),this._video.addEventListener("play",this.onPlay),this._video.addEventListener("playing",this.onPlaying),this._video.addEventListener("progress",this.onProgress),this._video.addEventListener("ratechange",this.onRatechange),this._video.addEventListener("seeked",this.onSeeked),this._video.addEventListener("seeking",this.onSeeking),this._video.addEventListener("stalled",this.onStalled),this._video.addEventListener("suspend",this.onSuspend),this._video.addEventListener("timeupdate",this.onTimeupdate),this._video.addEventListener("volumechange",this.onVolumechange),this._video.addEventListener("waiting",this.onWaiting))}),H(this,"showControllerBar",f=>{if(f&&f.target.classList.value.includes("ran-player-controller")){this._playerController.style.setProperty("opacity","1"),this.controllerBarTimeId&&(clearTimeout(this.controllerBarTimeId),this.controllerBarTimeId=void 0);return}Jr.includes(this.ctx.currentState)?(this._playerController.style.setProperty("opacity","1"),this.controllerBarTimeId&&(clearTimeout(this.controllerBarTimeId),this.controllerBarTimeId=void 0),this.controllerBarTimeId=setTimeout(()=>{this._playerController.style.setProperty("opacity","0"),clearTimeout(this.controllerBarTimeId),this.controllerBarTimeId=void 0},2e3)):(this._playerController.style.setProperty("opacity","1"),this.controllerBarTimeId&&(clearTimeout(this.controllerBarTimeId),this.controllerBarTimeId=void 0))}),H(this,"progressClick",f=>{const w=this._progressWrap.getBoundingClientRect(),T=f.clientX-w.left,_=wt(T/this._progress.offsetWidth);this.setCurrentTime(this.ctx.duration*_),this.updateCurrentProgress()}),H(this,"progressDotMouseDown",()=>{this._playerBtn.style.setProperty("display","none"),this.moveProgress.mouseDown=!0,this.cancelAnimationFrame()}),H(this,"progressDotMouseMove",f=>{if(this.showControllerBar(f),!this.moveProgress.mouseDown)return;const w=this._progress.getBoundingClientRect(),T=f.clientX-w.left-9,_=wt(T/this._progress.offsetWidth);this._progressWrapValue.style.setProperty("transform",`scaleX(${_})`),this._progressDot.style.setProperty("transform",`translateX(${_*this._progress.offsetWidth}px)`),this.moveProgress.percentage=Math.floor(_*100)/100}),H(this,"progressDotMouseUp",()=>{if(!this.moveProgress.mouseDown)return;const f=this.moveProgress.percentage;this.setCurrentTime(this.ctx.duration*f),this.play(),this.moveProgress.mouseDown=!1,this.requestAnimationFrame(this.updateCurrentProgress)}),H(this,"requestAnimationFrame",f=>{this.requestAnimationFrameId||(this.requestAnimationFrameId=window.requestAnimationFrame(()=>{f(),this.requestAnimationFrameId&&cancelAnimationFrame(this.requestAnimationFrameId),this.requestAnimationFrameId=void 0,this.requestAnimationFrame(f)}))}),H(this,"cancelAnimationFrame",()=>{this.requestAnimationFrameId&&(cancelAnimationFrame(this.requestAnimationFrameId),this.requestAnimationFrameId=void 0)}),H(this,"updateCurrentProgress",()=>{const f=this.getCurrentTime();this.ctx.currentTime=f;const{duration:w}=this.ctx;this._progressWrapValue.style.setProperty("transform",`scaleX(${f/w})`),this._progressDot.style.setProperty("transform",`translateX(${f/w*this._progress.offsetWidth}px)`),f>=0&&(this._playerControllerBottomTimeCurrent.innerText=Ar(f))}),H(this,"changeAttribute",(f,w,T,_,L)=>{f===_&&w!==T&&oh(L)()}),H(this,"dispatchClickPlayerContainerAction",f=>{f.stopPropagation(),f.preventDefault(),Jr.includes(this.ctx.currentState)?(this.pause(),this._playerBtn.style.setProperty("display","block")):(this.play(),this._playerBtn.style.setProperty("display","none"))}),H(this,"SpaceKeyDown",f=>{const{currentTime:w,duration:T}=this.ctx;if(f.code==="Space"&&this.dispatchClickPlayerBtnAction(f),f.code==="Escape"&&this.customExitFullscreen().then(()=>{this.ctx.fullScreen=!1}).catch(_=>{}),f.code==="ArrowLeft"){const _=wt(w-5,0,T);this.setCurrentTime(_),this.play()}if(f.code==="ArrowRight"){const _=wt(w+5,0,T);this.setCurrentTime(_),this.play()}}),H(this,"dispatchClickPlayerBtnAction",f=>{f.stopPropagation(),f.preventDefault(),Jr.includes(this.ctx.currentState)?(this.pause(),this._playerBtn.style.setProperty("display","block")):(this.play(),this._playerBtn.style.setProperty("display","none"))}),H(this,"changeVolumeProgress",f=>{this._video&&(this.setVolume(f.detail.value),this.change("volume",f.detail.value),f.detail.value>0&&(this._volume=f.detail.value))}),H(this,"customRequestFullscreen",()=>this._player.requestFullscreen()||this._player.mozRequestFullScreen()||this._player.msRequestFullscreen()||this._player.oRequestFullscreen()||this._player.webkitRequestFullscreen()||this._player.webkitEnterFullscreen()),H(this,"customExitFullscreen",()=>document.exitFullscreen()||document.msExitFullscreen()||document.mozCancelFullScreen()||document.oCancelFullScreen()||document.webkitExitFullscreen()),H(this,"openFullScreen",()=>{this.ctx.fullScreen?this.customExitFullscreen().then(()=>{this.resize(),this.ctx.fullScreen=!1}).catch(f=>{}):this.customRequestFullscreen().then(()=>{this.resize(),this.ctx.fullScreen=!0}).catch(f=>{})}),H(this,"changeSpeed",f=>{this.change("speed",f.detail.value),this.setPlaybackRate(f.detail.value)}),H(this,"progressMouseEnter",f=>{this._playerTip.style.setProperty("opacity","1");const w=this._progress.getBoundingClientRect(),T=f.clientX-w.left;this._playerTipText.innerText?this._playerTip.style.setProperty("transform",`translate(calc(${T}px - 50%),-20px)`):this._playerTip.style.setProperty("transform",`translateX(calc(${T}px - 50%))`),this._playerTipTime.innerText=Ar(T/this._progress.clientWidth*this.ctx.duration)}),H(this,"progressMouseLeave",f=>{f.target.classList.contains("ran-player-controller-progress-wrap-dot")||this._playerTip.style.setProperty("opacity","0")}),H(this,"progressMouseMove",f=>{const w=this._progress.getBoundingClientRect();this._playerTip.style.setProperty("opacity","1");const T=f.clientX-w.left;this._playerTipText.innerText?this._playerTip.style.setProperty("transform",`translate(calc(${T}px - 50%),-20px)`):this._playerTip.style.setProperty("transform",`translateX(calc(${T}px - 50%))`),this._playerTipTime.innerText=Ar(T/this._progress.clientWidth*this.ctx.duration)}),H(this,"changePlayerVolume",()=>{if(!this._video)return;const{volume:f}=this.ctx;f>0?(Pe(this._playControllerBottomSpeedIcon,"ran-player-controller-bottom-right-volume-icon-mute"),ze(this._playControllerBottomSpeedIcon,"ran-player-controller-bottom-right-volume-icon-volume"),this._playControllerBottomVolumeProgress.setAttribute("percent","0"),this.setVolume(0),this.change("volume",0)):(Pe(this._playControllerBottomSpeedIcon,"ran-player-controller-bottom-right-volume-icon-volume"),ze(this._playControllerBottomSpeedIcon,"ran-player-controller-bottom-right-volume-icon-mute"),this._playControllerBottomVolumeProgress.setAttribute("percent",`${this._volume||.5}`),this.setVolume(.5),this.change("volume",this._volume||.5))}),H(this,"resize",()=>{if(this._video){const{width:f,height:w}=this._player.getBoundingClientRect();this._video.style.setProperty("width",`${f}px`),this._video.style.setProperty("height",`${w}px`),document.body.clientWidth<500?this._playControllerBottomVolume.style.setProperty("display","none"):this._playControllerBottomVolume.style.setProperty("display","flex")}this.updateCurrentProgress()}),H(this,"fullScreenChange",()=>{var f;(f=document.fullscreenElement)!=null&&f.classList.contains("ran-player")?(this.change("fullscreen",!0),this.ctx.fullScreen=!0):(this.change("fullscreen",!1),this.ctx.fullScreen=!1)}),H(this,"getPlaybackRate",()=>(this._video&&(this.ctx.playbackRate=this._video.playbackRate||0),this.ctx.playbackRate)),H(this,"setPlaybackRate",f=>(this._video&&(this.ctx.playbackRate=f,this._video.playbackRate=f),this.ctx.playbackRate)),H(this,"setVolume",f=>(this._video&&(this.ctx.volume=f,this._video.volume=f),this.ctx.volume)),H(this,"getVolume",()=>(this._video&&(this.ctx.volume=this._video.volume||0),this.ctx.volume)),H(this,"setCurrentTime",f=>(this._video&&(this.ctx.currentTime=f,this._video.currentTime=f),this.ctx.currentTime)),H(this,"getCurrentTime",()=>(this._video&&(this.ctx.currentTime=this._video.currentTime||0),this.ctx.currentTime)),H(this,"getTotalTime",()=>(this._video&&(this.ctx.duration=this._video.duration||0),this.ctx.duration)),H(this,"play",f=>{this._video&&(f!==void 0&&f>=0&&(this.ctx.currentTime=f,this._video.currentTime=f),this._video.play())}),H(this,"pause",()=>{this._video&&this._video.pause()}),this.innerHTML="",this._player=document.createElement("div"),this._container=document.createElement("div"),this._slot=document.createElement("slot"),this._playerBtn=document.createElement("div"),this._progress=document.createElement("div"),this._progressWrap=document.createElement("div"),this._progressWrapValue=document.createElement("div"),this._progressDot=document.createElement("div"),this._playerControllerBottom=document.createElement("div"),this._playerControllerBottomRight=document.createElement("div"),this._playerControllerBottomLeft=document.createElement("div"),this._player.setAttribute("class","ran-player"),this._player.setAttribute("id","ran-player"+`${performance.now()}`.replace(".","")),this._playerBtn.setAttribute("class","ran-player-play-btn"),this._progress.setAttribute("class","ran-player-controller-progress"),this._progressWrap.setAttribute("class","ran-player-controller-progress-wrap"),this._progressWrapValue.setAttribute("class","ran-player-controller-progress-wrap-value"),this._progressDot.setAttribute("class","ran-player-controller-progress-dot"),this._playerControllerBottom.setAttribute("class","ran-player-controller-bottom"),this._playerControllerBottomRight.setAttribute("class","ran-player-controller-bottom-right"),this._playerControllerBottomLeft.setAttribute("class","ran-player-controller-bottom-left"),this._playerControllerBottomPlayBtn=document.createElement("div"),this._playerControllerBottomPlayBtn.setAttribute("class","ran-player-controller-bottom-left-btn"),this._playerControllerBottomTimeCurrent=document.createElement("div"),this._playerControllerBottomTimeCurrent.setAttribute("class","ran-player-controller-bottom-left-time-current"),this._playerControllerBottomTimeDivide=document.createElement("div"),this._playerControllerBottomTimeDivide.setAttribute("class","ran-player-controller-bottom-left-time-divide"),this._playerControllerBottomTimeDuration=document.createElement("div"),this._playerControllerBottomTimeDuration.setAttribute("class","ran-player-controller-bottom-left-time-duration"),this._playControllerBottomSpeed=document.createElement("div"),this._playControllerBottomSpeed.setAttribute("class","ran-player-controller-bottom-right-speed"),this._playControllerBottomSpeedPopover=document.createElement("r-select"),this._playControllerBottomSpeedPopover.setAttribute("value","1"),this._playControllerBottomSpeedPopover.setAttribute("trigger","hover,click"),this._playControllerBottomSpeedPopover.setAttribute("type","text"),this._playControllerBottomSpeedPopover.setAttribute("placement","top");const h=this._player.getAttribute("id");h&&this._playControllerBottomSpeedPopover.setAttribute("getPopupContainerId",h),this._playControllerBottomSpeedPopover.setAttribute("dropdownclass","video-speed-dropdown"),this._playControllerBottomSpeedPopover.addEventListener("change",this.changeSpeed);const p=document.createDocumentFragment();sh.forEach(f=>{const{label:w,value:T}=f,_=document.createElement("r-option");_.innerHTML=w,_.setAttribute("value",`${T}`),p.appendChild(_)}),this._playControllerBottomSpeedPopover.appendChild(p),this._playControllerBottomSpeed.appendChild(this._playControllerBottomSpeedPopover),this._playControllerBottomVolume=document.createElement("div"),this._playControllerBottomVolume.setAttribute("class","ran-player-controller-bottom-right-volume"),this._playControllerBottomVolumeProgress=document.createElement("r-progress"),this._playControllerBottomVolumeProgress.setAttribute("class","ran-player-controller-bottom-right-volume-progress"),this._playControllerBottomVolumeProgress.setAttribute("percent","0.5"),this._playControllerBottomVolumeProgress.setAttribute("type","drag"),this._playControllerBottomSpeedIcon=document.createElement("div"),this._playControllerBottomSpeedIcon.setAttribute("class","ran-player-controller-bottom-right-volume-icon ran-player-controller-bottom-right-volume-icon-volume"),this._playControllerBottomClarity=document.createElement("div"),this._playControllerBottomClarity.setAttribute("class","ran-player-controller-bottom-right-clarity"),this._playControllerBottomRightFullScreen=document.createElement("div"),this._playControllerBottomRightFullScreen.setAttribute("class","ran-player-controller-bottom-right-full"),this._playerController=document.createElement("div"),this._playerController.setAttribute("class","ran-player-controller"),this._playerTip=document.createElement("div"),this._playerTip.setAttribute("class","ran-player-controller-tip"),this._playerTipTime=document.createElement("div"),this._playerTipTime.setAttribute("class","ran-player-controller-tip-time"),this._playerTipText=document.createElement("div"),this._playerTipText.setAttribute("class","ran-player-controller-tip-text"),this._playerTip.appendChild(rt([this._playerTipTime,this._playerTipText])),this._playerController.appendChild(rt([this._playerTip,this._progress,this._playerControllerBottom])),this._player.appendChild(rt([this._container,this._slot,this._playerBtn,this._playerController])),this._progressWrap.appendChild(this._progressWrapValue),this._progress.appendChild(rt([this._progressWrap,this._progressDot])),this._playerControllerBottom.appendChild(rt([this._playerControllerBottomLeft,this._playerControllerBottomRight])),this._playerControllerBottomLeft.appendChild(rt([this._playerControllerBottomPlayBtn,this._playerControllerBottomTimeCurrent,this._playerControllerBottomTimeDivide,this._playerControllerBottomTimeDuration])),this._playControllerBottomVolume.appendChild(rt([this._playControllerBottomSpeedIcon,this._playControllerBottomVolumeProgress])),this._playerControllerBottomRight.appendChild(rt([this._playControllerBottomClarity,this._playControllerBottomSpeed,this._playControllerBottomVolume,this._playControllerBottomRightFullScreen])),this.ctx={currentTime:0,duration:0,currentState:"",action:new ts,volume:.5,playbackRate:1,clarity:"",fullScreen:!1,levels:[],url:"",levelMap:new Map},this.moveProgress={percentage:0,mouseDown:!1}}static get observedAttributes(){return["src","volume","currentTime","playbackRate","debug"]}get src(){return this.getAttribute("src")||""}set src(h){this.setAttribute("src",h||"")}get debug(){return this.getAttribute("debug")||""}set debug(h){this.setAttribute("debug",h||"")}get volume(){return this.getAttribute("volume")||""}set volume(h){this.setAttribute("volume",h||"")}get currentTime(){return this.getAttribute("currentTime")||""}set currentTime(h){this.setAttribute("currentTime",h||"")}get playbackRate(){return this.getAttribute("playbackRate")||""}set playbackRate(h){this.setAttribute("playbackRate",h||"")}connectedCallback(){this._container.addEventListener("click",this.dispatchClickPlayerContainerAction),this._playerBtn.addEventListener("click",this.dispatchClickPlayerBtnAction),this.addEventListener("keydown",this.SpaceKeyDown),this._progressDot.addEventListener("mousedown",this.progressDotMouseDown),this._playerControllerBottomPlayBtn.addEventListener("click",this.dispatchClickPlayerBtnAction),this._progress.addEventListener("click",this.progressClick),this._progress.addEventListener("mouseenter",this.progressMouseEnter),this._progress.addEventListener("mousemove",this.progressMouseMove),this._progress.addEventListener("mouseleave",this.progressMouseLeave),this._player.addEventListener("mousemove",this.progressDotMouseMove),this._player.addEventListener("mouseup",this.progressDotMouseUp),this._playControllerBottomVolumeProgress.addEventListener("change",this.changeVolumeProgress),this._playControllerBottomRightFullScreen.addEventListener("click",this.openFullScreen),this._playControllerBottomSpeedIcon.addEventListener("click",this.changePlayerVolume),document.addEventListener("fullscreenchange",this.fullScreenChange),window.addEventListener("resize",this.resize),this.updatePlayer()}disconnectCallback(){this._container.removeEventListener("click",this.dispatchClickPlayerContainerAction),this._playerBtn.removeEventListener("click",this.dispatchClickPlayerBtnAction),this._playerControllerBottomPlayBtn.removeEventListener("click",this.dispatchClickPlayerBtnAction),this.cancelAnimationFrame(),this.removeEventListener("keydown",this.SpaceKeyDown),this._progress.removeEventListener("click",this.progressClick),this._progress.removeEventListener("mouseenter",this.progressMouseEnter),this._progress.removeEventListener("mousemove",this.progressMouseMove),this._progress.removeEventListener("mouseleave",this.progressMouseLeave),this._progressDot.removeEventListener("mousedown",this.progressDotMouseDown),this._player.removeEventListener("mousemove",this.progressDotMouseMove),this._player.removeEventListener("mouseup",this.progressDotMouseUp),this._playControllerBottomVolumeProgress.removeEventListener("change",this.changeVolumeProgress),this._playControllerBottomRightFullScreen.removeEventListener("click",this.openFullScreen),window.removeEventListener("resize",this.resize),document.removeEventListener("fullscreenchange",this.fullScreenChange)}}function lh(){if(typeof document<"u"&&!customElements.get("r-player"))return customElements.define("r-player",bn),bn}const dh=lh(),ch=Object.freeze(Object.defineProperty({__proto__:null,RanPlayer:bn,default:dh},Symbol.toStringTag,{value:"Module"}));function hh(){if(typeof window<"u"&&!customElements.get("r-modal")){class x extends HTMLElement{constructor(){super()}}customElements.define("r-modal",x)}}const uh=hh(),fh=Object.freeze(Object.defineProperty({__proto__:null,default:uh},Symbol.toStringTag,{value:"Module"}));var ph=Object.defineProperty,gh=(x,h,p)=>h in x?ph(x,h,{enumerable:!0,configurable:!0,writable:!0,value:p}):x[h]=p,Fe=(x,h,p)=>gh(x,typeof h!="symbol"?h+"":h,p);const mh=".remove-wap-active-focus{outline:0;-webkit-tap-highlight-color:transparent}.remove-wap-active-focus:active,.remove-wap-active-focus:focus{outline:0;-webkit-tap-highlight-color:transparent}:host:active,:host:focus{outline:0;-webkit-tap-highlight-color:transparent}.ran-progress{position:var(--ran-progress-position, relative);cursor:var(--ran-progress-cursor, pointer);width:var(--ran-progress-width, 100%);height:var(--ran-progress-height, 100%)}.ran-progress:active,.ran-progress:focus{outline:0;-webkit-tap-highlight-color:transparent}.ran-progress-wrap{width:var(--ran-progress-wrap-width, 100%);height:var(--ran-progress-wrap-height, 8px);border-radius:var(--ran-progress-wrap-border-radius, 20px);background:var(--ran-progress-wrap-background, #5b5b5b);position:var(--ran-progress-wrap-position, relative);overflow:var(--ran-progress-wrap-overflow, hidden)}.ran-progress-wrap-value{position:var(--ran-progress-wrap-value-position, absolute);top:var(--ran-progress-wrap-value-top, 0);left:var(--ran-progress-wrap-value-left, 0);height:var(--ran-progress-wrap-value-height, 100%);width:var(--ran-progress-wrap-value-width, 100%);transform:var(--ran-progress-wrap-value-transform, scaleX(0));transform-origin:var(--ran-progress-wrap-value-transform-origin, 0 0);will-change:var(--ran-progress-wrap-value-will-change, transform);background:var(--ran-progress-wrap-value-background, linear-gradient(90deg, #0bc8bb 2.42%, #00d297 98.79%));border-radius:var(--ran-progress-wrap-value-border-radius, 20px)}.ran-progress-dot{position:var(--ran-progress-dot-position, absolute);top:var(--ran-progress-dot-top, -5px);left:var(--ran-progress-dot-left, -9px);border-radius:var(--ran-progress-dot-border-radius, 50%);width:var(--ran-progress-dot-width, 18px);height:var(--ran-progress-dot-height, 18px);background:var(--ran-progress-dot-background, linear-gradient(90deg, #0bc8bb 2.42%, #00d297 98.79%));cursor:var(--ran-progress-dot-cursor, pointer)}",vh=["percent","type","total","dot"];class ti extends Be(){constructor(){super(),Fe(this,"_progress"),Fe(this,"_progressWrap"),Fe(this,"_progressWrapValue"),Fe(this,"_progressDot"),Fe(this,"moveProgress"),Fe(this,"_shadowDom"),Fe(this,"progressClick",f=>{const w=this._progress.getBoundingClientRect(),T=f.clientX-w.left,_=Math.min(1,Math.max(0,T/this._progress.offsetWidth));this.percent=`${_*Number(this.total)}`,this._progressWrapValue.style.setProperty("transform",`scaleX(${_})`),this._progressDot.style.setProperty("transform",`translateX(${_*this._progress.offsetWidth}px)`),this.change()}),Fe(this,"progressDotMouseDown",()=>{this.moveProgress.mouseDown=!0}),Fe(this,"progressDotMouseMove",f=>{if(!this.moveProgress.mouseDown)return;const w=this._progress.getBoundingClientRect(),T=f.clientX-w.left,_=Math.min(1,Math.max(0,T/this._progress.offsetWidth));this.percent=`${_*Number(this.total)}`,this._progressWrapValue.style.setProperty("transform",`scaleX(${_})`),this._progressDot.style.setProperty("transform",`translateX(${_*this._progress.offsetWidth}px)`),this.change()}),Fe(this,"progressDotMouseUp",()=>{this.moveProgress.mouseDown&&(this.moveProgress.mouseDown=!1)}),Fe(this,"change",()=>{this.dispatchEvent(new CustomEvent("change",{detail:{value:this.percent,percent:this.percent,total:this.total}}))}),Fe(this,"appendProgressDot",()=>{this.dot==="true"&&!this._progress.contains(this._progressDot)&&this._progress.appendChild(this._progressDot),this.dot==="false"&&this._progress.contains(this._progressDot)&&this._progress.removeChild(this._progressDot)}),Fe(this,"updateCurrentProgress",()=>{const f=Number(this.percent)/Number(this.total);this._progressWrapValue.style.setProperty("transform",`scaleX(${f})`),this._progressDot.style.setProperty("transform",`translateX(${f*this._progress.offsetWidth}px)`)}),Fe(this,"dragEvent",()=>{this.type==="drag"&&(this._progress.addEventListener("click",this.progressClick),this._progressDot.addEventListener("mousedown",this.progressDotMouseDown),document.addEventListener("mousemove",this.progressDotMouseMove),document.addEventListener("mouseup",this.progressDotMouseUp))}),Fe(this,"resize",()=>{this.updateCurrentProgress()}),this._progress=document.createElement("div"),this._progress.setAttribute("class","ran-progress"),this._progress.setAttribute("role","progressbar"),this._progressWrap=document.createElement("div"),this._progressWrap.setAttribute("class","ran-progress-wrap"),this._progress.appendChild(this._progressWrap),this._progressWrapValue=document.createElement("div"),this._progressWrapValue.setAttribute("class","ran-progress-wrap-value"),this._progressWrap.appendChild(this._progressWrapValue),this._progressDot=document.createElement("div"),this._progressDot.setAttribute("class","ran-progress-dot"),this.moveProgress={mouseDown:!1},this._progress.appendChild(this._progressDot);const h=this.attachShadow({mode:"closed"}),p=document.createElement("style");p.textContent=mh,h.appendChild(p),this._shadowDom=h,h.appendChild(this._progress)}static get observedAttributes(){return vh}get percent(){const h=this.getAttribute("percent")||"",p=ei(h);return Number(p)>Number(this.total)?(console.error("percent must be < total"),this.total):`${ei(h)}`}set percent(h){this.setAttribute("percent",`${h||0}`),this.setAttribute("aria-valuenow",`${h||0}`)}get total(){const h=this.getAttribute("total");return h?`${ei(h)}`:"1"}set total(h){this.setAttribute("total",h||"")}get type(){const h=["primary","drag"],p=this.getAttribute("type")||"";return h.includes(p)?p:"primary"}set type(h){this.setAttribute("type",h||"primary")}get animation(){const h=["play","pause"],p=this.getAttribute("animation")||"";return h.includes(p)?p:"pause"}set animation(h){this.setAttribute("animation",h||"pause")}get dot(){const h=["true","false"],p=this.getAttribute("dot")||"";return h.includes(p)?p:"true"}set dot(h){this.setAttribute("dot",h||"true")}connectedCallback(){this.getAttribute("type")||this.setAttribute("type","primary"),this.dragEvent(),this.updateCurrentProgress(),window.addEventListener("resize",this.resize)}disconnectCallback(){this._progress.removeEventListener("click",this.progressClick),this._progressDot.removeEventListener("mousedown",this.progressDotMouseDown),document.removeEventListener("mousemove",this.progressDotMouseMove),document.removeEventListener("mouseup",this.progressDotMouseUp),window.removeEventListener("resize",this.resize)}attributeChangedCallback(h,p,f){p!==f&&(h==="dot"&&this.appendProgressDot(),h==="percent"&&this.updateCurrentProgress())}}function bh(){return typeof document<"u"&&!customElements.get("r-progress")?(ti&&customElements.define("r-progress",ti),ti):Oe("document is undefined or r-progress is exist")}const yh=bh(),wh=Object.freeze(Object.defineProperty({__proto__:null,Progress:ti,default:yh},Symbol.toStringTag,{value:"Module"}));var Eh=Object.defineProperty,Ah=(x,h,p)=>h in x?Eh(x,h,{enumerable:!0,configurable:!0,writable:!0,value:p}):x[h]=p,Ct=(x,h,p)=>Ah(x,typeof h!="symbol"?h+"":h,p);const xh='.remove-wap-active-focus{outline:0;-webkit-tap-highlight-color:transparent}.remove-wap-active-focus:active,.remove-wap-active-focus:focus{outline:0;-webkit-tap-highlight-color:transparent}:host{position:var(--ran-checkbox-host-position, relative);display:var(--ran-checkbox-host-display, block);margin:var(--ran-checkbox-host-margin, 0);padding:var(--ran-checkbox-host-padding, 0);box-sizing:var(--ran-checkbox-host-box-sizing, border-box);list-style:var(--ran-checkbox-host-list-style, none)}:host([disabled]){opacity:var(--ran-checkbox-disabled-opacity, .6)}:host([disabled]) .ran-checkbox-input{cursor:var(--ran-checkbox-disabled-cursor, not-allowed);pointer-events:var(--ran-checkbox-disabled-pointer-events, all)}:host([disabled]) .ran-checkbox-inner{background-color:var(--ran-checkbox-checked-background-color, #d9d9d9);border:1px solid #d9d9d9}:host([disabled]) .ran-checkbox-inner:after{cursor:not-allowed;pointer-events:none;opacity:var(--ran-checkbox-checked-after-opacity, 1)}:host([disabled]) .ran-checkbox-checked .ran-checkbox-inner{background-color:var(--ran-checkbox-checked-background-color, #d9d9d9)}:host([disabled]) .ran-checkbox-checked .ran-checkbox-inner:after{opacity:var(--ran-checkbox-checked-after-opacity, 0)}.ran-checkbox{position:var(--ran-checkbox-position, relative);display:var(--ran-checkbox-display, block);box-sizing:var(--ran-checkbox-box-sizing, border-box);margin:var(--ran-checkbox-margin, 0);width:var(--ran-checkbox-width, 16px);height:var(--ran-checkbox-height, 16px);padding:var(--ran-checkbox-padding, 0);color:var(--ran-checkbox-color, rgba(0, 0, 0, .88));font-size:var(--ran-checkbox-font-size, 14px);line-height:var(--ran-checkbox-line-height, 1);list-style:var(--ran-checkbox-list-style, none);font-family:var(--ran-checkbox-font-family, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji");white-space:var(--ran-checkbox-white-space, nowrap);cursor:var(--ran-checkbox-cursor, pointer);border-radius:var(--ran-checkbox-border-radius, 4px)}.ran-checkbox-input{position:var(--ran-checkbox-input-position, absolute);inset:var(--ran-checkbox-input-inset, 0);z-index:var(--ran-checkbox-input-z-index, 1);cursor:var(--ran-checkbox-input-cursor, pointer);opacity:var(--ran-checkbox-input-opacity, 0);margin:var(--ran-checkbox-input-margin, 0)}.ran-checkbox-inner{box-sizing:var(--ran-checkbox-inner-box-sizing, border-box);display:var(--ran-checkbox-inner-display, block);width:var(--ran-checkbox-inner-width, 16px);height:var(--ran-checkbox-inner-height, 16px);direction:var(--ran-checkbox-inner-direction, ltr);background-color:var(--ran-checkbox-inner-background-color, #fff);border:var(--ran-checkbox-inner-border, 1px solid #d9d9d9);border-radius:var(--ran-checkbox-inner-border-radius, 4px);border-collapse:var(--ran-checkbox-inner-border-collapse, separate)}.ran-checkbox-inner:after{box-sizing:var(--ran-checkbox-inner-after-box-sizing, border-box);position:var(--ran-checkbox-inner-after-position, absolute);top:var(--ran-checkbox-inner-after-top, 50%);inset-inline-start:var(--ran-checkbox-inner-after-inset-inline-start, 25%);display:var(--ran-checkbox-inner-after-display, table);width:var(--ran-checkbox-inner-after-width, calc(16px / 14 * 5));height:var(--ran-checkbox-inner-after-height, calc(16px / 14 * 8));border:var(--ran-checkbox-inner-after-border, 2px solid #fff);border-top:var(--ran-checkbox-inner-after-border-top, 0);border-inline-start:var(--ran-checkbox-inner-after-border-inline-start, 0);opacity:var(--ran-checkbox-inner-after-opacity, 0);content:var(--ran-checkbox-inner-after-content, "");transition:var(--ran-checkbox-inner-after-transition, all .1s cubic-bezier(.71, -.46, .88, .6), opacity .1s);transform:var(--ran-checkbox-inner-after-transform, rotate(45deg) scale(1) translate(-50%, -50%))}.ran-checkbox-checked .ran-checkbox-inner{background-color:var(--ran-checkbox-checked-background-color, #1677ff);border:var(--ran-checkbox-checked-border, 1px solid #1677ff)}.ran-checkbox-checked .ran-checkbox-inner:after{opacity:var(--ran-checkbox-checked-after-opacity, 1)}';class yn extends Be(){constructor(){super(),Ct(this,"checkInput"),Ct(this,"checkInner"),Ct(this,"context"),Ct(this,"container"),Ct(this,"_shadowDom"),Ct(this,"updateChecked",()=>{const{checked:f}=this.context;f?(this.setAttribute("checked","true"),this.setAttribute("value","true"),Pe(this.container,"ran-checkbox-checked")):(this.setAttribute("checked","false"),this.setAttribute("value","false"),ze(this.container,"ran-checkbox-checked"))}),Ct(this,"update",()=>{this.updateChecked()}),Ct(this,"onChange",()=>{if(it.includes(this.disabled)||this.hasAttribute("disabled"))return;const{checked:f}=this.context;this.context.checked=!f,this.dispatchEvent(new CustomEvent("change",{detail:{checked:this.context.checked}})),this.update()}),this.checkInput=document.createElement("input"),this.checkInput.setAttribute("class","ran-checkbox-input"),this.checkInput.setAttribute("type","checkbox"),this.checkInner=document.createElement("span"),this.checkInner.setAttribute("class","ran-checkbox-inner"),this.container=V("div").setAttribute("class","ran-checkbox").addChild([this.checkInput,this.checkInner]).element;const h=this.attachShadow({mode:"closed"}),p=document.createElement("style");p.textContent=xh,h.appendChild(p),this._shadowDom=h,h.appendChild(this.container),this.context={checked:!1}}static get observedAttributes(){return["disabled","checked","value"]}get disabled(){return this.getAttribute("disabled")||""}set disabled(h){this.setAttribute("disabled",h)}get value(){const h=this.getAttribute("value");return it.includes(h)&&(this.context.checked=!1),`${this.context.checked}`}set value(h){it.includes(h)?(this.setAttribute("value","false"),this.context.checked=!1):(this.setAttribute("value","true"),this.context.checked=!0),this.updateChecked()}get checked(){const h=this.getAttribute("checked");return it.includes(h)&&(this.context.checked=!1),`${this.context.checked}`}set checked(h){it.includes(h)?(this.setAttribute("checked","false"),this.context.checked=!1):(this.setAttribute("checked","true"),this.context.checked=!0),this.updateChecked()}connectedCallback(){this.addEventListener("click",this.onChange)}disconnectCallback(){this.removeEventListener("click",this.onChange)}attributeChangedCallback(h,p,f){p!==f&&(h==="checked"&&(this.checked=f,this.value=f),h==="value"&&(this.checked=f,this.value=f))}}function kh(){return typeof document<"u"&&!customElements.get("r-checkbox")?(customElements.define("r-checkbox",yn),yn):Oe("document is undefined or r-checkbox is exist")}const Th=kh(),_h=Object.freeze(Object.defineProperty({__proto__:null,Checkbox:yn,default:Th},Symbol.toStringTag,{value:"Module"}));var Sh=Object.defineProperty,Ch=(x,h,p)=>h in x?Sh(x,h,{enumerable:!0,configurable:!0,writable:!0,value:p}):x[h]=p,we=(x,h,p)=>Ch(x,typeof h!="symbol"?h+"":h,p);const Lh=".remove-wap-active-focus{outline:0;-webkit-tap-highlight-color:transparent}.remove-wap-active-focus:active,.remove-wap-active-focus:focus{outline:0;-webkit-tap-highlight-color:transparent}:host{display:var(--ran-popover-host-display, block)}.ran-popover{box-sizing:var(--ran-popover-box-sizing, border-box);position:var(--ran-popover-position, relative);display:var(--ran-popover-display, block);margin:var(--ran-popover-margin, 0);padding:var(--ran-popover-padding, 0)}.ran-popover-block{display:var(--ran-popover-block-display, block)}";var Dh=typeof global=="object"&&global&&global.Object===Object&&global,Rh=typeof self=="object"&&self&&self.Object===Object&&self,rs=Dh||Rh||Function("return this")(),ni=rs.Symbol,is=Object.prototype,Ih=is.hasOwnProperty,Ph=is.toString,br=ni?ni.toStringTag:void 0;function Oh(x){var h=Ih.call(x,br),p=x[br];try{x[br]=void 0;var f=!0}catch{}var w=Ph.call(x);return f&&(h?x[br]=p:delete x[br]),w}var Mh=Object.prototype,Fh=Mh.toString;function Bh(x){return Fh.call(x)}var Nh="[object Null]",Uh="[object Undefined]",zo=ni?ni.toStringTag:void 0;function Gh(x){return x==null?x===void 0?Uh:Nh:zo&&zo in Object(x)?Oh(x):Bh(x)}function Hh(x){return x!=null&&typeof x=="object"}var Kh="[object Symbol]";function Vh(x){return typeof x=="symbol"||Hh(x)&&Gh(x)==Kh}var zh=/\s/;function Yh(x){for(var h=x.length;h--&&zh.test(x.charAt(h)););return h}var jh=/^\s+/;function $h(x){return x&&x.slice(0,Yh(x)+1).replace(jh,"")}function wn(x){var h=typeof x;return x!=null&&(h=="object"||h=="function")}var Yo=NaN,qh=/^[-+]0x[0-9a-f]+$/i,Qh=/^0b[01]+$/i,Wh=/^0o[0-7]+$/i,Xh=parseInt;function jo(x){if(typeof x=="number")return x;if(Vh(x))return Yo;if(wn(x)){var h=typeof x.valueOf=="function"?x.valueOf():x;x=wn(h)?h+"":h}if(typeof x!="string")return x===0?x:+x;x=$h(x);var p=Qh.test(x);return p||Wh.test(x)?Xh(x.slice(2),p?2:8):qh.test(x)?Yo:+x}var un=function(){return rs.Date.now()},Jh="Expected a function",Zh=Math.max,eu=Math.min;function yr(x,h,p){var f,w,T,_,L,B,M=0,j=!1,$=!1,he=!0;if(typeof x!="function")throw new TypeError(Jh);h=jo(h)||0,wn(p)&&(j=!!p.leading,$="maxWait"in p,T=$?Zh(jo(p.maxWait)||0,h):T,he="trailing"in p?!!p.trailing:he);function ie(Y){var A=f,J=w;return f=w=void 0,M=Y,_=x.apply(J,A),_}function le(Y){return M=Y,L=setTimeout(Le,h),j?ie(Y):_}function de(Y){var A=Y-B,J=Y-M,O=h-A;return $?eu(O,T-J):O}function ke(Y){var A=Y-B,J=Y-M;return B===void 0||A>=h||A<0||$&&J>=T}function Le(){var Y=un();if(ke(Y))return Me(Y);L=setTimeout(Le,de(Y))}function Me(Y){return L=void 0,he&&f?ie(Y):(f=w=void 0,_)}function Rt(){L!==void 0&&clearTimeout(L),M=0,f=B=w=L=void 0}function kr(){return L===void 0?_:Me(un())}function It(){var Y=un(),A=ke(Y);if(f=arguments,w=this,B=Y,A){if(L===void 0)return le(B);if($)return clearTimeout(L),L=setTimeout(Le,h),ie(B)}return L===void 0&&(L=setTimeout(Le,h)),_}return It.cancel=Rt,It.flush=kr,It}const tu=".remove-wap-active-focus{outline:0;-webkit-tap-highlight-color:transparent}.remove-wap-active-focus:active,.remove-wap-active-focus:focus{outline:0;-webkit-tap-highlight-color:transparent}:host{visibility:hidden;position:absolute}";class $o extends Be(){constructor(){super(),we(this,"observer"),we(this,"_shadowDom"),we(this,"_slot"),we(this,"callback",f=>{for(const w of f)w.type==="childList"?this.onChange(w):w.type==="attributes"&&this.onChange(w)}),we(this,"onChange",f=>{this.dispatchEvent(new CustomEvent("change",{detail:{type:f.type,value:{content:this.children,mutation:f}}}))}),this._slot=V("slot").setAttribute("class","slot").element;const h=this.attachShadow({mode:"closed"});this._shadowDom=h;const p=V("style").setTextContent(tu);h.appendChild(p.element),h.appendChild(this._slot),this.observer=new MutationObserver(this.callback)}connectedCallback(){this.observer.observe(this,{attributes:!0,childList:!0,subtree:!0})}disconnectCallback(){this.observer.disconnect()}}function ru(){return typeof document<"u"&&!customElements.get("r-content")?(customElements.define("r-content",$o),$o):Oe("document is undefined or r-content is exist")}ru();const wr=8,fn=300,Er=16,qo={bottom:{add:"ran-dropdown-down-in",remove:"ran-dropdown-down-out"},top:{add:"ran-dropdown-up-in",remove:"ran-dropdown-up-out"},left:{add:"ran-dropdown-left-in",remove:"ran-dropdown-left-out"},right:{add:"ran-dropdown-right-in",remove:"ran-dropdown-right-out"}};var ns=(x=>(x.TOP="top",x.BOTTOM="bottom",x.LEFT="left",x.RIGHT="right",x))(ns||{});class En extends Be(){constructor(){super(),we(this,"_slot"),we(this,"popoverBlock"),we(this,"popoverContent"),we(this,"popoverInner"),we(this,"popoverInnerBlock"),we(this,"_shadowDom"),we(this,"dropDownInTimeId"),we(this,"dropDownOutTimeId"),we(this,"removeTimeId"),we(this,"stopPropagation",f=>{f.stopPropagation()}),we(this,"createContent",f=>{var w,T,_;if(f){if(!this.popoverContent){const L=document.createElement("div");this.popoverContent=V("r-dropdown").setAttribute("class","ran-popover-dropdown").setStyle("display","none").setStyle("position","absolute").element,(w=this.popoverContent)==null||w.addEventListener("click",this.stopPropagation),this.popoverContent&&L.appendChild(this.popoverContent),this.trigger.includes("hover")&&!Et()&&((T=this.popoverContent)==null||T.addEventListener("mouseleave",this.blur),(_=this.popoverContent)==null||_.addEventListener("mouseenter",this.removeDropDownTimeId)),document.body.appendChild(L)}if(this.popoverContent&&f.length>0){this.popoverContent.innerHTML="";const L=document.createDocumentFragment();for(const B of f)L.appendChild(B);this.popoverContent.appendChild(L)}}}),we(this,"watchContent",f=>{const{value:w}=f.detail;this.createContent(w.content)}),we(this,"blur",yr(()=>{this.removeTimeId&&this.removeDropDownTimeId(),this.removeTimeId=setTimeout(()=>{this.removeDropDownTimeId(),this.setDropdownDisplayNone()},fn)},Er)),we(this,"removeDropDownTimeId",yr(()=>{this.trigger.includes("hover")&&!Et()&&(clearTimeout(this.removeTimeId),this.removeTimeId=void 0)},Er)),we(this,"setDropdownDisplayBlock",yr(()=>{var f;this.dropDownInTimeId||(clearTimeout(this.dropDownInTimeId),this.dropDownInTimeId=void 0,clearTimeout(this.dropDownOutTimeId),this.dropDownOutTimeId=void 0,this.popoverContent&&this.popoverContent.style.display!=="block"&&(this.popoverContent.setAttribute("transit",qo[this.placement].add),(f=this.popoverContent)==null||f.style.setProperty("display","block"),this.placementPosition(),this.dropDownInTimeId=setTimeout(()=>{this.popoverContent&&this.popoverContent.removeAttribute("transit"),clearTimeout(this.dropDownInTimeId),this.dropDownInTimeId=void 0},fn)))},Er)),we(this,"setDropdownDisplayNone",yr(()=>{this.dropDownOutTimeId||(clearTimeout(this.dropDownInTimeId),this.dropDownInTimeId=void 0,clearTimeout(this.dropDownOutTimeId),this.dropDownOutTimeId=void 0,this.popoverContent&&this.popoverContent.style.display!=="none"&&(this.popoverContent.setAttribute("transit",qo[this.placement].remove),this.dropDownOutTimeId=setTimeout(()=>{var f;(f=this.popoverContent)==null||f.style.setProperty("display","none"),this.popoverContent&&this.popoverContent.removeAttribute("transit"),clearTimeout(this.dropDownOutTimeId),this.dropDownOutTimeId=void 0},fn)))},Er)),we(this,"placementPosition",()=>{if(!this.popoverContent)return;const f=this.getBoundingClientRect(),{top:w,left:T,bottom:_,width:L,height:B}=f;let M=_+window.scrollY+wr,j=T+window.scrollX;const $=document.getElementById(this.getPopupContainerId),he=this.popoverContent.getBoundingClientRect();if(this.placement==="top"&&(M=w+window.scrollY-he.height-wr,this.getPopupContainerId&&$)){const ie=$.getBoundingClientRect();j=T-ie.left,M=w-$.getBoundingClientRect().top-this.popoverContent.clientHeight-wr,j=T-$.getBoundingClientRect().left}this.placement==="left"&&(j=T-Math.max(he.width,L)-wr,M=w+window.scrollY),this.placement==="right"&&(j=T+L+wr,M=w+window.scrollY),this.popoverContent.style.setProperty("inset",`${M}px auto auto ${j}px`),this.popoverContent.style.setProperty("--ran-x",`${j}px`),this.popoverContent.style.setProperty("--ran-y",`${M}px`),this.popoverContent.style.setProperty("--ran-popover-width",`${L}px`),this.popoverContent.style.setProperty("--ran-popover-height",`${B}px`),this.popoverContent.style.setProperty("--ran-popover-content-width",`${he.width}px`),this.popoverContent.style.setProperty("--ran-popover-content-height",`${he.height}px`)}),we(this,"hoverPopover",f=>{this.clickPopover(f)}),we(this,"clickContent",f=>{f.stopPropagation()}),we(this,"clickPopover",f=>{f.stopPropagation(),f.preventDefault(),this.setDropdownDisplayBlock()}),we(this,"clickRemovePopover",f=>{this.hoverRemovePopover(f)}),we(this,"popoverTrigger",()=>{this.removeEventListener("mouseenter",this.hoverPopover),this.removeEventListener("mouseleave",this.blur),this.removeEventListener("click",this.clickPopover),this.trigger.includes("hover")&&(this.addEventListener("mouseenter",this.hoverPopover),this.addEventListener("mouseleave",this.blur)),this.addEventListener("click",this.clickPopover)}),we(this,"hoverRemovePopover",f=>{f.stopPropagation(),this.setDropdownDisplayNone()}),we(this,"changePlacement",yr(()=>{var f,w,T,_;this.placement==="top"&&((f=this.popoverContent)==null||f.setAttribute("arrow","bottom")),this.placement==="bottom"&&((w=this.popoverContent)==null||w.setAttribute("arrow","top")),this.placement==="left"&&((T=this.popoverContent)==null||T.setAttribute("arrow","right")),this.placement==="right"&&((_=this.popoverContent)==null||_.setAttribute("arrow","left"))},Er)),this._slot=document.createElement("slot"),this._slot.setAttribute("class","slot"),this.popoverBlock=document.createElement("div"),this.popoverBlock.setAttribute("class","ran-popover-block"),this.popoverBlock.setAttribute("role","tooltip"),this.popoverBlock.appendChild(this._slot);const h=this.attachShadow({mode:"closed"}),p=document.createElement("style");p.textContent=Lh,h.appendChild(p),this._shadowDom=h,h.appendChild(this.popoverBlock)}static get observedAttributes(){return["placement","arrow","trigger"]}get placement(){return this.getAttribute("placement")||"top"}set placement(h){this.setAttribute("placement",h)}get arrow(){return this.getAttribute("arrow")||""}set arrow(h){this.setAttribute("arrow",h)}get trigger(){return this.getAttribute("trigger")||"hover"}set trigger(h){this.setAttribute("trigger",h)}get getPopupContainerId(){return this.getAttribute("getPopupContainerId")||""}set getPopupContainerId(h){this.setAttribute("getPopupContainerId",h)}connectedCallback(){for(const h of this.children)h.tagName==="R-CONTENT"&&(h.addEventListener("change",this.watchContent),this.createContent(h.children));this.popoverTrigger(),this.changePlacement(),document.addEventListener("click",this.clickRemovePopover)}disconnectCallback(){this.removeEventListener("mouseenter",this.hoverPopover),this.removeEventListener("mouseleave",this.hoverRemovePopover),this.removeEventListener("click",this.hoverPopover),document.removeEventListener("click",this.clickRemovePopover)}attributeChangedCallback(h,p,f){p!==f&&(h==="trigger"&&this.popoverTrigger(),h==="placement"&&this.changePlacement())}}function iu(){return typeof document<"u"&&!customElements.get("r-popover")?(customElements.define("r-popover",En),En):Oe("document is undefined or r-popover is exist")}const nu=iu(),au=Object.freeze(Object.defineProperty({__proto__:null,PLACEMENT_TYPE:ns,Popover:En,default:nu},Symbol.toStringTag,{value:"Module"}));var ou=Object.defineProperty,su=(x,h,p)=>h in x?ou(x,h,{enumerable:!0,configurable:!0,writable:!0,value:p}):x[h]=p,Ve=(x,h,p)=>su(x,typeof h!="symbol"?h+"":h,p);class Qo extends Be(){constructor(){super(),Ve(this,"_input"),Ve(this,"_label"),Ve(this,"_inputContent"),Ve(this,"_icon"),Ve(this,"customInput",h=>{h.stopPropagation(),h.preventDefault();const{target:p,data:f=""}=h;this.value=(p==null?void 0:p.value)||f||"",this.customChange(),this.dispatchEvent(new CustomEvent("input",{detail:{value:this.value}}))}),Ve(this,"customChange",()=>{this.dispatchEvent(new CustomEvent("change",{detail:{value:this.value}}))}),Ve(this,"listenPlaceholder",(h,p)=>{h==="placeholder"&&this._inputContent&&(p!=null?this._inputContent.setAttribute("placeholder",p):this._inputContent.removeAttribute("placeholder"))}),Ve(this,"listenLabel",(h,p)=>{h==="label"&&this._inputContent&&(p!=null?this._label?this._label.innerHTML=p:(this._label=document.createElement("label"),this._label.innerHTML=p,this._label.setAttribute("class","ran-input-label"),this._label.setAttribute("part","ran-input-label"),this._input.appendChild(this._label)):(this._input.removeAttribute("label"),this._label&&(this._input.removeChild(this._label),this._label=void 0)))}),Ve(this,"listenType",(h,p)=>{h==="type"&&this._inputContent&&(p?this._inputContent.setAttribute("type",p):(this._inputContent.removeAttribute("type"),this._inputContent.removeAttribute("min"),this._inputContent.removeAttribute("max"),this._inputContent.removeAttribute("step")))}),Ve(this,"listenStatus",(h,p)=>{h==="status"&&this._input&&(p?this._input.setAttribute("status",p):this._input.removeAttribute("status"))}),Ve(this,"listenDisabled",(h,p)=>{h==="disabled"&&this._input&&(it.includes(p)?this._input.removeAttribute("disabled"):(this._input.setAttribute("disabled",""),this._inputContent.setAttribute("disabled","")))}),Ve(this,"listenIcon",(h,p,f)=>{h==="icon"&&p&&p!==f&&(this.removeAttribute("label"),this.setAttribute("icon",p),this.dealIcon())}),Ve(this,"dealIcon",()=>{if(!this._icon){this._icon=document.createElement("ra-icon");const{width:h,height:p}=this._inputContent.getBoundingClientRect(),f=Math.min(h,p);this._icon.setAttribute("size",`${f}`),this._inputContent.insertAdjacentElement("beforebegin",this._icon)}this.icon&&this._icon.setAttribute("name",this.icon)}),Ve(this,"listenEvent",(h,p,f)=>{this.listenPlaceholder(h,f),this.listenLabel(h,f),this.listenStatus(h,f),this.listenDisabled(h,f),this.listenIcon(h,f,p),h==="value"&&p!==f&&(this._inputContent.value=f,this._input.setAttribute("value",f))}),this._input=document.createElement("div"),this._input.setAttribute("class","ran-input"),this._input.setAttribute("part","ran-input"),this._inputContent=document.createElement("input"),this._inputContent.setAttribute("class","ran-input-content"),this._inputContent.setAttribute("part","ran-input-content"),this._input.appendChild(this._inputContent)}static get observedAttributes(){return["label","disabled","name","placeholder","type","icon","value","status","prefix","suffix","allowclear","count","maxlength","showcount","onPressEnter","variant","minrows","maxrows"]}get value(){return this.getAttribute("value")||""}set value(h){!Ce(this)&&h?(this.setAttribute("value",h),this._input.setAttribute("value",h)):(this.removeAttribute("value"),this._input.removeAttribute("value"))}get placeholder(){return this.getAttribute("placeholder")||""}set placeholder(h){h?this.setAttribute("placeholder",h):this.removeAttribute("placeholder")}get required(){return this.getAttribute("required")||""}set required(h){!h||h==="false"?this.removeAttribute("required"):this.setAttribute("required","")}get disabled(){return`${Ce(this)}`}set disabled(h){it.includes(h)?(this.removeAttribute("disabled"),this._input.removeAttribute("disabled"),this._inputContent.removeAttribute("disabled")):(this.setAttribute("disabled",""),this._input.setAttribute("disabled",""),this._inputContent.setAttribute("disabled",""))}get label(){return this.getAttribute("label")||""}set label(h){this.setAttribute("label",h)}get status(){return this.getAttribute("status")||""}set status(h){h?(this.setAttribute("status",h),this._input.setAttribute("status",h)):(this.removeAttribute("status"),this._input.removeAttribute("status"))}get name(){return this.getAttribute("name")||""}set name(h){this.setAttribute("name",h)}get min(){return this.getAttribute("min")||""}set min(h){this.type==="number"&&this.setAttribute("min",h)}get max(){return this.getAttribute("max")||""}set max(h){this.type==="number"&&this.setAttribute("max",h)}get step(){return this.getAttribute("step")||""}set step(h){this.type==="number"&&this.setAttribute("step",h)}get icon(){return this.getAttribute("icon")||""}set icon(h){h?this.setAttribute("icon",h):this.removeAttribute("icon")}get prefix(){return this.getAttribute("prefix")||""}set prefix(h){h?this.setAttribute("prefix",h):this.removeAttribute("prefix")}get suffix(){return this.getAttribute("suffix")||""}set suffix(h){h?this.setAttribute("suffix",h):this.removeAttribute("suffix")}get type(){return this.getAttribute("type")||""}set type(h){h?this.setAttribute("type",h):this.removeAttribute("type")}connectedCallback(){this.value&&(this._inputContent.value=this.value,this._input.setAttribute("value",this.value)),this.status&&this._input.setAttribute("status",this.status),Ce(this)&&(this._input.setAttribute("disabled",""),this._inputContent.setAttribute("disabled","")),this.type&&this._inputContent.setAttribute("type",this.type),this._inputContent.addEventListener("input",this.customInput),document.readyState==="complete"&&this.dealIcon(),this.appendChild(this._input)}disconnectCallback(){this._inputContent.removeEventListener("input",this.customInput)}attributeChangedCallback(h,p,f){this.listenEvent(h,p,f)}}function lu(){return typeof window<"u"&&!customElements.get("ra-input")?(customElements.define("ra-input",Qo),Qo):Oe("document is undefined or ra-input is exist")}lu();var du=Object.defineProperty,cu=(x,h,p)=>h in x?du(x,h,{enumerable:!0,configurable:!0,writable:!0,value:p}):x[h]=p,Lt=(x,h,p)=>cu(x,typeof h!="symbol"?h+"":h,p);const Wo="http://www.w3.org/1999/xlink",hu="xlink:href";function uu(){if(typeof window<"u"&&!customElements.get("ra-icon")){class x extends HTMLElement{constructor(){super(),Lt(this,"_icon"),Lt(this,"_div"),Lt(this,"loadLocal",()=>new Promise((p,f)=>{Cn(Object.assign({"../../assets/icons/add-user.svg":()=>q(()=>import("./add-user-BN1JlY7e.D6YNNzf8.js"),[]),"../../assets/icons/arrow-down.svg":()=>q(()=>import("./info-circle-fill-DjI8gXS3.DcQ9QdGJ.js"),[]).then(w=>w.a),"../../assets/icons/book.svg":()=>q(()=>import("./book-nTEFXU2x.DPEdiL1I.js"),[]),"../../assets/icons/check-circle-fill.svg":()=>q(()=>import("./check-circle-fill-B_pd8ZSs.Dxgzakn4.js"),[]),"../../assets/icons/check-circle.svg":()=>q(()=>import("./check-circle-szyAJiap.CM_vbBX5.js"),[]),"../../assets/icons/close-circle-fill.svg":()=>q(()=>import("./close-circle-fill-jSqPPw9i.BsLXh5-a.js"),[]),"../../assets/icons/close-circle.svg":()=>q(()=>import("./close-circle-CwmuN2C6.D612j4KD.js"),[]),"../../assets/icons/close.svg":()=>q(()=>import("./close-CFnkhudp.IMqD2L1-.js"),[]),"../../assets/icons/drop.svg":()=>q(()=>Promise.resolve().then(()=>ii),void 0).then(w=>w.d),"../../assets/icons/eye-close.svg":()=>q(()=>import("./eye-close-BVr3NJtg.DsdsDDgX.js"),[]),"../../assets/icons/eye.svg":()=>q(()=>import("./eye-D_mEt17f.DJFa_ttF.js"),[]),"../../assets/icons/home.svg":()=>q(()=>import("./home-BUQ4USMk.BqTharGj.js"),[]),"../../assets/icons/info-circle-fill.svg":()=>q(()=>import("./info-circle-fill-DjI8gXS3.DcQ9QdGJ.js"),[]).then(w=>w.i),"../../assets/icons/info-circle.svg":()=>q(()=>import("./info-circle-COnL5bTJ.B9YJorcw.js"),[]),"../../assets/icons/loading-scene.svg":()=>q(()=>import("./loading-scene-BMc2wqKm.Di19NrRU.js"),[]),"../../assets/icons/loading.svg":()=>q(()=>import("./loading-Dcc5RApI.D3l74EUI.js"),[]),"../../assets/icons/lock.svg":()=>q(()=>import("./lock-Cr7BnmWN.0WfYXC2j.js"),[]),"../../assets/icons/menu.svg":()=>q(()=>Promise.resolve().then(()=>ri),void 0).then(w=>w.m),"../../assets/icons/message.svg":()=>q(()=>import("./message-D36_Zo2l.CR8K3LhI.js"),[]),"../../assets/icons/more.svg":()=>q(()=>Promise.resolve().then(()=>ii),void 0).then(w=>w.m),"../../assets/icons/plus.svg":()=>q(()=>Promise.resolve().then(()=>ri),void 0).then(w=>w.j),"../../assets/icons/power-off.svg":()=>q(()=>import("./power-off-lQRbiBak.r13EH4bb.js"),[]),"../../assets/icons/preview.svg":()=>q(()=>import("./preview-CJbz9GjO.C8N16-9H.js"),[]),"../../assets/icons/search.svg":()=>q(()=>import("./search-BWdfjyP8.CdFUVZ0R.js"),[]),"../../assets/icons/setting.svg":()=>q(()=>import("./setting-DemlgzVC.DkD4YPwp.js"),[]),"../../assets/icons/sort.svg":()=>q(()=>import("./sort-DWqiUONr.C56fs5Gu.js"),[]),"../../assets/icons/sprite.svg":()=>q(()=>import("./sprite-CH2zLtZy.Djo3sTkk.js"),[]),"../../assets/icons/team.svg":()=>q(()=>import("./team-tl4NJXPC.D7881a1v.js"),[]),"../../assets/icons/unlock.svg":()=>q(()=>import("./unlock-CeU74z9n.58atcEuH.js"),[]),"../../assets/icons/user.svg":()=>q(()=>import("./user-B-eVXwuk.DyoYYAjs.js"),[]),"../../assets/icons/warning-circle-fill.svg":()=>q(()=>import("./warning-circle-fill-lODUKz0i.7RyGfSeR.js"),[]),"../../assets/icons/warning-circle.svg":()=>q(()=>import("./warning-circle-DDUgEDIv.1BX6MOiy.js"),[])}),`../../assets/icons/${this.name}.svg`,5).then(w=>{if(w&&w.default&&w.default._identification){const{data:T}=w.default;this._icon&&this._div.removeChild(this._icon),this._icon=Sn(T,"image/svg+xml"),this._icon&&(this._div.appendChild(this._icon),this.setSize(),this.setColor(),p())}else this.loadNs(),f(`
 couldn't be loaded by ra-icon, message: ${this.name} icon is undefined`)}).catch(w=>{this.loadNs()})})),Lt(this,"loadNs",()=>{this._icon&&this._div&&this._div.removeChild(this._icon),this._icon=document.createElement("svg"),this._icon.setAttribute("class","icon"),this._icon.setAttribute("viewBox","0 0 1024 1024"),this._icon.setAttribute("width","100"),this._icon.setAttribute("height","100");const p=document.createElementNS(Wo,"use");p.setAttributeNS(Wo,hu,`../../assets/iconfont/icon.svg#icon-${this.name}`),this._icon.appendChild(p),this._div.appendChild(this._icon)}),Lt(this,"setIcon",async()=>{this.name&&this.loadLocal()}),Lt(this,"setSize",()=>{this._icon&&this.size&&(this._icon.setAttribute("width",this.size),this._icon.setAttribute("height",this.size))}),Lt(this,"setColor",()=>{this._icon&&(this.color?this._icon.setAttribute("fill",this.color):this._icon.setAttribute("fill","currentColor"))}),Lt(this,"setSpin",()=>{this.spin&&this.style.setProperty("animation-duration",`${this.spin}s`)}),this._div=document.createElement("div"),this._div.setAttribute("class","ran-icon"),this._div.setAttribute("part","ran-icon")}static get observedAttributes(){return["name","size","color","spin"]}get name(){return this.getAttribute("name")}set name(p){p&&this.setAttribute("name",p)}get size(){return this.getAttribute("size")}set size(p){p&&this.setAttribute("size",p)}get color(){return this.getAttribute("color")}set color(p){p&&this.setAttribute("color",p)}get spin(){return this.getAttribute("spin")}set spin(p){p!=null&&this.setAttribute("spin",p)}connectedCallback(){this.appendChild(this._div),this.setIcon()}attributeChangedCallback(p,f,w){w!==f&&(p==="name"&&this.setIcon(),p==="size"&&this.setSize(),p==="color"&&this.setColor(),p==="spin"&&this.setSpin())}}customElements.define("ra-icon",x)}}uu();var fu=Object.defineProperty,pu=(x,h,p)=>h in x?fu(x,h,{enumerable:!0,configurable:!0,writable:!0,value:p}):x[h]=p,pe=(x,h,p)=>pu(x,typeof h!="symbol"?h+"":h,p);function gu(){if(typeof document<"u"&&!customElements.get("ra-option")){class x extends HTMLElement{constructor(){super(),pe(this,"_option"),pe(this,"_optionContent"),pe(this,"_shadowDom"),pe(this,"_slot"),this._slot=document.createElement("slot"),this._option=document.createElement("div"),this._option.setAttribute("class","ran-option"),this._optionContent=document.createElement("div"),this._optionContent.setAttribute("class","ran-option-content"),this._optionContent.appendChild(this._slot),this._option.appendChild(this._optionContent);const p=this.attachShadow({mode:"closed"});this._shadowDom=p,p.appendChild(this._option)}static get observedAttributes(){return["disabled","sheet","value"]}get value(){return this.getAttribute("value")}set value(p){this.setAttribute("value",p||"")}get sheet(){return this.getAttribute("sheet")}set sheet(p){this.setAttribute("sheet",p||"")}get disabled(){return Ce(this)}set disabled(p){!p||p==="false"?this.removeAttribute("disabled"):this.setAttribute("disabled","")}handlerExternalCss(){if(this.sheet)try{const p=new CSSStyleSheet;p.insertRule(this.sheet),this._shadowDom.adoptedStyleSheets=[p]}catch(p){console.error(`Failed to parse the rule in CSSStyleSheet: ${this.sheet},error:${p}`)}}attributeChangedCallback(p,f,w){p==="disabled"&&this._option&&(!w||w==="false"?this._option.setAttribute("disabled",""):this._option.removeAttribute("disabled")),p==="sheet"&&this._shadowDom&&f!==w&&this.handlerExternalCss()}}return x}else return Oe("document is undefined or ra-option is exist")}gu();const Zr={bottom:{add:"ran-select-dropdown-down-in",remove:"ran-select-dropdown-down-out"},top:{add:"ran-select-dropdown-up-in",remove:"ran-select-dropdown-up-out"}},mu=ai();class Xo extends Be(){constructor(){super(),pe(this,"removeTimeId"),pe(this,"_select"),pe(this,"_selection"),pe(this,"_search"),pe(this,"_icon"),pe(this,"_selectDropdown"),pe(this,"_selectionDropdown"),pe(this,"_selectDropDownInTimeId"),pe(this,"_selectDropDownOutTimeId"),pe(this,"_optionList"),pe(this,"_optionLabelMapValue"),pe(this,"_optionValueMapLabel"),pe(this,"_activeOption"),pe(this,"_text"),pe(this,"_selector"),pe(this,"onSearch"),pe(this,"setSelectDropdownDisplayNone",()=>{this._selectDropDownOutTimeId||this._selectionDropdown&&this._selectionDropdown.style.display!=="none"&&(Pe(this._selectionDropdown,Zr[this.placement].remove),this._selectDropDownOutTimeId=setTimeout(()=>{var h;(h=this._selectionDropdown)==null||h.style.setProperty("display","none"),this._selectionDropdown&&ze(this._selectionDropdown,Zr[this.placement].remove),clearTimeout(this._selectDropDownOutTimeId),this._selectDropDownOutTimeId=void 0},300))}),pe(this,"setSelectDropdownDisplayBlock",()=>{var h;this._selectDropDownInTimeId||this._selectionDropdown&&this._selectionDropdown.style.display!=="block"&&(Pe(this._selectionDropdown,Zr[this.placement].add),(h=this._selectionDropdown)==null||h.style.setProperty("display","block"),this._selectDropDownInTimeId=setTimeout(()=>{this._selectionDropdown&&ze(this._selectionDropdown,Zr[this.placement].add),clearTimeout(this._selectDropDownInTimeId),this._selectDropDownInTimeId=void 0},200))}),pe(this,"placementPosition",()=>{if(!this._selectionDropdown||!this._selectDropdown)return;const h=this.getBoundingClientRect(),{top:p,left:f,bottom:w,width:T}=h,_=document.getElementById(this.getPopupContainerId);this._selectionDropdown.style.setProperty("--ran-x",`${p+window.scrollX}`),this._selectionDropdown.style.setProperty("--ran-y",`${f+window.scrollY}`);let L=w+window.scrollY,B=f+window.scrollX;this._selectionDropdown.style.setProperty("width",`${T}px`),this.placement==="top"&&(L=p+window.scrollY-this._selectionDropdown.clientHeight),this.getPopupContainerId&&_&&(this.placement==="top"?L=p-_.getBoundingClientRect().top-this._selectionDropdown.clientHeight:L=_.getBoundingClientRect().height,B=0),this._selectionDropdown.style.setProperty("inset",`${L}px auto auto ${B}px`)}),pe(this,"selectMouseDown",h=>{h.stopPropagation(),!Ce(this)&&(this.removeDropDownTimeId(),this.setSelectDropdownDisplayNone(),this.setSelectDropdownDisplayBlock(),this.placementPosition())}),pe(this,"removeDropDownTimeId",()=>{this._search.setAttribute("value",""),this.trigger.includes("hover")&&!Et()&&(clearTimeout(this.removeTimeId),this.removeTimeId=void 0)}),pe(this,"selectBlur",()=>{this.removeTimeId&&this.removeDropDownTimeId(),this.removeTimeId=setTimeout(()=>{this.removeDropDownTimeId(),this.setSelectDropdownDisplayNone()},100)}),pe(this,"clickOption",h=>{var p,f;h.stopPropagation();let w=h.target;if((p=w.classList)!=null&&p.contains("ranui-select-dropdown-option-item")&&(w=w.children[0]),!((f=w.classList)!=null&&f.contains("ranui-select-dropdown-option-item-content")))return;const T=w.innerHTML,_=this._optionLabelMapValue.get(T);_&&(this.setAttribute("value",_),this._text.innerHTML=T,this._text.setAttribute("title",T),this._search.setAttribute("placeholder",T));const L=this.getBoundingClientRect(),{height:B}=L;this._text.style.setProperty("line-height",`${B}px`),this._activeOption&&ze(this._activeOption,"ranui-select-dropdown-option-active"),setTimeout(()=>{this._activeOption=(w==null?void 0:w.parentElement)||void 0,this._activeOption&&Pe(this._activeOption,"ranui-select-dropdown-option-active")},200),this.setSelectDropdownDisplayNone(),this.dispatchEvent(new CustomEvent("change",{detail:{value:_,label:T}})),this.removeDropDownTimeId()}),pe(this,"createOption",()=>{if(!this._selectDropdown){this.appendChild(this._select);const h=document.getElementById(this.getPopupContainerId)||document.body;this._selectDropdown=document.createElement("div"),this._selectDropdown.style.setProperty("-webkit-tap-highlight-color","transparent"),this._selectDropdown.style.setProperty("outline","0"),this._selectDropdown.addEventListener("click",this.clickOption),this._selectionDropdown=document.createElement("div"),this._selectionDropdown.style.setProperty("-webkit-tap-highlight-color","transparent"),this._selectionDropdown.style.setProperty("outline","0"),this.dropdownclass?this._selectionDropdown.setAttribute("class",`${this.dropdownclass} ranui-select-dropdown`):this._selectionDropdown.setAttribute("class","ranui-select-dropdown"),this.trigger.includes("hover")&&!Et()&&(this._selectDropdown.addEventListener("mouseleave",this.selectBlur),this._selectDropdown.addEventListener("mouseenter",this.removeDropDownTimeId)),this._selectDropdown.appendChild(this._selectionDropdown),this._selectionDropdown.style.setProperty("display","none"),h.appendChild(this._selectDropdown)}this.addOptionToSlot()}),pe(this,"removeSelectDropdown",()=>{try{this._selectDropdown&&(document.getElementById(this.getPopupContainerId)||document.body).removeChild(this._selectDropdown)}catch{}}),pe(this,"addOptionToSlot",()=>{var h;const p=this.children||[];this._optionList=[];for(const f of p)if(f.tagName==="R-OPTION"){const w=f.innerHTML,T=f.getAttribute("value")||"";(h=this._optionList)==null||h.push({label:w,value:T}),this._optionLabelMapValue.set(w,T),this._optionValueMapLabel.set(T,w)}this.createSelectDropdownContent(this._optionList)}),pe(this,"createSelectDropdownContent",(h=[])=>{var p,f;h.length===0?(p=this._selectDropdown)==null||p.style.setProperty("display","none"):(f=this._selectDropdown)==null||f.style.setProperty("display","block"),this._selectionDropdown&&(this._selectionDropdown.innerHTML=""),h.forEach(w=>{if(this._selectionDropdown){const{label:T,value:_}=w,L=document.createElement("div");(this.getAttribute("defaultValue")||this.getAttribute("value"))===_?(L.setAttribute("class","ranui-select-dropdown-option-active ranui-select-dropdown-option-item"),this._activeOption=L):L.setAttribute("class","ranui-select-dropdown-option-item");const M=document.createElement("div");M.setAttribute("class","ranui-select-dropdown-option-item-content"),M.innerHTML=`${T}`,M.setAttribute("value",`${_}`),M.setAttribute("title",`${T}`),L.appendChild(M),this._selectionDropdown.appendChild(L)}}),this.setDefaultValue()}),pe(this,"setDefaultValue",()=>{const h=this.getAttribute("defaultValue")||this.getAttribute("value");if(!h)return;const p=this._optionValueMapLabel.get(h);if(!p)return;this.setAttribute("value",h);const f=this.getBoundingClientRect(),{height:w}=f;this._text.style.setProperty("line-height",`${w}px`),this._text.innerHTML=p,this._text.setAttribute("title",p)}),pe(this,"changeSearch",h=>{const p=h.detail.value||"";if(this.dispatchEvent(new CustomEvent("search",{detail:{value:p}})),this._selectionDropdown&&(this._selectionDropdown.innerHTML=""),p.length>0){const f=this._optionList.map(w=>{const{label:T}=w;if(`${T}`.toLowerCase().includes(p))return{label:T,value:w.value}}).filter(w=>w);this.createSelectDropdownContent(f)}else this.createSelectDropdownContent(this._optionList)}),pe(this,"setShowSearch",()=>{this.onSearch=mu(this.changeSearch),this.onSearch&&this._search.addEventListener("change",this.onSearch),this.onSearch&&this._search.addEventListener("click",this.onSearch)}),pe(this,"removeShowSearch",()=>{this.onSearch&&this._search.removeEventListener("change",this.onSearch),this.onSearch&&this._search.removeEventListener("click",this.onSearch)}),pe(this,"listenActionEvent",()=>{this.removeEventListener("mouseenter",this.selectMouseDown),this.removeEventListener("mouseleave",this.selectBlur),this.removeEventListener("click",this.selectMouseDown),this.removeEventListener("blur",this.selectBlur),this.trigger.includes("hover")&&!Et()&&(this.addEventListener("mouseenter",this.selectMouseDown),this.addEventListener("mouseleave",this.selectBlur)),this.trigger.includes("click")&&(this.addEventListener("click",this.selectMouseDown),this.addEventListener("blur",this.selectBlur))}),pe(this,"clickRemoveSelect",h=>{h.stopPropagation(),this.setSelectDropdownDisplayNone()}),this._select=document.createElement("div"),this._select.setAttribute("class","ran-select"),this._select.setAttribute("part","select"),this._selection=document.createElement("div"),this._selection.setAttribute("class","selection"),this._selection.setAttribute("part","selection"),this._selector=document.createElement("div"),this._search=document.createElement("ra-input"),this._search.setAttribute("class","selection-search"),this._search.setAttribute("part","search"),this._search.setAttribute("type","search"),this._search.setAttribute("autocomplete","off"),this._text=document.createElement("span"),this._text.setAttribute("class","selection-item"),this._text.setAttribute("part","selection-item"),this._icon=document.createElement("ra-icon"),this._icon.setAttribute("class","icon"),this._icon.setAttribute("part","icon"),this._icon.setAttribute("name","arrow-down"),this._icon.setAttribute("color","#d9d9d9"),this._icon.setAttribute("size","16"),this._selector.appendChild(this._text),this._selector.appendChild(this._search),this._selection.appendChild(this._icon),this._selection.appendChild(this._selector),this._select.appendChild(this._selection),this._optionList=[],this._optionLabelMapValue=new Map,this._optionValueMapLabel=new Map}static get observedAttributes(){return["disabled","sheet","clear","type","defaultValue","showSearch","placement","getPopupContainerId","dropdownclass","trigger"]}get value(){return this.getAttribute("value")||""}set value(h){!Ce(this)&&h?this.setAttribute("value",h):this.removeAttribute("value")}get defaultValue(){return this.getAttribute("defaultValue")||""}set defaultValue(h){this.setAttribute("defaultValue",h||"")}get showSearch(){return this.getAttribute("showSearch")||""}set showSearch(h){this.setAttribute("showSearch",h||"")}get type(){return this.getAttribute("type")||""}set type(h){this.setAttribute("type",h||"")}get placement(){return this.getAttribute("placement")||"bottom"}set placement(h){this.setAttribute("placement",h||"")}get sheet(){return this.getAttribute("sheet")||""}set sheet(h){this.setAttribute("sheet",h||"")}get getPopupContainerId(){return this.getAttribute("getPopupContainerId")||""}set getPopupContainerId(h){this.setAttribute("getPopupContainerId",h||"")}get dropdownclass(){return this.getAttribute("dropdownclass")||""}set dropdownclass(h){this.setAttribute("dropdownclass",h||"")}get trigger(){return this.getAttribute("trigger")||"click"}set trigger(h){this.setAttribute("trigger",h||"")}get disabled(){return Ce(this)}set disabled(h){!h||h==="false"?(this.removeAttribute("disabled"),this._selection.removeAttribute("disabled")):(this.setAttribute("disabled",""),this._selection.setAttribute("disabled",""))}connectedCallback(){this.createOption(),this.listenActionEvent(),this.setShowSearch(),document.addEventListener("click",this.clickRemoveSelect)}disconnectCallback(){var h;this.removeEventListener("mouseenter",this.selectMouseDown),this.removeEventListener("mouseleave",this.selectBlur),this.removeEventListener("click",this.selectMouseDown),this.removeEventListener("blur",this.selectBlur),this.removeSelectDropdown(),(h=this._selectDropdown)==null||h.removeEventListener("click",this.clickOption),document.removeEventListener("click",this.clickRemoveSelect)}attributeChangedCallback(h,p,f){h==="disabled"&&this._select&&(!f||f==="false"?(this._select.setAttribute("disabled",""),this._selection.setAttribute("disabled","")):(this._select.removeAttribute("disabled"),this._selection.removeAttribute("disabled")))}}function vu(){return typeof document<"u"&&!customElements.get("ra-select")?(customElements.define("ra-select",Xo),Xo):Oe("document is undefined or ra-select is exist")}vu();var bu=Object.defineProperty,yu=(x,h,p)=>h in x?bu(x,h,{enumerable:!0,configurable:!0,writable:!0,value:p}):x[h]=p,Z=(x,h,p)=>yu(x,typeof h!="symbol"?h+"":h,p);const wu=x=>{const{r:h,g:p,b:f}=Eu(x);return An(h,p,f)},Eu=x=>(x[0]==="#"&&(x=x.substr(1)),x.length===3?{r:parseInt(x[0]+x[0],16),g:parseInt(x[1]+x[1],16),b:parseInt(x[2]+x[2],16)}:{r:parseInt(x.substr(0,2),16),g:parseInt(x.substr(2,2),16),b:parseInt(x.substr(4,2),16)}),An=(x,h,p)=>{let f;const w=Math.max(x,h,p),T=Math.min(x,h,p),_=w-T;_===0?f=0:x===w?f=(h-p)/_%6:h===w?f=(p-x)/_+2:f=(x-h)/_+4,f=Math.round(f*60),f<0&&(f+=360);const L=Math.round((w===0?0:_/w)*100),B=Math.round(w/255*100);return{h:f,s:L,v:B}},Jo=(x,h,p)=>{h=h/100,p=p/100;let f=[];const w=p*h,T=x/60,_=w*(1-Math.abs(T%2-1)),L=p-w;return T>=0&&T<1?f=[w,_,0]:T>=1&&T<2?f=[_,w,0]:T>=2&&T<3?f=[0,w,_]:x>=3&&T<4?f=[0,_,w]:x>=4&&T<5?f=[_,0,w]:x>=5&&T<=6?f=[w,0,_]:f=[0,0,0],{r:Math.round(255*(f[0]+L)),g:Math.round(255*(f[1]+L)),b:Math.round(255*(f[2]+L))}},Au=/^#([\da-f]{6}|[\da-f]{3})$/i,xu=/^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)$/,ku=/^rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),(\d{1,3}(\.\d+)?)\)$/,Dt=8,Tu=360;class xn extends Be(){constructor(){super(),Z(this,"colorpicker"),Z(this,"colorpickerInner"),Z(this,"context"),Z(this,"popoverBlock"),Z(this,"popoverContent"),Z(this,"colorPickerInner"),Z(this,"colorPickerInnerContent"),Z(this,"colorPickerPanel"),Z(this,"colorPickerInputContainer"),Z(this,"colorPickerPanelDot"),Z(this,"colorPickerPanelSliderContainer"),Z(this,"colorPickerPanelSliderGroup"),Z(this,"colorPickerPanelSliderHue"),Z(this,"colorPickerPanelSliderAlpha"),Z(this,"colorPickerColorBlockInner"),Z(this,"colorPickerColorBlock"),Z(this,"colorPickerInnerContentSelect"),Z(this,"colorPickerPanelPalette"),Z(this,"colorPickerPanelSaturation"),Z(this,"colorPickerInputContainerSelect"),Z(this,"colorPickerInputContainerInputColor"),Z(this,"colorPickerInputContainerInputNumber"),Z(this,"colorPickerInputContainerSelectItem"),Z(this,"colorPickerPaletteSelect"),Z(this,"colorPickerPanelDotInner"),Z(this,"createContext",()=>{this.context={value:this.createColorValueSignal(),disabled:this.createColorDisabled(),hue:this.createColorHue(),saturation:this.createColorSaturation(),lightness:this.createColorLightness(),transparency:this.createColorTransparency()}}),Z(this,"createColorHue",()=>{const[h,p]=er(0,{subscriber:[this.updateColorPickerPanelSaturationBackground,this.updateColorPickerPanelSliderHueProgressPercent,this.updateColorPickerPanelSliderAlphaProgressWrap,this.updateColorPickerPanelSliderAlphaProgressDot,this.updateColorPickerColorBlockInnerBackground,this.updateColorPickerPanelSliderHueProgressDot]});return{getter:h,setter:p}}),Z(this,"createColorSaturation",()=>{const[h,p]=er(100,{subscriber:[this.updateColorPickerPanelSliderAlphaProgressWrap,this.updateColorPickerPanelSliderAlphaProgressDot,this.updateColorPickerColorBlockInnerBackground]});return{getter:h,setter:p}}),Z(this,"createColorLightness",()=>{const[h,p]=er(100,{subscriber:[this.updateColorPickerPanelSliderAlphaProgressWrap,this.updateColorPickerPanelSliderAlphaProgressDot,this.updateColorPickerColorBlockInnerBackground]});return{getter:h,setter:p}}),Z(this,"createColorTransparency",()=>{const[h,p]=er(80,{subscriber:[this.updateColorPickerPanelSliderAlphaProgressPercent,this.updateColorPickerColorBlockInnerBackground,this.updateColorPickerPanelSliderAlphaProgressDot]});return{getter:h,setter:p}}),Z(this,"createColorDisabled",()=>{const[h,p]=er(!0,{subscriber:[]});return{getter:h,setter:p}}),Z(this,"createColorValueSignal",()=>{const[h,p]=er("",{subscriber:[this.updateColorValue]});return{getter:h,setter:p}}),Z(this,"generateHue2rgb",()=>{const{hue:h}=this.context,{r:p,g:f,b:w}=Jo(h.getter(),100,100);return`rgb(${p}, ${f}, ${w})`}),Z(this,"generateHsv2Rgb",()=>{const{r:h,g:p,b:f}=this.generateHsv2Rgba();return`rgb(${h}, ${p}, ${f})`}),Z(this,"generateHsv2Rgba",()=>{const{hue:h,saturation:p,lightness:f,transparency:w}=this.context,{r:T,g:_,b:L}=Jo(h.getter(),p.getter(),f.getter());return{r:T,g:_,b:L,a:w.getter()/100}}),Z(this,"generateHsv2RgbaValue",()=>{const{r:h,g:p,b:f,a:w}=this.generateHsv2Rgba();return`rgb(${h}, ${p}, ${f}, ${w})`}),Z(this,"generateColorPickerProgress",()=>{const{r:h,g:p,b:f}=this.generateHsv2Rgba();return`linear-gradient(to right, rgba(255, 0, 4, 0), rgba(${h}, ${p}, ${f}, 1))`}),Z(this,"updateColorValue",h=>{var p,f;if(h!==((p=this.context)==null?void 0:p.value.getter())){const w=Au.exec(h),T=xu.exec(h.replace(/\s+/g,"")),_=ku.exec(h.replace(/\s+/g,""));if(w){const{h:L,s:B,v:M}=wu(w[0]);this.context.hue.setter(L),this.context.saturation.setter(B),this.context.lightness.setter(M),this.context.transparency.setter(100)}else if(_){const{h:L,s:B,v:M}=An(Number(_[1]),Number(_[2]),Number(_[3]));this.context.hue.setter(L),this.context.saturation.setter(B),this.context.lightness.setter(M),this.context.transparency.setter(Number(_[4]))}else if(T){const{h:L,s:B,v:M}=An(Number(T[1]),Number(T[2]),Number(T[3]));this.context.hue.setter(L),this.context.saturation.setter(B),this.context.lightness.setter(M),this.context.transparency.setter(100)}else return;this.setAttribute("value",h),this.colorpickerInner.style.setProperty("background",h),(f=this.context)==null||f.value.setter(h)}}),Z(this,"updateColorPickerPanelSliderHueProgressPercent",h=>{var p;(p=this.colorPickerPanelSliderHue)==null||p.setAttribute("percent",`${h/360}`)}),Z(this,"updateColorPickerPanelSliderAlphaProgressPercent",h=>{var p;(p=this.colorPickerPanelSliderAlpha)==null||p.setAttribute("percent",`${h/100}`)}),Z(this,"updateColorPickerPanelSliderAlphaProgressWrap",()=>{var h;(h=this.colorPickerPanelSliderAlpha)==null||h.style.setProperty("--ran-progress-wrap-background",this.generateColorPickerProgress())}),Z(this,"updateColorPickerPanelSliderAlphaProgressDot",()=>{var h;(h=this.colorPickerPanelSliderAlpha)==null||h.style.setProperty("--ran-progress-dot-background",this.generateHsv2RgbaValue())}),Z(this,"updateColorPickerPanelSliderHueProgressDot",()=>{var h;(h=this.colorPickerPanelSliderHue)==null||h.style.setProperty("--ran-progress-dot-background",this.generateHue2rgb())}),Z(this,"updateColorPickerColorBlockInnerBackground",()=>{var h;(h=this.colorPickerColorBlockInner)==null||h.style.setProperty("background",this.generateHsv2RgbaValue())}),Z(this,"updateColorPickerPanelSaturationBackground",()=>{var h;(h=this.colorPickerPanelSaturation)==null||h.style.setProperty("background-color",this.generateHue2rgb())}),Z(this,"clickStop",h=>{h.stopPropagation(),h.preventDefault()}),Z(this,"changeColorPalettePositionByContext",()=>{window.requestAnimationFrame(()=>{var h,p,f,w,T;if(this.updateColorValue(this.value),!this.colorPickerPanelPalette||!((h=this.context)!=null&&h.lightness.getter)||!((p=this.context)!=null&&p.saturation.getter))return;const{width:_,height:L}=((f=this.colorPickerPanelPalette)==null?void 0:f.getBoundingClientRect())||{},B=L-this.context.lightness.getter()/100*L,M=this.context.saturation.getter()/100*_;(w=this.colorPickerPanelDot)==null||w.style.setProperty("top",`${B-Dt}px`),(T=this.colorPickerPanelDot)==null||T.style.setProperty("left",`${M-Dt}px`)})}),Z(this,"changeColorPalettePosition",(h,p)=>{var f,w,T;if(!this.colorPickerPanelPalette||!((f=this.context)!=null&&f.lightness.getter)||!((w=this.context)!=null&&w.saturation.getter))return;const{width:_,height:L}=((T=this.colorPickerPanelPalette)==null?void 0:T.getBoundingClientRect())||{},B=L-wt(p,0,L),M=wt(h,0,_);this.context.saturation.setter(M/_*100),this.context.lightness.setter(B/L*100),window.requestAnimationFrame(()=>{var j,$;(j=this.colorPickerPanelDot)==null||j.style.setProperty("top",`${p-Dt}px`),($=this.colorPickerPanelDot)==null||$.style.setProperty("left",`${h-Dt}px`)})}),Z(this,"clickColorPalette",h=>{const{offsetX:p,offsetY:f}=h;this.changeColorPalettePosition(p,f)}),Z(this,"createColorPickerProgress",()=>{this.colorPickerPanelSliderContainer=document.createElement("div"),this.colorPickerPanelSliderContainer.setAttribute("class","ran-color-picker-slider-container"),this.colorPickerPanelSliderGroup=document.createElement("div"),this.colorPickerPanelSliderGroup.setAttribute("class","ran-color-picker-slider-container-group"),this.colorPickerPanelSliderHue=document.createElement("r-progress"),this.updateColorPickerPanelSliderHueProgressDot(),this.colorPickerPanelSliderHue.style.setProperty("--ran-progress-wrap-background","linear-gradient(to right, #ff0000, #ffff00, #00ff00, #00ffff, #0000ff, #ff00ff, #ff0000)"),this.colorPickerPanelSliderHue.setAttribute("percent",`${this.context.hue.getter()/360}`),this.colorPickerPanelSliderHue.addEventListener("change",this.changeColorPickerHue),this.colorPickerPanelSliderHue.setAttribute("type","drag"),this.colorPickerPanelSliderHue.setAttribute("class","ran-color-picker-slider-container-group-hue"),this.colorPickerPanelSliderAlpha=document.createElement("r-progress"),this.updateColorPickerPanelSliderAlphaProgressDot(),this.colorPickerPanelSliderAlpha.setAttribute("percent",`${this.context.transparency.getter()/100}`),this.updateColorPickerPanelSliderAlphaProgressWrap(),this.colorPickerPanelSliderAlpha.addEventListener("change",this.changeColorPickerAlpha),this.colorPickerPanelSliderAlpha.setAttribute("type","drag"),this.colorPickerPanelSliderAlpha.setAttribute("class","ran-color-picker-slider-container-group-alpha"),this.colorPickerPanelSliderGroup.appendChild(this.colorPickerPanelSliderHue),this.colorPickerPanelSliderGroup.appendChild(this.colorPickerPanelSliderAlpha),this.colorPickerPanelSliderContainer.appendChild(this.colorPickerPanelSliderGroup),this.colorPickerColorBlock=document.createElement("div"),this.colorPickerColorBlock.setAttribute("class","ran-color-picker-slider-container-color-block"),this.colorPickerColorBlockInner=document.createElement("div"),this.colorPickerColorBlockInner.setAttribute("class","ran-color-picker-slider-container-color-block-inner"),this.updateColorPickerColorBlockInnerBackground(),this.colorPickerColorBlock.appendChild(this.colorPickerColorBlockInner),this.colorPickerPanelSliderContainer.appendChild(this.colorPickerColorBlock)}),Z(this,"changeColorPickerHue",h=>{this.context.hue.setter(h.detail.value*Tu)}),Z(this,"changeColorPickerAlpha",h=>{this.context.transparency.setter(h.detail.value*100)}),Z(this,"createColorPickerSelect",()=>{this.colorPickerPanel=document.createElement("div"),this.colorPickerPanel.setAttribute("class","ran-color-picker-panel"),this.colorPickerInnerContentSelect=document.createElement("div"),this.colorPickerInnerContentSelect.setAttribute("class","ran-color-picker-select"),this.colorPickerPanel.appendChild(this.colorPickerInnerContentSelect),this.colorPickerPanelPalette=document.createElement("div"),this.colorPickerPanelPalette.setAttribute("class","ran-color-picker-palette"),this.colorPickerInnerContentSelect.appendChild(this.colorPickerPanelPalette),this.colorPickerPanelSaturation=document.createElement("div"),this.colorPickerPanelSaturation.setAttribute("class","ran-color-picker-saturation"),this.updateColorPickerPanelSaturationBackground(),this.colorPickerPanelDot=document.createElement("div"),this.colorPickerPanelDotInner=document.createElement("div"),this.colorPickerPanelDotInner.setAttribute("class","ran-color-picker-palette-dot-inner"),this.colorPickerPanelDot.setAttribute("class","ran-color-picker-palette-dot"),this.colorPickerPanelDot.addEventListener("mousedown",this.mouseDownColorPickerPalette),document.body.addEventListener("mousemove",this.mouseMoveColorPickerPalette),this.colorPickerPanelDot.addEventListener("mouseup",this.mouseUpColorPickerPalette),this.colorPickerPanelDot.appendChild(this.colorPickerPanelDotInner),this.colorPickerPanelPalette.appendChild(this.colorPickerPanelDot),this.colorPickerPanelPalette.appendChild(this.colorPickerPanelSaturation),this.colorPickerPanelPalette.addEventListener("mousedown",this.clickColorPalette)}),Z(this,"createColorPickerInput",()=>{this.colorPickerInputContainer=document.createElement("div"),this.colorPickerInputContainer.setAttribute("class","ran-color-picker-input-container");const h=`${performance.now()}`.replace(".","");this.colorPickerInputContainerSelect=document.createElement("div"),this.colorPickerInputContainerSelect.setAttribute("class","ran-color-picker-input-container-select"),this.colorPickerInputContainerSelect.setAttribute("id",h),this.colorPickerInputContainerSelectItem=document.createElement("ra-select"),this.colorPickerInputContainerSelectItem.setAttribute("value","HEX"),this.colorPickerInputContainerSelectItem.setAttribute("class","ran-color-picker-input-container-select-item"),this.colorPickerInputContainerSelectItem.setAttribute("type","text"),this.colorPickerInputContainerSelectItem.setAttribute("getPopupContainerId",h);const p=["HEX","HSB","RGB"],f=document.createDocumentFragment();p.forEach(w=>{const T=document.createElement("r-option");T.setAttribute("value",w),T.innerText=w,f.appendChild(T)}),this.colorPickerInputContainerSelectItem.appendChild(f),this.colorPickerInputContainerSelect.appendChild(this.colorPickerInputContainerSelectItem),this.colorPickerInputContainer.appendChild(this.colorPickerInputContainerSelect),this.colorPickerInputContainerInputColor=document.createElement("ra-input"),this.colorPickerInputContainerInputColor.setAttribute("class","ran-color-picker-input-container-input-color"),this.colorPickerInputContainerInputNumber=document.createElement("ra-input"),this.colorPickerInputContainerInputNumber.setAttribute("class","ran-color-picker-input-container-input-number"),this.colorPickerInputContainer.appendChild(this.colorPickerInputContainerInputColor),this.colorPickerInputContainer.appendChild(this.colorPickerInputContainerInputNumber)}),Z(this,"openColorPicker",()=>{this.colorPickerInner||(this.colorPickerInner=document.createElement("div"),this.colorPickerInner.setAttribute("class","ran-color-picker-inner"),this.colorPickerInnerContent=document.createElement("div"),this.colorPickerInnerContent.setAttribute("class","ran-color-picker-inner-content"),this.createColorPickerProgress(),this.createColorPickerSelect(),this.createColorPickerInput(),this.colorPickerPanel&&this.colorPickerInnerContent.appendChild(this.colorPickerPanel),this.colorPickerPanelSliderContainer&&this.colorPickerInnerContent.appendChild(this.colorPickerPanelSliderContainer),this.colorPickerInputContainer&&this.colorPickerInnerContent.appendChild(this.colorPickerInputContainer),this.colorPickerInner.appendChild(this.colorPickerInnerContent),this.popoverContent.appendChild(this.colorPickerInner),this.changeColorPalettePositionByContext())}),Z(this,"mouseMoveColorPickerPalette",h=>{var p;if(!this.colorPickerPanelPalette||!this.colorPickerPaletteSelect)return;const{pageX:f,pageY:w}=h,{top:T=0,left:_=0,width:L,height:B}=((p=this.colorPickerPanelPalette)==null?void 0:p.getBoundingClientRect())||{},M=wt(w-T-Dt,-8,B-Dt),j=wt(f-_-Dt,-8,L-Dt);this.context.saturation.setter(j/L*100),this.context.lightness.setter(M/B*100),window.requestAnimationFrame(()=>{var $,he;($=this.colorPickerPanelDot)==null||$.style.setProperty("top",`${M}px`),(he=this.colorPickerPanelDot)==null||he.style.setProperty("left",`${j}px`)})}),Z(this,"mouseDownColorPickerPalette",h=>{h.stopPropagation(),h.preventDefault(),this.colorPickerPaletteSelect=!0}),Z(this,"mouseUpColorPickerPalette",()=>{this.colorPickerPaletteSelect=!1}),this.setAttribute("class","ran-colorpicker"),this.popoverBlock=document.createElement("r-popover"),this.popoverBlock.setAttribute("class","ran-popover"),this.popoverContent=document.createElement("r-content"),this.popoverContent.setAttribute("class","ran-content"),this.colorpicker=document.createElement("div"),this.colorpicker.setAttribute("class","ran-colorpicker-block"),this.colorpickerInner=document.createElement("div"),this.colorpickerInner.setAttribute("class","ran-colorpicker-inner"),this.popoverBlock.appendChild(this.colorpicker),this.popoverBlock.appendChild(this.popoverContent),this.colorpicker.appendChild(this.colorpickerInner),this.appendChild(this.popoverBlock),this.colorPickerPaletteSelect=!1,this.createContext()}static get observedAttributes(){return["disabled","value"]}get value(){var h;return((h=this.context)==null?void 0:h.value.getter())||""}set value(h){this.setAttribute("value",h),this.updateColorValue(h)}connectedCallback(){this.popoverBlock.addEventListener("click",this.openColorPicker)}disconnectCallback(){var h,p,f;this.popoverBlock.removeEventListener("click",this.openColorPicker),(h=this.colorPickerPanelDot)==null||h.removeEventListener("mousedown",this.mouseDownColorPickerPalette),document.body.removeEventListener("mousemove",this.mouseMoveColorPickerPalette),(p=this.colorPickerPanelDot)==null||p.removeEventListener("mouseup",this.mouseUpColorPickerPalette),(f=this.colorPickerPanelPalette)==null||f.removeEventListener("mousedown",this.clickColorPalette)}attributeChangedCallback(h,p,f){p!==f&&h==="value"&&this.updateColorValue(f)}}function _u(){return typeof document<"u"&&!customElements.get("r-colorpicker")?(customElements.define("r-colorpicker",xn),xn):Oe("document is undefined or r-colorpicker is exist")}const Su=_u(),Cu=Object.freeze(Object.defineProperty({__proto__:null,ColorPicker:xn,default:Su},Symbol.toStringTag,{value:"Module"}));var Lu=Object.defineProperty,Du=(x,h,p)=>h in x?Lu(x,h,{enumerable:!0,configurable:!0,writable:!0,value:p}):x[h]=p,me=(x,h,p)=>Du(x,typeof h!="symbol"?h+"":h,p);const Ru='.remove-wap-active-focus{outline:0;-webkit-tap-highlight-color:transparent}.remove-wap-active-focus:active,.remove-wap-active-focus:focus{outline:0;-webkit-tap-highlight-color:transparent}.ran-loading .stretch{width:var(--loading-stretch-width, 4em);height:var(--loading-stretch-height, 5em);text-align:var(--loading-stretch-text-align, center);display:var(--loading-stretch-display, flex);flex-flow:var(--loading-stretch-flex-flow, row nowrap);justify-content:var(--loading-stretch-justify-content, space-between);align-items:var(--loading-stretch-align-items, center)}@keyframes ran-loading-stretch{0%,40%,to{transform:var(--loading-stretch-keyframes-0, scaleY(.4))}20%{transform:var(--loading-stretch-keyframes-20, scaleY(1))}}.ran-loading .stretch div{background-color:var(--loading-stretch-div-background-color, #4096ff);height:var(--loading-stretch-div-height, 100%);width:var(--loading-stretch-div-width, .4em);animation:var(--loading-stretch-div-animation, ran-loading-stretch 1.2s infinite ease-in-out);animation-play-state:var(--loading-stretch-div-animation-play-state, running)}.ran-loading .stretch .rect5{animation-delay:var(--loading-stretch-rect-animation-delay, -.8s)}.ran-loading .stretch .rect4{animation-delay:var(--loading-stretch-rect-animation-delay, -.9s)}.ran-loading .stretch .rect3{animation-delay:var(--loading-stretch-rect-animation-delay, -1s)}.ran-loading .stretch .rect2{animation-delay:var(--loading-stretch-rect-animation-delay, -1.1s)}.ran-loading .rotate{width:var(--loading-rotate-width, 4em);height:var(--loading-rotate-height, 4em);background:var(--loading-rotate-background, #4096ff);animation:var(--loading-rotate-animation, ran-loading-rotate 1.2s infinite ease-in-out);animation-play-state:var(--loading-rotate-div-animation-play-state, running)}@keyframes ran-loading-rotate{0%{transform:var(--loading-rotate-keyframes-0, perspective(120px) rotateX(0deg) rotateY(0deg))}50%{transform:var(--loading-rotate-keyframes-50, perspective(120px) rotateX(-180.1deg) rotateY(0deg))}to{transform:var(--loading-rotate-keyframes-100, perspective(120px) rotateX(-180deg) rotateY(-179.9deg))}}.ran-loading .double-bounce{width:var(--loading-double-bounce-width, 4em);height:var(--loading-double-bounce-height, 4em);position:var(--loading-double-bounce-height, relative)}.ran-loading .double-bounce .double-bounce1{width:var(--loading-double-bounce1-width, 100%);height:var(--loading-double-bounce1-height, 100%);border-radius:var(--loading-double-bounce1-border-radius, 50%);background:var(--loading-double-bounce1-background, #4096ff);opacity:var(--loading-double-bounce1-opacity, .6);position:var(--loading-double-bounce1-position, absolute);top:var(--loading-double-bounce1-top, 0);left:var(--loading-double-bounce1-left, 0);animation:var(--loading-double-bounce1-animation, ran-loading-bounce 2s infinite ease-in-out);animation-play-state:var(--loading-double-bounce1-animation-play-state, running)}.ran-loading .double-bounce .double-bounce2{width:var(--loading-double-bounce2-width, 100%);height:var(--loading-double-bounce2-height, 100%);border-radius:var(--loading-double-bounce2-border-radius, 50%);background:var(--loading-double-bounce2-background, #4096ff);opacity:var(--loading-double-bounce2-opacity, .6);position:var(--loading-double-bounce2-position, absolute);top:var(--loading-double-bounce2-top, 0);left:var(--loading-double-bounce2-left, 0);animation:var(--loading-double-bounce2-animation, ran-loading-bounce 2s infinite ease-in-out);animation-delay:var(--loading-double-bounce2-animation-delay, -1s);animation-play-state:var(--loading-double-bounce2-animation-play-state, running)}@keyframes ran-loading-bounce{0%,to{transform:var(--loading-double-bounce-keyframes-0, scale(0))}50%{transform:var(--loading-double-bounce-keyframes-50, scale(1))}}.ran-loading .cube{width:var(--loading-cube-width, 2em);height:var(--loading-cube-width, 2em);position:var(--loading-cube-width, relative)}.ran-loading .cube .cube1{background:var(--loading-cube1-background, #4096ff);width:var(--loading-cube1-width, 2em);height:var(--loading-cube1-height, 2em);position:var(--loading-cube1-position, absolute);top:var(--loading-cube1-top, 0);left:var(--loading-cube1-left, 0);animation:var(--loading-cube1-animation, ran-loading-cube 1.8s infinite ease-in-out);animation-play-state:var(--loading-cube1-animation-play-state, running)}.ran-loading .cube .cube2{background:var(--loading-cube2-background, #4096ff);width:var(--loading-cube2-width, 2em);height:var(--loading-cube2-height, 2em);position:var(--loading-cube2-position, absolute);top:var(--loading-cube2-top, 0);left:var(--loading-cube2-left, 0);animation:var(--loading-cube2-animation, ran-loading-cube 1.8s infinite ease-in-out);animation-delay:var(--loading-cube2-animation-delay, -.9s);animation-play-state:var(--loading-cube2-animation-play-state, running)}@keyframes ran-loading-cube{25%{transform:var(--loading-cube-keyframes-25, translateX(42px) rotate(-90deg) scale(.5))}50%{transform:var(--loading-cube-keyframes-50, translateX(42px) translateY(42px) rotate(-179deg))}50.1%{transform:var(--loading-cube-keyframes-501, translateX(42px) translateY(42px) rotate(-180deg))}75%{transform:var(--loading-cube-keyframes-75, translateX(0px) translateY(42px) rotate(-270deg) scale(.5))}to{transform:var(--loading-cube-keyframes-100, rotate(-360deg))}}.ran-loading .dot{width:var(--loading-dot-width, 4em);height:var(--loading-dot-height, 4em);position:var(--loading-dot-position, relative);text-align:var(--loading-dot-text-align, center);animation:var(--loading-dot-animation, ran-loading-dot-rotate 2s infinite linear);animation-play-state:var(--loading-dot-animation-play-state, running)}.ran-loading .dot .dot1{width:var(--loading-dot1-width, 60%);height:var(--loading-dot1-height, 60%);display:var(--loading-dot1-display, inline-block);position:var(--loading-dot1-position, absolute);top:var(--loading-dot1-top, 0);background:var(--loading-dot1-background, #4096ff);border-radius:var(--loading-dot1-border-radius, 100%);animation:var(--loading-dot1-animation, ran-loading-dot-bounce 2s infinite ease-in-out);animation-play-state:var(--loading-dot1-animation-play-state, running)}.ran-loading .dot .dot2{width:var(--loading-dot2-width, 60%);height:var(--loading-dot2-height, 60%);display:var(--loading-dot2-display, inline-block);position:var(--loading-dot2-position, absolute);background:var(--loading-dot2-background, #4096ff);border-radius:var(--loading-dot2-border-radius, 100%);animation:var(--loading-dot2-animation, ran-loading-dot-bounce 2s infinite ease-in-out);top:var(--loading-dot2-top, auto);bottom:var(--loading-dot2-bottom, 0px);animation-delay:var(--loading-dot2-animation-delay, -1s);animation-play-state:var(--loading-dot2-animation-play-state, running)}@keyframes ran-loading-dot-rotate{to{transform:var(--loading-dot-keyframes-rotate, rotate(360deg))}}@keyframes ran-loading-dot-bounce{0%,to{transform:var(--loading-dot-keyframes-bounce-0, scale(0))}50%{transform:var(--loading-dot-keyframes-bounce-50, scale(1))}}.ran-loading .triple-bounce{width:var(--loading-triple-bounce-width, 10em);text-align:var(--loading-triple-bounce-text-align, center)}.ran-loading .triple-bounce div{width:var(--loading-triple-bounce-div-width, 2em);height:var(--loading-triple-bounce-div-height, 2em);background:var(--loading-triple-bounce-div-background, #4096ff);border-radius:var(--loading-triple-bounce-div-border-radius, 100%);display:var(--loading-triple-bounce-div-display, inline-block);animation:var(--loading-triple-bounce-div-animation, ran-loading-triple-bounce 1.4s infinite ease-in-out);animation-play-state:var(--loading-triple-bounce-div-animation-play-state, running);animation-fill-mode:var(--loading-triple-bounce-div-animation-fill-mode, both)}.ran-loading .triple-bounce .triple-bounce1{animation-delay:var(--loading-triple-bounce1-animation-delay, -.32s)}.ran-loading .triple-bounce .triple-bounce2{animation-delay:var(--loading-triple-bounce2-animation-delay, -.16s)}@keyframes ran-loading-triple-bounce{0%,80%,to{transform:var(--loading-triple-bounce-keyframes-0, scale(0))}40%{transform:var(--loading-triple-bounce-keyframes-40, scale(1))}}.ran-loading .scale-out{width:var(--loading-scale-out-width, 4em);height:var(--loading-scale-out-height, 4em);background:var(--loading-scale-out-background, #4096ff);border-radius:var(--loading-scale-out-border-radius, 100%);animation:var(--loading-scale-out-animation, ran-loading-scale-out 1s infinite ease-in-out);animation-play-state:var(--loading-scale-out-animation-play-state, running)}@keyframes ran-loading-scale-out{0%{transform:var(--loading-scale-out-keyframes-0-transform, scale(0))}to{transform:var(--loading-scale-out-keyframes-100-transform, scale(1));opacity:var(--loading-scale-out-keyframes-100-transform, 0)}}.ran-loading .circle{width:var(--loading-circle-width, 4em);height:var(--loading-circle-height, 4em);position:var(--loading-circle-position, relative)}.ran-loading .circle-container{position:var(--loading-circle-container-position, absolute);width:var(--loading-circle-container-width, 100%);height:var(--loading-circle-container-height, 100%)}.ran-loading .circle-container div{width:var(--loading-circle-container-div-width, 1em);height:var(--loading-circle-container-div-height, 1em);background:var(--loading-circle-container-div-background, #4096ff);border-radius:var(--loading-circle-container-div-border-radius, 100%);position:var(--loading-circle-container-div-position, absolute);animation:var(--loading-circle-container-div-animation, ran-loading-circle 1.2s infinite ease-in-out);animation-play-state:var(--loading-circle-container-div-animation-play-state, running);animation-fill-mode:var(--loading-circle-container-div-animation-fill-mode, both)}.ran-loading .circle .container1 .circle2{animation-delay:var(--loading-circle-container1-circle2-animation-delay, -.9s)}.ran-loading .circle .container1 .circle3{animation-delay:var(--loading-circle-container1-circle3-animation-delay, -.6s)}.ran-loading .circle .container1 .circle4{animation-delay:var(--loading-circle-container1-circle4-animation-delay, -.3s)}.ran-loading .circle .container2{transform:var(--loading-circle-container2-transform, rotateZ(45deg))}.ran-loading .circle .container2 .circle1{animation-delay:var(--loading-circle-container2-circle1-animation-delay, -1.1s)}.ran-loading .circle .container2 .circle2{animation-delay:var(--loading-circle-container2-circle2-animation-delay, -.8s)}.ran-loading .circle .container2 .circle3{animation-delay:var(--loading-circle-container2-circle3-animation-delay, -.5s)}.ran-loading .circle .container2 .circle4{animation-delay:var(--loading-circle-container2-circle4-animation-delay, -.2s)}.ran-loading .circle .container3{transform:var(--loading-circle-container3-transform, rotateZ(90deg))}.ran-loading .circle .container3 .circle1{animation-delay:var(--loading-circle-container3-circle1-transform, -1s)}.ran-loading .circle .container3 .circle2{animation-delay:var(--loading-circle-container3-circle2-transform, -.7s)}.ran-loading .circle .container3 .circle3{animation-delay:var(--loading-circle-container3-circle3-transform, -.4s)}.ran-loading .circle .container3 .circle4{animation-delay:var(--loading-circle-container3-circle4-transform, -.1s)}.ran-loading .circle .circle1{top:var(--loading-circle1-top, 0);left:var(--loading-circle1-left, 0)}.ran-loading .circle .circle2{top:var(--loading-circle2-top, 0);right:var(--loading-circle2-right, 0)}.ran-loading .circle .circle3{right:var(--loading-circle3-right, 0);bottom:var(--loading-circle3-bottom, 0)}.ran-loading .circle .circle4{left:var(--loading-circle3-left, 0);bottom:var(--loading-circle3-bottom, 0)}@keyframes ran-loading-circle{0%,80%,to{transform:var(--loading-circle-keyframes-0, scale(0))}40%{transform:var(--loading-circle-keyframes-40, scale(1))}}@keyframes circle-line{0%{transform:var(--loading-circle-line-keyframes-from, rotate(0))}to{transform:var(--loading-circle-line-keyframes-to, rotate(359deg))}}.ran-loading .circle-line-border{width:var(--loading-circle-line-border-width, 50px);height:var(--loading-circle-line-border-height, 50px);padding:var(--loading-circle-line-border-padding, 3px);display:var(--loading-circle-line-border-display, flex);justify-content:var(--loading-circle-line-border-justify-content, center);align-items:var(--loading-circle-line-border-align-items, center);border-radius:var(--loading-circle-line-border-border-radius, 50%);background:var(--loading-circle-line-border-background, linear-gradient(0deg, rgba(63, 249, 220, .1) 33%, #3ff9dc 100%));animation:var(--loading-circle-line-border-animation, circle-line .8s linear 0s infinite);animation-play-state:var(--loading-circle-line-border-animation-play-state, running)}.ran-loading .circle-line-core{width:var(--loading-circle-line-core-width, 100%);height:var(--loading-circle-line-core-height, 100%);background:var(--loading-circle-line-core-background, #fff);border-radius:var(--loading-circle-line-core-border-radius, 50%)}@keyframes square-box1{0%{transform:var(--loading-square-box1-keyframes-0, rotate(0))}25%{transform:var(--loading-square-box1-keyframes-25, rotate(90deg))}50%{transform:var(--loading-square-box1-keyframes-50, rotate(180deg))}75%{transform:var(--loading-square-box1-keyframes-75, rotate(270deg))}to{transform:var(--loading-square-box1-keyframes-100, rotate(360deg))}}@keyframes square-box2{0%{transform:var(--loading-square-box2-keyframes-0, rotate(45deg))}25%{transform:var(--loading-square-box2-keyframes-25, rotate(-45deg))}50%{transform:var(--loading-square-box2-keyframes-50, rotate(-135deg))}75%{transform:var(--loading-square-box2-keyframes-75, rotate(-225deg))}to{transform:var(--loading-square-box2-keyframes-100, rotate(-315deg))}}.ran-loading .square-box1{width:var(--loading-square-box1-width, 50px);height:var(--loading-square-box1-height, 50px);padding:var(--loading-square-box1-padding, 3px);position:var(--loading-square-box1-position, absolute);display:var(--loading-square-box1-display, flex);justify-content:var(--loading-square-box1-justify-content, center);align-items:var(--loading-square-box1-align-items, center);background:var(--loading-square-box1-background, #ffab91);animation:var(--loading-square-box1-animation, square-box1 3s ease-in-out 0s infinite alternate);animation-play-state:var(--loading-square-box1-animation-play-state, running)}.ran-loading .square-box2{width:var(--loading-square-box2-width, 50px);height:var(--loading-square-box2-height, 50px);padding:var(--loading-square-box2-padding, 3px);left:var(--loading-square-box2-left, -50px);display:var(--loading-square-box2-display, flex);justify-content:var(--loading-square-box2-justify-content, center);align-items:var(--loading-square-box2-align-items, center);background:var(--loading-square-box2-background, #3ff9dc);transform:var(--loading-square-box2-transform, rotate(45deg));animation:var(--loading-square-box2-animation, square-box2 3s ease-in-out 0s infinite alternate);animation-play-state:var(--loading-square-box2-animation-play-state, running)}.ran-loading .square-core{width:var(--loading-square-core-width, 100%);height:var(--loading-square-core-height, 100%);background:var(--loading-square-core-background, #37474f)}.ran-loading .pulse{width:var(--loading-pulse-width, 120px);display:var(--loading-pulse-display, flex);justify-content:var(--loading-pulse-justify-content, space-between);align-items:var(--loading-pulse-align-items, center)}.ran-loading .pulse-bubble{width:var(--loading-pulse-bubble-width, 20px);height:var(--loading-pulse-bubble-height, 20px);border-radius:var(--loading-pulse-bubble-border-radius, 50%);background:var(--loading-pulse-bubble-background, #3ff9dc)}@keyframes pulse{0%{opacity:var(--loading-pulse-bubble-keyframes-from-opacity, 1);transform:var(--loading-pulse-bubble-keyframes-from-transform, scale(1))}to{opacity:var(--loading-pulse-bubble-keyframes-to-opacity, .25);transform:var(--loading-pulse-bubble-keyframes-to-transform, scale(.75))}}.ran-loading .pulse-bubble-1{animation:var(--loading-pulse-bubble-1-animation, pulse .4s ease 0s infinite alternate);animation-play-state:var(--loading-pulse-bubble-1-animation-play-state, running)}.ran-loading .pulse-bubble-2{animation:var(--loading-pulse-bubble-2-animation, pulse .4s ease .2s infinite alternate);animation-play-state:var(--loading-pulse-bubble-2-animation-play-state, running)}.ran-loading .pulse-bubble-3{animation:var(--loading-pulse-bubble-3-animation, pulse .4s ease .4s infinite alternate);animation-play-state:var(--loading-pulse-bubble-3-animation-play-state, running)}.ran-loading .solar{width:var(--loading-solar-width, 250px);height:var(--loading-solar-height, 250px);display:var(--loading-solar-display, flex);justify-content:var(--loading-solar-justify-content, center);align-items:var(--loading-solar-align-items, center)}@keyframes solar{0%{transform:var(--loading-solar-keyframes-from, rotate(0))}to{transform:var(--loading-solar-keyframes-to, rotate(359deg))}}.ran-loading .solar .orbit{position:var(--loading-solar-orbit-position, relative);display:var(--loading-solar-orbit-display, flex);justify-content:var(--loading-solar-orbit-justify-content, center);align-items:var(--loading-solar-orbit-align-items, center);border:var(--loading-solar-orbit-border, 1px solid #77777d);border-radius:var(--loading-solar-orbit-border-radius, 50%)}.ran-loading .solar .earth-orbit{width:var(--loading-solar-earth-orbit-width, 165px);height:var(--loading-solar-earth-orbit-height, 165px);animation:var(--loading-solar-earth-orbit-animation, solar 12s linear 0s infinite);animation-play-state:var(--loading-solar-earth-orbit-animation-play-state, running)}.ran-loading .solar .venus-orbit{width:var(--loading-solar-venus-orbit-width, 120px);height:var(--loading-solar-venus-orbit-height, 120px);animation:var(--loading-solar-venus-orbit-width, solar 7.4s linear 0s infinite);animation-play-state:var(--loading-solar-venus-orbit-animation-play-state, running)}.ran-loading .solar .mercury-orbit{width:var(--loading-solar-mercury-orbit-width, 90px);height:var(--loading-solar-mercury-orbit-height, 90px);animation:var(--loading-solar-mercury-orbit-animation, solar 3s linear 0s infinite);animation-play-state:var(--loading-solar-mercury-orbit-animation-play-state, running)}.ran-loading .solar .planet{position:var(--loading-solar-planet-position, absolute);top:var(--loading-solar-planet-top, -5px);width:var(--loading-solar-planet-width, 10px);height:var(--loading-solar-planet-height, 10px);border-radius:var(--loading-solar-planet-border-radius, 50%);background:var(--loading-solar-planet-background, #3ff9dc)}.ran-loading .solar .sun{width:var(--loading-solar-sun-width, 35px);height:var(--loading-solar-sun-height, 35px);border-radius:var(--loading-solar-sun-border-radius, 50%);background:var(--loading-solar-sun-background, #ffab91)}.ran-loading .cube-fold{width:var(--loading-cube-fold-width, 4em);height:var(--loading-cube-fold-height, 4em);position:var(--loading-cube-fold-position, relative);margin:var(--loading-cube-fold-margin, auto);transform:var(--loading-cube-fold-transform, rotateZ(45deg))}@keyframes cube-fold{0%,10%{transform:var(--loading-cube-fold-keyframes-0-transform, perspective(140px) rotateX(-180deg));opacity:var(--loading-cube-fold-keyframes-0-opacity, 0)}25%,75%{transform:var(--loading-cube-fold-keyframes-25-transform, perspective(140px) rotateX(0deg));opacity:var(--loading-cube-fold-keyframes-25-opacity, 1)}90%,to{transform:var(--loading-cube-fold-keyframes-90-transform, perspective(140px) rotateY(180deg));opacity:var(--loading-cube-fold-keyframes-90-opacity, 0)}}.ran-loading .cube-fold-item{float:var(--loading-cube-fold-item-float, left);width:var(--loading-cube-fold-item-width, 50%);height:var(--loading-cube-fold-item-height, 50%);position:var(--loading-cube-fold-item-position, relative);transform:var(--loading-cube-fold-item-transform, scale(1.1))}.ran-loading .cube-fold-item:before{content:var(--loading-cube-fold-item-before-content, " ");position:var(--loading-cube-fold-item-before-position, absolute);top:var(--loading-cube-fold-item-before-top, 0);left:var(--loading-cube-fold-item-before-left, 0);width:var(--loading-cube-fold-item-before-width, 100%);height:var(--loading-cube-fold-item-before-height, 100%);background:var(--loading-cube-fold-item-before-background, #337ab7);animation:var(--loading-cube-fold-item-before-animation, cube-fold 2.4s infinite linear both);animation-play-state:var(--loading-cube-fold-item-before-animation-play-state, running);transform-origin:var(--loading-cube-fold-item-before-transform-origin, 100% 100%)}.ran-loading .cube-fold-item-2{transform:var(--loading-cube-fold-item-2-transform, scale(1.1) rotateZ(90deg))}.ran-loading .cube-fold-item-2:before{animation-delay:var(--loading-cube-fold-item-2-before-animation-delay, .3s)}.ran-loading .cube-fold-item-3{transform:var(--loading-cube-fold-item-3-transform, scale(1.1) rotateZ(270deg))}.ran-loading .cube-fold-item-3:before{animation-delay:var(--loading-cube-fold-item-3-before-animation-delay, .9s)}.ran-loading .cube-fold-item-4{transform:var(--loading-cube-fold-item-4-transform, scale(1.1) rotateZ(180deg))}.ran-loading .cube-fold-item-4:before{animation-delay:var(--loading-cube-fold-item-4-before-animation-delay, .6s)}.ran-loading .circle-fold{width:var(--loading-circle-fold-width, 4em);height:var(--loading-circle-fold-height, 4em);position:var(--loading-circle-fold-position, relative);margin:var(--loading-circle-fold-margin, auto)}@keyframes circle-fold{0%,39%,to{opacity:var(--loading-circle-fold-keyframes-0-opacity, 0)}40%{opacity:var(--loading-circle-fold-keyframes-40-opacity, 1)}}.ran-loading .circle-fold-item{width:var(--loading-circle-fold-item-width, 100%);height:var(--loading-circle-fold-item-height, 100%);position:var(--loading-circle-fold-item-position, absolute);left:var(--loading-circle-fold-item-left, 0);top:var(--loading-circle-fold-item-top, 0)}.ran-loading .circle-fold-item:before{content:var(--loading-circle-fold-item-before-content, " ");display:var(--loading-circle-fold-item-before-display, block);margin:var(--loading-circle-fold-item-before-margin, 0 auto);width:var(--loading-circle-fold-item-before-width, 15%);height:var(--loading-circle-fold-item-before-height, 15%);background:var(--loading-circle-fold-item-before-background, #337ab7);border-radius:var(--loading-circle-fold-item-before-border-radius, 100%);animation:var(--loading-circle-fold-item-before-animation, circle-fold 1.2s infinite ease-in-out both);animation-play-state:var(--loading-circle-fold-item-before-animation-play-state, running)}.ran-loading .circle-fold-item-2{transform:var(--loading-circle-fold-item-2-transform, rotate(30deg))}.ran-loading .circle-fold-item-2:before{animation-delay:var(--loading-circle-fold-item-2-before-animation-delay, -1.1s)}.ran-loading .circle-fold-item-3{transform:var(--loading-circle-fold-item-3-transform, rotate(60deg))}.ran-loading .circle-fold-item-3:before{animation-delay:var(--loading-circle-fold-item-3-before-animation-delay, -1s)}.ran-loading .circle-fold-item-4{transform:var(--loading-circle-fold-item-4-transform, rotate(90deg))}.ran-loading .circle-fold-item-4:before{animation-delay:var(--loading-circle-fold-item-4-before-animation-delay, -.9s)}.ran-loading .circle-fold-item-5{transform:var(--loading-circle-fold-item-5-transform, rotate(120deg))}.ran-loading .circle-fold-item-5:before{animation-delay:var(--loading-circle-fold-item-5-before-animation-delay, -.8s)}.ran-loading .circle-fold-item-6{transform:var(--loading-circle-fold-item-6-transform, rotate(150deg))}.ran-loading .circle-fold-item-6:before{animation-delay:var(--loading-circle-fold-item-6-before-animation-delay, -.7s)}.ran-loading .circle-fold-item-7{transform:var(--loading-circle-fold-item-7-transform, rotate(180deg))}.ran-loading .circle-fold-item-7:before{animation-delay:var(--loading-circle-fold-item-7-before-animation-delay, -.6s)}.ran-loading .circle-fold-item-8{transform:var(--loading-circle-fold-item-8-transform, rotate(210deg))}.ran-loading .circle-fold-item-8:before{animation-delay:var(--loading-circle-fold-item-8-before-animation-delay, -.5s)}.ran-loading .circle-fold-item-9{transform:var(--loading-circle-fold-item-9-transform, rotate(240deg))}.ran-loading .circle-fold-item-9:before{animation-delay:var(--loading-circle-fold-item-9-before-animation-delay, -.4s)}.ran-loading .circle-fold-item-10{transform:var(--loading-circle-fold-item-10-transform, rotate(270deg))}.ran-loading .circle-fold-item-10:before{animation-delay:var(--loading-circle-fold-item-10-before-animation-delay, -.3s)}.ran-loading .circle-fold-item-11{transform:var(--loading-circle-fold-item-11-transform, rotate(300deg))}.ran-loading .circle-fold-item-11:before{animation-delay:var(--loading-circle-fold-item-11-before-animation-delay, -.2s)}.ran-loading .circle-fold-item-12{transform:var(--loading-circle-fold-item-12-transform, rotate(330deg))}.ran-loading .circle-fold-item-12:before{animation-delay:var(--loading-circle-fold-item-12-before-animation-delay, -.1s)}.ran-loading .cube-grid{width:var(--loading-cube-grid-width, 4em);height:var(--loading-cube-grid-height, 4em);margin:var(--loading-cube-grid-margin, auto)}@keyframes cube-grid{0%,70%,to{transform:var(--loading-cube-grid-keyframes-0-transform, scale3D(1, 1, 1))}35%{transform:var(--loading-cube-grid-keyframes-35-transform, scale3D(0, 0, 1))}}.ran-loading .cube-grid-item{width:var(--loading-cube-grid-item-width, 33%);height:var(--loading-cube-grid-item-height, 33%);background:var(--loading-cube-grid-item-background, #337ab7);float:var(--loading-cube-grid-item-float, left);animation:var(--loading-cube-grid-item-animation, cube-grid 1.3s infinite ease-in-out);animation-play-state:var(--loading-cube-grid-item-animation-play-state, running)}.ran-loading .cube-grid-item-1{animation-delay:var(--loading-cube-grid-item-1-animation-delay, .2s)}.ran-loading .cube-grid-item-2{animation-delay:var(--loading-cube-grid-item-2-animation-delay, .3s)}.ran-loading .cube-grid-item-3{animation-delay:var(--loading-cube-grid-item-3-animation-delay, .4s)}.ran-loading .cube-grid-item-4{animation-delay:var(--loading-cube-grid-item-4-animation-delay, .1s)}.ran-loading .cube-grid-item-5{animation-delay:var(--loading-cube-grid-item-5-animation-delay, .2s)}.ran-loading .cube-grid-item-6{animation-delay:var(--loading-cube-grid-item-6-animation-delay, .3s)}.ran-loading .cube-grid-item-7{animation-delay:var(--loading-cube-grid-item-7-animation-delay, 0s)}.ran-loading .cube-grid-item-8{animation-delay:var(--loading-cube-grid-item-8-animation-delay, .1s)}.ran-loading .cube-grid-item-9{animation-delay:var(--loading-cube-grid-item-9-animation-delay, .2s)}.ran-loading .circle-turn{width:var(--loading-circle-turn-width, 30px);height:var(--loading-circle-turn-height, 30px);border:var(--loading-circle-turn-border, 8px solid #fff);border-right-color:var(--loading-circle-turn-border-right-color, transparent);border-top-color:var(--loading-circle-turn-border-top-color, transparent);border-radius:var(--loading-circle-turn-border-radius, 50%);box-shadow:var(--loading-circle-turn-box-shadow, 0 0 25px 2px);border-color:var(--loading-circle-turn-border-color, #f00);color:var(--loading-circle-turn-color, #cc0000);animation:var(--loading-circle-turn-animation, circle-turn 1s linear infinite normal);animation-play-state:var(--loading-circle-turn-animation-play-state, running);animation-delay:var(--loading-circle-turn-animation-delay, 0);margin:var(--loading-circle-turn-margin, 30px auto 0)}@keyframes circle-turn{0%{transform:var(--loading-circle-turn-keyframes-from-transform, rotate(0deg));opacity:var(--loading-circle-turn-keyframes-from-opacity, .2)}50%{transform:var(--loading-circle-turn-keyframes-50-transform, rotate(180deg));opacity:var(--loading-circle-turn-keyframes-50-opacity, 1)}to{transform:var(--loading-circle-turn-keyframes-50-transform, rotate(360deg));opacity:var(--loading-circle-turn-keyframes-50-opacity, .2)}}.ran-loading .circle-turn:after{display:var(--loading-circle-turn-after-display, block);width:var(--loading-circle-turn-after-width, 13px);height:var(--loading-circle-turn-after-height, 13px);margin:var(--loading-circle-turn-after-margin, 3px);border:var(--loading-circle-turn-after-border, 6px solid #f00);content:var(--loading-circle-turn-after-content, " ");border-radius:var(--loading-circle-turn-after-border-radius, 50%);border-left-color:var(--loading-circle-turn-after-border-left-color, transparent);border-bottom-color:var(--loading-circle-turn-after-border-bottom-color, transparent)}.ran-loading .circle-rotate{margin:var(--loading-circle-rotate-margin, 30px auto 0)}@keyframes spin-right{0%{transform:var(--loading-circle-rotate-keyframes-spin-right-from-transform, rotate(0deg));opacity:var(--loading-circle-rotate-keyframes-spin-right-from-opacity, var(--loading-circle-rotate-margin, .2))}50%{transform:var(--loading-circle-rotate-keyframes-spin-right-50-opacity, rotate(180deg));opacity:var(--loading-circle-rotate-keyframes-spin-right-50-opacity, 1)}to{transform:var(--loading-circle-rotate-keyframes-spin-right-to-opacity, rotate(360deg));opacity:var(--loading-circle-rotate-keyframes-spin-right-to-opacity, .2)}}@keyframes spin-left{0%{transform:var(--loading-circle-rotate-keyframes-spin-left-from-transform, rotate(0deg));opacity:var(--loading-circle-rotate-keyframes-spin-left-from-opacity, .2)}50%{transform:var(--loading-circle-rotate-keyframes-spin-left-50-transform, rotate(-180deg));opacity:var(--loading-circle-rotate-keyframes-spin-left-50-opacity, 1)}to{transform:var(--loading-circle-rotate-keyframes-spin-left-to-transform, rotate(-360deg));opacity:var(--loading-circle-rotate-keyframes-spin-left-to-opacity, .2)}}.ran-loading .circle-rotate-outer{border:var(--loading-circle-rotate-outer-border, 5px solid rgba(0, 183, 229, .9));opacity:var(--loading-circle-rotate-outer-opacity, .9);width:var(--loading-circle-rotate-outer-width, 50px);height:var(--loading-circle-rotate-outer-height, 50px);border-top-color:var(--loading-circle-rotate-outer-border-top-color, transparent);border-bottom-color:var(--loading-circle-rotate-outer-border-bottom-color, transparent);border-radius:var(--loading-circle-rotate-outer-border-radius, 50%);box-shadow:var(--loading-circle-rotate-outer-box-shadow, 0 0 35px rgba(0, 61, 76, .9));animation:var(--loading-circle-rotate-outer-animation, spin-right .5s linear infinite normal);animation-play-state:var(--loading-circle-rotate-outer-animation-play-state, running);animation-delay:var(--loading-circle-rotate-outer-animation-delay, 0);margin:var(--loading-circle-rotate-outer-margin, 0 auto)}.ran-loading .circle-rotate-inner{display:var(--loading-circle-rotate-inner-display, block);width:var(--loading-circle-rotate-inner-width, 30px);height:var(--loading-circle-rotate-inner-height, 30px);border:var(--loading-circle-rotate-inner-border, 5px solid rgba(0, 183, 229, .9));opacity:var(--loading-circle-rotate-inner-opacity, .9);border-radius:var(--loading-circle-rotate-inner-border-radius, 50%);border-left-color:var(--loading-circle-rotate-inner-border-left-color, transparent);border-bottom-color:var(--loading-circle-rotate-inner-border-bottom-color, transparent);box-shadow:var(--loading-circle-rotate-inner-box-shadow, 0 0 35px rgba(0, 61, 76, .9));position:var(--loading-circle-rotate-inner-position, relative);top:var(--loading-circle-rotate-inner-top, -50px);margin:var(--loading-circle-rotate-inner-margin, 0 auto);animation:var(--loading-circle-rotate-inner-animation, spin-left .5s linear infinite normal);animation-play-state:var(--loading-circle-rotate-inner-animation-play-state, running);animation-delay:var(--loading-circle-rotate-inner-animation-delay, 0)}@keyframes spin-right{0%{transform:var(--loading-circle-spin-keyframes-spin-right-from-transform, rotate(0deg));opacity:var(--loading-circle-spin-keyframes-spin-right-from-opacity, .2)}50%{transform:var(--loading-circle-spin-keyframes-spin-right-50-transform, rotate(180deg));opacity:var(--loading-circle-spin-keyframes-spin-right-50-opacity, 1)}to{transform:var(--loading-circle-spin-keyframes-spin-right-to-transform, rotate(360deg));opacity:var(--loading-circle-spin-keyframes-spin-right-to-opacity, .2)}}@keyframes spin-pulse{0%{transform:var(--loading-circle-spin-keyframes-spin-pulse-from-transform, rotate(160deg));opacity:var(--loading-circle-spin-keyframes-spin-pulse-from-opacity, 0);box-shadow:var(--loading-circle-spin-keyframes-spin-pulse-from-box-shadow, 0 0 1px rgba(0, 61, 76, .9))}50%{transform:var(--loading-circle-spin-keyframes-spin-pulse-50-transform, rotate(145deg));opacity:var(--loading-circle-spin-keyframes-spin-pulse-50-opacity, 1)}to{transform:var(--loading-circle-spin-keyframes-spin-pulse-to-transform, rotate(-320deg));opacity:var(--loading-circle-spin-keyframes-spin-pulse-to-opacity, 0)}}.ran-loading .circle-spin-inner{border:var(--loading-circle-spin-inner-border, 5px solid rgba(0, 229, 183, .9));opacity:var(--loading-circle-spin-inner-opacity, .9);border-left-color:var(--loading-circle-spin-inner-border-left-color, transparent);border-right-color:var(--loading-circle-spin-inner-border-right-color, transparent);border-radius:var(--loading-circle-spin-inner-border-radius, 50%);box-shadow:var(--loading-circle-spin-inner-box-shadow, 0 0 15px rgba(0, 76, 61, .9));width:var(--loading-circle-spin-inner-width, 30px);height:var(--loading-circle-spin-inner-height, 30px);position:var(--loading-circle-spin-inner-position, relative);top:var(--loading-circle-spin-inner-top, -50px);margin:var(--loading-circle-spin-inner-margin, 0 auto);animation:var(--loading-circle-spin-inner-animation, spin-right 1s linear infinite normal);animation-play-state:var(--loading-circle-spin-inner-animation-play-state, running);animation-delay:var(--loading-circle-spin-inner-animation-delay, 0)}.ran-loading .circle-spin-outer{border:var(--loading-circle-spin-inner-border, 5px solid rgba(0, 229, 183, .9));opacity:var(--loading-circle-spin-inner-border, .9);border-right-color:var(--loading-circle-spin-inner-border, transparent);border-left-color:var(--loading-circle-spin-inner-border, transparent);width:var(--loading-circle-spin-inner-border, 50px);height:var(--loading-circle-spin-inner-border, 50px);margin:var(--loading-circle-spin-inner-border, 0 auto);border-radius:var(--loading-circle-spin-inner-border, 50%);box-shadow:var(--loading-circle-spin-inner-border, 0 0 35px rgba(0, 76, 61, .9));animation:var(--loading-circle-spin-inner-border, spin-pulse 1s linear infinite normal);animation-play-state:var(--loading-circle-spin-outer-animation-play-state, running);animation-delay:var(--loading-circle-spin-inner-border, 0)}.ran-loading .dot-bar{margin:var(--loading-dot-bar-margin, 0 auto);overflow:var(--loading-dot-bar-overflow, hidden);width:var(--loading-dot-bar-width, 90px)}@keyframes pulse{0%{transform:var(--loading-dot-bar-keyframes-from-transform, scale(1.2));opacity:var(--loading-dot-bar-margin-from-opacity, 1)}to{transform:var(--loading-dot-bar-keyframes-to-transform, scale(.7));opacity:var(--loading-dot-bar-keyframes-to-opacity, .1)}}.ran-loading .dot-bar-item{background-color:var(--loading-dot-bar-item-background-color, #8aff51);background-image:var(--loading-dot-bar-item-background-image, linear-gradient(45deg, #8aff51 25%, #f1ffea));width:var(--loading-dot-bar-item-width, 10px);height:var(--loading-dot-bar-item-height, 10px);float:var(--loading-dot-bar-item-float, left);margin-left:var(--loading-dot-bar-item-margin-left, 5px);opacity:var(--loading-dot-bar-item-opacity, .1);animation:var(--loading-dot-bar-item-animation, pulse 1s linear infinite normal);animation-play-state:var(--loading-dot-bar-item-animation-play-state, running);animation-delay:var(--loading-dot-bar-item-animation-delay, 0)}.ran-loading .dot-bar-item-1{animation-delay:var(--loading-dot-bar-item-1-animation-delay, .3s)}.ran-loading .dot-bar-item-2{animation-delay:var(--loading-dot-bar-item-2-animation-delay, .2s)}.ran-loading .dot-bar-item-3{animation-delay:var(--loading-dot-bar-item-3-animation-delay, .1s)}.ran-loading .dot-bar-item-4{animation-delay:var(--loading-dot-bar-item-4-animation-delay, .2s)}.ran-loading .dot-bar-item-5{animation-delay:var(--loading-dot-bar-item-5-animation-delay, .3s)}.ran-loading .dot-circle-item{background-color:var(--loading-dot-circle-item-background-color, #f00);background-image:var(--loading-dot-circle-item-background-image, linear-gradient(90deg, #f00 25%, #ff9999));width:var(--loading-dot-circle-item-width, 3px);height:var(--loading-dot-circle-item-height, 3px);border-radius:var(--loading-dot-circle-item-border-radius, 50%);box-shadow:var(--loading-dot-circle-item-box-shadow, 0 0 5px #cc0000);margin:var(--loading-dot-circle-item-margin, 0 auto);position:var(--loading-dot-circle-item-position, relative);animation:var(--loading-dot-circle-item-animation, dot-circle 2s infinite cubic-bezier(0, 0, .35, 1) normal)}.ran-loading .dot-circle-item-1{animation-play-state:var(--loading-dot-circle-item-1-animation-play-state, running);animation-delay:var(--loading-dot-circle-item-1-animation-delay, 0)}.ran-loading .dot-circle-item-2{opacity:var(--loading-dot-circle-item-2-opacity, .7);top:var(--loading-dot-circle-item-2-top, 1px);animation-play-state:var(--loading-dot-circle-item-2-animation-play-state, running);animation-delay:var(--loading-dot-circle-item-2-animation-delay, .1s)}.ran-loading .dot-circle-item-3{opacity:var(--loading-dot-circle-item-3-opacity, .5);top:var(--loading-dot-circle-item-3-top, 2px);animation-play-state:var(--loading-dot-circle-item-3-animation-play-state, running);animation-delay:var(--loading-dot-circle-item-3-animation-delay, .2s)}.ran-loading .dot-circle-item-4{opacity:var(--loading-dot-circle-item-4-opacity, .3);top:var(--loading-dot-circle-item-4-top, 3px);animation-play-state:var(--loading-dot-circle-item-4-animation-play-state, running);animation-delay:var(--loading-dot-circle-item-4-animation-delay, .3s)}.ran-loading .dot-circle-item-5{opacity:var(--loading-dot-circle-item-5-opacity, .1);top:var(--loading-dot-circle-item-5-top, 4px);animation-play-state:var(--loading-dot-circle-item-5-animation-play-state, running);animation-delay:var(--loading-dot-circle-item-5-animation-delay, .4s)}@keyframes dot-circle{0%{transform:var(--loading-dot-circle-keyframes-from-transform, translateX(0px))}25%{transform:var(--loading-dot-circle-keyframes-25-transform, translateX(25px));animation-timing-function:ease-in}50%{transform:var(--loading-dot-circle-keyframes-50-transform, translateX(0px))}75%{transform:var(--loading-dot-circle-keyframes-75-transform, translateX(-25px));animation-timing-function:ease-in}to{transform:var(--loading-dot-circle-keyframes-to-transform, translateX(0px))}}.ran-loading .line{width:var(--loading-line-width, 32px);height:var(--loading-line-width, 32px);margin:var(--loading-line-width, 0 auto)}@keyframes line{10%{margin-top:var(--loading-line-keyframes-10-margin-top, 5px);height:var(--loading-line-keyframes-10-height, 22px);border-color:var(--loading-line-keyframes-10-border-color, #d1d8e6);background-color:var(--loading-line-keyframes-10-background-color, #bac5db)}20%{margin-top:var(--loading-line-keyframes-20-margin-top, 0px);height:var(--loading-line-keyframes-20-height, 32px);border-color:var(--loading-line-keyframes-20-border-color, #d1d7e2);background-color:var(--loading-line-keyframes-20-background-color, #bac5db)}30%{margin-top:var(--loading-line-keyframes-30-margin-top, 1px);height:var(--loading-line-keyframes-30-height, 30px);border-color:var(--loading-line-keyframes-30-border-color, #d1d8e6);background-color:var(--loading-line-keyframes-30-background-color, #bac5db)}40%{margin-top:var(--loading-line-keyframes-40-margin-top, 3px);height:var(--loading-line-keyframes-40-height, 26px)}50%{margin-top:var(--loading-line-keyframes-50-margin-top, 5px);height:var(--loading-line-keyframes-50-height, 22px)}60%{margin-top:var(--loading-line-keyframes-60-margin-top, 6px);height:var(--loading-line-keyframes-60-height, 18px)}}.ran-loading .line-item{background:var(--loading-line-item-background, #99aaca);border:var(--loading-line-item-border, 1px solid #96a6c9);float:var(--loading-line-item-float, left);margin:var(--loading-line-item-margin, 6px 4px 0 0);width:var(--loading-line-item-width, 6px);height:var(--loading-line-item-height, 18px);animation:var(--loading-line-item-animation, line 1s linear infinite normal);animation-play-state:var(--loading-line-item-animation-play-state, running);animation-delay:var(--loading-line-item-animation-delay, 0)}.ran-loading .line-item:nth-child(2){animation-delay:var(--loading-line-nth-child-2-animation-delay, .1s)}.ran-loading .line-item:last-child{margin-right:var(--loading-line-last-child-margin-right, 0);animation-delay:var(--loading-line-last-child-animation-delay, .2s)}.ran-loading .dot-pulse{width:var(--loading-dot-pulse-width, 48px);padding:var(--loading-dot-pulse-padding, 8px 5px);margin:var(--loading-dot-pulse-margin, 30px auto);overflow:var(--loading-dot-pulse-overflow, hidden)}@keyframes dot-pulse{0%{transform:var(--loading-dot-pulse-keyframes-from, scale(0))}to{transform:var(--loading-dot-pulse-keyframes-to, scale(1))}}@keyframes dot-pulse-glow{0%{transform:var(--loading-dot-pulse-keyframes-glow-from-transform, scale(0));opacity:var(--loading-dot-pulse-keyframes-glow-from-opacity, 0)}10%{transform:var(--loading-dot-pulse-keyframes-glow-10-transform, scale(1));opacity:var(--loading-dot-pulse-keyframes-glow-10-opacity, .5)}50%{transform:var(--loading-dot-pulse-keyframes-glow-50-transform, scale(1.75));opacity:var(--loading-dot-pulse-keyframes-glow-50-opacity, 0)}to{transform:var(--loading-dot-pulse-keyframes-glow-to-transform, scale(0));opacity:var(--loading-dot-pulse-keyframes-glow-to-opacity, 0)}}.ran-loading .dot-pulse-item{float:var(--loading-dot-pulse-item-float, left);position:var(--loading-dot-pulse-item-position, relative);width:var(--loading-dot-pulse-item-width, 6px);height:var(--loading-dot-pulse-item-height, 6px);border-radius:var(--loading-dot-pulse-item-border-radius, 50px);margin-left:var(--loading-dot-pulse-item-margin-left, 2px)}.ran-loading .dot-pulse-item:first-child{margin-left:var(--loading-dot-pulse-item-first-child-margin-left, 0)}.ran-loading .dot-pulse-item-dot{background-color:var(--loading-dot-pulse-item-dot-background-color, #2187e7);background-image:var(--loading-dot-pulse-item-dot-background-image, linear-gradient(90deg, #2187e7 25%, #a0eaff));width:var(--loading-dot-pulse-item-dot-width, 6px);height:var(--loading-dot-pulse-item-dot-height, 6px);border-radius:var(--loading-dot-pulse-item-dot-border-radius, 50px);transform:var(--loading-dot-pulse-item-dot-transform, scale(0));animation:var(--loading-dot-pulse-item-dot-animation, dot-pulse 1s linear forwards normal);animation-play-state:var(--loading-dot-pulse-item-dot-animation-play-state, running);animation-delay:var(--loading-dot-pulse-item-dot-animation-delay, 0)}.ran-loading .dot-pulse-item-dot-1{animation-delay:var(--loading-dot-pulse-item-dot-1-animation-delay, .5s)}.ran-loading .dot-pulse-item-dot-2{animation-delay:var(--loading-dot-pulse-item-dot-2-animation-delay, 1s)}.ran-loading .dot-pulse-item-dot-3{animation-delay:var(--loading-dot-pulse-item-dot-3-animation-delay, 1.5s)}.ran-loading .dot-pulse-item-dot-4{animation-delay:var(--loading-dot-pulse-item-dot-4-animation-delay, 2s)}.ran-loading .dot-pulse-item-dot-5{animation-delay:var(--loading-dot-pulse-item-dot-5-animation-delay, 2.5s)}.ran-loading .dot-pulse-item-ball{width:var(--loading-dot-pulse-item-ball-width, 6px);height:var(--loading-dot-pulse-item-ball-height, 6px);border-radius:var(--loading-dot-pulse-item-ball-border-radius, 30px);border:var(--loading-dot-pulse-item-ball-border, 1px solid #00c6ff);box-shadow:var(--loading-dot-pulse-item-ball-box-shadow, 0 0 5px #00c6ff);position:var(--loading-dot-pulse-item-ball-position, absolute);top:var(--loading-dot-pulse-item-ball-top, -1px);left:var(--loading-dot-pulse-item-ball-left, -1px);transform:var(--loading-dot-pulse-item-ball-transform, scale(0));animation:var(--loading-dot-pulse-item-ball-animation, dot-pulse-glow 3s infinite ease-out normal);animation-play-state:var(--loading-dot-pulse-item-ball-animation-play-state, running);animation-delay:var(--loading-dot-pulse-item-ball-animation-delay, 0)}.ran-loading .dot-pulse-item-ball-1{animation-delay:var(--loading-dot-pulse-item-ball-1-animation-delay, 1.5s)}.ran-loading .dot-pulse-item-ball-2{animation-delay:var(--loading-dot-pulse-item-ball-2-animation-delay, 2s)}.ran-loading .dot-pulse-item-ball-3{animation-delay:var(--loading-dot-pulse-item-ball-3-animation-delay, 2.5s)}.ran-loading .dot-pulse-item-ball-4{animation-delay:var(--loading-dot-pulse-item-ball-4-animation-delay, 3s)}.ran-loading .dot-pulse-item-ball-5{animation-delay:var(--loading-dot-pulse-item-ball-5-animation-delay, 3.5s)}.ran-loading .line-scale{display:var(--loading-line-scale-display, block);position:var(--loading-line-scale-position, relative);overflow:var(--loading-line-scale-overflow, hidden);width:var(--loading-line-scale-width, 5em);margin:var(--loading-line-scale-margin, 30px auto);padding:var(--loading-line-scale-padding, 20px 10px)}@keyframes pound{to{transform:var(--loading-line-scale-keyframes-to-transform, scale(1.2))}}.ran-loading .line-scale-item{display:var(--loading-line-scale-item-display, block);float:var(--loading-line-scale-item-float, left);width:var(--loading-line-scale-item-width, .5em);height:var(--loading-line-scale-item-height, 3em);margin:var(--loading-line-scale-item-margin, 0 .5em 0 0);background:var(--loading-line-scale-item-background, #635863);background-image:var(--loading-line-scale-item-background-image, linear-gradient(top, #635863 25%, #3d353b));box-shadow:var(--loading-line-scale-item-box-shadow, 1px 1px 1px 0 rgba(0, 0, 0, 0), 1px 1px 1px 0 rgba(0, 0, 0, 0), 1px 1px 1px 0 rgba(0, 0, 0, 0));animation:var(--loading-line-scale-item-animation, pound .7s ease-in-out infinite alternate);animation-play-state:var(--loading-line-scale-item-animation-play-state, running);animation-delay:var(--loading-line-scale-item-animation-delay, .05s);transform-origin:var(--loading-line-scale-item-transform-origin, center bottom)}.ran-loading .line-scale-item:nth-child(2){animation-delay:var(--loading-line-scale-item--nth-child-2-animation-delay, .2s)}.ran-loading .line-scale-item:nth-child(3){animation-delay:var(--loading-line-scale-item--nth-child-3-animation-delay, .35s)}.ran-loading .line-scale-item:nth-child(4){animation-delay:var(--loading-line-scale-item--nth-child-4-animation-delay, .5s)}.ran-loading .line-scale-item:nth-child(5){animation-delay:var(--loading-line-scale-item--nth-child-5-animation-delay, .65s)}.ran-loading .text{text-align:var(--loading-text-text-align, center);text-transform:var(--loading-text-text-transform, uppercase);font-family:var(--loading-text-font-family, "Nunito", sans-serif);font-size:var(--loading-text-font-size, 4em);color:var(--loading-text-color, transparent);letter-spacing:var(--loading-text-letter-spacing, .4em)}@keyframes letters{to{text-shadow:var(--loading-text-keyframes-to-text-shadow, 0 0 2px rgba(204, 208, 212, .2), 0 0 3px rgba(0, 0, 0, .02), 0 0 0 rgba(0, 0, 0, 0), 0 0 0 rgba(255, 255, 255, 0), 0 0 0 rgba(0, 0, 0, 0), 0 0 0 rgba(255, 255, 255, 0), 0 0 0 rgba(255, 255, 255, 0))}}.ran-loading .text-item{text-shadow:var(--loading-text-item-text-shadow, 0 0 2px rgba(22, 22, 22, .9), 0 15px 25px rgba(0, 0, 0, .3), 0 -2px 3px rgba(0, 0, 0, .1), 0 -5px 10px rgba(22, 22, 22, .5), 0 5px 10px rgba(0, 0, 0, .3), 0 3px 4px rgba(22, 22, 22, .2), 0 0 20px rgba(22, 22, 22, .45));animation:var(--loading-text-item-animation, letters .85s ease-in-out infinite alternate);animation-play-state:var(--loading-text-item-animation-play-state, running);animation-delay:var(--loading-text-item-animation-delay, 0)}.ran-loading .text-item:nth-child(2){animation-delay:var(--loading-text-item-nth-child-2-animation-delay, .15s)}.ran-loading .text-item:nth-child(3){animation-delay:var(--loading-text-item-nth-child-3-animation-delay, .3s)}.ran-loading .text-item:nth-child(4){animation-delay:var(--loading-text-item-nth-child-4-animation-delay, .45s)}.ran-loading .text-item:nth-child(5){animation-delay:var(--loading-text-item-nth-child-5-animation-delay, .6s)}.ran-loading .text-item:nth-child(6){animation-delay:var(--loading-text-item-nth-child-6-animation-delay, .75s)}.ran-loading .text-item:nth-child(7){animation-delay:var(--loading-text-item-nth-child-7-animation-delay, .9s)}.ran-loading .cube-dim{height:var(--loading-cube-dim-height, 9em);width:var(--loading-cube-dim-width, 9em);padding:var(--loading-cube-dim-padding, 3em);transform:var(--loading-cube-dim-transform, rotateX(45deg) rotateZ(45deg));transform-style:var(--loading-cube-dim-transform-style, preserve-3d)}@keyframes anim{50%{transform:var(--loading-cube-dim-width, translateZ(.5em))}}.ran-loading .cube-dim-item{background-color:var(--loading-cube-dim-item-background-color, #05afd1);position:var(--loading-cube-dim-item-position, relative);transform:var(--loading-cube-dim-item-transform, translateZ(3em));transform-style:var(--loading-cube-dim-item-transform-style, preserve-3d);transition:var(--loading-cube-dim-item-transition, .25s);box-shadow:var(--loading-cube-dim-item-box-shadow, 13em 13em 1.5em rgba(0, 0, 0, .1));animation:var(--loading-cube-dim-item-animation, anim 1s infinite);animation-play-state:var(--loading-cube-dim-item-animation-play-state, running);float:var(--loading-cube-dim-item-float, left);height:var(--loading-cube-dim-item-height, 3em);width:var(--loading-cube-dim-item-width, 3em)}.ran-loading .cube-dim-item:nth-child(1){animation-delay:var(--loading-cube-dim-item-nth-child-1-animation-delay, .05s)}.ran-loading .cube-dim-item:nth-child(2){animation-delay:var(--loading-cube-dim-item-nth-child-2-animation-delay, .1s)}.ran-loading .cube-dim-item:nth-child(3){animation-delay:var(--loading-cube-dim-item-nth-child-3-animation-delay, .15s)}.ran-loading .cube-dim-item:nth-child(4){animation-delay:var(--loading-cube-dim-item-nth-child-4-animation-delay, .2s)}.ran-loading .cube-dim-item:nth-child(5){animation-delay:var(--loading-cube-dim-item-nth-child-5-animation-delay, .25s)}.ran-loading .cube-dim-item:nth-child(6){animation-delay:var(--loading-cube-dim-item-nth-child-6-animation-delay, .3s)}.ran-loading .cube-dim-item:nth-child(7){animation-delay:var(--loading-cube-dim-item-nth-child-7-animation-delay, .35s)}.ran-loading .cube-dim-item:nth-child(8){animation-delay:var(--loading-cube-dim-item-nth-child-8-animation-delay, .4s)}.ran-loading .cube-dim-item:nth-child(9){animation-delay:var(--loading-cube-dim-item-nth-child-9-animation-delay, .45s)}.ran-loading .cube-dim-item:before{content:var(--loading-cube-dim-item-before-content, "");float:var(--loading-cube-dim-item-before-float, left);height:var(--loading-cube-dim-item-before-height, 3em);position:var(--loading-cube-dim-item-before-position, absolute);width:var(--loading-cube-dim-item-before-width, 3em);background-color:var(--loading-cube-dim-item-before-background-color, #048ca7);transform:var(--loading-cube-dim-item-before-transform, rotateY(90deg) translateX(3em));transform-origin:var(--loading-cube-dim-item-before-transform-origin, 100% 0)}.ran-loading .cube-dim-item:after{content:var(--loading-cube-dim-item-after-content, "");float:var(--loading-cube-dim-item-after-float, left);height:var(--loading-cube-dim-item-after-height, 3em);position:var(--loading-cube-dim-item-after-position, absolute);width:var(--loading-cube-dim-item-after-width, 3em);background-color:var(--loading-cube-dim-item-after-background-color, #049dbc);transform:var(--loading-cube-dim-item-after-transform, rotateX(-90deg) translateY(3em));transform-origin:var(--loading-cube-dim-item-after-transform-origin, 100% 100%)}.ran-loading .dot-line{width:var(--loading-dot-line-width, 20em);height:var(--loading-dot-line-height, 20em);font-size:var(--loading-dot-line-font-size, 10px);position:var(--loading-dot-line-position, relative);display:var(--loading-dot-line-display, flex);align-items:var(--loading-dot-line-align-items, center);justify-content:var(--loading-dot-line-justify-content, center)}@keyframes dot-line{to{transform:var(--loading-dot-line-keyframes-to-transform, rotate(1turn))}}.ran-loading .dot-line-item{position:var(--loading-dot-line-item-position, absolute);border-radius:var(--loading-dot-line-item-border-radius, 50%);border-style:var(--loading-dot-line-item-order-style, solid);animation:var(--loading-dot-line-item-animation, dot-line 3s linear infinite);animation-play-state:var(--loading-dot-line-item-animation-play-state, running)}.ran-loading .dot-line-item:nth-child(1){width:var(--loading-dot-line-item-nth-child-1-width, 100%);height:var(--loading-dot-line-item-nth-child-1-height, 100%);color:var(--loading-dot-line-item-nth-child-1-color, gold);border-color:var(--loading-dot-line-item-nth-child-1-border-color, currentColor transparent transparent currentColor);border-width:var(--loading-dot-line-item-nth-child-1-border-width, .2em .2em 0em 0em);--deg: var(--loading-dot-line-item-nth-child-1-deg, -45deg);animation-direction:var(--loading-dot-line-item-nth-child-1-animation-direction, normal)}.ran-loading .dot-line-item:nth-child(2){width:var(--loading-dot-line-item-nth-child-2-width, 70%);height:var(--loading-dot-line-item-nth-child-2-height, 70%);color:var(--loading-dot-line-item-nth-child-2-color, lime);border-color:var(--loading-dot-line-item-nth-child-2-border-color, currentColor currentColor transparent transparent);border-width:var(--loading-dot-line-item-nth-child-2-border-width, .2em 0em 0em .2em);--deg: var(--loading-dot-line-item-nth-child-2-deg, -135deg);animation-direction:var(--loading-dot-line-item-nth-child-2-animation-direction, reverse)}.ran-loading .dot-line-item-circle{position:var(--loading-dot-line-item-circle-position, absolute);width:var(--loading-dot-line-item-circle-width, 50%);height:var(--loading-dot-line-item-circle-height, .1em);top:var(--loading-dot-line-item-circle-top, 50%);left:var(--loading-dot-line-item-circle-left, 50%);background-color:var(--loading-dot-line-item-circle-background-color, transparent);transform:rotate(var(--deg));transform-origin:var(--loading-dot-line-item-circle-transform-origin, left)}.ran-loading .dot-line-item-circle:before{position:var(--loading-dot-line-item-circle-before-position, absolute);top:var(--loading-dot-line-item-circle-before-top, -.5em);right:var(--loading-dot-line-item-circle-before-right, -.5em);content:var(--loading-dot-line-item-circle-before-content, "");width:var(--loading-dot-line-item-circle-before-width, 1em);height:var(--loading-dot-line-item-circle-before-height, 1em);background-color:var(--loading-dot-line-item-circle-before-background-color, currentColor);border-radius:var(--loading-dot-line-item-circle-before-border-radius, 50%);box-shadow:var(--loading-dot-line-item-circle-before-box-shadow, 0 0 2em, 0 0 4em, 0 0 6em, 0 0 8em, 0 0 10em, 0 0 0 .5em rgba(255, 255, 0, .1))}.ran-loading .arc{position:relative}@keyframes rt{to{transform:var(--loading-arc-keyframes-rt, rotate(360deg))}}@keyframes cw{0%{width:var(--loading-arc-keyframes-cw-0-width, 0);height:var(--loading-arc-keyframes-cw-0-height, 0)}75%{width:var(--loading-arc-keyframes-cw-75-width, 40px);height:var(--loading-arc-keyframes-cw-75-height, 40px)}to{width:var(--loading-arc-keyframes-cw-100-width, 0);height:var(--loading-arc-keyframes-cw-100-height, 0)}}@keyframes txt{0%{content:var(--loading-arc-keyframes-txt-0-content, "LOADING.")}50%{content:var(--loading-arc-keyframes-txt-50-content, "LOADING..")}to{content:var(--loading-arc-keyframes-txt-100-content, "LOADING...")}}.ran-loading .arc-item{margin:var(--loading-arc-item-margin, auto);width:var(--loading-arc-item-width, 100px);height:var(--loading-arc-item-height, 100px);border-radius:var(--loading-arc-item-border-radius, 50%);border-top:var(--loading-arc-item-border-top, 2px solid #ffea29);border-left:var(--loading-arc-item-border-left, 1px solid transparent);border-right:var(--loading-arc-item-border-right, 1px solid transparent);animation:var(--loading-arc-item-animation, rt 2s infinite linear);animation-play-state:var(--loading-arc-item-animation-play-state, running)}.ran-loading .arc-item:before{position:var(--loading-arc-item-before-position, absolute);margin:var(--loading-arc-item-before-margin, auto);top:var(--loading-arc-item-before-top, 0);right:var(--loading-arc-item-before-right, 0);bottom:var(--loading-arc-item-before-bottom, 0);left:var(--loading-arc-item-before-left, 0);width:var(--loading-arc-item-before-width, 70px);height:var(--loading-arc-item-before-height, 70px);border-radius:var(--loading-arc-item-before-border-radius, 50%);border-top:var(--loading-arc-item-before-border-top, 2px solid #8d29ff);border-left:var(--loading-arc-item-before-border-left, 1px solid transparent);border-right:var(--loading-arc-item-before-border-right, 1px solid transparent);animation:var(--loading-arc-item-before-animation, rt 4s infinite linear reverse);animation-play-state:var(--loading-arc-item-before-animation-play-state, running);content:var(--loading-arc-item-before-content, "")}.ran-loading .arc-item:after{position:var(--loading-arc-item-after-position, absolute);margin:var(--loading-arc-item-after-margin, auto);top:var(--loading-arc-item-after-top, 0);right:var(--loading-arc-item-after-right, 0);bottom:var(--loading-arc-item-after-bottom, 0);left:var(--loading-arc-item-after-left, 0);width:var(--loading-arc-item-after-width, 0);height:var(--loading-arc-item-after-height, 0);border-radius:var(--loading-arc-item-after-border-radius, 50%);border-top:var(--loading-arc-item-after-border-top, initial);border-left:var(--loading-arc-item-after-border-left, initial);border-right:var(--loading-arc-item-after-border-right, initial);animation:var(--loading-arc-item-after-animation, cw 1s infinite);animation-play-state:var(--loading-arc-item-after-animation-play-state, running);content:var(--loading-arc-item-after-content, "");background:var(--loading-arc-item-after-background, snow)}.ran-loading .arc h1{position:var(--loading-arc-h1-position, absolute);margin:var(--loading-arc-h1-margin, auto);top:var(--loading-arc-h1-top, 140px);left:var(--loading-arc-h1-left, 0);right:var(--loading-arc-h1-right, 0);bottom:var(--loading-arc-h1-bottom, 0);text-transform:var(--loading-arc-h1-text-transform, uppercase);text-align:var(--loading-arc-h1-text-align, center);letter-spacing:var(--loading-arc-h1-letter-spacing, .1em);font-size:var(--loading-arc-h1-font-size, 14px);font-weight:var(--loading-arc-h1-ont-weight, lighter);color:var(--loading-arc-h1-color, white)}.ran-loading .arc h1:after{animation:var(--loading-arc-h1-after-animation, txt 5s infinite);animation-play-state:var(--loading-arc-h1-after-animation-play-state, running);content:var(--loading-arc-h1-after-content, "");font-family:var(--loading-arc-h1-after-font-family, "Inconsolata", monospace)}.ran-loading .arc span{display:var(--loading-arc-span-display, none)}.ran-loading .drop{position:var(--loading-drop-position, relative);width:var(--loading-drop-position, 120px);height:var(--loading-drop-position, 120px)}@keyframes fade-in{0%{opacity:var(--loading-drop-keyframes-fade-in-0-opacity, 0)}to{opacity:var(--loading-drop-keyframes-fade-in-100-opacity, 1)}}@keyframes drop{0%{bottom:var(--loading-drop-keyframes-drop-0-bottom, 0px);opacity:var(--loading-drop-keyframes-drop-0-opacity, 1)}80%{opacity:var(--loading-drop-keyframes-drop-80-opacity, 1)}to{opacity:var(--loading-drop-keyframes-drop-100-opacity, 1);bottom:var(--loading-drop-keyframes-drop-100-bottom, -200px)}}@keyframes wave{0%{background-position:var(--loading-drop-keyframes-wave-0-background-position, 0 160px);background-size:var(--loading-drop-keyframes-wave-0-background-size, 170px 300px)}to{background-position:var(--loading-drop-keyframes-wave-100-background-position, 500px -18px);background-size:var(--loading-drop-keyframes-wave-100-background-size, 250px 150px)}}.ran-loading .drop-item{position:var(--loading-drop-item-position, absolute);width:var(--loading-drop-item-width, 100%);height:var(--loading-drop-item-height, 100%);left:var(--loading-drop-item-left, 0);right:var(--loading-drop-item-right, 0);top:var(--loading-drop-item-top, 0);bottom:var(--loading-drop-item-bottom, 0);background:var(--loading-drop-item-background, transparent repeat-x 0 100px/150px 300px url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAAEsCAYAAACG+vy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAABLdJREFUeNrs299nXGkcx/FPMhVKSZUQSinLUEooJSxlWEIJvS1lydXeLqX/Qf+H3i5bpVQverVEo9XYUkqJhhJql2UJIeSq2ovzDacju82PTjKTeb04TjMTjTyZ9zznPOfMxPmHK4Ejmkpy9X+e30myNoq/2Bl/W/ZwKckPtc3V/kLr+Zn6nsN6U/t/k3xMsp5kK8nb1mMC4USdTXKl3vkvVwTdCqIz4J99bR/f045mvfbvKiCBMJAgekluJLlVQQyzbu2v9z3+d8XythXNukA47Dv1QkXRO4aZ4ThcrO1m67GtJC9rW07yWiD814unl2SxopgZk997uoLZjWa7FcxK7QUypmaS3KltznAkSc7VzLnQmmH+SPK49pv7/Y8mLPOOpE69Wy7VvmNIDmS5QnmUZEMgp2u2+LXCmDEc38WbCuX3WgAQyAjqVhg/p7kox2C8TPJbxbItkOE3n+RummVZjs92zSoPJpPcS7P6wfBYTPIiyStxnNhJ/lKSPyeT3E/yV5LnSX5JMmt8TsRU/VHeJ3ma5EdDcvImzj9c+bzH46tJntWx2IZhGviJ91KdYzjxHpFA2j4keZLmgstymjszOfpssVgn3QuxTDvSgbR9aoWyXDMN+3c9zQW92/n67liG1EGvpHfS3MrQq683K5LVNPe/rNYKAI3dGwQX01zQsxhyygPpdyFf3wOTNHdXrrSi+TBmY9pN8lMdOvUqEsbkEOswtiqatTRXLddq2zwF4zeV5lrFfJpVp3mHTmaQg5quF0//suU/Fcq71n4nzT3+wzozXOnb5ryEBDIos7X19nhuO82HYHY/fvmx/r3eOsdZy9FX1Dp9L/LdT9nN1vlCtwIXgkCGyrns72OZ/Ta+ceh2MS6EcgoCOazLtcF3MWkIQCAgEBAICAQEAgIBgYBAQCCAQEAgIBAQCAgEBAICAYGAQEAggEBAICAQEAgIBAQCAgGBgEAAgYBAQCAgEBAICAQEAgIBgYBAAIGAQEAgIBAQCAgEBAICAYEAAgGBgEBAICAQEAgIBAQCAgGBAAIBgYBAQCAgEBAICAQEAgIBBAICAYGAQEAgIBAQCAgEBAICAQQCAgGBgEBAICAQEAgIBAQCAjEEIBAQCAgEBAICAYGAQEAgIBBAICAQEAgIBAQCAgGBgEBAICAQQCAgEBAICAQEAgIBgYBAQCCAQEAgIBAQCAgEBAICAYGAQEAggEBAICAQEAgIBAQCAgGBgEAAgYBAQCAgEBAICAQEAgIBgYBAAIGAQEAgIBAQCAgEBAICAYEAAgGBgEBAICAQEAgIBAQCAgGBAAIBgYBAQCAgEBAICAQEAgIBgRgCEAgIBAQCAgGBgEBAICAQEAggEBAICAQEAgIBgYBAQCAgEBAIIBAQCAgEBAICAYGAQEAgIBBAICAQEAgIBAQCAgGBgEBAICAQQCAgEBAICAQEAgIBgYBAQCCAQEAgIBAQCAgEBAICAYGAQEAggEBAICAQEAgIBAQCAgGBgEAAgYBAQCAgEBAICAQEAgIBgYBAAIGAQEAgIBAQCAgEBAICAYGAQAwBCAQEAgIBgYBAQCAgEBAICAQQCAgEBAICAYGAQEAgIBAQCIy3LwMAZISJmhIzD54AAAAASUVORK5CYII=));z-index:var(--loading-drop-item-z-index, 2);animation:var(--loading-drop-item-animation, wave 1s ease-out forwards);animation-play-state:var(--loading-drop-item-animation-play-state, running)}.ran-loading .drop-item-bg{text-align:var(--loading-drop-item-text-align, center);line-height:var(--loading-drop-item-line-height, 120px);font-family:var(--loading-drop-item-font-family, sans-serif);color:var(--loading-drop-item-color, #ffffff);font-size:var(--loading-drop-item-font-size, 16px)}.ran-loading .drop-dot{position:var(--loading-drop-dot-position, absolute);top:var(--loading-drop-dot-top, 0);left:var(--loading-drop-dot-left, 0);bottom:var(--loading-drop-dot-bottom, 0);right:var(--loading-drop-dot-right, 0);z-index:var(--loading-drop-dot-z-index, 1);opacity:var(--loading-drop-dot-opacity, 0);animation:var(--loading-drop-dot-animation, fade-in .1s linear .4s forwards);animation-play-state:var(--loading-drop-dot-animation-play-state, running);filter:var(--loading-drop-dot-filter, url(data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSI+CiAgICA8ZGVmcz4KICAgICAgPGZpbHRlciBpZD0icmFuLWxvYWRpbmctZHJvcCI+CiAgICAgICAgPGZlR2F1c3NpYW5CbHVyIGluPSJTb3VyY2VHcmFwaGljIiBzdGREZXZpYXRpb249IjEwIiByZXN1bHQ9ImJsdXIiIC8+CiAgICAgICAgPGZlQ29sb3JNYXRyaXggaW49ImJsdXIiIG1vZGU9Im1hdHJpeCIgdmFsdWVzPSIxIDAgMCAwIDAgIDAgMSAwIDAgMCAgMCAwIDEgMCAwICAwIDAgMCAxOCAtNyIgcmVzdWx0PSJyYW4tbG9hZGluZy1kcm9wIiAvPgogICAgICA8L2ZpbHRlcj4KICAgIDwvZGVmcz4KICA8L3N2Zz4=#ran-loading-drop))}.ran-loading .drop-dot-1{position:var(--loading-drop-dot-1-position, absolute);left:var(--loading-drop-dot-1-left, 0);right:var(--loading-drop-dot-1-right, 0);bottom:var(--loading-drop-dot-1-bottom, 0);margin:var(--loading-drop-dot-1-margin, auto);background-color:var(--loading-drop-dot-1-background-color, #10a7c1);width:var(--loading-drop-dot-1-width, 90px);height:var(--loading-drop-dot-1-height, 16px);bottom:var(--loading-drop-dot-1-bottom, 2px);border-radius:var(--loading-drop-dot-1-border-radius, 0)}.ran-loading .drop-dot-2{width:var(--loading-drop-dot-2-width, 21px);height:var(--loading-drop-dot-2-height, 24px);border-radius:var(--loading-drop-dot-2-border-radius, 50%);position:var(--loading-drop-dot-2-position, absolute);left:var(--loading-drop-dot-2-left, 0);right:var(--loading-drop-dot-2-right, 0);bottom:var(--loading-drop-dot-2-bottom, 0);margin:var(--loading-drop-dot-2-margin, auto);background-color:var(--loading-drop-dot-2-background-color, #10a7c1);animation:var(--loading-drop-dot-2-animation, drop 1.3s cubic-bezier(1, .19, .66, .12) .5s infinite);animation-play-state:var(--loading-drop-dot-2-animation-play-state, running)}.ran-loading .pacman{position:var(--loading-pacman-position, relative)}@keyframes rotate_pacman_half_up{0%{transform:var(--loading-pacman-keyframes-0-transform, rotate(270deg))}50%{transform:var(--loading-pacman-keyframes-50-transform, rotate(360deg))}to{transform:var(--loading-pacman-keyframes-100-transform, rotate(270deg))}}@keyframes pacman-balls{75%{opacity:var(--loading-pacman-keyframes-balls-75-opacity, .7)}to{transform:var(--loading-pacman-keyframes-balls-100-transform, translate(-100px, -6.25px))}}@keyframes rotate_pacman_half_down{0%{transform:var(--loading-pacman-keyframes-balls-100-transform, rotate(90deg))}50%{transform:var(--loading-pacman-keyframes-balls-100-transform, rotate(0deg))}to{transform:var(--loading-pacman-keyframes-balls-100-transform, rotate(90deg))}}.ran-loading .pacman div:nth-child(2){width:var(--loading-pacman-div-nth-child-2-width, 0px);height:var(--loading-pacman-div-nth-child-2-height, 0px);border-right:var(--loading-pacman-div-nth-child-2-border-right, 25px solid transparent);border-top:var(--loading-pacman-div-nth-child-2-border-top, 25px solid #279fcf);border-left:var(--loading-pacman-div-nth-child-2-border-left, 25px solid #279fcf);border-bottom:var(--loading-pacman-div-nth-child-2-border-bottom, 25px solid #279fcf);border-radius:var(--loading-pacman-div-nth-child-2-border-radius, 25px);margin-top:var(--loading-pacman-div-nth-child-2-margin-top, -50px);animation:var(--loading-pacman-div-nth-child-2-animation, rotate_pacman_half_down .5s 0s infinite);animation-play-state:var(--loading-pacman-div-nth-child-2-animation-play-state, running)}.ran-loading .pacman div:nth-child(3){background-color:var(--loading-pacman-div-nth-child-3-background-color, #279fcf);border-radius:var(--loading-pacman-div-nth-child-3-border-radius, 100%);margin:var(--loading-pacman-div-nth-child-3-margin, 2px);width:var(--loading-pacman-div-nth-child-3-width, 10px);height:var(--loading-pacman-div-nth-child-3-height, 10px);position:var(--loading-pacman-div-nth-child-3-position, absolute);transform:var(--loading-pacman-div-nth-child-3-transform, translate(0, -6.25px));top:var(--loading-pacman-div-nth-child-3-top, 25px);left:var(--loading-pacman-div-nth-child-3-left, 100px);animation:var(--loading-pacman-div-nth-child-3-animation, pacman-balls 1s .33s infinite linear);animation-play-state:var(--loading-pacman-div-nth-child-3-animation-play-state, running)}.ran-loading .pacman div:nth-child(4){background-color:var(--loading-pacman-div-nth-child-4-background-color, #279fcf);border-radius:var(--loading-pacman-div-nth-child-4-border-radius, 100%);margin:var(--loading-pacman-div-nth-child-4-margin, 2px);width:var(--loading-pacman-div-nth-child-4-width, 10px);height:var(--loading-pacman-div-nth-child-4-height, 10px);position:var(--loading-pacman-div-nth-child-4-position, absolute);transform:var(--loading-pacman-div-nth-child-4-transform, translate(0, -6.25px));top:var(--loading-pacman-div-nth-child-4-top, 25px);left:var(--loading-pacman-div-nth-child-4-left, 100px);animation:var(--loading-pacman-div-nth-child-4-animation, pacman-balls 1s .66s infinite linear);animation-play-state:var(--loading-pacman-div-nth-child-4-animation-play-state, running)}.ran-loading .pacman div:nth-child(5){background-color:var(--loading-pacman-div-nth-child-5-background-color, #279fcf);border-radius:var(--loading-pacman-div-nth-child-5-border-radius, 100%);margin:var(--loading-pacman-div-nth-child-5-margin, 2px);width:var(--loading-pacman-div-nth-child-5-width, 10px);height:var(--loading-pacman-div-nth-child-5-height, 10px);position:var(--loading-pacman-div-nth-child-5-position, absolute);transform:var(--loading-pacman-div-nth-child-5-transform, translate(0, -6.25px));top:var(--loading-pacman-div-nth-child-5-top, 25px);left:var(--loading-pacman-div-nth-child-5-left, 100px);animation:var(--loading-pacman-div-nth-child-5-animation, pacman-balls 1s .99s infinite linear);animation-play-state:var(--loading-pacman-div-nth-child-5-animation-play-state, running)}.ran-loading .pacman div:first-of-type{width:var(--loading-pacman-div-first-of-type-width, 0px);height:var(--loading-pacman-div-first-of-type-height, 0px);border-right:var(--loading-pacman-div-first-of-type-border-right, 25px solid transparent);border-top:var(--loading-pacman-div-first-of-type-border-top, 25px solid #279fcf);border-left:var(--loading-pacman-div-first-of-type-border-left, 25px solid #279fcf);border-bottom:var(--loading-pacman-div-first-of-type-border-bottom, 25px solid #279fcf);border-radius:var(--loading-pacman-div-first-of-type-border-radius, 25px);animation:var(--loading-pacman-div-first-of-type-animation, rotate_pacman_half_up .5s 0s infinite);animation-play-state:var(--loading-pacman-div-first-of-type-animation-play-state, running)}';var as=(x=>(x.DOUBLE_BOUNCE="double-bounce",x.ROTATE="rotate",x.STRETCH="stretch",x.CUBE="cube",x.DOT="dot",x.TRIPLE_BOUNCE="triple-bounce",x.SCALE_OUT="scale-out",x.CIRCLE="circle",x.CIRCLE_LINE="circle-line",x.SQUARE="square",x.PULSE="pulse",x.SOLAR="solar",x.CUBE_FOLD="cube-fold",x.CIRCLE_FOLD="circle-fold",x.CUBE_GRID="cube-grid",x.CIRCLE_TURN="circle-turn",x.CIRCLE_ROTATE="circle-rotate",x.CIRCLE_SPIN="circle-spin",x.DOT_BAR="dot-bar",x.DOT_CIRCLE="dot-circle",x.LINE="line",x.DOT_PULSE="dot-pulse",x.LINE_SCALE="line-scale",x.TEXT="text",x.CUBE_DIM="cube-dim",x.DOT_LINE="dot-line",x.ARC="arc",x.DROP="drop",x.PACMAN="pacman",x))(as||{});class kn extends Be(){constructor(){super(),me(this,"contain"),me(this,"rotateLoading",()=>{const f=document.createElement("div");f.setAttribute("class","rotate"),f.setAttribute("part","rotate"),this.contain.appendChild(f)}),me(this,"stretchLoading",()=>{const f=document.createElement("div");f.setAttribute("class","stretch"),f.setAttribute("part","stretch"),Array(5).fill(1).forEach((w,T)=>{const _=document.createElement("div");_.setAttribute("class",`rect${T+1}`),f.appendChild(_)}),this.contain.appendChild(f)}),me(this,"doubleBounceLoading",()=>{const f=document.createElement("div");f.setAttribute("class","double-bounce"),f.setAttribute("part","double-bounce"),Array(2).fill(1).forEach((w,T)=>{const _=document.createElement("div");_.setAttribute("class",`double-bounce${T+1}`),f.appendChild(_)}),this.contain.appendChild(f)}),me(this,"cubeLoading",()=>{const f=document.createElement("div");f.setAttribute("class","cube"),f.setAttribute("part","cube"),Array(2).fill(1).forEach((w,T)=>{const _=document.createElement("div");_.setAttribute("class",`cube${T+1}`),f.appendChild(_)}),this.contain.appendChild(f)}),me(this,"dotLoading",()=>{const f=document.createElement("div");f.setAttribute("class","dot"),f.setAttribute("part","dot"),Array(2).fill(1).forEach((w,T)=>{const _=document.createElement("div");_.setAttribute("class",`dot${T+1}`),f.appendChild(_)}),this.contain.appendChild(f)}),me(this,"tripleBounceLoading",()=>{const f=document.createElement("div");f.setAttribute("class","triple-bounce"),f.setAttribute("part","triple-bounce"),Array(3).fill(1).forEach((w,T)=>{const _=document.createElement("div");_.setAttribute("class",`triple-bounce${T+1}`),f.appendChild(_)}),this.contain.appendChild(f)}),me(this,"scaleOutLoading",()=>{const f=document.createElement("div");f.setAttribute("class","scale-out"),f.setAttribute("part","scale-out"),this.contain.appendChild(f)}),me(this,"circleLoading",()=>{const f=document.createElement("div");f.setAttribute("class","circle"),f.setAttribute("part","circle"),Array(3).fill(1).map(()=>new Array(4).fill(1)).forEach((w,T)=>{const _=document.createElement("div");_.setAttribute("class",`circle-container container${T+1}`),w.forEach((L,B)=>{const M=document.createElement("div");M.setAttribute("class",`circle${B+1}`),_.appendChild(M)}),f.appendChild(_)}),this.contain.appendChild(f)}),me(this,"circleLineLoading",()=>{const{element:f}=V("div").setAttribute("class","circle-line-core"),{element:w}=V("div").setAttribute("class","circle-line-border").append(f),{element:T}=V("div").setAttribute("class","circle-line").setAttribute("part","circle-line").append(w);this.contain.appendChild(T)}),me(this,"squareLoading",()=>{const{element:f}=V("div").setAttribute("class","square-core"),{element:w}=V("div").setAttribute("class","square-box1").append(f),{element:T}=V("div").setAttribute("class","square-box2").append(f),{element:_}=V("div").setAttribute("class","square").setAttribute("part","square").append(w).append(T);this.contain.appendChild(_)}),me(this,"pulseLoading",()=>{const f=V("div").setAttribute("class","pulse").setAttribute("part","pulse");Array(3).fill(1).forEach((w,T)=>{const{element:_}=V("div").setAttribute("class",`pulse-bubble pulse-bubble-${T+1}`);f.append(_)}),this.contain.appendChild(f.element)}),me(this,"solarLoading",()=>{const{element:f}=V("div").setAttribute("class","sun").setAttribute("part","sun"),{element:w}=V("div").setAttribute("class","planet mercury"),{element:T}=V("div").setAttribute("class","mercury-orbit orbit").append(w).append(f),{element:_}=V("div").setAttribute("class","planet venus"),{element:L}=V("div").setAttribute("class","venus-orbit orbit").append(_).append(T),{element:B}=V("div").setAttribute("class","planet earth"),{element:M}=V("div").setAttribute("class","earth-orbit orbit").append(B).append(L),{element:j}=V("div").setAttribute("class","solar").setAttribute("part","solar").append(M);this.contain.appendChild(j)}),me(this,"cubeFoldLoading",()=>{const{element:f}=V("div").setAttribute("class","cube-fold").setAttribute("part","cube-fold");Array(4).fill(1).forEach((w,T)=>{const{element:_}=V("div").setAttribute("class",`cube-fold-item cube-fold-item-${T+1}`);f.appendChild(_)}),this.contain.appendChild(f)}),me(this,"circleFoldLoading",()=>{const f=V("div").setAttribute("class","circle-fold").setAttribute("part","circle-fold");Array(12).fill(1).forEach((w,T)=>{const{element:_}=V("div").setAttribute("class",`circle-fold-item circle-fold-item-${T+1}`);f.append(_)}),this.contain.appendChild(f.element)}),me(this,"cubeGridLoading",()=>{const f=V("div").setAttribute("class","cube-grid").setAttribute("part","cube-grid");Array(9).fill(1).forEach((w,T)=>{const{element:_}=V("div").setAttribute("class",`cube-grid-item cube-grid-item-${T+1}`);f.append(_)}),this.contain.appendChild(f.element)}),me(this,"circleTurnLoading",()=>{const{element:f}=V("div").setAttribute("class","circle-turn").setAttribute("part","circle-turn");this.contain.appendChild(f)}),me(this,"circleRotateLoading",()=>{const{element:f}=V("div").setAttribute("class","circle-rotate").setAttribute("part","circle-rotate"),{element:w}=V("div").setAttribute("class","circle-rotate-inner"),{element:T}=V("div").setAttribute("class","circle-rotate-outer");f.appendChild(T),f.appendChild(w),this.contain.appendChild(f)}),me(this,"circleSpinLoading",()=>{const{element:f}=V("div").setAttribute("class","circle-spin").setAttribute("part","circle-spin"),{element:w}=V("div").setAttribute("class","circle-spin-inner"),{element:T}=V("div").setAttribute("class","circle-spin-outer");f.appendChild(T),f.appendChild(w),this.contain.appendChild(f)}),me(this,"dotBarLoading",()=>{const{element:f}=V("div").setAttribute("class","dot-bar").setAttribute("part","dot-bar");Array(5).fill(1).forEach((w,T)=>{const{element:_}=V("div").setAttribute("class",`dot-bar-item dot-bar-item-${T+1}`);f.appendChild(_)}),this.contain.appendChild(f)}),me(this,"dotCircleLoading",()=>{const{element:f}=V("div").setAttribute("class","dot-circle").setAttribute("part","dot-circle");Array(5).fill(1).forEach((w,T)=>{const{element:_}=V("div").setAttribute("class",`dot-circle-item dot-circle-item-${T+1}`);f.appendChild(_)}),this.contain.appendChild(f)}),me(this,"lineLoading",()=>{const{element:f}=V("div").setAttribute("class","line").setAttribute("part","line");Array(3).fill(1).forEach(()=>{const{element:w}=V("div").setAttribute("class","line-item");f.appendChild(w)}),this.contain.appendChild(f)}),me(this,"dotPulseLoading",()=>{const{element:f}=V("div").setAttribute("class","dot-pulse").setAttribute("class","dot-pulse");Array(5).fill(1).forEach((w,T)=>{const{element:_}=V("div").setAttribute("class","dot-pulse-item"),{element:L}=V("div").setAttribute("class",`dot-pulse-item-dot dot-pulse-item-dot-${T+1}`),{element:B}=V("div").setAttribute("class",`dot-pulse-item-ball dot-pulse-item-ball-${T+1}`);_.appendChild(L),_.appendChild(B),f.appendChild(_)}),this.contain.appendChild(f)}),me(this,"lineScaleLoading",()=>{const{element:f}=V("div").setAttribute("class","line-scale").setAttribute("part","line-scale");Array(5).fill(1).forEach(()=>{const{element:w}=V("div").setAttribute("class","line-scale-item");f.appendChild(w)}),this.contain.appendChild(f)}),me(this,"textLoading",()=>{const{element:f}=V("div").setAttribute("class","text").setAttribute("part","text");["L","o","a","d","i","n","g"].forEach(T=>{const{element:_}=V("span").setAttribute("class","text-item").setTextContent(T);f.appendChild(_)}),this.contain.appendChild(f)}),me(this,"cubeDimLoading",()=>{const{element:f}=V("div").setAttribute("class","cube-dim").setAttribute("part","cube-dim");Array(9).fill(1).forEach(()=>{const{element:w}=V("div").setAttribute("class","cube-dim-item");f.appendChild(w)}),this.contain.appendChild(f)}),me(this,"dotLineLoading",()=>{const{element:f}=V("div").setAttribute("class","dot-line").setAttribute("part","dot-line");Array(2).fill(1).forEach(()=>{const{element:w}=V("div").setAttribute("class","dot-line-item"),{element:T}=V("div").setAttribute("class","dot-line-item-circle");w.appendChild(T),f.appendChild(w)}),this.contain.appendChild(f)}),me(this,"arcLoading",()=>{const{element:f}=V("div").setAttribute("class","arc-item"),{element:w}=V("div").setAttribute("class","arc").setAttribute("part","arc").append(f),{element:T}=V("span").setTextContent("LOADING"),{element:_}=V("h1").append(T);w.appendChild(_),this.contain.appendChild(w)}),me(this,"dropLoading",()=>{const{element:f}=V("span").setTextContent("LOADING"),{element:w}=V("div").setAttribute("class","drop-item-bg").append(f),{element:T}=V("div").setAttribute("class","drop-dot-1"),{element:_}=V("div").setAttribute("class","drop-dot-2"),{element:L}=V("div").setAttribute("class","drop-dot").append(T).append(_),{element:B}=V("div").setAttribute("class","drop-item").append(w).append(L),{element:M}=V("div").setAttribute("class","drop").setAttribute("part","drop").append(B).append(L);this.contain.appendChild(M)}),me(this,"pacmanLoading",()=>{const{element:f}=V("div").setAttribute("class","pacman").setAttribute("part","pacman");Array(5).fill(1).forEach(()=>{const{element:w}=V("div");f.append(w)}),this.contain.appendChild(f)}),me(this,"createLoading",()=>{this.contain.innerHTML="";const w={stretch:this.stretchLoading,rotate:this.rotateLoading,"double-bounce":this.doubleBounceLoading,cube:this.cubeLoading,dot:this.dotLoading,"triple-bounce":this.tripleBounceLoading,"scale-out":this.scaleOutLoading,circle:this.circleLoading,"circle-line":this.circleLineLoading,square:this.squareLoading,pulse:this.pulseLoading,solar:this.solarLoading,"cube-fold":this.cubeFoldLoading,"circle-fold":this.circleFoldLoading,"cube-grid":this.cubeGridLoading,"circle-turn":this.circleTurnLoading,"circle-rotate":this.circleRotateLoading,"circle-spin":this.circleSpinLoading,"dot-bar":this.dotBarLoading,"dot-circle":this.dotCircleLoading,line:this.lineLoading,"dot-pulse":this.dotPulseLoading,"line-scale":this.lineScaleLoading,text:this.textLoading,"cube-dim":this.cubeDimLoading,"dot-line":this.dotLineLoading,arc:this.arcLoading,drop:this.dropLoading,pacman:this.pacmanLoading}[this.name];w&&w()}),this.contain=document.createElement("div"),this.contain.setAttribute("class","ran-loading");const h=this.attachShadow({mode:"open"}),p=document.createElement("style");p.textContent=Ru,h.appendChild(p),h.appendChild(this.contain)}static get observedAttributes(){return["name"]}get name(){const h=this.getAttribute("name")||"";return h||"circle"}set name(h){this.setAttribute("name",h||"")}connectedCallback(){this.createLoading()}attributeChangedCallback(h,p,f){p!==f&&h==="name"&&this.createLoading()}}function Iu(){return typeof document<"u"&&!customElements.get("r-loading")?(customElements.define("r-loading",kn),kn):Oe("document is undefined or r-loading is exist")}const Pu=Iu(),Ou=Object.freeze(Object.defineProperty({__proto__:null,ICON_NAME_AMP:as,Loading:kn,default:Pu},Symbol.toStringTag,{value:"Module"}));var Mu=Object.defineProperty,Fu=(x,h,p)=>h in x?Mu(x,h,{enumerable:!0,configurable:!0,writable:!0,value:p}):x[h]=p,Bu=(x,h,p)=>Fu(x,h+"",p);const Nu=".remove-wap-active-focus{outline:0;-webkit-tap-highlight-color:transparent}.remove-wap-active-focus:active,.remove-wap-active-focus:focus{outline:0;-webkit-tap-highlight-color:transparent}:host{position:var(--ran-math-position, relative)}.ran-math{display:var(--ran-math-display, flex);justify-content:var(--ran-math-justify-content, space-around);align-items:var(--ran-math-align-items, center)}.katex-html{display:var(--ran-math-katex-display, none)}";class Tn extends Be(){constructor(){super(),Bu(this,"contain"),this.contain=V("div").setAttribute("class","ran-math").element;const h=this.attachShadow({mode:"closed"}),p=document.createElement("style");p.textContent=Nu,h.appendChild(p),h.appendChild(this.contain)}static get observedAttributes(){return["latex"]}get latex(){const h=this.getAttribute("latex")||"";return decodeURIComponent(h)}set latex(h){this.setAttribute("latex",h||"")}render(){this.latex&&q(()=>import("./katex-es-B7keY1LJ.BDSjlQ-m.js"),[]).then(h=>{this.contain.innerHTML="";const p=V("span").setTextContent(`$$${this.latex}$$`).element;this.contain.appendChild(p),h&&h.renderMathInElement(this.contain)}).catch(function(h){console.warn(`ranui math component warning: ${h.message}
${h}`)})}connectedCallback(){this.render()}attributeChangedCallback(h,p,f){p!==f&&h==="latex"&&this.render()}}async function Uu(){return typeof document<"u"&&!customElements.get("r-math")?(customElements.define("r-math",Tn),Tn):Oe("document is undefined or r-math is exist")}const Gu=Uu(),Hu=Object.freeze(Object.defineProperty({__proto__:null,Math:Tn,default:Gu},Symbol.toStringTag,{value:"Module"})),qu=Object.freeze(Object.defineProperty({__proto__:null,button:Rd,checkbox:_h,colorpicker:Cu,icon:Kd,image:Qd,input:tc,loading:Ou,math:Hu,message:sc,modal:fh,player:ch,popover:au,preview:gc,progress:wh,radar:Vc,select:ih,skeleton:Ac,tab:Oc,tabpane:Cc},Symbol.toStringTag,{value:"Module"}));export{qu as i,zu as l,fd as t};
