import{_ as n,c as k,o as l,al as a,j as s,a as i}from"./chunks/framework.BOE7hEeL.js";const F=JSON.parse('{"title":"可视化渲染引擎","description":"","frontmatter":{},"headers":[],"relativePath":"cn/src/article/visual.md","filePath":"cn/src/article/visual.md","lastUpdated":1743738997000}'),p={name:"cn/src/article/visual.md"};function t(e,h,E,r,d,y){return l(),k("div",null,h[0]||(h[0]=[a("",65),s("r-math",{latex:"(x - a)^{2} + (y - b)^{2} = r^{2}"},null,-1),a("",13),s("r-math",{latex:"\\frac{x^2}{a^2} + \\frac{y^2}{b^2} = 1"},null,-1),a("",60),s("r-math",{latex:"\\begin{bmatrix} \\cos \\theta & -\\sin \\theta \\\\ \\sin \\theta & \\cos \\theta \\end{bmatrix}"},null,-1),s("p",null,[i("如果我们有一个二维向量"),s("r-math",{style:{display:"inline-block"},latex:"\\vec{v} = \\begin{bmatrix} x \\\\ y \\end{bmatrix}"}),i("，则旋转后的向量 可以通过矩阵乘法得到：")],-1),s("r-math",{latex:"\\vec{v}' = R(\\theta) \\vec{v} = \\begin{bmatrix} \\cos \\theta & -\\sin \\theta \\\\ \\sin \\theta & \\cos \\theta \\end{bmatrix} \\begin{bmatrix} x \\\\ y \\end{bmatrix}"},null,-1),a("",3),s("r-math",{latex:"\\left[ \\begin{matrix} cos(y) & sin(x) \\\\ sin(y) & cos(x) \\\\ \\end{matrix} \\right]"},null,-1),s("p",null,"缩放矩阵：",-1),s("r-math",{latex:"\\begin{bmatrix} s_x & 0 \\\\ 0 & s_y \\end{bmatrix}"},null,-1),s("p",null,"矩阵的乘法：",-1),s("r-math",{latex:"\\begin{bmatrix} s_x & 0 \\\\ 0 & s_y \\end{bmatrix} \\begin{bmatrix} x \\\\ y \\end{bmatrix} = \\begin{bmatrix} s_x x \\\\ s_y y \\end{bmatrix}"},null,-1),a("",40),s("r-math",{latex:"\\frac{x^2}{a^2} + \\frac{y^2}{b^2} = 1"},null,-1),s("p",null,[i("因此只要"),s("r-math",{style:{display:"inline-block"},latex:"\\frac{x^2}{a^2} + \\frac{y^2}{b^2} < 1"}),i(",我们就判断待检测点落在椭圆的内部")],-1),a("",14),s("r-math",{latex:"B(t) = (1-t)^2 \\mathbf{P_0} + 2t(1-t) \\mathbf{P_1} + t^2 \\mathbf{P_2}, \\quad t \\in [0, 1]"},null,-1),s("p",null,"起点（P0）：这是曲线开始的位置。在绘制过程中，曲线会精确地通过这个点。 控制点（P1）：这个点是用来控制曲线形状和弯曲程度的。它不一定在曲线上，但会对曲线的走向产生重要影响。通过调整控制点的位置，可以改变曲线的弯曲程度和方向。 终点（P2）：这是曲线结束的位置。同样地，曲线也会精确地通过这个点。",-1),s("p",null,"我们首先要在贝塞尔曲线上采样一系列的点",-1),s("p",null,[i("贝塞尔曲线是一个 "),s("r-math",{style:{display:"inline-block"},latex:"x"}),i(" 和 "),s("r-math",{style:{display:"inline-block"},latex:"y"}),i(" 关于 "),s("r-math",{style:{display:"inline-block"},latex:"t"}),i(" 的参数方程，"),s("r-math",{style:{display:"inline-block"},latex:"t\\in[0,1]"}),i("，要在贝塞尔曲线上采样多个点，可以把"),s("r-math",{style:{display:"inline-block"},latex:"[0,1]"}),i("这个区间分成 n 份，这样我们就得到了 n 个 t 值，然后把这些 t 值代入贝塞尔曲线的参数方程，我们就可以得到 n 个位于贝塞尔曲线上的点，然后把这些点连起来，就得到了一条近似的贝塞尔曲线。")],-1),s("p",null,"所以我们要计算，贝塞尔曲线的长度，然后根据长度来计算需要多少个采样点。",-1),s("p",null,"那么如何求曲线的长度呢，用定积分。",-1),s("p",null,[i("我们首先写出贝塞尔曲线关于 "),s("r-math",{style:{display:"inline-block"},latex:"x"}),i(" 和 "),s("r-math",{style:{display:"inline-block"},latex:"y"}),i("的方程：")],-1),s("r-math",{latex:"\\begin{cases} x=(1-t)^2\\times P_0x + 2t(1-t) \\times P_1x + t^2 \\times P_2x \\\\ y=(1-t)^2\\times P_0y + 2t(1-t) \\times P_1y + t^2 \\times P_2y \\end{cases}"},null,-1),s("p",null,[i("以起始点 "),s("r-math",{style:{display:"inline-block"},latex:"P_0=(1,1)"}),i(","),s("r-math",{style:{display:"inline-block"},latex:"P_1=(1,2)"}),i(","),s("r-math",{style:{display:"inline-block"},latex:"P_2=(2,2)"}),i("的贝塞尔曲线为例，它的图像是这样的：")],-1),s("p",null,[s("img")],-1),s("p",null,[i("假设我们要求 "),s("r-math",{style:{display:"inline-block"},latex:"t\\in[0,1]"}),i(" 时，这条曲线的弧长 (即整条贝塞尔曲线的长度)。")],-1),s("p",null,"我们要求的量是整条贝塞尔曲线的长度，依然是按照惯例，我们先将图像放大到很大，然后再截取一小段 (假设无限小)：",-1),s("p",null,[s("img")],-1),s("p",null,[i("这个红色的线段的长度 "),s("r-math",{style:{display:"inline-block"},latex:"L"}),i(" 就是我们要求的一份，"),s("r-math",{style:{display:"inline-block"},latex:"dx"}),i(" 是这条线段在 "),s("r-math",{style:{display:"inline-block"},latex:"x"}),i(" 轴方向上的长度，"),s("r-math",{style:{display:"inline-block"},latex:"dy"}),i(" 是这条线段在 "),s("r-math",{style:{display:"inline-block"},latex:"y"}),i(" 轴方向上的长度，当 "),s("r-math",{style:{display:"inline-block"},latex:"dx"}),i(" 和 "),s("r-math",{style:{display:"inline-block"},latex:"dy"}),i(" 趋近于无穷小时，可以把红色的线段看作一条直线，所以，我们依然可以使用勾股定理，得出 "),s("r-math",{style:{display:"inline-block"},latex:"L=\\sqrt{(dx)^2+(dy)^2}"}),i("​。但是，到这里还没有结束，我们要对 "),s("r-math",{style:{display:"inline-block"},latex:"t"}),i(" 进行积分，而不是对 "),s("r-math",{style:{display:"inline-block"},latex:"x"}),i(" 和 "),s("r-math",{style:{display:"inline-block"},latex:"y"}),i(" 进行积分，所以这里我们还要得出 "),s("r-math",{style:{display:"inline-block"},latex:"dx"}),i(" 和 "),s("r-math",{style:{display:"inline-block"},latex:"dy"}),i(" 对于 "),s("r-math",{style:{display:"inline-block"},latex:"dt"}),i(" 的表达式；由于 "),s("r-math",{style:{display:"inline-block"},latex:"dx"}),i(" 对 "),s("r-math",{style:{display:"inline-block"},latex:"dt"}),i(" 的函数和 "),s("r-math",{style:{display:"inline-block"},latex:"dy"}),i(" 对 "),s("r-math",{style:{display:"inline-block"},latex:"dt"}),i(" 的函数的形式是一样的，所以我们只需要求出 "),s("r-math",{style:{display:"inline-block"},latex:"dx"}),i(" 对 "),s("r-math",{style:{display:"inline-block"},latex:"dt"}),i(" 的表达式也就得到了 "),s("r-math",{style:{display:"inline-block"},latex:"dy"}),i(" 对 "),s("r-math",{style:{display:"inline-block"},latex:"dt"}),i(" 的表达式。")],-1),s("r-math",{style:{display:"inline-block"},latex:"dx"},null,-1),i(" 就是 "),s("r-math",{style:{display:"inline-block"},latex:"x"},null,-1),i(" 对 "),s("r-math",{style:{display:"inline-block"},latex:"t"},null,-1),i(" 的函数在 "),s("r-math",{style:{display:"inline-block"},latex:"t"},null,-1),i(" 的变化量为 "),s("r-math",{style:{display:"inline-block"},latex:"dt"},null,-1),i(" ("),s("r-math",{style:{display:"inline-block"},latex:"dt"},null,-1),i("趋近于无穷小) 时，"),s("r-math",{style:{display:"inline-block"},latex:"x"},null,-1),i(" 的变化量。如下："),s("img",null,null,-1),s("r-math",{style:{display:"inline-block"},latex:"dt"},null,-1),i(" 是一个无穷小量，这个时候，我们可以通过导数 (即斜率) 得出 "),s("r-math",{style:{display:"inline-block"},latex:"\\frac{dx}{dt}=x_0'"},null,-1),i("​，"),s("r-math",{style:{display:"inline-block"},latex:"x_0'"},null,-1),i("​是 "),s("r-math",{style:{display:"inline-block"},latex:"x"},null,-1),i(" 对 "),s("r-math",{style:{display:"inline-block"},latex:"t"},null,-1),i(" 的函数在 "),s("r-math",{style:{display:"inline-block"},latex:"t=t_0"},null,-1),i(" ​处的导数，将 "),s("r-math",{style:{display:"inline-block"},latex:"dt"},null,-1),i(" 乘到右边，我们有："),s("r-math",{style:{display:"inline-block"},latex:"dx=x_0' \\times dt"},null,-1),i("。通过同样的方法，我们可以得到："),s("r-math",{style:{display:"inline-block"},latex:"dy=y_0' \\times dt"},null,-1),i("。所以我们要求的一份 "),s("r-math",{style:{display:"inline-block"},latex:"L=\\sqrt{(dx)^2+(dy)^2}=\\sqrt{(x_0' \\times dt)^2+(y_0' \\times dt)^2}=\\sqrt{(x_0')^2+(y_0')^2} \\times dt"},null,-1),i("，所以，我们的积分表达式是："),s("r-math",{style:{display:"inline-block"},latex:"\\int_0^1\\sqrt{(x')^2+(y')^2}dt"},null,-1),i("，接下来就是求函数 "),s("r-math",{style:{display:"inline-block"},latex:"\\sqrt{(x')^2+(y')^2}"},null,-1),i(" ​的不定积分了。"),s("p",null,"根据贝塞尔曲线的参数方程，有：",-1),s("r-math",{latex:"\\begin{cases} x'=2(P_0x-2P_1x+P_2x)t-2(P_0x-P_1x) \\\\ y'=2(P_0y-2P_1y+P_2y)t-2(P_0y-P_1y) \\end{cases}"},null,-1),s("p",null,[i("为了简化这个公式，我们把一些常数挪到一起，用另一些常数代替，令 "),s("r-math",{style:{display:"inline-block"},latex:"a_x=2(P_0x-2P_1x+P_2x)"}),i(","),s("r-math",{style:{display:"inline-block"},latex:"b_x=-2(P_0x-P_1x)"}),i(","),s("r-math",{style:{display:"inline-block"},latex:"a_y=2(P_0y-2P_1y+P_2y)"}),i(","),s("r-math",{style:{display:"inline-block"},latex:"b_y=-2(P_0y-P_1y)"}),i(", 所以：")],-1),s("r-math",{latex:"\\begin{cases} x'=a_xt+b_x \\\\ y'=a_yt+b_y \\end{cases}"},null,-1),s("p",null,[i("所以 "),s("r-math",{style:{display:"inline-block"},latex:"\\sqrt{(x')^2+(y')^2}=\\sqrt{(a_x^2+a_y^2)t^2+2(a_xb_x+a_yb_y)t+b_x^2+b_y^2}"}),i(",为了简化这个式子，我们再次将常量挪到一起，用另一些常量替换，令 "),s("r-math",{style:{display:"inline-block"},latex:"A=a_x^2+a_y^2"}),i(","),s("r-math",{style:{display:"inline-block"},latex:"B=2(a_xb_x+a_yb_y)"}),i(","),s("r-math",{style:{display:"inline-block"},latex:"C=b_x^2+b_y^2"}),i(",所以：")],-1),s("r-math",{latex:"\\sqrt{(x')^2+(y')^2}=\\sqrt{At^2+Bt+C}"},null,-1),s("p",null,[i("接下来我们依然会使用换元法，来求解这个不定积分，我们会用换元法将其化解成 "),s("r-math",{style:{display:"inline-block"},latex:"\\int\\sqrt{x^2+a^2}dx"}),i(" 型不定积分，然后套公式得出结果。")],-1),s("p",null,[i("首先，"),s("r-math",{style:{display:"inline-block"},latex:"At^2+Bt+C"}),i("是两个平方量的和 ("),s("r-math",{style:{display:"inline-block"},latex:"(x')^2"}),i(" 和 "),s("r-math",{style:{display:"inline-block"},latex:"(y')^2"}),i(")，所以"),s("r-math",{style:{display:"inline-block"},latex:"At^2+Bt+C>=0"}),i(",根据一元二次方程解的个数的判断公式，我们有 "),s("r-math",{style:{display:"inline-block"},latex:"B^2-4AC<=0"})],-1),s("p",null,"接下来就是开始换元了：",-1),s("r-math",{style:{"--ran-math-justify-content":"flex-start"},latex:"\\int\\sqrt{At^2+Bt+C}dt"},null,-1),s("r-math",{style:{"--ran-math-justify-content":"flex-start"},latex:"=\\int\\frac{1}{\\sqrt{A}}\\times{\\sqrt{A}}\\times\\sqrt{At^2+Bt+C}dt"},null,-1),s("r-math",{style:{"--ran-math-justify-content":"flex-start"},latex:"=\\int\\frac{1}{\\sqrt{A}}\\times\\sqrt{(At+\\frac{B}{2})^2+(\\sqrt{\\frac{4AC-B^2}{4}})^2}dt"},null,-1),s("r-math",{style:{"--ran-math-justify-content":"flex-start"},latex:"=\\int\\frac{1}{\\sqrt{A}}\\times\\sqrt{(At+\\frac{B}{2})^2+(\\sqrt{\\frac{4AC-B^2}{4}})^2}\\times \\frac{1}{A} \\times d(At+\\frac{B}{2})"},null,-1),s("r-math",{style:{"--ran-math-justify-content":"flex-start"},latex:"=\\frac{1}{A\\sqrt{A}}\\times\\int\\sqrt{(At+\\frac{B}{2})^2+(\\sqrt{\\frac{4AC-B^2}{4}})^2} \\times d(At+\\frac{B}{2})"},null,-1),s("p",null,[i("令"),s("r-math",{style:{display:"inline-block"},latex:"u=At+\\frac{B}{2}"}),i(","),s("r-math",{style:{display:"inline-block"},latex:"a=\\sqrt{\\frac{4AC-B^2}{4}}"}),i(",我们就得到了"),s("r-math",{style:{display:"inline-block"},latex:"\\int\\sqrt{x^2+a^2}dx"}),i("型不定积分，即"),s("r-math",{style:{display:"inline-block"},latex:"\\frac{1}{A\\sqrt{A}}\\int\\sqrt{u^2+a^2}du"}),i(" 这个时候，积分变量从 "),s("r-math",{style:{display:"inline-block"},latex:"t"}),i(" 变成了"),s("r-math",{style:{display:"inline-block"},latex:"u"}),i("，因为对"),s("r-math",{style:{display:"inline-block"},latex:"t"}),i(" 的积分区间是 "),s("r-math",{style:{display:"inline-block"},latex:"t\\in[0,1]"}),i("且 "),s("r-math",{style:{display:"inline-block"},latex:"u=At+\\frac{B}{2}"}),i(",所以对 "),s("r-math",{style:{display:"inline-block"},latex:"u"}),i(" 的积分区间为 "),s("r-math",{style:{display:"inline-block"},latex:"u\\in[\\frac{B}{2},A+\\frac{B}{2}]"}),i("所以我们可以得出：")],-1),s("r-math",{style:{"--ran-math-justify-content":"flex-start"},latex:"\\int_0^1\\sqrt{(x')^2+(y')^2}dt"},null,-1),s("r-math",{style:{"--ran-math-justify-content":"flex-start"},latex:"= \\int_0^1\\sqrt{At^2+Bt+C}dt"},null,-1),s("r-math",{style:{"--ran-math-justify-content":"flex-start"},latex:"= \\frac{1}{A\\sqrt{A}}\\int_{\\frac{B}{2}}^{A+\\frac{B}{2}}\\sqrt{u^2+a^2}du"},null,-1),s("r-math",{style:{"--ran-math-justify-content":"flex-start"},latex:"= \\frac{1}{A\\sqrt{A}}\\times\\bigg[\\frac{A+\\frac{B}{2}}{2}\\sqrt{(A+\\frac{B}{2})^2+a^2}+\\frac{a^2}{2}\\ln\\bigg\\lvert A+\\frac{B}{2}+\\sqrt{(A+\\frac{B}{2})^2+a^2}\\bigg\\rvert - \\bigg(\\frac{B}{4}\\sqrt{\\frac{B^4}{4}+a^2}+\\frac{a^2}{2}\\ln\\bigg\\lvert \\frac{B}{2}+\\sqrt{\\frac{B^2}{4}+a^2}\\bigg\\rvert\\bigg)\\bigg]"},null,-1),s("p",null,[i("接下来就是把各个常量代进去了。结果"),s("r-math",{style:{display:"inline-block"},latex:"\\approx1.6232"})],-1),a("",7)]))}const c=n(p,[["render",t]]);export{F as __pageData,c as default};
